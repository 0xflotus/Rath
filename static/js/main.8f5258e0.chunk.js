(self.webpackJsonpfrontend=self.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,n){},142:function(e,t,n){e.exports=function(){return new Worker(n.p+"073a512bec9d62518d2c.worker.js")}},143:function(e,t,n){e.exports=function(){return new Worker(n.p+"aba8a4d8cd652cee6caf.worker.js")}},144:function(e,t,n){e.exports=function(){return new Worker(n.p+"f808b4c276283cfce6c8.worker.js")}},145:function(e,t,n){e.exports=function(){return new Worker(n.p+"d19b89e3de65e9888604.worker.js")}},146:function(e,t,n){e.exports=function(){return new Worker(n.p+"f3bc8a1633357a2c2611.worker.js")}},147:function(e,t,n){e.exports=function(){return new Worker(n.p+"ae30e4247e69fb8a77a4.worker.js")}},149:function(e,t,n){e.exports=n.p+"static/media/rath.57f336a0.png"},150:function(e,t,n){e.exports=n.p+"static/media/rath-glasses.4a15bb11.png"},182:function(e,t,n){e.exports=n(301)},187:function(e,t,n){},189:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},284:function(e,t){},285:function(e,t){},286:function(e,t){},287:function(e,t){},301:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"csvLoader",(function(){return ae})),n.d(a,"jsonLoader",(function(){return re}));var r={};n.r(r),n.d(r,"transNumber",(function(){return ie}));var i={};n.r(i),n.d(i,"kruskal",(function(){return Ye})),n.d(i,"kruskalWithFullMST",(function(){return Ue}));var o={};n.r(o),n.d(o,"reservoirSampling",(function(){return Xe})),n.d(o,"uniformSampling",(function(){return $e}));var c={};n.r(c),n.d(c,"simpleClean",(function(){return tt})),n.d(c,"dropNull",(function(){return Qe})),n.d(c,"useMode",(function(){return et})),n.d(c,"dropNullColumn",(function(){return _e}));var s=n(0),u=n.n(s),l=n(28),d=n.n(l),m=(n(187),n(11)),f=n(3),p=n(68),g=n(12),v=n.n(g),h=n(16),y=n(23),b=n(142),x=n.n(b),E=n(143),S=n.n(E),k=n(144),O=n.n(k),j=n(145),w=n.n(j),N=n(146),C=n.n(N),M=n(147),P=n.n(M),F="//lobay.moe:8443";function D(e,t){return new Promise((function(n,a){e.postMessage(t),e.onmessage=function(e){n(e.data)},e.onerror=function(e){a({success:!1,message:e.error})}}))}function T(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!a){e.next=21;break}return e.prev=2,e.next=5,fetch(F+"/api/service/fieldsSummary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:t,fields:n})});case 5:return i=e.sent,e.next=8,i.json();case 8:if(!0!==(o=e.sent).success){e.next=13;break}r=o.data,e.next=14;break;case 13:throw new Error("[fields summary failed]"+o.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:e.next=31;break;case 21:return c=new w.a,e.next=24,D(c,{dataSource:t,fields:n});case 24:if(!0!==(s=e.sent).success){e.next=29;break}r=s.data,e.next=30;break;case 29:throw new Error("[fields summary failed]"+s.message);case 30:c.terminate();case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function L(e,t,n){return I.apply(this,arguments)}function I(){return(I=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r={groupedData:[],newFields:[],fields:[]},!a){e.next=21;break}return e.prev=2,e.next=5,fetch(F+"/api/service/groupFields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:t,fields:n})});case 5:return i=e.sent,e.next=8,i.json();case 8:if(!0!==(o=e.sent).success){e.next=13;break}r=o.data,e.next=14;break;case 13:throw new Error("[group fields failed]"+o.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:e.next=31;break;case 21:return c=new C.a,e.next=24,D(c,{dataSource:t,fields:n});case 24:if(!0!==(s=e.sent).success){e.next=29;break}r=s.data,e.next=30;break;case 29:throw new Error("[group fields failed]"+s.message);case 30:c.terminate();case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function B(e,t,n,a,r){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(v.a.mark((function e(t,n,a,r,i){var o,c,s,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],!i){e.next=21;break}return e.prev=2,e.next=5,fetch(F+"/api/service/combineFields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:t,dimensions:n,measures:a,operator:r})});case 5:return c=e.sent,e.next=8,c.json();case 8:if(!0!==(s=e.sent).success){e.next=13;break}o=s.data,e.next=14;break;case 13:throw new Error("[combine fields failed]"+s.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:e.next=31;break;case 21:return u=new O.a,e.next=24,D(u,{dataSource:t,dimensions:n,measures:a,operator:r});case 24:if(!0!==(l=e.sent).success){e.next=29;break}o=l.data,e.next=30;break;case 29:throw new Error("[combine fields failed]"+l.message);case 30:u.terminate();case 31:return e.abrupt("return",o);case 32:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function G(e,t,n){return A.apply(this,arguments)}function A(){return(A=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],!a){e.next=21;break}return e.prev=2,e.next=5,fetch(F+"/api/service/clusterMeasures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxGroupNumber:t,spaces:n})});case 5:return i=e.sent,e.next=8,i.json();case 8:if(!0!==(o=e.sent).success){e.next=13;break}r=o.data.map((function(e,t){return Object(y.a)({},e,{index:t})})),e.next=14;break;case 13:throw new Error("[cluster measures]"+o.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:e.next=31;break;case 21:return c=new S.a,e.next=24,D(c,{maxGroupNumber:t,spaces:n});case 24:if(!0!==(s=e.sent).success){e.next=29;break}r=s.data.map((function(e,t){return Object(y.a)({},e,{index:t})})),e.next=30;break;case 29:throw new Error("[cluster measures]"+s.message);case 30:c.terminate();case 31:return e.abrupt("return",r);case 32:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function q(e,t,n,a,r){return W.apply(this,arguments)}function W(){return(W=Object(h.a)(v.a.mark((function e(t,n,a,r,i){var o,c,s,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=[],!i){e.next=21;break}return e.prev=2,e.next=5,fetch(F+"/api/service/generateDashBoard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:t,dimensions:n,measures:a,subspaces:r})});case 5:return c=e.sent,e.next=8,c.json();case 8:if(!(s=e.sent).success){e.next=13;break}o=s.data,e.next=14;break;case 13:throw new Error("[generateDashBoard]"+s.message);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2),console.error(e.t0);case 19:e.next=31;break;case 21:return u=new x.a,e.next=24,D(u,{dataSource:t,dimensions:n,measures:a,subspaces:r});case 24:if(!(l=e.sent).success){e.next=29;break}o=l.data,e.next=30;break;case 29:throw new Error("[generateDashBoard]"+l.message);case 30:u.terminate();case 31:return e.abrupt("return",o);case 32:case"end":return e.stop()}}),e,null,[[2,16]])})))).apply(this,arguments)}function R(){return(R=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],e.prev=1,i=new P.a,e.next=5,D(i,{dataSource:t,dimensions:n,measures:a});case 5:if(!(o=e.sent).success){e.next=10;break}r=o.data,e.next=11;break;case 10:throw new Error("[getInsightViewSpace]"+o.message);case 11:i.terminate(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:return e.abrupt("return",r);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}var V=function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s,u,l,d,m,f,p,g,h,y,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dataSource,i=a.fields,o=t(),c=i.filter((function(e){return"dimension"===e.type})).map((function(e){return e.name})),s=i.filter((function(e){return"measure"===e.type})).map((function(e){return e.name})),e.prev=4,e.next=7,T(r,i.map((function(e){return e.name})),o.useServer);case 7:return u=e.sent,l=u?u.filter((function(e){return c.includes(e.fieldName)})).map((function(e){return{name:e.fieldName,type:e.type}})):[],e.next=11,L(r,l,o.useServer);case 11:return d=e.sent,f=(m=d||{groupedData:r,newFields:l}).groupedData,p=m.newFields,g=i.map((function(e){var t=p.find((function(t){return t.name===e.name+"(group)"}));return{name:t?t.name:e.name,type:e.type}})),h=g.filter((function(e){return"dimension"===e.type})).map((function(e){return e.name})),e.next=17,T(f,p,o.useServer);case 17:return y=e.sent,n((function(e){e.cookedDataSource=f,e.summary={origin:u||[],grouped:y||[]},e.loading.univariateSummary=!1})),b=(y||[]).concat(u||[]),e.abrupt("return",{groupedData:f,summary:b,newDimensions:h,measures:s});case 23:e.prev=23,e.t0=e.catch(4),n((function(e){e.loading.univariateSummary=!1}));case 26:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t,n,a){return e.apply(this,arguments)}}(),H=function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s,u,l,d,m;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.groupedData,i=a.summary,o=a.dimensions,c=a.measures,s=a.operator,u=t(),n((function(e){e.loading.subspaceSearching=!0})),l=[],(l=o.map((function(e){var t=i.find((function(t){return t.fieldName===e}));return{name:e,entropy:t?t.entropy:1/0}}))).sort((function(e,t){return e.entropy-t.entropy})),n((function(e){e.cookedDimensions=l.map((function(e){return e.name})),e.cookedMeasures=c})),d=l.map((function(e){return e.name})).slice(0,Math.round(l.length*u.topK.dimensionSize)),e.prev=8,e.next=11,B(r,d,c,s,u.useServer);case 11:(m=e.sent)&&n((function(e){e.subspaceList=m})),n((function(e){e.loading.subspaceSearching=!1})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(8),n((function(e){e.loading.subspaceSearching=!1}));case 19:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(t,n,a){return e.apply(this,arguments)}}(),J=function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.subspaceList,i=a.maxGroupNumber,o=a.useServer,c=[],e.prev=2,e.next=5,G(i,r.map((function(e){return{dimensions:e.dimensions,measures:e.measures,matrix:e.correlationMatrix}})),o);case 5:c=e.sent,n((function(e){e.viewSpaces=c})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n,a){return e.apply(this,arguments)}}(),U=function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s,u,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dataSource,i=a.fields,n((function(e){e.loading.gallery=!0})),e.prev=2,e.next=5,V(t,n,{dataSource:r,fields:i});case 5:if(!(o=e.sent)){e.next=10;break}return c=o.groupedData,s=o.summary,u=o.newDimensions,l=o.measures,e.next=10,H(t,n,{groupedData:c,summary:s,dimensions:u,measures:l,operator:"sum"});case 10:e.next=14;break;case 12:e.prev=12,e.t0=e.catch(2);case 14:return e.prev=14,n((function(e){e.loading.gallery=!1,e.loading.gallery=!1})),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,12,14,17]])})));return function(t,n,a){return e.apply(this,arguments)}}(),Y={univariateSummary:V,subspaceSearch:H,extractInsights:U,getDashBoard:function(){var e=Object(h.a)(v.a.mark((function e(t,n,a){var r,i,o,c,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t(),i=a.dataSource,o=a.dimensions,c=a.measures,n((function(e){e.loading.dashBoard=!0})),e.prev=3,e.next=6,q(i,o,c,r.subspaceList,r.useServer);case 6:s=e.sent,n((function(e){e.dashBoardList=s})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:return e.prev=13,n((function(e){e.loading.dashBoard=!1})),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[3,10,13,16]])})));return function(t,n,a){return e.apply(this,arguments)}}(),getViewSpaces:J};Object(p.b)(!1);var X={beCool:!1,currentPage:0,useServer:!1,fields:[],rawData:[],cookedDataSource:[],cookedDimensions:[],cookedMeasures:[],loading:{univariateSummary:!1,subspaceSearching:!1,gallery:!1,dashBoard:!1},topK:{subspacePercentSize:.3,dimensionSize:.72},maxGroupNumber:4,subspaceList:[],summary:{origin:[],grouped:[]},viewSpaces:[],dashBoardList:[]},$=Object(s.createContext)(null);function _(e){var t=e.children,n=Object(s.useState)(X),a=Object(m.a)(n,2),r=a[0],i=a[1],o=Object(s.useRef)(X),c=function(e){return{dimScores:Object(s.useMemo)((function(){return[].concat(Object(f.a)(e.summary.origin),Object(f.a)(e.summary.grouped)).map((function(e){return[e.fieldName,e.entropy,e.maxEntropy,{name:e.fieldName,type:e.type}]}))}),[e.summary])}}(r),l=Object(s.useCallback)((function(e){i((function(t){var n=Object(p.a)(t,(function(t){return e(t)}));return o.current=n,n}))}),[i]),d=Object(s.useCallback)((function(e,t){if("function"===typeof Y[e]){Y[e]((function(){return o.current}),l,t)}}),[l]);return u.a.createElement($.Provider,{value:[r,l,d,c]},t)}function Q(){return Object(s.useContext)($)}var Z=n(348),ee=n(167),te=n(148),ne=n.n(te);function ae(e){return new Promise((function(t,n){ne.a.parse(e,{complete:function(e,n){var a=e.data,r=a[0],i=a.slice(1).map((function(e){var t={};return r.forEach((function(n,a){t[n]=e[a]})),t}));t(i)},error:function(e,t){n(e)}})}))}function re(e){return new Promise((function(t,n){var a=new FileReader;a.readAsText(e),a.onload=function(e){if(e.target)try{var a=JSON.parse(e.target.result);t(a)}catch(r){n(r)}else n(e)},a.onerror=n}))}function ie(e){return isNaN(e)?null:Number(e)}function oe(e){var t=Object(s.useState)(e),n=Object(m.a)(t,2),a=n[0],r=n[1];return[a,Object(s.useCallback)((function(e){r((function(t){return Object(p.a)(t,(function(t){return e(t)}))}))}),[r])]}n(189);var ce=n(149),se=n.n(ce),ue=n(150),le=n.n(ue),de=n(354),me=n(360),fe=n(349),pe=n(343),ge=n(173),ve=n(15),he=n(327),ye=n(346),be=n(22),xe=n(351),Ee=n(344),Se=n(352),ke=function(){return{root:{marginTop:"10px"}}},Oe=[{key:"sum",text:"Sum"},{key:"count",text:"Count"},{key:"mean",text:"Mean"}],je=function(e){var t=e.show,n=void 0!==t&&t,a=e.onUpdateConfig,r=e.onClose,i=e.config,o=Object(s.useState)("sum"),c=Object(m.a)(o,2),l=c[0],d=c[1],f=Object(s.useState)(!0),p=Object(m.a)(f,2),g=p[0],v=p[1],h=Object(s.useState)(!0),y=Object(m.a)(h,2),b=y[0],x=y[1];Object(s.useEffect)((function(){var e=i.aggregator,t=i.defaultAggregated,n=i.defaultStack;d(e),v(t),x(n)}),[i,n]);return u.a.createElement(ye.a,{isOpen:n,type:be.a.smallFixedFar,onDismiss:r,headerText:"Preference",closeButtonAriaLabel:"Close",onRenderFooterContent:function(){return u.a.createElement("div",null,u.a.createElement(he.a,{onClick:function(){a({aggregator:l,defaultAggregated:g,defaultStack:b})}},"Save"))}},u.a.createElement(xe.a,null,"Preference"),u.a.createElement(pe.a,{verticalFill:!0,tokens:{childrenGap:50,padding:6}},u.a.createElement(Ee.a,{selectedKey:l,label:"Aggregator",allowFreeform:!0,autoComplete:"on",options:Oe,onChange:function(e,t){t&&d(t.key)}}),u.a.createElement(Se.a,{styles:ke,label:"measurement aggregation",checked:g,onChange:function(e,t){v(t||!1)}}),u.a.createElement(Se.a,{styles:ke,label:"measurement stack",checked:b,onChange:function(e,t){x(t||!1)}})))},we=n(59),Ne=n.n(we),Ce=n(31);function Me(e,t){console.log({query:e,fields:t});var n={},a=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value;n[s.name]=s}}catch(y){r=!0,i=y}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}function u(e){return n[e]?n[e].semanticType:"nominal"}function l(e,t){if("point"===t)return!1;var a=u(e);return"rect"===t?"quantitative"!==a:"quantitative"===a&&"measure"===function(e){return n[e]?n[e].type:"dimension"}(e)}var d=e.geomType[0]&&De[e.geomType[0]]?De[e.geomType[0]]:e.geomType[0],m=u(e.position[0]),f=u(e.position[1]),p=u(e.color[0]),g=l(e.position[0],d),v=l(e.position[1],d),h=e.color[0];return"rect"===d&&(e.color[0]&&"quantitative"!==p?d="point":e.opacity[0]&&e.size[0]&&(h=e.size[0]||e.opacity[0])),{data:{name:"dataSource"},autosize:{type:"pad"},mark:d,selection:{sl:{type:"bar"===d?"single":"interval",encodings:"bar"===d?["x"]:void 0}},encoding:{x:e.position[0]&&{field:e.position[0],type:u(e.position[0]),bin:"rect"===d&&"quantitative"===m&&{maxbins:20},aggregate:"rect"!==d&&g&&"sum"},y:e.position[1]&&{field:e.position[1],type:u(e.position[1]),bin:"rect"===d&&"quantitative"===f&&{maxbins:20},aggregate:"rect"!==d&&v&&"sum"},size:e.size[0]&&{field:e.size[0],type:u(e.size[0])},column:e.facets[0]&&{field:e.facets[0],type:u(e.facets[0])},row:e.facets[1]&&{field:e.facets[1],type:u(e.facets[1])},opacity:e.opacity[0]&&{field:e.opacity[0],type:u(e.opacity[0])},shape:e.shape[0]&&{field:e.shape[0],type:u(e.shape[0])},color:(h||"rect"===d)&&{field:h,aggregate:"rect"===d&&"quantitative"===u(h)&&(h?"sum":"count"),type:h&&u(h)}}}}function Pe(e,t){var n={},a=!0,r=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value;n[s.name]=s}}catch(b){r=!0,i=b}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}function u(e){return n[e].semanticType||"nominal"}function l(e,t){if("point"===t)return!1;var a=u(e);return"rect"===t?"quantitative"!==a:"quantitative"===a&&"measure"===function(e){return n[e].type||"dimension"}(e)}var d=e.geomType[0]&&De[e.geomType[0]]?De[e.geomType[0]]:e.geomType[0],m=u(e.position[0]),f=u(e.position[1]),p=u(e.color[0]),g=l(e.position[0],d),v=l(e.position[1],d),h=[e.position[1]];e.highFacets&&(h=h.concat(e.highFacets.filter((function(e){return"quantitative"===u(e)}))));var y=e.color[0];return"rect"===d&&(e.color[0]&&"quantitative"!==p?d="point":e.opacity[0]&&e.size[0]&&(y=e.size[0]||e.opacity[0])),{config:{repeat:{columns:5}},data:{name:"dataSource"},autosize:{type:"pad"},repeat:h,spec:{mark:d,selection:{sl:{type:"bar"===d?"single":"interval",encodings:"bar"===d?["x"]:void 0}},encoding:{x:e.position[0]&&{field:e.position[0],type:u(e.position[0]),bin:"rect"===d&&"quantitative"===m&&{maxbins:20},aggregate:"rect"!==d&&g&&"sum"},y:h[0]&&{field:{repeat:"repeat"},type:u(h[0]),bin:"rect"===d&&"quantitative"===f&&{maxbins:20},aggregate:"rect"!==d&&v&&"sum"},size:e.size[0]&&{field:e.size[0],type:u(e.size[0])},opacity:e.opacity[0]&&{field:e.opacity[0],type:u(e.opacity[0])},shape:e.shape[0]&&{field:e.shape[0],type:u(e.shape[0])},color:(y||"rect"===d)&&{field:y,aggregate:"rect"===d&&"quantitative"===u(y)&&(y?"sum":"count"),type:y&&u(y)}}}}}var Fe={interval:"bar",line:"line",point:"point",density:"point"};var De={interval:"bar",line:"line",point:"point",density:"rect"},Te=function(e){var t=e.defaultAggregated,n=e.defaultStack,a=e.aggregator,r=e.dataSource,i=void 0===r?[]:r,o=e.dimensions,c=void 0===o?[]:o,l=e.measures,d=void 0===l?[]:l,m=e.schema,f=void 0===m?{}:m,p=e.fieldFeatures,g=void 0===p?[]:p,v=Object(s.useRef)(null),h=Object(s.useMemo)((function(){return d.map((function(e){return{op:a,field:e,as:"".concat(e,"_").concat(a)}}))}),[d,a]),b=Object(s.useMemo)((function(){return t?Ne()({dataSource:i,dimensions:c,measures:d,operator:a,asFields:h.map((function(e){return e.as}))}):i}),[t,i,c,d,a,h]);return Object(s.useEffect)((function(){if(null!==v.current&&f.position&&f.position.length>0&&f.geomType&&f.geomType.length>0){var e=function(e,t,n,a,r,i,o,c){var s=e.position,u=void 0===s?[]:s,l=e.color,d=void 0===l?[]:l,m=e.size,f=void 0===m?[]:m,p=e.facets,g=void 0===p?[]:p,v=e.opacity,h=void 0===v?[]:v,b=e.geomType,x=void 0===b?[]:b,E=e.page,S=void 0===E?[]:E;function k(e){if(o&&a.includes(e)){var t=r.find((function(t){return t.field===e}));return t?t.as:e}return e}function O(e){var t=i.find((function(t){return t.name===e}));return t?t.type:"nominal"}var j={x:u[0],y:u[1],color:d[0],size:f[0],opacity:h[0],row:g[0],column:g[1]},w={width:600,data:{values:t}},N={width:600,mark:{type:x[0]&&Fe[x[0]]?Fe[x[0]]:x[0],tooltip:!0},encoding:{}};for(var C in j)j[C]&&(N.encoding[C]={field:k(j[C]),type:O(j[C])},["x","y"].includes(C)&&"quantitative"===O(j[C])&&!c&&(N.encoding[C].stack=null));if(c||0!==h.length||(N.encoding.opacity={value:.7}),0===S.length)w=Object(y.a)({},w,{},N);else if(S.length>0){N.transform=[{filter:{selection:"brush"}},o?{aggregate:r,groupby:n.filter((function(e){return e!==S[0]}))}:null].filter(Boolean);var M={width:600,mark:"tick",selection:{brush:{encodings:["x"],type:"interval"}},encoding:{x:{field:S[0],type:O(S[0])}}};w.vconcat=[N,M]}return w}(f,b,c,d,h,g,t,n);Object(Ce.a)(v.current,e)}}),[f,b,c,d,h,g,t,n]),u.a.createElement("div",{ref:v})},ze=n(8);function Le(e){return JSON.parse(JSON.stringify(e))}function Ie(e,t){var n=new Map,a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value[t];n.has(s)||n.set(s,0),n.set(s,n.get(s)+1)}}catch(u){r=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}return Object(f.a)(n.entries())}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var Ke={interval:[0,20],line:[21,1/0],area:[21,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Ge(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].type===e&&!t[n].choosen)return t[n];return!1}function Ae(e){for(var t={},n={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},a=e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){Object(ze.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{choosen:!1})})),r=[["quantitative",["position","size","color","highFacets","opacity","page","filter"]],["temporal",["position","page","filter"]],["ordinal",["position","color","opacity","facets","size","page","filter","highFacets"]],["nominal",["position","color","facets","shape","page","filter","hightFacets"]]],i=a.length,o=0;o<r.length&&i>0;o++)for(var c=r[o][0],s=r[o][1],u=0;u<s.length&&i>0;u++)for(var l=s[u],d=void 0;n[l]>0&&(d=Ge(c,a));)"undefined"===typeof t[l]&&(t[l]=[]),t[l].push(d.name),n[l]--,i--,d.choosen=!0;return t}var qe=function(e,t,n,a){var r=Ae(e.sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[3]})));if(r.position&&2===r.position.length)if(n.includes(r.position[0])&&a.includes(r.position[1])||n.includes(r.position[1])&&a.includes(r.position[0])){var i=n.includes(r.position[0])?0:1,o=r.position[i],c=r.position[(i+1)%2];r.position=[o,c];var s=Ie(t,o);r.geomType=["interval","line","area"].filter((function(e){return s.length>=Ke[e][0]&&s.length<=Ke[e][1]}));var u=e.find((function(e){return e[0]===r.position[0]}))[3],l=e.find((function(e){return e[0]===r.position[1]}))[3];"nominal"!==u.type&&"nominal"!==l.type||(r.geomType=["interval"])}else r.geomType=["point","density"].filter((function(e){return t.length>=Ke[e][0]&&t.length<=Ke[e][1]}));return{schema:r,aggData:t}};n(5),n(6);function We(e){for(var t=[],n=0;n<e.length;n++)for(var a=n+1;a<e[n].length;a++)t.push([[n,a],Math.abs(e[n][a])]);return t}function Re(e,t){return e[t]===t?t:e[t]=Re(e,e[t])}function Ve(e,t,n){var a=Re(e,t),r=Re(e,n);e[a]=r,Re(e,t),Re(e,n)}function He(e,t,n){return e[n]===n?n:(e[n]=He(e,t,e[n]),t[n]=t[e[n]],e[n])}function Je(e,t,n,a){var r=He(e,t,n),i=He(e,t,a),o=t[r],c=t[i];e[r]=i,t[r]=t[i]=o+c,He(e,t,n),He(e,t,a)}function Ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=We(e);a.sort((function(e,t){return t[1]-e[1]}));var r=[],i=e.map((function(e,t){return t})),o=Object(f.a)(i),c=!1,s=!0,u=!1,l=void 0;try{for(var d,m=a[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var p=d.value;Re(i,p[0][0])!==Re(i,p[0][1])&&(Ve(i,p[0][0],p[0][1]),r.push([p[0],p[1],c]));for(var g=0;g<i.length;g++)i[g]=Re(i,g);var v=new Set(i);if(v.size<=t||p[1]<n?c=!0:o=Object(f.a)(i),1===v.size)break}}catch(h){u=!0,l=h}finally{try{s||null==m.return||m.return()}finally{if(u)throw l}}return{edgesInMST:r,groups:o}}var Ye=function(e){var t,n=e.matrix,a=e.measures,r=(e.method,e.groupMaxSize),i=void 0===r?4:r,o=e.limitSize,c=void 0!==o&&o,s=e.threshold,u=void 0===s?0:s;t=c?function(e,t){var n=We(e);n.sort((function(e,t){return t[1]-e[1]}));var a=e.map((function(e,t){return t})),r=e.map((function(){return 1})),i=!0,o=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;if(He(a,r,l[0][0])!==He(a,r,l[0][1])){if(r[l[0][0]]+r[l[0][1]]>t)continue;Je(a,r,l[0][0],l[0][1])}for(var d=0;d<a.length;d++)a[d]=He(a,r,d);if(1===new Set(a).size)break}}catch(p){o=!0,c=p}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}for(var m=new Map,f=0;f<a.length;f++)m.has(a[f])||m.set(a[f],[]),m.get(a[f]).push(f);return m}(n,i):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=We(e);a.sort((function(e,t){return t[1]-e[1]}));var r=e.map((function(e,t){return t})),i=!0,o=!1,c=void 0;try{for(var s,u=a[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;Re(r,l[0][0])!==Re(r,l[0][1])&&Ve(r,l[0][0],l[0][1]);for(var d=0;d<r.length;d++)r[d]=Re(r,d);var m=new Set(r);if(m.size<=t||l[1]<n)break}}catch(g){o=!0,c=g}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}for(var f=new Map,p=0;p<r.length;p++)f.has(r[p])||f.set(r[p],[]),f.get(r[p]).push(p);return f}(n,i,u);var l=[],d=!0,m=!1,f=void 0;try{for(var p,g=t.values()[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value;l.push(v.map((function(e){return a[e]})))}}catch(h){m=!0,f=h}finally{try{d||null==g.return||g.return()}finally{if(m)throw f}}return l};n(10),n(7),n(9);function Xe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;if(e.length<=t)return e;for(var n=e.slice(0,t),a=e.length,r=t+1;r<a;r++){var i=Math.round(Math.random()*r);i<t&&(n[i]=e[r])}return n}function $e(e,t){for(var n=function(e,t){if(0===e)return[];for(var n=2147483647,a=[t],r=1;r<e;r++)a.push((1103515245*a[r-1]+12345)%n);return a.map((function(e){return e/n}))}(t,2147483647*Math.random()),a=[],r=0;r<t;r++){var i=Math.floor(n[r]*t)%t;a.push(e[i])}return a}function _e(e,t){var n=t.map((function(){return!1})),a=!0,r=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0)for(var s=o.value,u=0;u<t.length;u++){var l=t[u];"undefined"!==typeof s[l]&&""!==s[l]&&null!==s[l]&&(n[u]=!0)}}catch(m){r=!0,i=m}finally{try{a||null==c.return||c.return()}finally{if(r)throw i}}var d=t.filter((function(e,t){return n[t]}));return{fields:d,dataSource:e.map((function(e){var t={},n=!0,a=!1,r=void 0;try{for(var i,o=d[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;t[c]=e[c]}}catch(m){a=!0,r=m}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return t}))}}function Qe(e,t,n){var a=[],r=!0,i=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,l=!0,d=!0,m=!1,f=void 0;try{for(var p,g=t[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value;"undefined"!==typeof u[v]&&""!==u[v]&&null!==u[v]||(l=!1)}}catch(C){m=!0,f=C}finally{try{d||null==g.return||g.return()}finally{if(m)throw f}}var h=!0,y=!1,b=void 0;try{for(var x,E=n[Symbol.iterator]();!(h=(x=E.next()).done);h=!0){"number"!==typeof u[x.value]&&(l=!1)}}catch(C){y=!0,b=C}finally{try{h||null==E.return||E.return()}finally{if(y)throw b}}l&&a.push(u)}}catch(C){i=!0,o=C}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var S=!0,k=!1,O=void 0;try{for(var j,w=function(){var e=j.value;(function(e,t){return e.every((function(e){return!isNaN(e[t])||"undefined"===typeof e[t]||null===e[t]}))})(a,e)&&(Ie(a,e).length>20?a.forEach((function(t){t[e]=Number(t[e])||0})):a.forEach((function(t){t[e]=(Number(t[e])||0).toString()})))},N=t[Symbol.iterator]();!(S=(j=N.next()).done);S=!0)w()}catch(C){k=!0,O=C}finally{try{S||null==N.return||N.return()}finally{if(k)throw O}}return a}function Ze(e){return["",null,void 0].includes(e)}function et(e,t){var n=new Map,a=new Map,r=!0,i=!1,o=void 0;try{for(var c,s=t[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;n.set(u,new Map),a.set(u,0)}}catch(X){i=!0,o=X}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var l=!0,d=!1,m=void 0;try{for(var p,g=e[Symbol.iterator]();!(l=(p=g.next()).done);l=!0){var v=p.value,h=!0,y=!1,b=void 0;try{for(var x,E=t[Symbol.iterator]();!(h=(x=E.next()).done);h=!0){var S=x.value,k=n.get(S);Ze(v[S])||(k.has(v[S])||k.set(v[S],0),k.set(v[S],k.get(v[S])+1))}}catch(X){y=!0,b=X}finally{try{h||null==E.return||E.return()}finally{if(y)throw b}}}}catch(X){d=!0,m=X}finally{try{l||null==g.return||g.return()}finally{if(d)throw m}}var O=!0,j=!1,w=void 0;try{for(var N,C=n.keys()[Symbol.iterator]();!(O=(N=C.next()).done);O=!0){for(var M=N.value,P=n.get(M),F=Object(f.a)(P.entries()),D=0,T=0,z=0;z<F.length;z++){var L=F[z];L[1]>D&&(D=L[1],T=z)}a.set(M,F[T][0])}}catch(X){j=!0,w=X}finally{try{O||null==C.return||C.return()}finally{if(j)throw w}}var I=Le(e),B=!0,K=!1,G=void 0;try{for(var A,q=I[Symbol.iterator]();!(B=(A=q.next()).done);B=!0){var W=A.value,R=!0,V=!1,H=void 0;try{for(var J,U=t[Symbol.iterator]();!(R=(J=U.next()).done);R=!0){var Y=J.value;Ze(W[Y])&&(W[Y]=a.get(Y))}}catch(X){V=!0,H=X}finally{try{R||null==U.return||U.return()}finally{if(V)throw H}}}}catch(X){K=!0,G=X}finally{try{B||null==q.return||q.return()}finally{if(K)throw G}}return I}function tt(e,t,n){var a=Le(e),r=!0,i=!1,o=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value,l=!0,d=!1,m=void 0;try{for(var f,p=t[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var g=f.value;Ze(u[g])&&(u[g]="null")}}catch(S){d=!0,m=S}finally{try{l||null==p.return||p.return()}finally{if(d)throw m}}var v=!0,h=!1,y=void 0;try{for(var b,x=n[Symbol.iterator]();!(v=(b=x.next()).done);v=!0){var E=b.value;Ze(u[E])&&(u[E]=0)}}catch(S){h=!0,y=S}finally{try{v||null==x.return||x.return()}finally{if(h)throw y}}}}catch(S){i=!0,o=S}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return a}var nt=n(90),at=n.n(nt),rt=n(347),it=n(17),ot=(n(135),function(e){var t=e.space,n=e.dimensions,a=void 0===n?[]:n,r=e.measures,i=void 0===r?[]:r,o=e.dimScores,c=void 0===o?[]:o,l=e.spaceList,d=void 0===l?[]:l,p=e.schema,g=Object(s.useState)(!1),v=Object(m.a)(g,2),h=v[0],y=v[1],b=Object(s.useMemo)((function(){return Object(f.a)(c).sort((function(e,t){return e[1]-t[1]}))}),[c]),x=Object(s.useMemo)((function(){if("undefined"!==typeof t){var e=!0,n=!1,a=void 0;try{for(var r,i=d[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.dimensions.some((function(e){return t.dimensions.includes(e)})))return o.dimensions.find((function(e){return t.dimensions.includes(e)}))}}catch(c){n=!0,a=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}}),[t,d]),E=Object(s.useMemo)((function(){if("undefined"!==typeof t){for(var e=t.measures.filter((function(e){return i.includes(e.name)})),n=1/0,a=0,r=0;r<e.length;r++)e[r].value<n&&(n=e[r].value,a=r);return e[a].name}}),[i,t]),S=Object(s.useMemo)((function(){var e=b.find((function(e){return a.includes(e[0])}));return e?e[0]:void 0}),[b,a]),k="\n  ".concat(p&&p.position?"Current chart mainly focus on the relationship between ***".concat(p.position[0],"*** and ***").concat(p.position[1],"***"):"","\n  ").concat(a.length>1?"+ DataSource is grouped by ***".concat(a.join(", "),"***, measures(indicators) will propose strong difference of distribution between each other."):"","\n  ").concat(i.length>1?"+ ***".concat(i.join(", "),"***are strongly related to each other"):"","\n  ").concat(S?"+ The distribution of member countings of ***".concat(S,"*** seems to contain more orders and patterns."):"","\n  ").concat(x?"+ ***".concat(x,"*** has great influence on aggregated measure values."):"","\n  ").concat(E?"+ ***".concat(E,"*** is more likely to have patterns according to its distribution."):"","\n  ``  ");return u.a.createElement("div",null,u.a.createElement(ge.a,{id:"vis-summary",text:"Summary",onClick:function(){y(!0)}}),h?u.a.createElement("div",null,u.a.createElement(rt.a,{calloutProps:{directionalHint:it.a.bottomCenter},isWide:!0,hasCloseIcon:!0,closeButtonAriaLabel:"Close",target:"#vis-summary",onDismiss:function(){y(!1)},headline:"Chart Description"},u.a.createElement(at.a,{source:k}))):null)}),ct=function(e){var t=e.space,n=e.dimensions,a=void 0===n?[]:n,r=e.measures,i=void 0===r?[]:r,o=e.dimScores,c=void 0===o?[]:o,l=e.spaceList,d=void 0===l?[]:l,m=e.schema,p=Object(s.useMemo)((function(){return Object(f.a)(c).sort((function(e,t){return e[1]-t[1]}))}),[c]),g=Object(s.useMemo)((function(){if("undefined"!==typeof t){var e=!0,n=!1,a=void 0;try{for(var r,i=d[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.dimensions.some((function(e){return t.dimensions.includes(e)})))return o.dimensions.find((function(e){return t.dimensions.includes(e)}))}}catch(c){n=!0,a=c}finally{try{e||null==i.return||i.return()}finally{if(n)throw a}}}}),[t,d]),v=Object(s.useMemo)((function(){if("undefined"!==typeof t){for(var e=t.measures.filter((function(e){return i.includes(e.name)})),n=1/0,a=0,r=0;r<e.length;r++)e[r].value<n&&(n=e[r].value,a=r);return e[a].name}}),[i,t]),h=Object(s.useMemo)((function(){var e=p.find((function(e){return a.includes(e[0])}));return e?e[0]:void 0}),[p,a]),y="\n  ".concat(m&&m.position?"Current chart mainly focus on the relationship between ***".concat(m.position[0],"*** and ***").concat(m.position[1],"***"):"","\n  ").concat(a.length>1?"+ DataSource is grouped by ***".concat(a.join(", "),"***, measures(indicators) will propose strong difference of distribution between each other."):"","\n  ").concat(i.length>1?"+ ***".concat(i.join(", "),"***are strongly related to each other"):"","\n  ").concat(h?"+ The distribution of member countings of ***".concat(h,"*** seems to contain more orders and patterns."):"","\n  ").concat(g?"+ ***".concat(g,"*** has great influence on aggregated measure values."):"","\n  ").concat(v?"+ ***".concat(v,"*** is more likely to have patterns according to its distribution."):"","\n  ``  ");return u.a.createElement(at.a,{source:y})};function st(e,t){var n=new Set([].concat(Object(f.a)(e),Object(f.a)(t))),a=new Set(e),r=new Set(t),i=[],o=[],c=!0,s=!1,u=void 0;try{for(var l,d=n[Symbol.iterator]();!(c=(l=d.next()).done);c=!0){var m=l.value;i.push(Number(a.has(m))),o.push(Number(r.has(m)))}}catch(v){s=!0,u=v}finally{try{c||null==d.return||d.return()}finally{if(s)throw u}}for(var p=0,g=0;g<i.length;g++)p+=i[g]*o[g];return p/=Math.sqrt(e.length)*Math.sqrt(t.length)}var ut=function(e){var t=e.viewSpaces,n=e.interestedViewSpace,a=e.fieldScores,r=e.dataSource,i=Object(s.useMemo)((function(){var e=[],a=!0,r=!1,i=void 0;try{for(var o,c=function(){var t=o.value;t.dimensions.length>n.dimensions.length&&t.dimensions.length-n.dimensions.length<=2&&(n.dimensions.every((function(e){return t.dimensions.find((function(t){return e===t}))}))&&e.push(t))},s=t[Symbol.iterator]();!(a=(o=s.next()).done);a=!0)c()}catch(u){r=!0,i=u}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return e}),[n,t]),o=Object(s.useMemo)((function(){var e=[],t=!0,a=!1,r=void 0;try{for(var o,c=i[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var s=o.value,u=st(n.measures,s.measures);u>.2&&e.push(Object(y.a)({},s,{relatedScore:s.score/Math.sqrt(u)}))}}catch(l){a=!0,r=l}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}return e.sort((function(e,t){return e.relatedScore-t.relatedScore}))}),[i,n.measures]);return Object(s.useMemo)((function(){return o.slice(0,5).map((function(e){var t=a.filter((function(t){return e.dimensions.includes(t[0])||e.measures.includes(t[0])}));return Object(y.a)({},e,{schema:qe(t,r,e.dimensions,e.measures).schema})}))}),[o,a,r])};var lt=function(e){var t=e.digDimensionProps,n=e.subspaceList,a=e.onSelectView,r=t.dataSource,i=t.visualConfig,o=t.fieldScores,c=ut(t),s=o.map((function(e){return e[3]}));return u.a.createElement("div",null,u.a.createElement("div",{className:"ms-Grid"},c.map((function(e,t){var c=n.find((function(t){return n=t.dimensions,a=e.dimensions,n.length===a.length&&n.every((function(e){return a.includes(e)}));var n,a}));return u.a.createElement("div",{key:"associate-row-".concat(t),className:"ms-Grid-row",style:{border:"solid 1px #bfbfbf",margin:"1em",padding:"1em"}},u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg9",style:{overflow:"auto"}},u.a.createElement(Te,{aggregator:i.aggregator,defaultAggregated:!e.schema.geomType||!e.schema.geomType.includes("point"),defaultStack:i.defaultStack,dimensions:e.dimensions,measures:e.measures,dataSource:r,schema:e.schema,fieldFeatures:s})),u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg3",style:{fontSize:14,color:"#8a8886",overflow:"auto"}},u.a.createElement("div",null,u.a.createElement(pe.a,{tokens:{childrenGap:8},horizontal:!0},u.a.createElement(me.a,{iconProps:{iconName:"Lightbulb"},title:"Interested",onClick:function(){a(e.index)}}))),c&&u.a.createElement(ct,{dimensions:e.dimensions,measures:e.measures,dimScores:o,space:c,spaceList:n,schema:e.schema})))}))))},dt=n(48),mt=n(353),ft=n(164),pt=n.n(ft),gt=n(49);function vt(){var e=Object(dt.a)(["\n  margin-right: 1rem;\n  cursor: pointer;\n  color: rgb(16, 110, 190);\n"]);return vt=function(){return e},e}function ht(){var e=Object(dt.a)(["\n  padding: 1rem;\n  overflow-x: auto;\n  margin: 1rem;\n"]);return ht=function(){return e},e}var yt=gt.a.div(ht()),bt=gt.a.a(vt());var xt=function(e){var t=Q(),n=Object(m.a)(t,4),a=n[0],r=n[2],i=n[3],o=Object(s.useState)([]),c=Object(m.a)(o,2),l=c[0],d=c[1],p=a.subspaceList,g=a.viewSpaces,v=a.maxGroupNumber,h=a.useServer,y=i.dimScores;Object(s.useEffect)((function(){r("getViewSpaces",{subspaceList:p,maxGroupNumber:v,useServer:h})}),[p,v,h,r]);var b=Object(s.useMemo)((function(){return new pt.a(g,{keys:["dimensions","measures"]})}),[g]),x=function(e){var t=Object(s.useState)(0),n=Object(m.a)(t,2),a=n[0],r=n[1];Object(s.useEffect)((function(){r(0)}),[e]);var i=Math.ceil(e/4),o=Math.max(a-2,0),c=Math.min(a+2,i),u=Object(s.useMemo)((function(){return[4*a,Math.min(4*(a+1),e)]}),[e,a]),l=Object(f.a)(new Array(c-o+1)).map((function(e,t){return o+t}));return{currentPage:a,visPageRange:l,itemRange:u,gotoPage:function(e){r((e+i)%i)},lastPage:function(){r((function(e){return(e+i-1)%i}))},nextPage:function(){r((function(e){return(e+i+1)%i}))}}}(l.length),E=x.currentPage,S=x.visPageRange,k=x.itemRange,O=x.gotoPage,j=x.lastPage,w=x.nextPage,N=Object(s.useMemo)((function(){return l.slice(k[0],k[1]).map((function(e){var t=e.dimensions,n=e.measures,r=y.filter((function(e){return t.includes(e[0])||n.includes(e[0])}));return{schema:qe(r,a.cookedDataSource,t,n).schema,fieldFeatures:r.map((function(e){return e[3]})),aggData:a.cookedDataSource,dimensions:t,measures:n}}))}),[a.cookedDataSource,l,k,y]);return u.a.createElement("div",null,u.a.createElement(mt.a,{placeholder:"Search",onSearch:function(e){var t=b.search(e);d(t)},underlined:!0}),u.a.createElement("p",{className:"state-description"},l.length," results are found. current page is ",E+1),u.a.createElement("div",null,u.a.createElement(bt,{onClick:j},"Last Page"),l.length>0&&S.map((function(e){return u.a.createElement(bt,{key:"page-btn-".concat(e),onClick:function(){O(e)}},e+1)})),u.a.createElement(bt,{onClick:w},"Next Page")),u.a.createElement("div",null,N.map((function(e,t){return u.a.createElement(yt,{key:"result-".concat(t)},u.a.createElement(Te,{aggregator:"sum",defaultAggregated:!0,defaultStack:!0,dimensions:e.dimensions,measures:e.measures,dataSource:e.aggData,schema:e.schema,fieldFeatures:e.fieldFeatures}))}))))},Et=["Rank List","Search"].map((function(e,t){return{title:e,itemKey:"pivot-"+t}})),St=function(e){var t=e.dataSource,n=e.summary,a=e.subspaceList,r=Object(s.useState)(0),i=Object(m.a)(r,2),o=i[0],c=i[1],l=Object(s.useState)(Et[0].itemKey),d=Object(m.a)(l,2),p=d[0],g=d[1],v=Q(),h=Object(m.a)(v,2),b=h[0],x=h[1],E=oe({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1}}),S=Object(m.a)(E,2),k=S[0],O=S[1],j=Object(s.useState)(!1),w=Object(m.a)(j,2),N=w[0],C=w[1],M=Object(s.useState)({aggregator:"sum",defaultAggregated:!0,defaultStack:!0}),P=Object(m.a)(M,2),F=P[0],D=P[1],T=Object(s.useState)([]),z=Object(m.a)(T,2),L=z[0],I=z[1],B=Object(s.useState)({schema:{position:[],color:[],opacity:[],geomType:[]},fieldFeatures:[],aggData:[],dimensions:[],measures:[]}),K=Object(m.a)(B,2),A=K[0],q=K[1],W=function(e){c(e)};Object(s.useEffect)((function(){x((function(e){e.loading.gallery=!0})),G(b.maxGroupNumber,a.map((function(e){return{dimensions:e.dimensions,measures:e.measures,matrix:e.correlationMatrix}})),b.useServer).then((function(e){I(e),x((function(e){e.loading.gallery=!1}))}))}),[a,t,b.maxGroupNumber,b.useServer,x]);var R=Object(s.useMemo)((function(){return[].concat(Object(f.a)(n.origin),Object(f.a)(n.grouped)).map((function(e){return[e.fieldName,e.entropy,e.maxEntropy,{name:e.fieldName,type:e.type}]}))}),[n.origin,n.grouped]);Object(s.useEffect)((function(){var e=L[o];if(e){var n=e.dimensions,a=e.measures;try{var r=R.filter((function(e){return n.includes(e[0])||a.includes(e[0])})),i=qe(r,t,n,a).schema;q({schema:i,fieldFeatures:r.map((function(e){return e[3]})),aggData:t,dimensions:n,measures:a}),i.geomType&&(i.geomType.includes("point")||i.geomType.includes("density"))?D((function(e){return Object(y.a)({},e,{defaultAggregated:!1})})):D((function(e){return Object(y.a)({},e,{defaultAggregated:!0})}))}catch(c){console.log(c)}}}),[L,o,t,R]);var V=Object(s.useMemo)((function(){return a.find((function(e){return e.dimensions.join(",")===A.dimensions.join(",")}))}),[a,A]);return Object(s.useEffect)((function(){C(!1)}),[o]),u.a.createElement("div",{className:"content-container"},u.a.createElement(je,{show:k.show.configPanel,config:F,onUpdateConfig:function(e){D(e),O((function(e){e.show.configPanel=!1}))},onClose:function(){O((function(e){e.show.configPanel=!1}))}}),u.a.createElement("div",{className:"card",style:{paddingTop:"0.2rem"}},u.a.createElement(Z.a,{selectedKey:p,onLinkClick:function(e){e&&g(e.props.itemKey)}},Et.map((function(e){return u.a.createElement(ee.a,{headerText:e.title,key:e.itemKey,itemKey:e.itemKey})}))),(b.loading.gallery||b.loading.subspaceSearching||b.loading.univariateSummary)&&u.a.createElement(de.a,{description:"calculating"}),p===Et[0].itemKey&&u.a.createElement("div",null,u.a.createElement("h2",{style:{marginBottom:0}},"Visual Insights"," ",u.a.createElement(me.a,{iconProps:{iconName:"Settings"},title:"Preference",ariaLabel:"preference",onClick:function(){O((function(e){e.show.configPanel=!0}))}}),u.a.createElement(me.a,{iconProps:{iconName:"Lightbulb"},title:"Dig In",ariaLabel:"digIn",onClick:function(){C(!0)}})),u.a.createElement("p",{className:"state-description"},"Details of the recommendation process can be seen in"," ",u.a.createElement("b",null,"NoteBook")," Board. You can adjust some of the parameters and operators and see how it influence recommendation results."),u.a.createElement("p",{className:"state-description"},'Try to use the setting button beside the "visual insight" title to adjust the visualization settings to get a view you prefer better.'),u.a.createElement("div",{className:"ms-Grid",dir:"ltr"},u.a.createElement("div",{className:"ms-Grid-row"},u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg3",style:{overflow:"auto"}},u.a.createElement("div",{style:{marginBottom:"1rem"}},u.a.createElement(fe.a,{label:"Current Page",value:(o+1).toString(),min:0,max:L.length,step:1,iconProps:{iconName:"Search"},labelPosition:ve.a.end,onValidate:function(e){W((Number(e)-1)%L.length)},onIncrement:function(){W((o+1)%L.length)},onDecrement:function(){W((o-1+L.length)%L.length)},incrementButtonAriaLabel:"Increase value by 1",decrementButtonAriaLabel:"Decrease value by 1"})),u.a.createElement("p",{className:"state-description"},"Page No. ",o+1," of ",L.length),u.a.createElement(pe.a,{horizontal:!0,tokens:{childrenGap:20}},u.a.createElement(ge.a,{text:"Last",onClick:function(){W((o-1+L.length)%L.length)},allowDisabledFocus:!0}),u.a.createElement(ge.a,{text:"Next",onClick:function(){W((o+1)%L.length)},allowDisabledFocus:!0})),u.a.createElement("h3",null,"Specification"),u.a.createElement("pre",null,JSON.stringify(A.schema,null,2)),u.a.createElement(ot,{dimensions:A.dimensions,measures:A.measures,dimScores:R,space:V,spaceList:a,schema:A.schema})),u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg9",style:{overflow:"auto"}},u.a.createElement(Te,{aggregator:F.aggregator,defaultAggregated:F.defaultAggregated,defaultStack:F.defaultStack,dimensions:A.dimensions,measures:A.measures,dataSource:A.aggData,schema:A.schema,fieldFeatures:A.fieldFeatures}))))),p===Et[1].itemKey&&u.a.createElement(xt,null)),p===Et[0].itemKey&&N&&u.a.createElement("div",{className:"card"},u.a.createElement("h2",null," Related Views "),u.a.createElement(lt,{onSelectView:function(e){var t=L.findIndex((function(t){return t.index===e}));t>-1&&W(t)},subspaceList:a,digDimensionProps:{visualConfig:F,dataSource:t,viewSpaces:L,fieldScores:R,interestedViewSpace:L[o]}})))},kt=n(350),Ot=n(341),jt=n(339),wt=n(35),Nt=n(168),Ct=n.n(Nt),Mt=n(172),Pt=function(e){var t=Object(s.useRef)(null),n=e.x,a=e.y,r=e.dataSource,i=e.fieldType;return Object(s.useEffect)((function(){if(t.current){var e=[],o=!1;e="ordinal"===i&&r.some((function(e){return/(\[|\()-?([0-9.]+|Infinity),\s*([0-9.]+|Infinity)(\]|\))/.test(e.memberName)}))?r.map((function(e){o=!0;var t=Object(Mt.a)(/(\[|\()(\x2D?([\.0-9]+|Infinity)),[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\.0-9]+|Infinity)(\]|\))/,{left:2}).exec(e.memberName);return Object(y.a)({},e,{index:null===t?e.name:Number(t.groups.left)})})):r;var c=void 0;"nominal"===i?c="-y":"ordinal"===i&&o&&(c={field:"index"}),Object(Ce.a)(t.current,{background:"#fff",data:{values:e},height:120,width:200,mark:["quantitative","temporal"].includes(i)?"line":"bar",encoding:{x:{field:n,axis:r.length>16?null:void 0,type:i,sort:c},y:{field:a,type:"quantitative",aggregate:"sum"}}},{actions:!1})}}),[n,a,r,i]),u.a.createElement("div",{ref:t})},Ft=(n(281),[{key:"fieldName",name:"fieldName",fieldName:"fieldName",minWidth:70,maxWidth:150},{key:"type",name:"type",fieldName:"type",minWidth:50},{key:"entropy",name:"entropy",fieldName:"entropy",minWidth:120},{key:"maxEntropy",name:"maxEntropy",fieldName:"maxEntropy",minWidth:120}]);function Dt(e){switch(e){case"nominal":return"TextField";case"quantitative":return"NumberField";case"ordinal":return"Breadcrumb";case"temporal":return"EventDate";default:return""}}var Tt=function(e){var t=e.originSummary,n=e.groupedSummary,a=Object(s.useMemo)((function(){var e=t.map((function(e){return e.maxEntropy}));return[0,Math.max.apply(Math,Object(f.a)(e))]}),[t]),r=function(e){return u.a.createElement("div",{className:"field-hover-card"},u.a.createElement("h2",null,e.fieldName),u.a.createElement("div",null,"Field entropy is ",Number(e.entropy).toFixed(2)),u.a.createElement("div",{className:"chart-vertical-margin-container"},u.a.createElement(Pt,{x:"memberName",y:"count",fieldType:e.type,dataSource:e.distribution})))},i=function(e){var t=e.fieldName,a=n.find((function(e){return e.fieldName===t+"(group)"}));return u.a.createElement("div",{className:"field-hover-card"},a?u.a.createElement("div",null,u.a.createElement("h3",null,a.fieldName),u.a.createElement("div",null,"Field entropy is ",Number(a.entropy).toFixed(2)),u.a.createElement("div",{className:"chart-vertical-margin-container"},u.a.createElement(Pt,{x:"memberName",y:"count",fieldType:a.type,dataSource:a.distribution}))):u.a.createElement("div",null,"This field is not grouped."))};return u.a.createElement(jt.a,{compact:!0,columns:Ft,items:t,selectionMode:wt.b.none,onRenderItemColumn:function(e,t,o){if(void 0!==o){var c=e.fieldName,s=n.find((function(e){return e.fieldName===c+"(group)"})),l={onRenderCompactCard:r,onRenderExpandedCard:i,renderData:e,compactCardHeight:320,expandedCardHeight:s?320:40},d=e[o.fieldName],m=[255,255,255];switch(o.key){case"type":return u.a.createElement("div",null,u.a.createElement(kt.a,{iconName:Dt(d)})," ",d);case"entropy":case"maxEntropy":v=e[o.key],h=a,m=Ct.a.scale("YlGnBu").domain([h[1],h[0]])(v).rgb();var f="rgb(".concat(m.join(","),")"),p="rgb(".concat((g=m,(.299*g[0]+.587*g[1]+.114*g[2])/255>.5?[0,0,0]:[255,255,255]).join(","),")");return u.a.createElement(Ot.a,{expandedCardOpenDelay:800,expandingCardProps:l,instantOpenOnClick:!0},u.a.createElement("div",{style:{boxShadow:"".concat(f," 0px 0px 0px 10px"),backgroundColor:f,color:p}},d));default:return u.a.createElement(Ot.a,{expandedCardOpenDelay:800,expandingCardProps:l,instantOpenOnClick:!0},u.a.createElement("div",null,d))}}var g,v,h}})};function zt(e){return e.join(",")}var Lt=function(e){var t=e.subspaceList,n=e.onSpaceChange,a=Object(s.useState)(0),r=Object(m.a)(a,2),i=r[0],o=r[1],c=Object(s.useRef)(null),l=Object(s.useRef)(null);Object(s.useEffect)((function(){var e=t.length-1;if(e>-1){var a=t[e];n(a.dimensions,a.measures.map((function(e){return e.name})),a.correlationMatrix),o(e)}}),[t,n]);var d=Object(s.useMemo)((function(){for(var e=[],n=0;n<t.length;n++){var a=t[n],r=zt(a.dimensions),i=!0,o=!1,c=void 0;try{for(var s,u=a.measures[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,d=l.name,m=l.value,f={test:n,score:a.score,dimensions:r,measureName:d,measureValue:m};e.push(f)}}catch(p){o=!0,c=p}finally{try{i||null==u.return||u.return()}finally{if(o)throw c}}}return e}),[t]);return Object(s.useEffect)((function(){c.current&&t.length>0&&Object(Ce.a)(c.current,{data:{values:d},vconcat:[{mark:"rect",selection:{dim:{type:"single",on:"click",encodings:["y"]}},encoding:{x:{field:"measureName",type:"nominal"},y:{field:"dimensions",type:"ordinal",sort:{field:"score"}},color:{field:"measureValue",type:"quantitative",aggregate:"mean",scale:{reverse:!0}},opacity:{condition:{selection:"dim",value:1},value:.72}}}]}).then((function(e){e.view.addEventListener("click",(function(e,a){if(a){var r=a.datum,i=t.findIndex((function(e){return zt(e.dimensions)===r.dimensions}));if(i>-1){var c=t[i];n(c.dimensions,c.measures.map((function(e){return e.name})),c.correlationMatrix),o(i)}}}))}))}),[t,d]),Object(s.useEffect)((function(){var e=t[i];if(l.current&&t.length>0&&e){for(var n=[],a=0;a<e.correlationMatrix.length;a++)for(var r=0;r<e.correlationMatrix[a].length;r++)n.push({x:e.measures[a].name,y:e.measures[r].name,correlation:e.correlationMatrix[a][r]});Object(Ce.a)(l.current,{data:{values:n},mark:"rect",encoding:{x:{field:"x",type:"nominal"},y:{field:"y",type:"nominal"},color:{field:"correlation",type:"quantitative",aggregate:"mean",scale:{scheme:"redyellowgreen",domain:[-1,1]}}}})}}),[t,i]),u.a.createElement("div",null,u.a.createElement("div",{ref:c}),u.a.createElement("div",{ref:l}))},It=function(e){var t=e.adjMatrix,n=e.measures,a=e.onFocusGroup,r=Q(),o=Object(m.a)(r,1)[0],c=Object(s.useRef)(null),l=Object(s.useMemo)((function(){var e=i.kruskalWithFullMST(t,o.maxGroupNumber);return{edgesInMST:e.edgesInMST,groups:e.groups}}),[t,o.maxGroupNumber]),d=Object(s.useMemo)((function(){for(var e=l.edgesInMST,t=l.groups,a=e.map((function(e){return{source:e[0][0],target:e[0][1],value:1/e[1],inCutEdge:e[2]}})),r=[],i=0;i<t.length;i++)r.push({name:n[i],index:i,value:1,group:t[i]});return{nodes:r,edges:a}}),[n,l]);return Object(s.useEffect)((function(){c.current&&n.length>0&&Object(Ce.a)(c.current,{$schema:"https://vega.github.io/schema/vega/v5.json",width:700,height:500,padding:0,autosize:"none",signals:[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"text:mouseout[!event.buttons], window:mouseup",update:"false"},{events:"text:mouseover",update:"fix || true"},{events:"[text:mousedown, window:mouseup] > window:mousemove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"text:mouseover",update:"fix === true ? item() : node"}]},{description:"Flag to restart Force simulation upon data changes.",name:"restart",value:!1,on:[{events:{signal:"fix"},update:"fix && fix.length"}]}],data:[{name:"node-data",values:d.nodes},{name:"link-data",values:d.edges}],scales:[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"tableau20"}},{name:"colorEdge",type:"quantize",domain:{data:"link-data",field:"value"},range:{scheme:"viridis"}}],marks:[{name:"nodes",type:"text",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{scale:"color",field:"group"},text:{field:"name"},fontSize:{value:14},fontWeight:{value:600}},update:{cursor:{value:"pointer"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide"},{force:"nbody"},{force:"link",links:"link-data"}]}]},{type:"path",from:{data:"link-data"},interactive:!1,encode:{update:{stroke:{scale:"colorEdge",field:"value"},strokeWidth:{value:.8},opacity:{value:.5}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]}]}).then((function(e){e.view.addEventListener("click",(function(e,t){if(t){var r=t.datum.group,i=n.filter((function(e,t){return l.groups[t]===r}));a(i)}}))}))}),[d,n,l.groups,a]),u.a.createElement("div",{ref:c})},Bt=n(355),Kt=n(356),Gt=(n(282),function(e){var t=e.summary,n=e.subspaceList,a=e.dataSource,r=Q(),i=Object(m.a)(r,2),o=i[0],c=i[1],l=Object(s.useState)(!0),d=Object(m.a)(l,2),p=d[0],g=d[1],v=Object(s.useState)({measures:[],dimensions:[],matrix:[]}),h=Object(m.a)(v,2),y=h[0],b=h[1],x=Object(s.useState)([]),E=Object(m.a)(x,2),S=E[0],k=E[1],O=Object(s.useMemo)((function(){return[].concat(Object(f.a)(t.origin),Object(f.a)(t.grouped)).map((function(e){return[e.fieldName,e.entropy,e.maxEntropy,{name:e.fieldName,type:e.type}]}))}),[t.origin,t.grouped]),j=Object(s.useMemo)((function(){var e=y.dimensions;try{var t=O.filter((function(t){return e.includes(t[0])||S.includes(t[0])}));return qe(t,a,e,S).schema}catch(n){return console.log(n),{position:[]}}}),[O,y,a,S]),w=Object(s.useMemo)((function(){return n.slice(0,Math.round(n.length*o.topK.subspacePercentSize))}),[n,o.topK.subspacePercentSize]);Object(s.useEffect)((function(){c((function(e){e.maxGroupNumber=Math.round(o.cookedMeasures.length/4)}))}),[o.cookedMeasures,c]);var N=Object(s.useCallback)((function(e,t,n){b({dimensions:e,measures:t,matrix:n})}),[b]),C=Object(s.useCallback)((function(e){k(e)}),[]);return u.a.createElement("div",null,u.a.createElement("h3",{className:"notebook header"},"Univariate Summary"),u.a.createElement("p",{className:"state-description"},"Hover your mouse over the fields and see the distails and entropy reducing strategy."),o.loading.univariateSummary&&u.a.createElement(de.a,{description:"analyzing"}),u.a.createElement("div",{className:"notebook content container"},u.a.createElement(Tt,{originSummary:t.origin,groupedSummary:t.grouped})),u.a.createElement("h3",{className:"notebook header"},"Subspace Searching"),u.a.createElement("p",{className:"state-description"},"Try to choose one row(combination of dimensions) of the subspace and see the changes of the processes below."),o.loading.subspaceSearching&&u.a.createElement(de.a,{description:"analyzing"}),!o.loading.univariateSummary&&u.a.createElement(Bt.a,{disabled:o.loading.subspaceSearching,value:100*o.topK.dimensionSize,label:"top k percent dimension used",max:100,valueFormat:function(e){return"".concat(e,"%")},showValue:!0,onChange:function(e){c((function(t){t.topK.dimensionSize=e/100,t.loading.subspaceSearching=!0}));var t=o.cookedDimensions.slice(0,Math.round(o.cookedDimensions.length*e/100));B(a,t,o.cookedMeasures,"sum",o.useServer).then((function(e){e&&c((function(t){t.subspaceList=e,t.loading.subspaceSearching=!1}))}))}}),!o.loading.univariateSummary&&u.a.createElement(Bt.a,{disabled:o.loading.subspaceSearching,value:100*o.topK.subspacePercentSize,label:"top k percent subspace used",max:100,valueFormat:function(e){return"".concat(e,"%")},showValue:!0,onChange:function(e){c((function(t){t.topK.subspacePercentSize=e/100}))}}),u.a.createElement("div",{className:"notebook content center container"},u.a.createElement(Lt,{subspaceList:w,onSpaceChange:N})),u.a.createElement("h3",{className:"notebook header"},"Measurement Clustering"),u.a.createElement("p",{className:"state-description"},"Try to choose one group to visualize them."),u.a.createElement(Bt.a,{label:"Max Group Number",min:1,max:o.cookedMeasures.length||4,step:1,value:o.maxGroupNumber,showValue:!0,onChange:function(e){c((function(t){t.maxGroupNumber=e}))}}),u.a.createElement("div",{className:"notebook content center container"},u.a.createElement(It,{adjMatrix:y.matrix,measures:y.measures,onFocusGroup:C})),u.a.createElement("h3",{className:"notebook header"},"Visualization"),u.a.createElement("p",{className:"state-description"},"If there is no result here, try to click one group of measures in"," ",u.a.createElement("b",null,"Clustering")," process above."),u.a.createElement(Kt.a,{checked:p,label:"aggregate measures",defaultChecked:!0,onText:"On",offText:"Off",onChange:function(e,t){g(!!t)}}),u.a.createElement("div",{className:"notebook content center container"},u.a.createElement(Te,{defaultAggregated:p,defaultStack:!0,aggregator:"sum",schema:j,fieldFeatures:O.map((function(e){return e[3]})),dataSource:a,dimensions:y.dimensions,measures:S})))}),At=n(171),qt=n(345),Wt=n(340),Rt=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.fields,r=(void 0===a?[]:a).map((function(e){return{key:e.name,name:e.name,fieldName:e.name,minWidth:70,maxHeight:90}}));return u.a.createElement("div",{style:{maxHeight:400,overflow:"auto"}},u.a.createElement(jt.a,{items:n,columns:r,selectionMode:wt.b.none}))},Vt=function(e){var t=e.show,n=void 0!==t&&t,a=e.onUpdateConfig,r=e.onClose,i=Object(s.useState)([]),o=Object(m.a)(i,2),c=o[0],l=o[1];Object(s.useEffect)((function(){l(e.fields)}),[e.fields]);return u.a.createElement(ye.a,{isOpen:n,type:be.a.smallFixedFar,onDismiss:r,headerText:"Meta Config",closeButtonAriaLabel:"Close",onRenderFooterContent:function(){return u.a.createElement("div",null,u.a.createElement(he.a,{onClick:function(){a(c),r()}},"Save"))}},u.a.createElement("div",null,c.map((function(e){return u.a.createElement(Kt.a,{key:e.name,checked:"dimension"===e.type,label:e.name,onText:"dimension",offText:"measure",onChange:function(t,n){!function(e,t){l((function(n){return n.map((function(n){return e.name===n.name?{name:e.name,type:t}:n}))}))}(e,n?"dimension":"measure")}})}))))};var Ht=[{key:"dropNull",text:"drop null records"},{key:"useMode",text:"replace null with mode"},{key:"simpleClean",text:"simple cleaning"}];function Jt(e,t,n){var a=Object(s.useMemo)((function(){return t.filter((function(e){return"dimension"===e.type})).map((function(e){return e.name}))}),[t]),i=Object(s.useMemo)((function(){return t.filter((function(e){return"measure"===e.type})).map((function(e){return e.name}))}),[t]),o=Object(s.useMemo)((function(){return e.map((function(e){var n={};return t.forEach((function(t){n[t.name]="dimension"===t.type?e[t.name]:r.transNumber(e[t.name])})),n}))}),[e,t]),u=Object(s.useMemo)((function(){return function(e,t,n,a){switch(a){case"dropNull":return c.dropNull(e,t,n);case"useMode":return c.useMode(e,t.concat(n));case"simpleClean":default:return c.simpleClean(e,t,n)}}(function(e){return JSON.parse(JSON.stringify(e))}(o),a,i,n)}),[a,i,o,n]);return[o,u]}var Ut,Yt=n(338);!function(e){e.none="none",e.reservoir="reservoir"}(Ut||(Ut={}));var Xt=[{key:Ut.none,text:"none"},{key:Ut.reservoir,text:"reservoir"}],$t=function(e){var t=Q(),n=Object(m.a)(t,3),r=n[0],i=n[1],l=n[2],d=oe({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1}}),f=Object(m.a)(d,2),p=f[0],g=f[1],y=Object(s.useState)("dropNull"),b=Object(m.a)(y,2),x=b[0],E=b[1],S=Object(s.useState)(!0),k=Object(m.a)(S,2),O=k[0],j=k[1],w=Object(s.useState)(Ut.none),N=Object(m.a)(w,2),C=N[0],M=N[1],P=Object(s.useState)(.2),F=Object(m.a)(P,2),D=F[0],T=F[1],z=Object(s.useRef)(null),L=Object(s.useRef)(null),I=Jt(r.rawData,r.fields,x),B=Object(m.a)(I,2),K=B[0],G=B[1],A=Object(Yt.a)("labelElement");function q(){return(q=Object(h.a)(v.a.mark((function e(){var t,n,r,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===L.current||null===L.current.files){e.next=24;break}if(t=L.current.files[0],n=[],r=[],"text/csv"!==t.type&&"application/vnd.ms-excel"!==t.type){e.next=10;break}return e.next=7,a.csvLoader(t);case 7:r=e.sent,e.next=17;break;case 10:if("application/json"!==t.type){e.next=16;break}return e.next=13,a.jsonLoader(t);case 13:r=e.sent,e.next=17;break;case 16:throw new Error("unsupported file type=".concat(t.type," "));case 17:C===Ut.reservoir&&(r=o.reservoirSampling(r,Math.round(r.length*D))),r=c.dropNullColumn(r,Object.keys(r[0])).dataSource,s=Object.keys(r[0]),n=s.map((function(e,t){return{name:e,type:r.every((function(t){return!isNaN(t[e])||void 0===t[e]}))?"measure":"dimension"}})),O&&(n.forEach((function(e,t){e.name="".concat(e.name,"-rid-").concat(t)})),r=r.map((function(e){for(var t={},a=0;a<s.length;a++)t[n[a].name]=e[s[a]];return t}))),i((function(e){e.fields=n,e.rawData=r})),g((function(e){e.show.dataConfig=!1}));case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=[{key:"upload",name:"Upload",iconProps:{iconName:"Upload"},onClick:function(){L.current&&L.current.click()}}];return u.a.createElement("div",{className:"content-container"},u.a.createElement(Vt,{fields:r.fields,show:p.show.fieldConfig,onUpdateConfig:function(e){i((function(t){t.fields=e}))},onClose:function(){g((function(e){e.show.fieldConfig=!1}))}}),u.a.createElement("div",{className:"card"},u.a.createElement(pe.a,{horizontal:!0},u.a.createElement(he.a,{disabled:0===K.length,iconProps:{iconName:"Financial"},text:"Extract Insights",onClick:function(){l("extractInsights",{dataSource:G,fields:r.fields}),e.onExtractInsights()}}),u.a.createElement("div",{ref:z},u.a.createElement(me.a,{iconProps:{iconName:"ExcelDocument"},title:"Upload",ariaLabel:"upload data",onClick:function(){g((function(e){e.show.dataConfig=!0}))}}),u.a.createElement(At.a,{style:{maxWidth:300},className:"vi-callout-callout",role:"alertdialog",gapSpace:0,target:z.current,onDismiss:function(){g((function(e){e.show.dataConfig=!1}))},setInitialFocus:!0,hidden:!p.show.dataConfig},u.a.createElement("div",{className:"vi-callout-header"},u.a.createElement("p",{className:"vi-callout-title"},"Upload Your own dataset")),u.a.createElement("div",{className:"vi-callout-inner"},u.a.createElement("div",{className:"vi-callout-content"},u.a.createElement("p",{className:"vi-callout-subTex"},".csv, .json are supportted.")),u.a.createElement("div",null,u.a.createElement(Se.a,{label:"Add unique ids for fields",checked:O,onChange:function(e,t){j(!!t)}}),u.a.createElement(xe.a,{id:A,required:!0},"Sampling"),u.a.createElement(qt.a,{defaultSelectedKey:"B",options:Xt,selectedKey:C,onChange:function(e,t){t&&M(t.key)},ariaLabelledBy:A}),C!==Ut.none&&u.a.createElement(Bt.a,{label:"sample size(percent)",min:0,max:1,step:.001,value:D,showValue:!0,valueFormat:function(e){return"".concat((100*e).toFixed(1),"%")},onChange:function(e){T(e)}})),u.a.createElement("div",{className:"vi-callout-actions"},u.a.createElement("input",{type:"file",ref:L,multiple:!0,accept:"*",style:{display:"none"},onChange:function(){return q.apply(this,arguments)}}),u.a.createElement(Wt.a,{overflowButtonProps:{name:"More"},items:W}))))),u.a.createElement(me.a,{iconProps:{iconName:"Settings"},title:"Field Setting",ariaLabel:"field setting",onClick:function(){g((function(e){e.show.fieldConfig=!0}))}})),u.a.createElement("div",{style:{margin:"20px 0px"}},u.a.createElement(Ee.a,{styles:{root:{maxWidth:"180px"}},selectedKey:x,label:"Clean Method",allowFreeform:!0,autoComplete:"on",options:Ht,onChange:function(e,t){t&&E(t.key)}})),u.a.createElement("p",{style:{fontSize:12,fontWeight:400,color:"#595959"}},"Remember to adjust the fields' types and cleaning strategy before extracting insights."),u.a.createElement("i",{style:{fontSize:12,fontWeight:300,color:"#595959"}},"Number of records ",G.length),u.a.createElement(Rt,{fields:r.fields,dataSource:G})))},_t=n(357),Qt=n(169),Zt=n.n(Qt);function en(){var e=Object(dt.a)(["\n  display: inline-block;\n  padding: 1rem;\n  border: 1px solid #f5f5f5;\n  margin: 1rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB',\n  'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji',\n  'Segoe UI Emoji', 'Segoe UI Symbol';\n  .indicator-card.header {\n    color: #8c8c8c;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    font-size: 20px;\n    line-height: 28px;\n    font-weight: 400;\n  }\n  .indicator-card.content {\n    color: #0078d4;\n    font-size: 56px;\n    line-height: 64px;\n    font-weight: 400;\n    margin: 0px;\n  }\n"]);return en=function(){return e},e}var tn=gt.a.div(en()),nn=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.measures,r=void 0===a?[]:a,i=e.operator,o=void 0===i?"sum":i,c=Object(s.useMemo)((function(){if(0===r.length||0===n.length)return"-";var e=0;try{e=Zt.a[o](n.map((function(e){return e[r[0]]})))}catch(t){console.log("operator does not exist or not in vega/datalib.")}return Math.abs(e-Math.round(e))>1e-5&&(e=Number(e.toFixed(2))),function(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}(e)}),[n,r,o]);return u.a.createElement(tn,null,u.a.createElement("h4",{className:"indicator-card header"},r[0]," ",o&&"(".concat(o,")")),u.a.createElement("h1",{className:"indicator-card content"},c))},an=function(e){var t=e.spec,n=e.dataSource,a=e.signalHandler,r=void 0===a?{}:a,i=Object(s.useRef)(null),o=Object(s.useState)(),c=Object(m.a)(o,2),l=c[0],d=c[1];return Object(s.useEffect)((function(){i.current&&Object(Ce.a)(i.current,t).then((function(e){d(e.view)}))}),[t]),Object(s.useEffect)((function(){if(l&&r)for(var e in r)l.addSignalListener("sl",r[e]);return function(){if(l&&r)for(var e in r)l.removeSignalListener("sl",r[e])}}),[l,r]),Object(s.useEffect)((function(){l&&l.change("dataSource",Ce.b.changeset().remove((function(){return!0})).insert(n)),l&&l.resize(),l&&l.runAsync()}),[l,n]),u.a.createElement("div",{ref:i})},rn=function(e){var t=e.dashBoard,n=void 0===t?[]:t,a=e.dataSource,r=void 0===a?[]:a,i=e.dimScores,o=void 0===i?[]:i,c=oe({}),l=Object(m.a)(c,2),d=l[0],p=l[1],g=Object(s.useState)([]),v=Object(m.a)(g,2),h=v[0],y=v[1];Object(s.useEffect)((function(){y(n.map((function(){return!1})))}),[n]);var b=Object(s.useMemo)((function(){return n&&r&&o?n.map((function(e){var t=e.dimensions,n=e.measures,a=e.type,i=o.filter((function(e){return t.includes(e[0])||n.includes(e[0])})),c=qe(i,r,t,n).schema;return c.position=c.position||[],c.color=c.color||[],c.opacity=c.opacity||[],c.size=c.size||[],c.shape=c.shape||[],c.geomType=c.geomType||[],c.highFacets=c.highFacets||[],c.facets=c.facets||[],{dimensions:t,measures:n,type:a,schema:c}})):[]}),[n,r,o]),x=Object(s.useMemo)((function(){return o.map((function(e){return e[3]}))}),[o]),E=Object(s.useMemo)((function(){return b.map((function(e,t){var n=e.dimensions,a=e.measures,r=e.schema,i=e.type,o=[],c=!0,s=!1,u=void 0;try{for(var l,d=function(){var e=l.value,t=x.find((function(t){return t.name===e}));o.push({name:e,semanticType:t?t.type:"nominal",type:"dimension"})},m=n[Symbol.iterator]();!(c=(l=m.next()).done);c=!0)d()}catch(E){s=!0,u=E}finally{try{c||null==m.return||m.return()}finally{if(s)throw u}}var f=!0,p=!1,g=void 0;try{for(var v,h=function(){var e=v.value,t=x.find((function(t){return t.name===e}));o.push({name:e,semanticType:t?t.type:"nominal",type:"measure"})},y=a[Symbol.iterator]();!(f=(v=y.next()).done);f=!0)h()}catch(E){p=!0,g=E}finally{try{f||null==y.return||y.return()}finally{if(p)throw g}}if("target"===i&&1===a.length)return{specIndex:t,type:"indicator",measures:a,operator:"sum"};var b={};return"target"===i&&(b=Pe(r,o)),"feature"===i&&(b=Me(r,o)),b.specIndex=t,b}))}),[b,x]),S=Object(s.useMemo)((function(){return n.map((function(e,t){return{sl:function(e,n){h[t]&&p((function(e){if(0===Object.keys(n).length)for(var t in e)e[t]=[];else for(var a in n)e[a]=n[a]}))}}}))}),[n,h,p]),k=Object(s.useMemo)((function(){for(var e=[],t=Object.keys(d).map((function(e){return{fieldName:e,filter:d[e],isRange:2===d[e].length&&"number"===typeof d[e][0]&&"number"===typeof d[e][1]&&d[e][0]<d[e][1]}})),a=r.filter((function(e){return t.every((function(t){return 0===t.filter.length||(t.isRange?e[t.fieldName]>=t.filter[0]&&e[t.fieldName]<=t.filter[1]:t.filter.includes(e[t.fieldName]))}))})),i=0;i<n.length;i++)h[i]?e.push(r):e.push(a);return e}),[n,d,r,h]);return u.a.createElement("div",null,u.a.createElement("div",null,E.filter((function(e){return"indicator"===e.type})).map((function(e,t){return u.a.createElement(nn,{key:"ds-ind-chart-".concat(t),dataSource:k[e.specIndex],measures:e.measures})}))),u.a.createElement("div",null,E.filter((function(e){return"indicator"!==e.type})).map((function(e,t){return u.a.createElement("div",{key:"ds-chart-".concat(t),style:{display:"inline-block",padding:"4px",margin:"2px",height:"380px",overflowY:"auto"}},u.a.createElement("div",{style:{float:"left",minWidth:"300px",minHeight:"300px"}},u.a.createElement(an,{dataSource:k[e.specIndex],spec:e,signalHandler:h[e.specIndex]&&S[e.specIndex]})),u.a.createElement("div",{style:{float:"left"}},u.a.createElement(me.a,{title:"use as filter",ariaLabel:"use as filter",iconProps:{iconName:h[e.specIndex]?"FilterSolid":"Filter"},onClick:function(){y((function(t){var n=Object(f.a)(t);return n[e.specIndex]=!n[e.specIndex],n[e.specIndex]||p((function(e){for(var t in e)e[t]=[]})),n}))}})))}))))},on=function(e){var t=Q(),n=Object(m.a)(t,4),a=n[0],r=n[2],i=n[3],o=Object(s.useState)(0),c=Object(m.a)(o,2),l=c[0],d=c[1],f=a.subspaceList,p=a.cookedDataSource,g=a.cookedDimensions,v=a.cookedMeasures,h=a.dashBoardList,y=i.dimScores;return u.a.createElement("div",{className:"content-container"},u.a.createElement("div",{className:"card"},u.a.createElement(he.a,{text:"Generate Dashboard",disabled:0===f.length,iconProps:{iconName:"AreaChart"},onClick:function(){r("getDashBoard",{dataSource:p,dimensions:g,measures:v})}}),a.loading.dashBoard&&u.a.createElement(de.a,{description:"generating dashboard"}),u.a.createElement(_t.a,null,"current page no: ",l+1," of ",h.length),u.a.createElement(pe.a,{horizontal:!0,tokens:{childrenGap:20}},u.a.createElement(ge.a,{text:"Last",onClick:function(){d((function(e){return(e+h.length-1)%h.length}))},allowDisabledFocus:!0}),u.a.createElement(ge.a,{text:"Next",onClick:function(){d((function(e){return(e+1)%h.length}))},allowDisabledFocus:!0})),u.a.createElement("p",{className:"state-description"},"Double click the chart with selection to clear selection(filter)."),u.a.createElement("div",{style:{overflowX:"auto",margin:"1rem",border:"1px solid #e8e8e8"}},h[l]&&h[l].length>0&&u.a.createElement(rn,{dataSource:p,dashBoard:h[l],dimScores:y}))))},cn=function(e){var t=e.x,n=e.y,a=e.threshold,r=e.dataSource,i=void 0===r?[]:r,o=Object(s.useMemo)((function(){return{width:180,height:200,data:{name:"dataSource"},transform:[{calculate:a.toString(),as:"threshold"}],layer:[{mark:"point",encoding:{x:{field:t,type:"nominal",scale:{domain:["outlier","trend","general","group"]}},y:{field:n,type:"quantitative",scale:{domain:[0,1]}}}},{mark:"rule",encoding:{y:{field:"threshold",type:"quantitative"},color:{value:"red"}}}]}}),[t,n,a]);return u.a.createElement("div",null,u.a.createElement(an,{spec:o,dataSource:i}))},sn=n(61);Object(sn.scheme)("threshold",["#1890ff","#ffccc7"]);var un=function(e){var t=e.keyField,n=e.valueField,a=e.dataSource,r=void 0===a?[]:a,i=e.threshold,o=Object(s.useRef)(null),c=Object(s.useMemo)((function(){var e=r.map((function(e){return{key:e[t],value:Math.round(1e3*e[n])/1e3,category:0}}));["outlier","trend","general","group"].forEach((function(t){e.find((function(e){return e.key===t}))||e.push({key:t,value:0,category:0})}));var a=e.map((function(e){return{key:e.key,value:i,category:1}}));return e.concat(a)}),[t,n,r,i]);return Object(s.useEffect)((function(){o.current&&Object(Ce.a)(o.current,{width:280,height:280,padding:50,autosize:{type:"none",contains:"padding"},signals:[{name:"radius",update:"width / 2"}],data:[{name:"table",values:c},{name:"keys",source:"table",transform:[{type:"aggregate",groupby:["key"]}]}],scales:[{name:"angular",type:"point",range:{signal:"[-PI, PI]"},padding:.5,domain:{data:"table",field:"key"}},{name:"radial",type:"linear",range:{signal:"[0, radius]"},zero:!0,nice:!1,domain:[0,1],domainMin:0},{name:"color",type:"ordinal",domain:{data:"table",field:"category"},range:{scheme:"threshold"}}],encode:{enter:{x:{signal:"radius"},y:{signal:"radius"}}},marks:[{type:"group",name:"categories",zindex:1,from:{facet:{data:"table",name:"facet",groupby:["category"]}},marks:[{type:"line",name:"category-line",from:{data:"facet"},encode:{enter:{interpolate:{value:"linear-closed"},x:{signal:"scale('radial', datum.value) * cos(scale('angular', datum.key))"},y:{signal:"scale('radial', datum.value) * sin(scale('angular', datum.key))"},stroke:{scale:"color",field:"category"},strokeWidth:{value:1},fill:{scale:"color",field:"category"},fillOpacity:{value:.1}}}},{type:"text",name:"value-text",from:{data:"category-line"},encode:{enter:{x:{signal:"datum.x"},y:{signal:"datum.y"},text:{signal:"datum.datum.value"},align:{value:"center"},baseline:{value:"middle"},fill:{value:"#262626"}}}}]},{type:"rule",name:"radial-grid",from:{data:"keys"},zindex:0,encode:{enter:{x:{value:0},y:{value:0},x2:{signal:"radius * cos(scale('angular', datum.key))"},y2:{signal:"radius * sin(scale('angular', datum.key))"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}},{type:"text",name:"key-label",from:{data:"keys"},zindex:1,encode:{enter:{x:{signal:"(radius + 5) * cos(scale('angular', datum.key))"},y:{signal:"(radius + 5) * sin(scale('angular', datum.key))"},text:{field:"key"},align:[{test:"abs(scale('angular', datum.key)) > PI / 2",value:"right"},{value:"left"}],baseline:[{test:"scale('angular', datum.key) > 0",value:"top"},{test:"scale('angular', datum.key) == 0",value:"middle"},{value:"bottom"}],fill:{value:"black"},fontWeight:{value:"bold"}}}},{type:"line",name:"outer-line",from:{data:"radial-grid"},encode:{enter:{interpolate:{value:"linear-closed"},x:{field:"x2"},y:{field:"y2"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}}]},{actions:!1})}),[c]),u.a.createElement("div",{ref:o})};function ln(){var e=Object(dt.a)(["\n  display: flex;\n  div.left{\n    flex-basis: 300px;\n    flex-grow: 1;\n    border-right: 1px solid #f0f0f0;\n  }\n  div.right{\n    margin-left: 1em;\n    flex-grow: 8;\n  }\n  padding: 1em 0em;\n"]);return ln=function(){return e},e}function dn(){var e=Object(dt.a)(["\n  display: inline-block;\n  padding: 0.1em 0.3em;\n  margin: 0.2em;\n  border-radius: 3px;\n  color: #fff;\n  font-size: 12px;\n  background-color: ",";\n"]);return dn=function(){return e},e}var mn=gt.a.div(dn(),(function(e){return e.color})),fn=gt.a.div(ln()),pn={outlier:"#cf1322",trend:"#7cb305",general:"#08979c",group:"#c41d7f"};function gn(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var vn=function(e){var t=Object(s.useState)([]),n=Object(m.a)(t,2),a=n[0],r=n[1],i=Object(s.useState)(.6),o=Object(m.a)(i,2),c=o[0],l=o[1],d=Object(s.useState)(!1),f=Object(m.a)(d,2),p=f[0],g=f[1],v=Object(s.useState)({aggregator:"sum",defaultAggregated:!0,defaultStack:!0}),h=Object(m.a)(v,2),b=h[0],x=h[1],E=oe({show:{configPanel:!1}}),S=Object(m.a)(E,2),k=S[0],O=S[1],j=Q(),w=Object(m.a)(j,4),N=w[0],C=(w[2],w[3]),M=Object(s.useState)(0),P=Object(m.a)(M,2),F=P[0],D=P[1],T=N.cookedDataSource,z=N.cookedDimensions,L=N.cookedMeasures,I=C.dimScores,B=Object(s.useMemo)((function(){return a.filter((function(e){return e.significance>=c}))}),[a,c]),K=Object(s.useMemo)((function(){if(0===B.length)return null;var e=B[F],t=e.dimensions,n=e.measures,a=I.filter((function(e){return t.includes(e[0])||n.includes(e[0])}));return{schema:qe(a,T,t,n).schema,fieldFeatures:a.map((function(e){return e[3]})),dimensions:t,measures:n}}),[B,F,T]),G=Object(s.useMemo)((function(){if(null!==K){var e=K.dimensions,t=K.measures;return a.filter((function(n){return!(!gn(e,n.dimensions)||!gn(t,n.measures))}))}return[]}),[a,K]);return Object(s.useEffect)((function(){if(null!==K){var e=K.schema;e.geomType&&(e.geomType.includes("point")||e.geomType.includes("density"))?x((function(e){return Object(y.a)({},e,{defaultAggregated:!1})})):x((function(e){return Object(y.a)({},e,{defaultAggregated:!0})}))}}),[K]),u.a.createElement("div",{className:"content-container"},u.a.createElement(je,{show:k.show.configPanel,config:b,onUpdateConfig:function(e){x(e),O((function(e){e.show.configPanel=!1}))},onClose:function(){O((function(e){e.show.configPanel=!1}))}}),T.length>0&&u.a.createElement("div",{className:"card"},u.a.createElement(he.a,{text:"Get Insights",onClick:function(){g(!0),function(e,t,n){return R.apply(this,arguments)}(T,z,L).then((function(e){r(e),g(!1)}))}}),p&&u.a.createElement(de.a,{description:"generating dashboard"}),u.a.createElement(fn,null,u.a.createElement("div",{className:"left"},u.a.createElement(cn,{x:"type",y:"significance",dataSource:a,threshold:c}),u.a.createElement(Bt.a,{label:"significance threshold",max:100,value:100*c,valueFormat:function(e){return"".concat(e,"%")},showValue:!0,onChange:function(e){l(e/100),D(0)}}),u.a.createElement("p",{className:"state-description"},"There are ",B.length," of views of which insight significance is no less than ",(100*c).toFixed(2)," %")),u.a.createElement("div",{className:"right"},u.a.createElement("div",{style:{width:"280px"}},u.a.createElement(fe.a,{label:"Current Index",value:(F+1).toString(),min:0,max:B.length,step:1,iconProps:{iconName:"Search"},labelPosition:ve.a.start,onValidate:function(e){D((Number(e)-1)%B.length)},onIncrement:function(){D((F+1)%B.length)},onDecrement:function(){D((F-1+B.length)%B.length)},incrementButtonAriaLabel:"Increase value by 1",decrementButtonAriaLabel:"Decrease value by 1"})),u.a.createElement("div",{style:{display:"flex",padding:"1em"}},u.a.createElement(un,{dataSource:G,threshold:c,keyField:"type",valueField:"significance"}),u.a.createElement("div",null,G.length>0&&G.filter((function(e){return e.significance>=c})).map((function(e){return u.a.createElement(mn,{color:pn[e.type]},e.type)})),B[F]&&u.a.createElement("p",{className:"state-description"},"Dimensions are ",B[F].dimensions,", and measures are ",B[F].measures,". ",u.a.createElement("br",null),"There is a significance of",(100*B[F].significance).toFixed(2),"% that there exits a ",B[F].type," in the graph. ",u.a.createElement("br",null),JSON.stringify(B[F].description)))),u.a.createElement("div",null))),B.length>0&&null!==K&&u.a.createElement("div",null,u.a.createElement(Te,{aggregator:b.aggregator,defaultAggregated:b.defaultAggregated,defaultStack:b.defaultStack,dimensions:K.dimensions,measures:K.measures,dataSource:T,schema:K.schema,fieldFeatures:K.fieldFeatures}))),0===T.length&&u.a.createElement("div",{className:"card"},u.a.createElement("p",null,"Dev Page now is testing for different types of insight worker.",u.a.createElement("br",null),"If you see this hint, it means you have not upload dataSource or not click the 'extract insights' button in dataSource page which will produce a cooked dataSource for dev page.")))},hn=n(177),yn=function(e){var t=Object(s.useRef)(null),n=Object(s.useState)(!1),a=Object(m.a)(n,2),r=a[0],i=a[1],o=Q(),c=Object(m.a)(o,2),l=c[0],d=c[1];return u.a.createElement("div",null,u.a.createElement("div",{ref:t},u.a.createElement(hn.a,{text:"Preference",iconProps:{iconName:"PlayerSettings"},onClick:function(){i(!0)}})),r&&u.a.createElement(At.a,{target:t.current,directionalHint:it.a.bottomLeftEdge,onDismiss:function(){i(!1)}},u.a.createElement("div",{style:{padding:"1rem"}},u.a.createElement(Kt.a,{label:"Be Cool",checked:l.beCool,onText:"On",offText:"Off",onChange:function(e,t){d((function(e){e.beCool=t||!1}))}}),u.a.createElement(Kt.a,{label:"Use Server",disabled:!0,checked:l.useServer,onText:"On",offText:"Off",onChange:function(e,t){d((function(e){e.useServer=t||!1}))}}))))},bn=["DataSource","NoteBook","Explore","DashBoard","Dev"].map((function(e,t){return{title:e,itemKey:"pivot-"+(t+1)}}));function xn(){var e,t=Q(),n=Object(m.a)(t,1)[0],a=oe({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1},current:{pivotKey:bn[0].itemKey}}),r=Object(m.a)(a,2),i=r[0],o=r[1];return u.a.createElement("div",null,u.a.createElement("div",{className:"header-bar"},u.a.createElement("div",{className:"ms-Grid-row"},u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg1"},u.a.createElement("a",{href:"https://github.com/ObservedObserver/visual-insights",className:"logo"},u.a.createElement("img",{src:(e=n.beCool,e?le.a:se.a),alt:"rath"}))),u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg8"},u.a.createElement(Z.a,{selectedKey:i.current.pivotKey,onLinkClick:function(e){e&&e.props.itemKey&&o((function(t){t.current.pivotKey=e.props.itemKey}))},headersOnly:!0},bn.map((function(e){return u.a.createElement(ee.a,{key:e.itemKey,headerText:e.title,itemKey:e.itemKey})})))),u.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg3"},u.a.createElement("div",{className:"header-toolbar"},u.a.createElement(yn,null))))),"pivot-3"===i.current.pivotKey&&u.a.createElement(St,{subspaceList:n.subspaceList,dataSource:n.cookedDataSource,summary:n.summary}),"pivot-1"===i.current.pivotKey&&u.a.createElement($t,{onExtractInsights:function(){o((function(e){e.current.pivotKey="pivot-2",e.show.insightBoard=!0}))}}),"pivot-2"===i.current.pivotKey&&u.a.createElement("div",{className:"content-container"},u.a.createElement("div",{className:"card"},u.a.createElement(Gt,{summary:n.summary,subspaceList:n.subspaceList,dataSource:n.cookedDataSource}))),"pivot-4"===i.current.pivotKey&&u.a.createElement(on,null),"pivot-5"===i.current.pivotKey&&u.a.createElement(vn,null))}var En=n(170);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(En.a)(),d.a.render(u.a.createElement((function(){return u.a.createElement(_,null,u.a.createElement(xn,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[182,1,2]]]);
//# sourceMappingURL=main.8f5258e0.chunk.js.map