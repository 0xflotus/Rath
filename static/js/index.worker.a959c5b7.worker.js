!function(t){var e={};function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(r,a,function(e){return t[e]}.bind(null,a));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=82)}([function(t,e,n){t.exports=n(59)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(22);function a(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(r.a)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){u=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw o}}}}},function(t,e,n){"use strict";function r(t,e,n,r,a,i,o){try{var s=t[i](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,a)}function a(t){return function(){var e=this,n=arguments;return new Promise((function(a,i){var o=t.apply(e,n);function s(t){r(o,a,i,s,u,"next",t)}function u(t){r(o,a,i,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"m",(function(){return s})),n.d(e,"i",(function(){return f})),n.d(e,"f",(function(){return l})),n.d(e,"k",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"g",(function(){return d})),n.d(e,"l",(function(){return g})),n.d(e,"h",(function(){return x})),n.d(e,"p",(function(){return k})),n.d(e,"e",(function(){return j})),n.d(e,"q",(function(){return M})),n.d(e,"a",(function(){return E})),n.d(e,"b",(function(){return I})),n.d(e,"o",(function(){return N})),n.d(e,"j",(function(){return T})),n.d(e,"n",(function(){return C}));var r=n(10),a=n(1);function i(t,e,n){if("undefined"===typeof t||"undefined"===typeof e||"undefined"===typeof n)return 0;var i,o=new Map,s=new Map,u=0,c=Object(a.a)(e);try{for(c.s();!(i=c.n()).done;){var f=i.value;o.set(f,0)}}catch(L){c.e(L)}finally{c.f()}var l,h=Object(a.a)(n);try{for(h.s();!(l=h.n()).done;){var p=l.value;s.set(p,0)}}catch(L){h.e(L)}finally{h.f()}var d,v=Object(a.a)(t);try{for(v.s();!(d=v.n()).done;){var m,g=Object(r.a)(d.value,2),b=g[0],y=g[1],w=Object(a.a)(y);try{for(w.s();!(m=w.n()).done;){var O=Object(r.a)(m.value,2),S=O[0],x=O[1];o.set(b,o.get(b)+x),s.set(S,s.get(S)+x),u+=x}}catch(L){w.e(L)}finally{w.f()}}}catch(L){v.e(L)}finally{v.f()}var k,j=0,M=Object(a.a)(t);try{for(M.s();!(k=M.n()).done;){var _,E=Object(r.a)(k.value,2),D=E[0],I=E[1],N=Object(a.a)(I);try{for(N.s();!(_=N.n()).done;){var T=Object(r.a)(_.value,2),C=T[0],A=T[1],R=o.get(D)*s.get(C)/u;j+=Math.pow(A-R,2)/R}}catch(L){N.e(L)}finally{N.f()}}}catch(L){M.e(L)}finally{M.f()}return j}var o=function(t,e,n){for(var r=new Set,a=new Set,o=new Map,s=t.length,u=0;u<s;u++){var c=t[u];r.add(c[e]),a.add(c[n]),o.has(c[e])||o.set(c[e],new Map);var f=o.get(c[e]);f.has(c[n])||f.set(c[n],0),f.set(c[n],f.get(c[n])+1)}var l=i(o,r,a);return Math.sqrt(l/(t.length*Math.min(r.size-1,a.size-1)))};var s=function(t,e,n){var r=u(t.map((function(t){return t[e]})))/t.length,a=u(t.map((function(t){return t[n]})))/t.length;return u(t.map((function(t){return(t[e]-r)*(t[n]-a)})))/Math.sqrt(u(t.map((function(t){return Math.pow(t[e]-r,2)})))*u(t.map((function(t){return Math.pow(t[n]-a,2)}))))};function u(t){for(var e=0,n=0,r=t.length;n<r;n++)e+=t[n];return e}var c=n(4);function f(t){return t.map((function(t){return Math.abs(t)})).filter((function(t){return 0!==t}))}function l(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,r=[],a=function e(n,a,i){a.length!==i?n>=t.length||(e(n+1,[].concat(Object(c.a)(a),[t[n]]),i),e(n+1,a,i)):r.push(Object(c.a)(a))},i=e;i<=n;i++)a(0,[],i);return r}function h(t){var e,n=0,r=Object(a.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=i}}catch(o){r.e(o)}finally{r.f()}return t.map((function(t){return t/n}))}var p=function(t){var e,n=0,r=Object(a.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=i*Math.log2(i)}}catch(o){r.e(o)}finally{r.f()}return-n};function d(t,e){var n,r=-1/0,i=1/0,o=Object(a.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;r=Math.max(s[e],r),i=Math.min(s[e],i)}}catch(u){o.e(u)}finally{o.f()}return[i,r]}var v=n(7),m=n(8),g=function(){function t(e,n,r){Object(v.a)(this,t),this.dataSource=e,this.X=n,this.Y=r,this.normalizedDataSource=e}return Object(m.a)(t,[{key:"normalizeDimensions",value:function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(n){t.forEach((function(t,r){var a=(n[t]||"others").toString();e.valueSets[r].has(a)||e.valueSets[r].set(a,e.valueSets[r].size)}))})),this.dataSource.forEach((function(n){var r=e.normalizeRecord(n,t);e.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t,e){var n=this,r={};return Object.keys(t).forEach((function(e){r[e]=t[e]})),e.forEach((function(e,a){var i=(t[e]||"others").toString();r[e]=n.valueSets[a].get(i)})),r}},{key:"mean",value:function(){var t=this,e=0,n=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(r,a){e+=r[t.X],n+=r[t.Y]})),e/=this.normalizedDataSource.length,n/=this.normalizedDataSource.length),[e,n]}},{key:"getRegressionEquation",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,n=this.mean(),a=Object(r.a)(n,2),i=a[0],o=a[1],s=0,u=0;return this.normalizedDataSource.forEach((function(e){s+=(e[t.X]-i)*(e[t.Y]-o),u+=Math.pow(e[t.X]-i,2)})),[o-i*(e=s/u),e]}},{key:"r_squared",value:function(){var t=this,e=this.mean(),n=Object(r.a)(e,2)[1],a=this.getRegressionEquation(),i=Object(r.a)(a,2),o=i[0],s=i[1],u=0,c=0;return this.normalizedDataSource.forEach((function(e){var r=e[t.X],a=e[t.Y],i=r*s+o;u+=Math.pow(i-n,2),c+=Math.pow(a-n,2)})),u/c}},{key:"cumulativeLogisticDistribution",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:"pValue",value:function(){var t=this.getRegressionEquation(),e=Object(r.a)(t,2)[1],n=this.cumulativeLogisticDistribution(Math.abs(e));return n>.5?2*(1-n):2*n}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),b=(n(5),n(26)),y=n(25),w="_@_",O={sum:b.sum,max:b.max,mean:b.mean,min:b.min,count:function(t){return t.length}};function S(t){return O[t]||b.sum}function x(t,e){var n,r=new Map,i=Object(a.a)(t);try{var o=function(){var t=n.value,a=e.map((function(e){return t[e]})).join(w);r.has(a)||r.set(a,[]),r.get(a).push(t)};for(i.s();!(n=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}return r}function k(t){var e,n=t.dataSource,i=t.dimensions,o=t.measures,s=t.ops,u=x(n,i),c=[],f=Object(a.a)(u);try{var l=function(){var t=Object(r.a)(e.value,2),n=t[0],a=t[1],u={groupDict:{},stat:{}};o.forEach((function(t,e){u.stat[t]={},s.forEach((function(e){var n=S(e);u.stat[t][e]=n(a.map((function(e){return e[t]})))}))}));var f=n.split(w);i.forEach((function(t,e){u.groupDict[t]=f[e]})),c.push(u)};for(f.s();!(e=f.n()).done;)l()}catch(h){f.e(h)}finally{f.f()}return c}function j(t){return t.join(w)}function M(t){var e,n=t.cuboidState,i=t.dimensions,o=t.measures,s=t.ops,u=function(t,e){var n,r=new Map,i=Object(a.a)(t);try{var o=function(){var t=n.value,a=e.map((function(e){return t.groupDict[e]})).join(w);r.has(a)||r.set(a,[]),r.get(a).push(t)};for(i.s();!(n=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}return r}(n,i),c=[],f=s.filter((function(t){return!["sum","count","mean","dist"].includes(t)})),l=f.map((function(t){return S(t)})),h=Object(a.a)(u);try{var p=function(){for(var t=Object(r.a)(e.value,2),n=t[0],a=t[1],s={groupDict:{},stat:{}},u=function(t){var e=o[t];s.stat[e]={},l.forEach((function(t,n){var r=f[n];s.stat[e][r]=t(a.map((function(t){return t.stat[e][r]})))})),s.stat[e].sum=Object(y.c)(a,e,"sum"),s.stat[e].count=Object(y.c)(a,e,"count"),s.stat[e].mean=s.stat[e].sum/s.stat[e].count,s.stat[e].dist=Object(y.b)(a,e,"dist")},h=0;h<o.length;h++)u(h);for(var p=n.split(w),d=0;d<i.length;d++)s.groupDict[i[d]]=p[d];c.push(s)};for(h.s();!(e=h.n()).done;)p()}catch(d){h.e(d)}finally{h.f()}return c}var _=16;function E(t){for(var e=Math.max.apply(Math,Object(c.a)(t)),n=Math.min.apply(Math,Object(c.a)(t)),r=(e-n)/_,a=new Array(17).fill(0),i=0;i<t.length;i++){a[Math.floor((t[i]-n)/r)%17]++}return a[15]+=a[16],a.slice(0,_)}function D(t,e,n){for(var r=(n-e)/_,a=new Array(17).fill(0),i=0;i<t.length;i++){a[Math.floor((t[i]-e)/r)%17]++}return a[15]+=a[16],a.slice(0,_)}function I(t){for(var e=Math.max.apply(Math,Object(c.a)(t)),n=Math.min.apply(Math,Object(c.a)(t)),r=(e-n)/_,a=[],i=0;i<t.length;i++){var o=Math.floor((t[i]-n)/r);o===_&&(o=15),a.push(o)}return a}function N(t){for(var e=0,n=[],r=0;r<t.length;r++)e+=t[r];for(var a=0;a<t.length;a++)n.push(t[a]/e);return n}function T(t,e){for(var n=0,r=Math.min.apply(Math,Object(c.a)(e)),a=Math.max.apply(Math,Object(c.a)(e)),i=p(N(D(e,r,a).filter((function(t){return t>0})))),o=function(i){var o=e.filter((function(e,n){return t[n]===i})),s=D(o,r,a).filter((function(t){return t>0})),u=p(N(s)),c=o.length/e.length;n+=c*u},s=0;s<_;s++)o(s);return(i-n)/Math.log2(_)}function C(t,e){for(var n=0,r=Math.min.apply(Math,Object(c.a)(e)),a=Math.max.apply(Math,Object(c.a)(e)),i=p(N(D(e,r,a).filter((function(t){return t>0})))),o=new Set(t),s=Object(c.a)(o),u=[],f=function(n){var i=e.filter((function(e,r){return t[r]===s[n]})),o=D(i,r,a);u.push({freq:i.length,bins:o})},l=0;l<s.length;l++)f(l);for(var h=0;h<u.length;h++){var d=u[h],v=d.bins,m=d.freq,g=p(N(v.filter((function(t){return t>0}))));n+=m/e.length*g}return i-n}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(28);var a=n(22);function i(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(a.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(29);function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"e",(function(){return a})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return u}));var r={maxDimensionNumber:8,maxMeasureNumber:6},a=.5772156649,i=20,o=8,s=2*o,u="0.8.8"},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u})),n.d(e,"h",(function(){return p})),n.d(e,"c",(function(){return v})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return f})),n.d(e,"g",(function(){return h}));var r=n(29),a=(n(10),n(4)),i=n(1),o=n(5);function s(t){return JSON.parse(JSON.stringify(t))}function u(t){return t.map((function(t){return Object(o.a)({},t)}))}function c(t,e){return t.every((function(t){return"string"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))}function f(t,e){return t.every((function(t){return!isNaN(+t[e])||"undefined"===typeof t[e]||null===t[e]}))}var l=[/^[0-9]{2,4}[-/][0-9]{1,2}([-/][0-9]{1,2})?$/,/^[0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4}$/,/^[1-2][0-9]{3}[0-9]{2}[0-9]{2}$/,/^[0-9]{2,4}[-/][0-9]{1,2}[-/][0-9]{1,2} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/];function h(t,e){return t.every((function(t){return!isNaN(Number(t[e]))&&Number(t[e])>=1800&&Number(t[e])<=2200||("string"===typeof t[e]&&l.some((function(n){return n.test(t[e])}))||"undefined"===typeof t[e]||null===t[e])}))}function p(t,e){var n,r=new Map,o=Object(i.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value[e];r.has(s)||r.set(s,0),r.set(s,r.get(s)+1)}}catch(u){o.e(u)}finally{o.f()}return Object(a.a)(r.entries())}function d(t){for(var e=t.dataSource,n=t.field,r=t.newField,i=void 0===r?"".concat(n,"(con-group)"):r,o=t.groupNumber,s=e.map((function(t){return t[n]})),u=Math.max.apply(Math,Object(a.a)(s)),c=Math.min.apply(Math,Object(a.a)(s)),f=(u-c)/o,l=[],h=0;h<o;h++){var p=c+h*f,d=c+(h+1)*f;l.push([p,d])}l[0][0]=-1/0,l[l.length-1][1]=1/0;for(var v=Math.max(1,Math.log10(Math.abs(c))-Math.log10(f))+1,m=function(t){var r=e[t],a=l.findIndex((function(t){return t[0]<=r[n]&&r[n]<t[1]})),o=l[a];r[i]="undefined"!==typeof o?"".concat(a+1,":[").concat(Number(o[0].toPrecision(v)),", ").concat(Number(o[1].toPrecision(v)),")"):"null"},g=0;g<e.length;g++)m(g);return e}function v(t){var e=t.dataSource,n=t.field,a=t.newField,s=void 0===a?"".concat(n,"(cat-group)"):a,u=t.groupNumber,c=p(e,n);c.sort((function(t,e){return e[1]-t[1]}));var f=c.map((function(t){return t[1]}));u=c.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<c.length-2;h++)if(5*c[h][1]>=f[h+1]&&c[h+1][1]/5<f[h+2]){u=h+2;break}if(u===c.length)return e.map((function(t){return Object(o.a)(Object(o.a)({},t),{},Object(r.a)({},s,t[n]))}));for(var d=new Set,v=u-1;v<c.length;v++)d.add(c[v][0]);var m,g=Object(i.a)(e);try{for(g.s();!(m=g.n()).done;){var b=m.value;d.has(b[n])?b[s]="others":b[s]=b[n]}}catch(y){g.e(y)}finally{g.f()}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(22);function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(u){a=!0,i=u}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n}}(t,e)||Object(r.a)(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return b}));var r={};n.r(r),n.d(r,"kruskal",(function(){return h})),n.d(r,"kruskalWithFullMST",(function(){return l}));var a=n(4),i=n(1);function o(t){for(var e=[],n=0;n<t.length;n++)for(var r=n+1;r<t[n].length;r++)e.push([[n,r],Math.abs(t[n][r])]);return e}function s(t,e){return t[e]===e?e:t[e]=s(t,t[e])}function u(t,e,n){var r=s(t,e),a=s(t,n);t[r]=a,s(t,e),s(t,n)}function c(t,e,n){return t[n]===n?n:(t[n]=c(t,e,t[n]),e[n]=e[t[n]],t[n])}function f(t,e,n,r){var a=c(t,e,n),i=c(t,e,r),o=e[a],s=e[i];t[a]=i,e[a]=e[i]=o+s,c(t,e,n),c(t,e,r)}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=o(t);r.sort((function(t,e){return e[1]-t[1]}));var c,f=[],l=t.map((function(t,e){return e})),h=Object(a.a)(l),p=!1,d=Object(i.a)(r);try{for(d.s();!(c=d.n()).done;){var v=c.value;s(l,v[0][0])!==s(l,v[0][1])&&(u(l,v[0][0],v[0][1]),f.push([v[0],v[1],p]));for(var m=0;m<l.length;m++)l[m]=s(l,m);var g=new Set(l);if(g.size<=e||v[1]<n?p=!0:h=Object(a.a)(l),1===g.size)break}}catch(b){d.e(b)}finally{d.f()}return{edgesInMST:f,groups:h}}var h=function(t){var e,n=t.matrix,r=t.measures,a=(t.method,t.groupMaxSize),l=void 0===a?4:a,h=t.limitSize,p=void 0!==h&&h,d=t.threshold,v=void 0===d?0:d;e=p?function(t,e){var n=o(t);n.sort((function(t,e){return e[1]-t[1]}));var r,a=t.map((function(t,e){return e})),s=t.map((function(){return 1})),u=Object(i.a)(n);try{for(u.s();!(r=u.n()).done;){var l=r.value;if(c(a,s,l[0][0])!==c(a,s,l[0][1])){if(s[l[0][0]]+s[l[0][1]]>e)continue;f(a,s,l[0][0],l[0][1])}for(var h=0;h<a.length;h++)a[h]=c(a,s,h);if(1===new Set(a).size)break}}catch(v){u.e(v)}finally{u.f()}for(var p=new Map,d=0;d<a.length;d++)p.has(a[d])||p.set(a[d],[]),p.get(a[d]).push(d);return p}(n,l):function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=o(t);r.sort((function(t,e){return e[1]-t[1]}));var a,c=t.map((function(t,e){return e})),f=Object(i.a)(r);try{for(f.s();!(a=f.n()).done;){var l=a.value;s(c,l[0][0])!==s(c,l[0][1])&&u(c,l[0][0],l[0][1]);for(var h=0;h<c.length;h++)c[h]=s(c,h);if(new Set(c).size<=e||l[1]<n)break}}catch(v){f.e(v)}finally{f.f()}for(var p=new Map,d=0;d<c.length;d++)p.has(c[d])||p.set(c[d],[]),p.get(c[d]).push(d);return p}(n,l,v);var m,g=[],b=Object(i.a)(e.values());try{for(b.s();!(m=b.n()).done;){var y=m.value;g.push(y.map((function(t){return r[t]})))}}catch(w){b.e(w)}finally{b.f()}return g},p=n(37),d=n(7),v=n(8),m=n(36),g=n(6),b={IsolationForest:function(){function t(e,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;Object(d.a)(this,t),this.dimensions=e,this.measures=n,this.dataSource=r,r.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(r.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return Object(v.a)(t,[{key:"normalizeDimensions",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(n,r){var a=(e[n]||"others").toString();t.valueSets[r].has(a)||t.valueSets[r].set(a,t.valueSets[r].size)})),t.measures.forEach((function(n,r){var a=e[n];"number"===typeof a&&(t.ranges[r][0]=Math.min(t.ranges[r][0],a),t.ranges[r][1]=Math.max(t.ranges[r][1],a))}))})),this.dataSource.forEach((function(e){var n=t.normalizeRecord(e);t.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,n={};return this.measures.forEach((function(e){n[e]=t[e]})),this.dimensions.forEach((function(r,a){var i=(t[r]||"others").toString();n[r]=e.valueSets[a].get(i)})),n}},{key:"buildIsolationTree",value:function(t,e){if(e>=this.limitHeight||t.length<=1)return null;var n=Math.random(),r=this.measures[0]||this.dimensions[0],a=this.dimensions.length,o=this.measures.length,s=0;if(n>=a/(a+o)){var u=Math.floor(Math.random()*o)%o;r=this.measures[u],s=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var c=Math.floor(Math.random()*a)%a;r=this.dimensions[c],s=Math.floor(this.valueSets[c].size*Math.random())%this.valueSets[c].size}var f,l=[],h=[],p=Object(i.a)(t);try{for(p.s();!(f=p.n()).done;){var d=f.value;d[r]<s?l.push(d):h.push(d)}}catch(m){p.e(m)}finally{p.f()}var v={field:r,value:s,size:t.length};return v.left=this.buildIsolationTree(l,e+1),v.right=this.buildIsolationTree(h,e+1),v}},{key:"AFS",value:function(t){return t>2?2*(Math.log(t-1)+g.e)-2*(t-1)/t:2===t?1:0}},{key:"getPathLength",value:function(t,e,n,r){return null===e?n+this.AFS(r):t[e.field]<e.value?this.getPathLength(t,e.left,n+1,e.size):this.getPathLength(t,e.right,n+1,e.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=Object(m.a)(this.normalizedDataSource,this.sampleSize),n=this.buildIsolationTree(e,0);this.iForest.push(n)}return this.iForest}},{key:"estimateOutierScore",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var n,r=0;t.iForest.forEach((function(n){r+=t.getPathLength(e,n,0,t.sampleSize)})),r/=t.iForest.length,n=Math.pow(2,-r/t.AFS(t.sampleSize)),t.recordScoreList.push(n)})),this.recordScoreList}}]),t}()};p.a},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var r=.3,a={strong:.5,weak:.3}},function(t,e,n){"use strict";var r,a;n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a})),function(t){t.LocalCache="local_cahce",t.LocalDisk="local_disk"}(r||(r={})),function(t){t.LocalCache="local_cache",t.LocalDisk="local_disk",t.LocalMix="local_mix"}(a||(a={}))},function(t,e,n){"use strict";var r=n(46),a=Object.prototype.toString;function i(t){return"[object Array]"===a.call(t)}function o(t){return"undefined"===typeof t}function s(t){return null!==t&&"object"===typeof t}function u(t){if("[object Object]"!==a.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===a.call(t)}function f(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),i(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&e.call(null,t[a],a,t)}t.exports={isArray:i,isArrayBuffer:function(t){return"[object ArrayBuffer]"===a.call(t)},isBuffer:function(t){return null!==t&&!o(t)&&null!==t.constructor&&!o(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:s,isPlainObject:u,isUndefined:o,isDate:function(t){return"[object Date]"===a.call(t)},isFile:function(t){return"[object File]"===a.call(t)},isBlob:function(t){return"[object Blob]"===a.call(t)},isFunction:c,isStream:function(t){return s(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function t(){var e={};function n(n,r){u(e[r])&&u(n)?e[r]=t(e[r],n):u(n)?e[r]=t({},n):i(n)?e[r]=n.slice():e[r]=n}for(var r=0,a=arguments.length;r<a;r++)f(arguments[r],n);return e},extend:function(t,e,n){return f(e,(function(e,a){t[a]=n&&"function"===typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},function(t,e,n){"use strict";function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return!e||"object"!==a(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=r(t);if(e){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}n.d(e,"a",(function(){return a}))},function(t,e,n){"use strict";n.r(e),n.d(e,"getDimCorrelationMatrix",(function(){return c})),n.d(e,"getMeaCorrelationMatrix",(function(){return f})),n.d(e,"getDimClusterGroups",(function(){return l})),n.d(e,"getDimSetsBasedOnClusterGroups",(function(){return h})),n.d(e,"getMeaSetsBasedOnClusterGroups",(function(){return p})),n.d(e,"subspaceSearching",(function(){return d})),n.d(e,"getRelatedVertices",(function(){return v}));var r=n(4),a=n(1),i=n(3),o=n(12),s=n(11),u=n(6);function c(t,e){for(var n=e.map((function(t){return e.map((function(t){return 0}))})),r=0;r<e.length;r++){n[r][r]=1;for(var a=r+1;a<e.length;a++)n[r][a]=n[a][r]=Object(i.c)(t,e[r],e[a])}return n}function f(t,e){for(var n=e.map((function(t){return e.map((function(t){return 0}))})),r=0;r<e.length;r++){n[r][r]=1;for(var a=r+1;a<e.length;a++){var o=Object(i.m)(t,e[r],e[a]);n[a][r]=n[r][a]=o}}return n}function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a,r=arguments.length>3?arguments[3]:void 0,a=4,i=c(t,e),u=s.a.kruskal({matrix:i,measures:e,groupMaxSize:r||Math.round(e.length/a),threshold:n});return u}function h(t,e,n,o){var s,c=[],f=l(t,e,n),h=Object(a.a)(f);try{for(h.s();!(s=h.n()).done;){var p=s.value,d=Object(i.f)(p,1,o||u.b.maxDimensionNumber);c.push.apply(c,Object(r.a)(d))}}catch(v){h.e(v)}finally{h.f()}return c}function p(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=3,i=f(t,e),u=s.a.kruskal({matrix:i,measures:e,groupMaxSize:r||Math.round(e.length/a),threshold:n||o.b.strong});return u}function d(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?h(t,e):Object(i.f)(e)}function v(t,e,n,r){for(var a=e.map((function(t){return n.includes(t)})),i=[],o=[],s=0;s<t.length;s++)if(a[s])for(var u=0;u<t[s].length;u++)a[u]||i.push([t[s][u],[s,u]]);i.sort((function(t,e){return e[0]-t[0]}));for(var c=0;c<i.length;c++){var f=i[c][1][1];a[f]||(a[f]=!0,o.push({field:e[f],corValue:i[c][0]}))}return o.slice(0,r||o.length)}},function(t,e,n){"use strict";n(9),n(42),n(27);var r=n(55);n.d(e,"Insight",(function(){return r}));n(44);var a=n(24);n.d(e,"UnivariateSummary",(function(){return a}));n(45),n(36),n(3);var i=n(56);n.d(e,"Computation",(function(){return i}));var o=n(11);n.d(e,"Cluster",(function(){return o.a}));n(13),n(54),n(57);console.log("This is a test version of visual-insights")},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s}));var r=n(5),a={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function i(t,e){for(var n=e.length-1;n>=0;n--)if(e[n].semanticType===t&&!e[n].choosen)return e[n];return!1}function o(t){for(var e={},n={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},a=t.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{choosen:!1})})),o=[["quantitative",["position","size","color","opacity","highFacets","filter"]],["temporal",["position","size","opacity","filter"]],["ordinal",["position","color","opacity","facets","size","filter","highFacets"]],["nominal",["position","color","facets","shape","filter","hightFacets"]]],s=a.length,u=0;u<o.length&&s>0;u++)for(var c=o[u][0],f=o[u][1],l=0;l<f.length&&s>0;l++)for(var h=f[l],p=void 0;n[h]>0&&(p=i(c,a));)"undefined"===typeof e[h]&&(e[h]=[]),e[h].push(p.key),n[h]--,s--,p.choosen=!0;return e}function s(t,e){var n=o(t.sort((function(t,e){return t.impurity-e.impurity}))),r=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),i=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(n.position&&2===n.position.length)if(r.has(n.position[0])&&i.has(n.position[1])||r.has(n.position[1])&&i.has(n.position[0])){var s=r.has(n.position[0])?0:1,u=n.position[s],c=n.position[(s+1)%2];n.position=[u,c];var f=t.find((function(t){return t.key===u})),l=f?f.features.unique:0;n.geomType=["interval","line","area"].filter((function(t){return l>=a[t][0]&&l<=a[t][1]})),"nominal"===f.semanticType&&(n.geomType=["interval"])}else n.geomType=["point","density"].filter((function(t){return e.length>=a[t][0]&&e.length<=a[t][1]}));else n.geomType=["point"];return{schema:n,dataView:e}}},function(t,e,n){(function(e){t.exports=function t(e,n,r){function a(o,s){if(!n[o]){if(!e[o]){if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,(function(t){var n=e[o][1][t];return a(n||t)}),c,c.exports,t,e,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,n,r){(function(t){"use strict";var e,r,a=t.MutationObserver||t.WebKitMutationObserver;if(a){var i=0,o=new a(f),s=t.document.createTextNode("");o.observe(s,{characterData:!0}),e=function(){s.data=i=++i%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){f(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(f,0)};else{var u=new t.MessageChannel;u.port1.onmessage=f,e=function(){u.port2.postMessage(0)}}var c=[];function f(){var t,e;r=!0;for(var n=c.length;n;){for(e=c,c=[],t=-1;++t<n;)e[t]();n=c.length}r=!1}function l(t){1!==c.push(t)||r||e()}n.exports=l}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(t,e,n){"use strict";var r=t(1);function a(){}var i={},o=["REJECTED"],s=["FULFILLED"],u=["PENDING"];function c(t){if("function"!==typeof t)throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,t!==a&&p(this,t)}function f(t,e,n){this.promise=t,"function"===typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(t,e,n){r((function(){var r;try{r=e(n)}catch(a){return i.reject(t,a)}r===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,r)}))}function h(t){var e=t&&t.then;if(t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof e)return function(){e.apply(t,arguments)}}function p(t,e){var n=!1;function r(e){n||(n=!0,i.reject(t,e))}function a(e){n||(n=!0,i.resolve(t,e))}function o(){e(a,r)}var s=d(o);"error"===s.status&&r(s.value)}function d(t,e){var n={};try{n.value=t(e),n.status="success"}catch(r){n.status="error",n.value=r}return n}function v(t){return t instanceof this?t:i.resolve(new this(a),t)}function m(t){var e=new this(a);return i.reject(e,t)}function g(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),s=0,u=-1,c=new this(a);++u<n;)f(t[u],u);return c;function f(t,a){function u(t){o[a]=t,++s!==n||r||(r=!0,i.resolve(c,o))}e.resolve(t).then(u,(function(t){r||(r=!0,i.reject(c,t))}))}}function b(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,s=new this(a);++o<n;)u(t[o]);return s;function u(t){e.resolve(t).then((function(t){r||(r=!0,i.resolve(s,t))}),(function(t){r||(r=!0,i.reject(s,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!==typeof t&&this.state===s||"function"!==typeof e&&this.state===o)return this;var n=new this.constructor(a);return this.state!==u?l(n,this.state===s?t:e,this.outcome):this.queue.push(new f(n,t,e)),n},f.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},f.prototype.otherCallFulfilled=function(t){l(this.promise,this.onFulfilled,t)},f.prototype.callRejected=function(t){i.reject(this.promise,t)},f.prototype.otherCallRejected=function(t){l(this.promise,this.onRejected,t)},i.resolve=function(t,e){var n=d(h,e);if("error"===n.status)return i.reject(t,n.value);var r=n.value;if(r)p(t,r);else{t.state=s,t.outcome=e;for(var a=-1,o=t.queue.length;++a<o;)t.queue[a].callFulfilled(e)}return t},i.reject=function(t,e){t.state=o,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},c.resolve=v,c.reject=m,c.all=g,c.race=b},{1:1}],3:[function(t,n,r){(function(e){"use strict";"function"!==typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(t,e,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(t){return}}var o=i();function s(){try{if(!o||!o.open)return!1;var t="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}function u(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<t.length;r+=1)n.append(t[r]);return n.getBlob(e.type)}}"undefined"===typeof Promise&&t(3);var c=Promise;function f(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function l(t,e,n){"function"===typeof e&&t.then(e),"function"===typeof n&&t.catch(n)}function h(t){return"string"!==typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function p(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",v=void 0,m={},g=Object.prototype.toString,b="readonly",y="readwrite";function w(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),a=0;a<e;a++)r[a]=t.charCodeAt(a);return n}function O(t){return new c((function(e){var n=t.transaction(d,y),r=u([""]);n.objectStore(d).put(r,"key"),n.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},n.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function S(t){return"boolean"===typeof v?c.resolve(v):O(t).then((function(t){return v=t}))}function x(t){var e=m[t.name],n={};n.promise=new c((function(t,e){n.resolve=t,n.reject=e})),e.deferredOperations.push(n),e.dbReady?e.dbReady=e.dbReady.then((function(){return n.promise})):e.dbReady=n.promise}function k(t){var e=m[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function j(t,e){var n=m[t.name].deferredOperations.pop();if(n)return n.reject(e),n.promise}function M(t,e){return new c((function(n,r){if(m[t.name]=m[t.name]||L(),t.db){if(!e)return n(t.db);x(t),t.db.close()}var a=[t.name];e&&a.push(t.version);var i=o.open.apply(o,a);e&&(i.onupgradeneeded=function(e){var n=i.result;try{n.createObjectStore(t.storeName),e.oldVersion<=1&&n.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),r(i.error)},i.onsuccess=function(){var e=i.result;e.onversionchange=function(t){t.target.close()},n(e),k(t)}}))}function _(t){return M(t,!1)}function E(t){return M(t,!0)}function D(t,e){if(!t.db)return!0;var n=!t.db.objectStoreNames.contains(t.storeName),r=t.version<t.db.version,a=t.version>t.db.version;if(r&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),a||n){if(n){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function I(t){return new c((function(e,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");e({__local_forage_encoded_blob:!0,data:r,type:t.type})},r.readAsBinaryString(t)}))}function N(t){return u([w(atob(t.data))],{type:t.type})}function T(t){return t&&t.__local_forage_encoded_blob}function C(t){var e=this,n=e._initReady().then((function(){var t=m[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return l(n,t,t),n}function A(t){x(t);for(var e=m[t.name],n=e.forages,r=0;r<n.length;r++){var a=n[r];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return t.db=null,_(t).then((function(e){return t.db=e,D(t)?E(t):e})).then((function(r){t.db=e.db=r;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=r})).catch((function(e){throw j(t,e),e}))}function R(t,e,n,r){void 0===r&&(r=1);try{var a=t.db.transaction(t.storeName,e);n(null,a)}catch(i){if(r>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),E(t)})).then((function(){return A(t).then((function(){R(t,e,n,r-1)}))})).catch(n);n(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(t){var e=this,n={db:null};if(t)for(var r in t)n[r]=t[r];var a=m[n.name];a||(a=L(),m[n.name]=a),a.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=C);var i=[];function o(){return c.resolve()}for(var s=0;s<a.forages.length;s++){var u=a.forages[s];u!==e&&i.push(u._initReady().catch(o))}var f=a.forages.slice(0);return c.all(i).then((function(){return n.db=a.db,_(n)})).then((function(t){return n.db=t,D(n,e._defaultConfig.version)?E(n):t})).then((function(t){n.db=a.db=t,e._dbInfo=n;for(var r=0;r<f.length;r++){var i=f[r];i!==e&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function q(t,e){var n=this;t=h(t);var r=new c((function(e,r){n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).get(t);o.onsuccess=function(){var t=o.result;void 0===t&&(t=null),T(t)&&(t=N(t)),e(t)},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return f(r,e),r}function P(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;T(r)&&(r=N(r));var a=t(r,n.key,s++);void 0!==a?e(a):n.continue()}else e()},o.onerror=function(){r(o.error)}}catch(u){r(u)}}))})).catch(r)}));return f(r,e),r}function z(t,e,n){var r=this;t=h(t);var a=new c((function(n,a){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(e)?S(i.db).then((function(t){return t?e:I(e)})):e})).then((function(e){R(r._dbInfo,y,(function(i,o){if(i)return a(i);try{var s=o.objectStore(r._dbInfo.storeName);null===e&&(e=void 0);var u=s.put(e,t);o.oncomplete=function(){void 0===e&&(e=null),n(e)},o.onabort=o.onerror=function(){var t=u.error?u.error:u.transaction.error;a(t)}}catch(c){a(c)}}))})).catch(a)}));return f(a,n),a}function G(t,e){var n=this;t=h(t);var r=new c((function(e,r){n.ready().then((function(){R(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){r(o.error)},i.onabort=function(){var t=o.error?o.error:o.transaction.error;r(t)}}catch(s){r(s)}}))})).catch(r)}));return f(r,e),r}function $(t){var e=this,n=new c((function(t,n){e.ready().then((function(){R(e._dbInfo,y,(function(r,a){if(r)return n(r);try{var i=a.objectStore(e._dbInfo.storeName).clear();a.oncomplete=function(){t()},a.onabort=a.onerror=function(){var t=i.error?i.error:i.transaction.error;n(t)}}catch(o){n(o)}}))})).catch(n)}));return f(n,t),n}function B(t){var e=this,n=new c((function(t,n){e.ready().then((function(){R(e._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){n(i.error)}}catch(o){n(o)}}))})).catch(n)}));return f(n,t),n}function U(t,e){var n=this,r=new c((function(e,r){t<0?e(null):n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName),s=!1,u=o.openKeyCursor();u.onsuccess=function(){var n=u.result;n?0===t||s?e(n.key):(s=!0,n.advance(t)):e(null)},u.onerror=function(){r(u.error)}}catch(c){r(c)}}))})).catch(r)}));return f(r,e),r}function V(t){var e=this,n=new c((function(t,n){e.ready().then((function(){R(e._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(e._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var e=i.result;e?(o.push(e.key),e.continue()):t(o)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return f(n,t),n}function W(t,e){e=p.apply(this,arguments);var n=this.config();(t="function"!==typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,a=this;if(t.name){var i=t.name===n.name&&a._dbInfo.db?c.resolve(a._dbInfo.db):_(t).then((function(e){var n=m[t.name],r=n.forages;n.db=e;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=e;return e}));r=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var n=e.version+1;x(t);var r=m[t.name],a=r.forages;e.close();for(var i=0;i<a.length;i++){var s=a[i];s._dbInfo.db=null,s._dbInfo.version=n}return new c((function(e,r){var a=o.open(t.name,n);a.onerror=function(t){a.result.close(),r(t)},a.onupgradeneeded=function(){a.result.deleteObjectStore(t.storeName)},a.onsuccess=function(){var t=a.result;t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<a.length;e++){var n=a[e];n._dbInfo.db=t,k(n._dbInfo)}})).catch((function(e){throw(j(t,e)||c.resolve()).catch((function(){})),e}))}})):i.then((function(e){x(t);var n=m[t.name],r=n.forages;e.close();for(var a=0;a<r.length;a++)r[a]._dbInfo.db=null;return new c((function(e,n){var r=o.deleteDatabase(t.name);r.onerror=function(){var t=r.result;t&&t.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},r.onsuccess=function(){var t=r.result;t&&t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<r.length;e++)k(r[e]._dbInfo)})).catch((function(e){throw(j(t,e)||c.resolve()).catch((function(){})),e}))}))}else r=c.reject("Invalid arguments");return f(r,e),r}var Y={_driver:"asyncStorage",_initStorage:F,_support:s(),iterate:P,getItem:q,setItem:z,removeItem:G,clear:$,length:B,key:U,keys:V,dropInstance:W};function H(){return"function"===typeof openDatabase}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,tt="arbf",et="blob",nt="si08",rt="ui08",at="uic8",it="si16",ot="si32",st="ur16",ut="ui32",ct="fl32",ft="fl64",lt=Z+tt.length,ht=Object.prototype.toString;function pt(t){var e,n,r,a,i,o=.75*t.length,s=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c=new ArrayBuffer(o),f=new Uint8Array(c);for(e=0;e<s;e+=4)n=X.indexOf(t[e]),r=X.indexOf(t[e+1]),a=X.indexOf(t[e+2]),i=X.indexOf(t[e+3]),f[u++]=n<<2|r>>4,f[u++]=(15&r)<<4|a>>2,f[u++]=(3&a)<<6|63&i;return c}function dt(t){var e,n=new Uint8Array(t),r="";for(e=0;e<n.length;e+=3)r+=X[n[e]>>2],r+=X[(3&n[e])<<4|n[e+1]>>4],r+=X[(15&n[e+1])<<2|n[e+2]>>6],r+=X[63&n[e+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function vt(t,e){var n="";if(t&&(n=ht.call(t)),t&&("[object ArrayBuffer]"===n||t.buffer&&"[object ArrayBuffer]"===ht.call(t.buffer))){var r,a=Q;t instanceof ArrayBuffer?(r=t,a+=tt):(r=t.buffer,"[object Int8Array]"===n?a+=nt:"[object Uint8Array]"===n?a+=rt:"[object Uint8ClampedArray]"===n?a+=at:"[object Int16Array]"===n?a+=it:"[object Uint16Array]"===n?a+=st:"[object Int32Array]"===n?a+=ot:"[object Uint32Array]"===n?a+=ut:"[object Float32Array]"===n?a+=ct:"[object Float64Array]"===n?a+=ft:e(new Error("Failed to get type for BinaryArray"))),e(a+dt(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=J+t.type+"~"+dt(this.result);e(Q+et+n)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(o){console.error("Couldn't convert value into a JSON string: ",t),e(null,o)}}function mt(t){if(t.substring(0,Z)!==Q)return JSON.parse(t);var e,n=t.substring(lt),r=t.substring(Z,lt);if(r===et&&K.test(n)){var a=n.match(K);e=a[1],n=n.substring(a[0].length)}var i=pt(n);switch(r){case tt:return i;case et:return u([i],{type:e});case nt:return new Int8Array(i);case rt:return new Uint8Array(i);case at:return new Uint8ClampedArray(i);case it:return new Int16Array(i);case st:return new Uint16Array(i);case ot:return new Int32Array(i);case ut:return new Uint32Array(i);case ct:return new Float32Array(i);case ft:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var gt={serialize:vt,deserialize:mt,stringToBuffer:pt,bufferToString:dt};function bt(t,e,n,r){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function yt(t){var e=this,n={db:null};if(t)for(var r in t)n[r]="string"!==typeof t[r]?t[r].toString():t[r];var a=new c((function(t,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(a){return r(a)}n.db.transaction((function(a){bt(a,n,(function(){e._dbInfo=n,t()}),(function(t,e){r(e)}))}),r)}));return n.serializer=gt,a}function wt(t,e,n,r,a,i){t.executeSql(n,r,a,(function(t,o){o.code===o.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,s){s.rows.length?i(t,o):bt(t,e,(function(){t.executeSql(n,r,a,i)}),i)}),i):i(t,o)}),i)}function Ot(t,e){var n=this;t=h(t);var r=new c((function(e,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){wt(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,e),r}function St(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){wt(n,a,"SELECT * FROM "+a.storeName,[],(function(n,r){for(var i=r.rows,o=i.length,s=0;s<o;s++){var u=i.item(s),c=u.value;if(c&&(c=a.serializer.deserialize(c)),void 0!==(c=t(c,u.key,s+1)))return void e(c)}e()}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,e),r}function xt(t,e,n,r){var a=this;t=h(t);var i=new c((function(i,o){a.ready().then((function(){void 0===e&&(e=null);var s=e,u=a._dbInfo;u.serializer.serialize(e,(function(e,c){c?o(c):u.db.transaction((function(n){wt(n,u,"INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(s)}),(function(t,e){o(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(r>0)return void i(xt.apply(a,[t,s,n,r-1]));o(e)}}))}))})).catch(o)}));return f(i,n),i}function kt(t,e,n){return xt.apply(this,[t,e,n,1])}function jt(t,e){var n=this;t=h(t);var r=new c((function(e,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){wt(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,e),r}function Mt(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){wt(e,r,"DELETE FROM "+r.storeName,[],(function(){t()}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,t),n}function _t(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){wt(e,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(e,n){var r=n.rows.item(0).c;t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,t),n}function Et(t,e){var n=this,r=new c((function(e,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){wt(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,n){var r=n.rows.length?n.rows.item(0).key:null;e(r)}),(function(t,e){r(e)}))}))})).catch(r)}));return f(r,e),r}function Dt(t){var e=this,n=new c((function(t,n){e.ready().then((function(){var r=e._dbInfo;r.db.transaction((function(e){wt(e,r,"SELECT key FROM "+r.storeName,[],(function(e,n){for(var r=[],a=0;a<n.rows.length;a++)r.push(n.rows.item(a).key);t(r)}),(function(t,e){n(e)}))}))})).catch(n)}));return f(n,t),n}function It(t){return new c((function(e,n){t.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var a=[],i=0;i<r.rows.length;i++)a.push(r.rows.item(i).name);e({db:t,storeNames:a})}),(function(t,e){n(e)}))}),(function(t){n(t)}))}))}function Nt(t,e){e=p.apply(this,arguments);var n=this.config();(t="function"!==typeof t&&t||{}).name||(t.name=t.name||n.name,t.storeName=t.storeName||n.storeName);var r,a=this;return f(r=t.name?new c((function(e){var r;r=t.name===n.name?a._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:r,storeNames:[t.storeName]}):e(It(r))})).then((function(t){return new c((function(e,n){t.db.transaction((function(r){function a(t){return new c((function(e,n){r.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){n(e)}))}))}for(var i=[],o=0,s=t.storeNames.length;o<s;o++)i.push(a(t.storeNames[o]));c.all(i).then((function(){e()})).catch((function(t){n(t)}))}),(function(t){n(t)}))}))})):c.reject("Invalid arguments"),e),r}var Tt={_driver:"webSQLStorage",_initStorage:yt,_support:H(),iterate:St,getItem:Ot,setItem:kt,removeItem:jt,clear:Mt,length:_t,key:Et,keys:Dt,dropInstance:Nt};function Ct(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function At(t,e){var n=t.name+"/";return t.storeName!==e.storeName&&(n+=t.storeName+"/"),n}function Rt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(e){return!0}}function Lt(){return!Rt()||localStorage.length>0}function Ft(t){var e=this,n={};if(t)for(var r in t)n[r]=t[r];return n.keyPrefix=At(t,e._defaultConfig),Lt()?(e._dbInfo=n,n.serializer=gt,c.resolve()):c.reject()}function qt(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(t)&&localStorage.removeItem(r)}}));return f(n,t),n}function Pt(t,e){var n=this;t=h(t);var r=n.ready().then((function(){var e=n._dbInfo,r=localStorage.getItem(e.keyPrefix+t);return r&&(r=e.serializer.deserialize(r)),r}));return f(r,e),r}function zt(t,e){var n=this,r=n.ready().then((function(){for(var e=n._dbInfo,r=e.keyPrefix,a=r.length,i=localStorage.length,o=1,s=0;s<i;s++){var u=localStorage.key(s);if(0===u.indexOf(r)){var c=localStorage.getItem(u);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,u.substring(a),o++)))return c}}}));return f(r,e),r}function Gt(t,e){var n=this,r=n.ready().then((function(){var e,r=n._dbInfo;try{e=localStorage.key(t)}catch(a){e=null}return e&&(e=e.substring(r.keyPrefix.length)),e}));return f(r,e),r}function $t(t){var e=this,n=e.ready().then((function(){for(var t=e._dbInfo,n=localStorage.length,r=[],a=0;a<n;a++){var i=localStorage.key(a);0===i.indexOf(t.keyPrefix)&&r.push(i.substring(t.keyPrefix.length))}return r}));return f(n,t),n}function Bt(t){var e=this.keys().then((function(t){return t.length}));return f(e,t),e}function Ut(t,e){var n=this;t=h(t);var r=n.ready().then((function(){var e=n._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return f(r,e),r}function Vt(t,e,n){var r=this;t=h(t);var a=r.ready().then((function(){void 0===e&&(e=null);var n=e;return new c((function(a,i){var o=r._dbInfo;o.serializer.serialize(e,(function(e,r){if(r)i(r);else try{localStorage.setItem(o.keyPrefix+t,e),a(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return f(a,n),a}function Wt(t,e){if(e=p.apply(this,arguments),!(t="function"!==typeof t&&t||{}).name){var n=this.config();t.name=t.name||n.name,t.storeName=t.storeName||n.storeName}var r,a=this;return f(r=t.name?new c((function(e){t.storeName?e(At(t,a._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var n=localStorage.key(e);0===n.indexOf(t)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),e),r}var Yt={_driver:"localStorageWrapper",_initStorage:Ft,_support:Ct(),iterate:zt,getItem:Pt,setItem:Vt,removeItem:Ut,clear:qt,length:Bt,key:Gt,keys:$t,dropInstance:Wt},Ht=function(t,e){return t===e||"number"===typeof t&&"number"===typeof e&&isNaN(t)&&isNaN(e)},Xt=function(t,e){for(var n=t.length,r=0;r<n;){if(Ht(t[r],e))return!0;r++}return!1},Jt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Kt={},Qt={},Zt={INDEXEDDB:Y,WEBSQL:Tt,LOCALSTORAGE:Yt},te=[Zt.INDEXEDDB._driver,Zt.WEBSQL._driver,Zt.LOCALSTORAGE._driver],ee=["dropInstance"],ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),re={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ae(t,e){t[e]=function(){var n=arguments;return t.ready().then((function(){return t[e].apply(t,n)}))}}function ie(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var n in e)e.hasOwnProperty(n)&&(Jt(e[n])?arguments[0][n]=e[n].slice():arguments[0][n]=e[n])}return arguments[0]}var oe=new(function(){function t(e){for(var n in a(this,t),Zt)if(Zt.hasOwnProperty(n)){var r=Zt[n],i=r._driver;this[n]=i,Kt[i]||this.defineDriver(r)}this._defaultConfig=ie({},re),this._config=ie({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===("undefined"===typeof t?"undefined":r(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!==typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"===typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,n){var r=new c((function(e,n){try{var r=t._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void n(a);for(var i=ne.concat("_initStorage"),o=0,s=i.length;o<s;o++){var u=i[o];if((!Xt(ee,u)||t[u])&&"function"!==typeof t[u])return void n(a)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),n=c.reject(e);return f(n,arguments[arguments.length-1]),n}},n=0,r=ee.length;n<r;n++){var a=ee[n];t[a]||(t[a]=e(a))}}();var l=function(n){Kt[r]&&console.info("Redefining LocalForage driver: "+r),Kt[r]=t,Qt[r]=n,e()};"_support"in t?t._support&&"function"===typeof t._support?t._support().then(l,n):l(!!t._support):l(!0)}catch(h){n(h)}}));return l(r,e,n),r},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,n){var r=Kt[t]?c.resolve(Kt[t]):c.reject(new Error("Driver not found."));return l(r,e,n),r},t.prototype.getSerializer=function(t){var e=c.resolve(gt);return l(e,t),e},t.prototype.ready=function(t){var e=this,n=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return l(n,t,t),n},t.prototype.setDriver=function(t,e,n){var r=this;Jt(t)||(t=[t]);var a=this._getSupportedDrivers(t);function i(){r._config.driver=r.driver()}function o(t){return r._extend(t),i(),r._ready=r._initStorage(r._config),r._ready}function s(t){return function(){var e=0;function n(){for(;e<t.length;){var a=t[e];return e++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(o).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=c.reject(s),r._driverSet}return n()}}var u=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=u.then((function(){var t=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(t).then((function(t){r._driver=t._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(a)}))})).catch((function(){i();var t=new Error("No available storage method found.");return r._driverSet=c.reject(t),r._driverSet})),l(this._driverSet,e,n),this._driverSet},t.prototype.supports=function(t){return!!Qt[t]},t.prototype._extend=function(t){ie(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var a=t[n];this.supports(a)&&e.push(a)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=ne.length;t<e;t++)ae(this,ne[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=oe},{3:3}]},{},[4])(4)}).call(this,n(60))},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(28);function a(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){"use strict";this&&this.__assign;Object.defineProperty(e,"__esModule",{value:!0});var r=n(61),a=n(64),i=n(43),o={sum:i.sum_unsafe,mean:i.mean,count:i.count};function s(t){var e=t.type,n=t.aggFunc,a=void 0===n?i.count:n,o=t.factTable,s=void 0===o?[]:o,u=t.dimensions,c=void 0===u?[]:u,f=t.measures,l=void 0===f?[]:f;switch(e){case"period":return new r.periodCube({aggFunc:a,factTable:s,dimensions:c,measures:l});case"moment":default:return new r.momentCube({aggFunc:a,factTable:s,dimensions:c,measures:l})}}e.createCube=s,e.default=function(t){var e=t.dimensions,n=t.measures,r=t.asFields,u=t.operator,c=t.dataSource,f=s({type:"moment",aggFunc:o[u]||i.count,dimensions:e,measures:n,factTable:c}),l=a.tree2Table({dimensions:e,measures:n,cube:f});return l.forEach((function(t){r.forEach((function(e,r){t[e]=t[n[r]]}))})),l},function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(43))},function(t,e,n){"use strict";n.r(e),n.d(e,"getFieldType",(function(){return c})),n.d(e,"getAllFieldTypes",(function(){return f})),n.d(e,"getFieldDistribution",(function(){return l})),n.d(e,"getAllFieldsDistribution",(function(){return h})),n.d(e,"getFieldEntropy",(function(){return p})),n.d(e,"getFloatFieldEntropy",(function(){return d})),n.d(e,"getAllFieldsEntropy",(function(){return v})),n.d(e,"groupFields",(function(){return m}));var r=n(1),a=n(9),i=n(3),o=n(27),s=n(6),u=s.a;function c(t,e){return Object(a.g)(t,e)?"temporal":Object(a.f)(t,e)?Object(a.h)(t,e).length>u?"quantitative":"ordinal":(Object(a.e)(t,e),"nominal")}function f(t,e){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push({name:o,type:c(t,o)})}}catch(s){i.e(s)}finally{i.f()}return a}function l(t,e){return Object(a.h)(t,e).map((function(t){return{memberName:t[0],count:t[1]}}))}function h(t,e){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push({fieldName:o,distribution:l(t,o)})}}catch(s){i.e(s)}finally{i.f()}return a}function p(t,e){var n=Object(a.h)(t,e),r=n.map((function(t){return t[1]})),o=Object(i.k)(r);return{fieldName:e,entropy:Object(i.d)(o),maxEntropy:Math.log2(n.length)}}function d(t,e){for(var n=-1/0,r=1/0,a=0;a<t.length;a++)n=Math.max(n,t[a][e]),r=Math.min(r,t[a][e]);for(var o=(n-r)/s.a,u=new Array(s.a+1).fill(0),c=0;c<t.length;c++){var f=t[c][e];u[Math.floor((f-r)/o)]++}u[s.a-1]+=u[s.a];var l=Object(i.k)(u.slice(0,s.a));return{fieldName:e,entropy:Object(i.d)(l),maxEntropy:Math.log2(s.a)}}function v(t,e){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(p(t,o))}}catch(s){i.e(s)}finally{i.f()}return a}function m(t,e){var n,i=Object(a.b)(t),s=[],c=Object(r.a)(e);try{for(c.s();!(n=c.n()).done;){var f=n.value,l="".concat(f.name,"(group)");"quantitative"===f.type&&Object(a.h)(t,f.name).length>2*u?Object(o.a)(t,f.name)||(i=Object(a.d)({dataSource:i,field:f.name,newField:l,groupNumber:8}),s.push({name:l,type:"ordinal"})):("ordinal"===f.type||"nominal"===f.type)&&Object(a.h)(t,f.name).length>u&&(Object(o.a)(t,f.name)||(i=Object(a.c)({dataSource:i,field:f.name,newField:l,groupNumber:8}),s.push({name:l,type:f.type})))}}catch(h){c.e(h)}finally{c.f()}return{groupedData:i,fields:e,newFields:s}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n(1),a=n(6);function i(t,e,n){for(var r=0,a=0;a<t.length;a++)r+=t[a].stat[e][n];return r}var o=function(t,e){var n,i=function(t){return t[0]===t[1]?[t[0],t[1]+.1]:t}(e),o=(i[1]-i[0])/a.c,s=new Array(a.c+1).fill(0),u=Object(r.a)(t);try{for(u.s();!(n=u.n()).done;){var c=n.value;s[Math.floor((c-i[0])/o)]++}}catch(f){u.e(f)}finally{u.f()}return s[a.c-1]+=s[a.c],s.slice(0,-1)};function s(t,e,n){for(var r=new Array(a.c).fill(0),i=0;i<t.length;i++)for(var o=t[i].stat[e][n],s=0;s<r.length;s++)r[s]+=o[s];return r}},function(t,e,n){!function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,n=t[0],r=0,a=1;a<t.length;a++)e=n+t[a],Math.abs(n)>=Math.abs(t[a])?r+=n-e+t[a]:r+=t[a]-e+n,n=e;return n+r}function n(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function r(t,e){var r,a,i=n(t),o=0;if(2===e)for(a=0;a<t.length;a++)o+=(r=t[a]-i)*r;else for(a=0;a<t.length;a++)o+=Math.pow(t[a]-i,e);return o}function a(t){if(0===t.length)throw new Error("variance requires at least one data point");return r(t,2)/t.length}function i(t){if(1===t.length)return 0;var e=a(t);return Math.sqrt(e)}function o(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],n=NaN,r=0,a=1,i=1;i<t.length+1;i++)t[i]!==e?(a>r&&(r=a,n=e),a=1,e=t[i]):a++;return n}function s(t){return t.slice().sort((function(t,e){return t-e}))}function u(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]<e&&(e=t[n]);return e}function c(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]);return e}function f(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function l(t,e){var n=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:n%1!=0?t[Math.ceil(n)-1]:t.length%2==0?(t[n-1]+t[n])/2:t[n]}function h(t,e,n,r){for(n=n||0,r=r||t.length-1;r>n;){if(r-n>600){var a=r-n+1,i=e-n+1,o=Math.log(a),s=.5*Math.exp(2*o/3),u=.5*Math.sqrt(o*s*(a-s)/a);i-a/2<0&&(u*=-1),h(t,e,Math.max(n,Math.floor(e-i*s/a+u)),Math.min(r,Math.floor(e+(a-i)*s/a+u)))}var c=t[e],f=n,l=r;for(p(t,n,e),t[r]>c&&p(t,n,r);f<l;){for(p(t,f,l),f++,l--;t[f]<c;)f++;for(;t[l]>c;)l--}t[n]===c?p(t,n,l):p(t,++l,r),l<=e&&(n=l+1),e<=l&&(r=l-1)}}function p(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function d(t,e){var n=t.slice();if(Array.isArray(e)){!function(t,e){for(var n=[0],r=0;r<e.length;r++)n.push(g(t.length,e[r]));n.push(t.length-1),n.sort(m);for(var a=[0,n.length-1];a.length;){var i=Math.ceil(a.pop()),o=Math.floor(a.pop());if(!(i-o<=1)){var s=Math.floor((o+i)/2);v(t,n[s],Math.floor(n[o]),Math.ceil(n[i])),a.push(o,s,s,i)}}}(n,e);for(var r=[],a=0;a<e.length;a++)r[a]=l(n,e[a]);return r}return v(n,g(n.length,e),0,n.length-1),l(n,e)}function v(t,e,n,r){e%1==0?h(t,e,n,r):(h(t,e=Math.floor(e),n,r),h(t,e+1,e+1,r))}function m(t,e){return t-e}function g(t,e){var n=t*e;return 1===e?t-1:0===e?0:n%1!=0?Math.ceil(n)-1:t%2==0?n-.5:n}function b(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var n=function(t,e){for(var n=0,r=0,a=t.length;r<a;)e<=t[n=r+a>>>1]?a=n:r=-~n;return r}(t,e);if(t[n]!==e)return n/t.length;n++;var r=function(t,e){for(var n=0,r=0,a=t.length;r<a;)e>=t[n=r+a>>>1]?r=-~n:a=n;return r}(t,e);if(r===n)return n/t.length;var a=r-n+1;return a*(r+n)/2/a/t.length}function y(t){var e=d(t,.75),n=d(t,.25);if("number"==typeof e&&"number"==typeof n)return e-n}function w(t){return+d(t,.5)}function O(t){for(var e=w(t),n=[],r=0;r<t.length;r++)n.push(Math.abs(t[r]-e));return w(n)}function S(t,e){e=e||Math.random;for(var n,r,a=t.length;a>0;)r=Math.floor(e()*a--),n=t[a],t[a]=t[r],t[r]=n;return t}function x(t,e){return S(t.slice(),e)}function k(t,e,n){return x(t,n).slice(0,e)}function j(t,e){for(var n=[],r=0;r<t;r++){for(var a=[],i=0;i<e;i++)a.push(0);n.push(a)}return n}function M(t){for(var e,n=0,r=0;r<t.length;r++)0!==r&&t[r]===e||(e=t[r],n++);return n}function _(t,e,n,r){var a;if(t>0){var i=(n[e]-n[t-1])/(e-t+1);a=r[e]-r[t-1]-(e-t+1)*i*i}else a=r[e]-n[e]*n[e]/(e+1);return a<0?0:a}function E(t,e,n,r,a,i,o){if(!(t>e)){var s=Math.floor((t+e)/2);r[n][s]=r[n-1][s-1],a[n][s]=s;var u=n;t>n&&(u=Math.max(u,a[n][t-1]||0)),u=Math.max(u,a[n-1][s]||0);var c,f,l,h=s-1;e<r[0].length-1&&(h=Math.min(h,a[n][e+1]||0));for(var p=h;p>=u&&!((c=_(p,s,i,o))+r[n-1][u-1]>=r[n][s]);--p)(f=_(u,s,i,o)+r[n-1][u-1])<r[n][s]&&(r[n][s]=f,a[n][s]=u),u++,(l=c+r[n-1][p-1])<r[n][s]&&(r[n][s]=l,a[n][s]=p);E(t,s-1,n,r,a,i,o),E(s+1,e,n,r,a,i,o)}}function D(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var r=n(t),a=n(e),i=0,o=0;o<t.length;o++)i+=(t[o]-r)*(e[o]-a);return i/(t.length-1)}function I(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return r(t,2)/(t.length-1)}function N(t){var e=I(t);return Math.sqrt(e)}function T(t,e){return D(t,e)/N(t)/N(e)}function C(t,e,n,r){return(t*e+n*r)/(e+r)}function A(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return f(t)/t.length}function R(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,n=0;n<t.length;n++)e+=Math.pow(t[n],2);return Math.sqrt(e/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,e){for(var n in this.data[e]||(this.data[e]={}),t){var r=t[n];void 0===this.data[e][n]&&(this.data[e][n]={}),void 0===this.data[e][n][r]&&(this.data[e][n][r]=0),this.data[e][n][r]++}this.totalCount++},L.prototype.score=function(t){var e,n={};for(var r in t){var a=t[r];for(e in this.data)n[e]={},this.data[e][r]?n[e][r+"_"+a]=(this.data[e][r][a]||0)/this.totalCount:n[e][r+"_"+a]=0}var i={};for(e in n)for(var o in i[e]=0,n[e])i[e]+=n[e][o];return i};var F=function(){this.weights=[],this.bias=0};F.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,n=0;n<this.weights.length;n++)e+=this.weights[n]*t[n];return(e+=this.bias)>0?1:0},F.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var n=this.predict(t);if("number"==typeof n&&n!==e){for(var r=e-n,a=0;a<this.weights.length;a++)this.weights[a]+=r*t[a];this.bias+=r}return this};var q=1e-4;function P(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,n=2;n<=t;n++)e*=n;return e}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),$={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},B=Math.sqrt(2*Math.PI),U={gaussian:function(t){return Math.exp(-.5*t*t)/B}},V={nrd:function(t){var e=N(t),n=y(t);return"number"==typeof n&&(e=Math.min(e,n/1.34)),1.06*e*Math.pow(t.length,-.2)}};function W(t,e,n){var r,a;if(void 0===e)r=U.gaussian;else if("string"==typeof e){if(!U[e])throw new Error('Unknown kernel "'+e+'"');r=U[e]}else r=e;if(void 0===n)a=V.nrd(t);else if("string"==typeof n){if(!V[n])throw new Error('Unknown bandwidth method "'+n+'"');a=V[n](t)}else a=n;return function(e){var n=0,i=0;for(n=0;n<t.length;n++)i+=r((e-t[n])/a);return i/a/t.length}}var Y=Math.sqrt(2*Math.PI);function H(t){for(var e=t,n=t,r=1;r<15;r++)e+=n*=t*t/(2*r+1);return Math.round(1e4*(.5+e/Y*Math.exp(-t*t/2)))/1e4}for(var X=[],J=0;J<=3.09;J+=.01)X.push(H(J));function K(t){var e=1/(1+.5*Math.abs(t)),n=e*Math.exp(-t*t+((((((((.17087277*e-.82215223)*e+1.48851587)*e-1.13520398)*e+.27886807)*e-.18628806)*e+.09678418)*e+.37409196)*e+1.00002368)*e-1.26551223);return t>=0?1-n:n-1}function Q(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?n:-n}function Z(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function tt(t,e){for(var n=0,r=0;r<t.length;r++){var a=t[r]-e[r];n+=a*a}return Math.sqrt(n)}function et(t,e){return t.map((function(t){for(var n=Number.MAX_VALUE,r=-1,a=0;a<e.length;a++){var i=tt(t,e[a]);i<n&&(n=i,r=a)}return r}))}function nt(t,e,n){for(var r=t[0].length,a=j(n,r),i=Array(n).fill(0),o=t.length,s=0;s<o;s++){for(var u=t[s],c=e[s],f=a[c],l=0;l<r;l++)f[l]+=u[l];i[c]+=1}for(var h=0;h<n;h++){if(0===i[h])throw new Error("Centroid "+h+" has no friends");for(var p=a[h],d=0;d<r;d++)p[d]/=i[h]}return a}function rt(t,e){for(var n=0,r=0;r<t.length;r++)n+=tt(t[r],e[r]);return n}function at(t,e){if(t.length!==e.length)throw new Error("must have exactly as many labels as points");for(var n=function(t){for(var e=1+c(t),n=Array(e),r=0;r<t.length;r++){var a=t[r];void 0===n[a]&&(n[a]=[]),n[a].push(r)}return n}(e),r=function(t){for(var e=t.length,n=j(e,e),r=0;r<e;r++)for(var a=0;a<r;a++)n[r][a]=tt(t[r],t[a]),n[a][r]=n[r][a];return n}(t),a=[],i=0;i<t.length;i++){var o=0;if(n[e[i]].length>1){var s=ot(i,n[e[i]],r),u=it(i,e,n,r);o=(u-s)/Math.max(s,u)}a.push(o)}return a}function it(t,e,n,r){for(var a=e[t],i=Number.MAX_VALUE,o=0;o<n.length;o++)if(o!==a){var s=ot(t,n[o],r);s<i&&(i=s)}return i}function ot(t,e,n){for(var r=0,a=0;a<e.length;a++)r+=n[t][e[a]];return r/e.length}function st(t,e){return 0===t&&0===e?0:Math.abs((t-e)/e)}t.BayesianClassifier=L,t.PerceptronModel=F,t.addToMean=function(t,e,n){return t+(n-t)/(e+1)},t.approxEqual=function(t,e,n){return void 0===n&&(n=q),st(t,e)<=n},t.average=n,t.averageSimple=A,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||e>1||t<=0||t%1!=0)){var n=0,r=0,a=[],i=1;do{a[n]=i*Math.pow(e,n)*Math.pow(1-e,t-n),r+=a[n],i=i*(t-++n+1)/n}while(r<.9999);return a}},t.bisect=function(t,e,n,r,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var i=0;i<r;i++){var o=(e+n)/2;if(0===t(o)||Math.abs((n-e)/2)<a)return o;Z(t(o))===Z(t(e))?e=o:n=o}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=$,t.chiSquaredGoodnessOfFit=function(t,e,r){for(var a=0,i=e(n(t)),o=[],s=[],u=0;u<t.length;u++)void 0===o[t[u]]&&(o[t[u]]=0),o[t[u]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in i)f in o&&(s[+f]=i[f]*t.length);for(var l=s.length-1;l>=0;l--)s[l]<3&&(s[l-1]+=s[l],s.pop(),o[l-1]+=o[l],o.pop());for(var h=0;h<o.length;h++)a+=Math.pow(o[h]-s[h],2)/s[h];var p=o.length-1-1;return $[p][r]<a},t.chunk=function(t,e){var n=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var n=s(t);if(1===M(n))return[n];var r=j(e,n.length),a=j(e,n.length);!function(t,e,n){for(var r=e[0].length,a=t[Math.floor(r/2)],i=[],o=[],s=0,u=void 0;s<r;++s)u=t[s]-a,0===s?(i.push(u),o.push(u*u)):(i.push(i[s-1]+u),o.push(o[s-1]+u*u)),e[0][s]=_(0,s,i,o),n[0][s]=0;for(var c=1;c<e.length;++c)E(c<e.length-1?c:r-1,r-1,c,e,n,i,o)}(n,r,a);for(var i=[],o=a[0].length-1,u=a.length-1;u>=0;u--){var c=a[u][o];i[u]=n.slice(c,o+1),u>0&&(o=c-1)}return i},t.coefficientOfVariation=function(t){return N(t)/n(t)},t.combinations=function t(e,n){var r,a,i,o,s=[];for(r=0;r<e.length;r++)if(1===n)s.push([e[r]]);else for(i=t(e.slice(r+1,e.length),n-1),a=0;a<i.length;a++)(o=i[a]).unshift(e[r]),s.push(o);return s},t.combinationsReplacement=function t(e,n){for(var r=[],a=0;a<e.length;a++)if(1===n)r.push([e[a]]);else for(var i=t(e.slice(a,e.length),n-1),o=0;o<i.length;o++)r.push([e[a]].concat(i[o]));return r},t.combineMeans=C,t.combineVariances=function(t,e,n,r,a,i){var o=C(e,n,a,i);return(n*(t+Math.pow(e-o,2))+i*(r+Math.pow(a-o,2)))/(n+i)},t.cumulativeStdLogisticProbability=function(t){return 1/(Math.exp(-t)+1)},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),n=Math.min(Math.round(100*e),X.length-1);return t>=0?X[n]:+(1-X[n]).toFixed(4)},t.epsilon=q,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var n=u(t),r=c(t),a=[n],i=(r-n)/e,o=1;o<e;o++)a.push(a[0]+i*o);return a.push(r),a},t.erf=K,t.errorFunction=K,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],n=t[0],r=1;r<t.length;r++)t[r]>n&&(n=t[r]),t[r]<e&&(e=t[r]);return[e,n]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=P,t.gamma=function t(e){if(Number.isInteger(e))return e<=0?NaN:P(e-1);if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var n=e+1/4;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=z[0],n=1;n<15;n++)e+=z[n]/(t+n);var r=5.2421875+t;return G+Math.log(e)-r+(t+.5)*Math.log(r)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,n=0;n<t.length;n++){if(t[n]<0)throw new Error("geometricMean requires only non-negative numbers as input");e*=t[n]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[n]}return t.length/e},t.interquartileRange=y,t.inverseErrorFunction=Q,t.iqr=y,t.kMeansCluster=function(t,e,n){void 0===n&&(n=Math.random);for(var r=null,a=k(t,e,n),i=null,o=Number.MAX_VALUE;0!==o;)r=a,o=rt(a=nt(t,i=et(t,a),e),r);return{labels:i,centroids:a}},t.kde=W,t.kernelDensityEstimation=W,t.linearRegression=function(t){var e,n,r=t.length;if(1===r)e=0,n=t[0][1];else{for(var a,i,o,s=0,u=0,c=0,f=0,l=0;l<r;l++)s+=i=(a=t[l])[0],u+=o=a[1],c+=i*i,f+=i*o;n=u/r-(e=(r*f-s*u)/(r*c-s*s))*s/r}return{m:e,b:n}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.logAverage=function(t){if(0===t.length)throw new Error("logAverage requires at least one data point");for(var e=0,n=0;n<t.length;n++){if(t[n]<0)throw new Error("logAverage requires only non-negative numbers as input");e+=Math.log(t[n])}return Math.exp(e/t.length)},t.logit=function(t){if(t<=0||t>=1)throw new Error("p must be strictly between zero and one");return Math.log(t/(1-t))},t.mad=O,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=n,t.meanSimple=A,t.median=w,t.medianAbsoluteDeviation=O,t.medianSorted=function(t){return l(t,.5)},t.min=u,t.minSorted=function(t){return t[0]},t.mode=function(t){return o(s(t))},t.modeFast=function(t){for(var e,n=new Map,r=0,a=0;a<t.length;a++){var i=n.get(t[a]);void 0===i?i=1:i++,i>r&&(e=t[a],r=i),n.set(t[a],i)}if(0===r)throw new Error("mode requires at last one data point");return e},t.modeSorted=o,t.numericSort=s,t.perceptron=F,t.permutationTest=function(t,e,r,a,i){if(void 0===a&&(a=1e4),void 0===r&&(r="two_side"),"two_side"!==r&&"greater"!==r&&"less"!==r)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=n(t)-n(e),s=new Array(a),u=t.concat(e),c=Math.floor(u.length/2),f=0;f<a;f++){S(u,i);var l=u.slice(0,c),h=u.slice(c,u.length),p=n(l)-n(h);s[f]=p}var d=0;if("two_side"===r)for(var v=0;v<=a;v++)Math.abs(s[v])>=Math.abs(o)&&(d+=1);else if("greater"===r)for(var m=0;m<=a;m++)s[m]>=o&&(d+=1);else for(var g=0;g<=a;g++)s[g]<=o&&(d+=1);return d/a},t.permutationsHeap=function(t){for(var e=new Array(t.length),n=[t.slice()],r=0;r<t.length;r++)e[r]=0;for(var a=0;a<t.length;)if(e[a]<a){var i=0;a%2!=0&&(i=e[a]);var o=t[i];t[i]=t[a],t[a]=o,n.push(t.slice()),e[a]++,a=0}else e[a]=0,a++;return n},t.poissonDistribution=function(t){if(!(t<=0)){var e=0,n=0,r=[],a=1;do{r[e]=Math.exp(-t)*Math.pow(t,e)/a,n+=r[e],a*=++e}while(n<.9999);return r}},t.probit=function(t){return 0===t?t=q:t>=1&&(t=.9999),Math.sqrt(2)*Q(2*t-1)},t.product=function(t){for(var e=1,n=0;n<t.length;n++)e*=t[n];return e},t.quantile=d,t.quantileRank=function(t,e){return b(s(t),e)},t.quantileRankSorted=b,t.quantileSorted=l,t.quickselect=h,t.rSquared=function(t,e){if(t.length<2)return 1;for(var n=0,r=0;r<t.length;r++)n+=t[r][1];for(var a=n/t.length,i=0,o=0;o<t.length;o++)i+=Math.pow(a-t[o][1],2);for(var s=0,u=0;u<t.length;u++)s+=Math.pow(t[u][1]-e(t[u][0]),2);return 1-s/i},t.relativeError=st,t.rms=R,t.rootMeanSquare=R,t.sample=k,t.sampleCorrelation=T,t.sampleCovariance=D,t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var r,a=n(t),i=0,o=0,s=0;s<e;s++)i+=(r=t[s]-a)*r,o+=r*r*r*r;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(i*i)-3*(e-1))},t.sampleRankCorrelation=function(t,e){for(var n=t.map((function(t,e){return[t,e]})).sort((function(t,e){return t[0]-e[0]})).map((function(t){return t[1]})),r=e.map((function(t,e){return[t,e]})).sort((function(t,e){return t[0]-e[0]})).map((function(t){return t[1]})),a=Array(n.length),i=Array(n.length),o=0;o<n.length;o++)a[n[o]]=o,i[r[o]]=o;return T(a,i)},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,r=n(t),a=0,i=0,o=0;o<t.length;o++)a+=(e=t[o]-r)*e,i+=e*e*e;var s=t.length-1,u=Math.sqrt(a/s),c=t.length;return c*i/((c-1)*(c-2)*Math.pow(u,3))},t.sampleStandardDeviation=N,t.sampleVariance=I,t.sampleWithReplacement=function(t,e,n){if(0===t.length)return[];n=n||Math.random;for(var r=t.length,a=[],i=0;i<e;i++){var o=Math.floor(n()*r);a.push(t[o])}return a},t.shuffle=x,t.shuffleInPlace=S,t.sign=Z,t.silhouette=at,t.silhouetteMetric=function(t,e){return c(at(t,e))},t.standardDeviation=i,t.standardNormalTable=X,t.subtractFromMean=function(t,e,n){return(t*e-n)/(e-1)},t.sum=e,t.sumNthPowerDeviations=r,t.sumSimple=f,t.tTest=function(t,e){return(n(t)-e)/(i(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,r){var a=t.length,i=e.length;if(!a||!i)return null;r||(r=0);var o=n(t),s=n(e),u=I(t),c=I(e);if("number"==typeof o&&"number"==typeof s&&"number"==typeof u&&"number"==typeof c){var f=((a-1)*u+(i-1)*c)/(a+i-2);return(o-s-r)/Math.sqrt(f*(1/a+1/i))}},t.uniqueCountSorted=M,t.variance=a,t.wilcoxonRankSum=function(t,e){if(!t.length||!e.length)throw new Error("Neither sample can be empty");for(var n=t.map((function(t){return{label:"x",value:t}})).concat(e.map((function(t){return{label:"y",value:t}}))).sort((function(t,e){return t.value-e.value})),r=0;r<n.length;r++)n[r].rank=r;for(var a=[n[0].rank],i=1;i<n.length;i++)n[i].value===n[i-1].value?(a.push(n[i].rank),i===n.length-1&&o(n,a)):a.length>1?o(n,a):a=[n[i].rank];function o(t,e){for(var n=(e[0]+e[e.length-1])/2,r=0;r<e.length;r++)t[e[r]].rank=n}for(var s=0,u=0;u<n.length;u++){var c=n[u];"x"===c.label&&(s+=c.rank+1)}return s},t.zScore=function(t,e,n){return(t-e)/n},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(9);function a(t,e){return Object(r.h)(t,e).every((function(t){return 1===t[1]}))}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(7),a=n(8),i=n(3),o=n(17),s=n(12),u=function(){function t(e,n){Object(r.a)(this,t),this.DIMENSION_CORRELATION_THRESHOLD=s.a,this.MEASURE_CORRELATION_THRESHOLD=s.b.strong,this.dimensions=e,this.measures=n}return Object(a.a)(t,[{key:"computeGraph",value:function(t,e,n){for(var r=e.map((function(t){return e.map((function(){return 0}))})),a=0;a<e.length;a++){r[a][a]=1;for(var i=a+1;i<e.length;i++)r[a][i]=r[i][a]=n(t,e[a],e[i])}return r}},{key:"computeDGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.c;return this.DG=this.computeGraph(t,this.dimensions,e),this.DG}},{key:"computeMGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.m;return this.MG=this.computeGraph(t,this.measures,e),this.MG}},{key:"clusterDGraph",value:function(t,e){var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=Object(o.getDimClusterGroups)(t,n,e||r),this.DClusters}},{key:"clusterMGraph",value:function(t,e){var n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=Object(o.getMeaSetsBasedOnClusterGroups)(t,n,e||r),this.MClusters}}]),t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return S}));var r=n(0),a=n.n(r),i=n(1),o=n(2),s=n(4),u=n(7),c=n(8),f=n(13),l=n(3),h=n(25),p=["max","min","sum","mean","count","dist"],d=function(){function t(e){Object(u.a)(this,t),this.cached=!1,this.statSize=0,this.storageMode=f.b.LocalDisk;var n=e.dimensions,r=e.measures,a=e.ops,i=void 0===a?p:a,o=e.ranges,s=e.storage,c=e.storageMode,l=void 0===c?f.b.LocalDisk:c;this.dimensions=n,this.measures=r,this.ops=i,this._state=[],this.cached=!1,this.ranges=o,this.storageMode=l,this.sto=s}return Object(c.a)(t,[{key:"cacheState",value:function(t){this.cached=!0,this._state=t}},{key:"clearState",value:function(){this.storageMode===f.b.LocalDisk&&(this.cached=!1,this._state=[])}},{key:"getState",value:function(){var t=Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=[],this.storageMode!==f.b.LocalDisk){t.next=12;break}if(!this.cached){t.next=4;break}return t.abrupt("return",this._state);case 4:return t.next=6,this.sto.getItem(this.dimensions.join("-"));case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0=[];case 9:e=t.t0,t.next=13;break;case 12:e=this._state;case 13:return this.statSize=e.length,t.abrupt("return",e);case 15:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadStateInCache",value:function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.storageMode!==f.b.LocalDisk){t.next=7;break}return t.next=3,this.sto.getItem(this.dimensions.join("-"));case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=[];case 6:this._state=t.t0;case 7:this.cached=!0;case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"setState",value:function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.statSize=e.length,this.storageMode!==f.b.LocalDisk){t.next=6;break}return t.next=4,this.sto.setItem(this.dimensions.join("-"),e);case 4:t.next=7;break;case 6:this._state=e;case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setData",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,s,u,c,f,p;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(l.p)({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:e}),r=this.dimensions,o=this.measures,s=this.ranges,u=Object(l.h)(e,r),c=Object(i.a)(n);try{for(p=function(){var t,e=f.value,n=Object(l.e)(r.map((function(t){return e.groupDict[t]}))),a=u.get(n),c=Object(i.a)(o);try{var p=function(){var n=t.value,r=s.get(n);e.stat[n].dist=Object(h.a)(a.map((function(t){return t[n]})),r)};for(c.s();!(t=c.n()).done;)p()}catch(d){c.e(d)}finally{c.f()}},c.s();!(f=c.n()).done;)p()}catch(a){c.e(a)}finally{c.f()}return t.next=7,this.setState(n);case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"computeFromCuboid",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,i,o,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.ops,r=this.measures,i=this.dimensions,t.next=3,e.getState();case 3:return o=t.sent,s=Object(l.q)({dimensions:i,measures:r,ops:n,cuboidState:o}),t.next=7,this.setState(s);case 7:return t.abrupt("return",s);case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"size",get:function(){return this.statSize}},{key:"getAggregatedRows",value:function(){var t=Object(o.a)(a.a.mark((function t(e,n){var r,o,s,u,c,f,l,h,p,d,v,m,g;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],o=this.dimensions,t.next=4,this.getState();case 4:s=t.sent,u=Object(i.a)(s);try{for(u.s();!(c=u.n()).done;){f=c.value,l={},h=Object(i.a)(o);try{for(h.s();!(p=h.n()).done;)d=p.value,l[d]=f.groupDict[d]}catch(a){h.e(a)}finally{h.f()}for(v=0;v<e.length;v++)m=e[v],g=n[v],l[m]=f.stat[m][g];r.push(l)}}catch(a){u.e(a)}finally{u.f()}return t.abrupt("return",r);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getRawState",value:function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.getState());case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}(),v=n(32),m=n(20),g=n.n(m);var b=function(){function t(e){Object(u.a)(this,t),this.TMP_FILE_SAFE_TAIL="_.json",this.workSpaceName="visual-insights-work-space";var n=Object(v.a)();null===n?this.env="node":(this.env,n.type),this.storageName=e}return Object(c.a)(t,[{key:"setEnv",value:function(t){this.env=t}},{key:"init",value:function(){if("node"===this.env){var t=n(21),e=n(33).resolve(this.workSpaceName,this.storageName);t.existsSync(e)||t.mkdirSync(e,{recursive:!0})}else{g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}).clear()}}},{key:"destroy",value:function(){var t=Object(o.a)(a.a.mark((function t(){var e,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("browser"!==this.env){t.next=4;break}return t.abrupt("return",g.a.dropInstance({name:this.workSpaceName,storeName:this.storageName}));case 4:e=n(21),r=n(33),i=r.resolve(this.workSpaceName,this.storageName),e.rmdirSync(i,{recursive:!0});case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getItem",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var r,i,o,s,u,c,f;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("browser"!==this.env){t.next=8;break}return r=g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}),t.next=4,r.getItem(e);case 4:return i=t.sent,t.abrupt("return",i);case 8:o=n(21),s=n(33),u="",c=s.resolve(this.workSpaceName,this.storageName,e+this.TMP_FILE_SAFE_TAIL),o.existsSync(c)&&(u=o.readFileSync(c).toString());try{f=JSON.parse(u)}catch(a){}return t.abrupt("return",f);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"setItem",value:function(){var t=Object(o.a)(a.a.mark((function t(e,r){var i,o,s,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("browser"!==this.env){t.next=6;break}return i=g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}),t.next=4,i.setItem(e,r);case 4:t.next=12;break;case 6:o=n(21),s=n(33),u=s.resolve(this.workSpaceName,this.storageName,e+this.TMP_FILE_SAFE_TAIL),c="";try{c=JSON.stringify(r)}catch(a){c="".concat(r)}o.writeFileSync(u,c);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),y="_join_",w=["max","min","sum","mean","count","dist"],O="_cuboids",S=function(){function t(e){var n=this;Object(u.a)(this,t),this.storageName=O,this.storageManageMode=f.a.LocalMix,this.cuboidInMemorySizeLimit=1e3;var r=e.dimensions,a=e.measures,i=e.dataSource,o=e.ops,s=void 0===o?w:o,c=e.storageName,l=void 0===c?O:c,h=e.cubeStorageManageMode,p=void 0===h?f.a.LocalMix:h;this.dimensions=r,this.measures=a,this.dataSource=i,this.ops=s,this.dimOrder=new Map,r.forEach((function(t,e){n.dimOrder.set(t,e)})),this.cuboids=new Map,this.ranges=new Map,this.storageName=l,this.storageManageMode=p,"undefined"===typeof e.storage?(this.storage=new b(l),this.storage.init()):this.storage=e.storage}return Object(c.a)(t,[{key:"sortDimension",value:function(t){var e=this,n=Object(s.a)(t);return n.sort((function(t,n){return e.dimOrder.get(t)-e.dimOrder.get(n)})),n}},{key:"getCuboid",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,o,u,c,f,l,h,p,v,m,g,b,w,O,S,x,k,j;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.sortDimension(e),r=n.join(y),!this.cuboids.has(r)){t.next=4;break}return t.abrupt("return",this.cuboids.get(r));case 4:o=new Set(e),u=[],c=[],f=Object(i.a)(this.dimensions);try{for(f.s();!(l=f.n()).done;)h=l.value,o.has(h)||(p=this.sortDimension([].concat(Object(s.a)(n),[h])),v=p.join(y),this.cuboids.has(v)?u.push(v):c.push(v))}catch(a){f.e(a)}finally{f.f()}if(m=1/0,g=this.dimensions.join(y),u.length>0){b=Object(i.a)(u);try{for(b.s();!(w=b.n()).done;)O=w.value,(S=this.cuboids.get(O)).size<m&&(m=S.size,g=O)}catch(a){b.e(a)}finally{b.f()}}else c.length>0&&(g=c[0]);return t.next=14,this.getCuboid(g.split(y));case 14:return x=t.sent,k=this.getCuboidStorageMode(x.size),j=new d({dimensions:e,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:k}),t.next=19,j.computeFromCuboid(x);case 19:return this.cuboids.set(r,j),t.abrupt("return",j);case 21:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"computeRanges",value:function(){var t,e=this.measures,n=this.dataSource,r=Object(i.a)(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;this.ranges.set(a,Object(l.g)(n,a))}}catch(o){r.e(o)}finally{r.f()}}},{key:"buildCuboidOnCluster",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r,i;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.cuboids.get(this.dimensions.join(y)),r=this.getCuboidStorageMode(n.statSize),i=new d({dimensions:e,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:r}),t.next=5,i.computeFromCuboid(n);case 5:this.cuboids.set(e.join(y),i);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getCuboidStorageMode",value:function(t){return this.storageManageMode===f.a.LocalCache?f.b.LocalCache:this.storageManageMode===f.a.LocalDisk?f.b.LocalDisk:t<=this.cuboidInMemorySizeLimit?f.b.LocalCache:f.b.LocalDisk}},{key:"buildBaseCuboid",value:function(){var t=Object(o.a)(a.a.mark((function t(){var e,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.getCuboidStorageMode(this.dataSource.length),this.computeRanges(),n=new d({dimensions:this.dimensions,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:e}),t.next=5,n.setData(this.dataSource);case 5:return this.cuboids.set(this.dimensions.join(y),n),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"loadCuboid",value:function(){var t=Object(o.a)(a.a.mark((function t(e,n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new d({dimensions:e.split(y),measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage}),t.next=3,r.setState(n);case 3:this.cuboids.set(e,r);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"exportCuboids",value:function(){return{}}},{key:"getBaseCuboid",value:function(){var t=Object(o.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.dimensions.join(y),this.cuboids.has(e)){t.next=3;break}return t.abrupt("return",this.buildBaseCuboid());case 3:return t.abrupt("return",this.cuboids.get(e));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"cuboidSize",get:function(){return this.cuboids.size}}]),t}()},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return h}));var r=function(t,e,n){if(n||2===arguments.length)for(var r,a=0,i=e.length;a<i;a++)!r&&a in e||(r||(r=Array.prototype.slice.call(e,0,a)),r[a]=e[a]);return t.concat(r||Array.prototype.slice.call(e))},a=function(t,e,n){this.name=t,this.version=e,this.os=n,this.type="browser"},i=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform},o=function(t,e,n,r){this.name=t,this.version=e,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,f=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return e?d(e):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!==typeof navigator?d(navigator.userAgent):"undefined"!==typeof t&&t.version?new i(t.version.slice(1)):null}function p(t){return""!==t&&f.reduce((function(e,n){var r=n[0],a=n[1];if(e)return e;var i=a.exec(t);return!!i&&[r,i]}),!1)}function d(t){var e=p(t);if(!e)return null;var n=e[0],i=e[1];if("searchbot"===n)return new s;var u=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);u?u.length<3&&(u=r(r([],u,!0),function(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}(3-u.length),!0)):u=[];var f=u.join("."),h=function(t){for(var e=0,n=l.length;e<n;e++){var r=l[e],a=r[0];if(r[1].exec(t))return a}return null}(t),d=c.exec(t);return d&&d[1]?new o(n,f,h,d[1]):new a(n,f,h)}}).call(this,n(40))},function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var a=t[r];"."===a?t.splice(r,1):".."===a?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,a="/"===o.charAt(0))}return(a?"/":"")+(e=n(r(e.split("/"),(function(t){return!!t})),!a).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===a(t,-1);return(t=n(r(t.split("/"),(function(t){return!!t})),!i).join("/"))||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var a=r(t.split("/")),i=r(n.split("/")),o=Math.min(a.length,i.length),s=o,u=0;u<o;u++)if(a[u]!==i[u]){s=u;break}var c=[];for(u=s;u<a.length;u++)c.push("..");return(c=c.concat(i.slice(s))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,r=-1,a=!0,i=t.length-1;i>=1;--i)if(47===(e=t.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":t.slice(0,r)},e.basename=function(t,e){var n=function(t){"string"!==typeof t&&(t+="");var e,n=0,r=-1,a=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!a){n=e+1;break}}else-1===r&&(a=!1,r=e+1);return-1===r?"":t.slice(n,r)}(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,r=-1,a=!0,i=0,o=t.length-1;o>=0;--o){var s=t.charCodeAt(o);if(47!==s)-1===r&&(a=!1,r=o+1),46===s?-1===e?e=o:1!==i&&(i=1):-1!==e&&(i=-1);else if(!a){n=o+1;break}}return-1===e||-1===r||0===i||1===i&&e===r-1&&e===n+1?"":t.slice(e,r)};var a="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(40))},function(t,e,n){"use strict";(function(e){var r=n(14),a=n(70),i=n(48),o={"Content-Type":"application/x-www-form-urlencoded"};function s(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=n(49)),t}(),transformRequest:[function(t,e){return a(e,"Accept"),a(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(s(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)||e&&"application/json"===e["Content-Type"]?(s(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||u.transitional,n=e&&e.silentJSONParsing,a=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(s){if(o){if("SyntaxError"===s.name)throw i(s,this,"E_JSON_PARSE");throw s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){u.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){u.headers[t]=r.merge(o)})),t.exports=u}).call(this,n(40))},function(t,e,n){"use strict";function r(t){this.message=t}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,t.exports=r},function(t,e,n){"use strict";function r(t,e){for(var n=function(t,e){if(0===t)return[];for(var n=2147483647,r=[e],a=1;a<t;a++)r.push((1103515245*r[a-1]+12345)%n);return r.map((function(t){return t/n}))}(e,2147483647*Math.random()),r=[],a=0;a<e;a++){var i=Math.floor(n[a]*e)%e;r.push(t[i])}return r}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(1),a=n(16),i=n(15),o=n(7),s=n(8),u=function(t){Object(a.a)(n,t);var e=Object(i.a)(n);function n(t){var r;Object(o.a)(this,n),r=e.call(this,t);var a=t.K;return r.K=a,r.normalize(),r}return Object(s.a)(n,[{key:"getNeighbors",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length!==e.length&&e.forEach((function(t){n.push(1)}));for(var r=[],a=[],i=[],o=[],s=new Set(this.dimensions),u=0;u<e.length;u++)s.has(e[u])?(r.push(e[u]),i.push(n[u])):(a.push(e[u]),o.push(n[u]));var c=[];this.normalizedDataSource.forEach((function(e,n){var s=0;a.forEach((function(n,r){s+=Math.pow((e[n]-t[n])*o[r],2)})),r.forEach((function(n,r){e[n]!==t[n]&&(s+=Math.pow(i[r],2))})),c.push({dis:s,index:n})})),c.sort((function(t,e){return t.dis-e.dis}));for(var f=[],l=Math.min(this.K,c.length),h=0;h<l;h++)f.push(this.normalizedDataSource[c[h].index]);return f}},{key:"getTargetValue",value:function(t,e){var n=this,a=[];return t.forEach((function(t){var i=new Map;e.forEach((function(e){i.has(e[t])||i.set(e[t],0),i.set(e[t],i.get(e[t])+1)}));var o,s=0,u=0,c=Object(r.a)(i);try{for(c.s();!(o=c.n()).done;){var f=o.value;f[1]>s&&(s=f[1],u=f[0])}}catch(h){c.e(h)}finally{c.f()}var l=n.dimensions.indexOf(t);l>-1?a.push(n.valueParser[l][u]):a.push(u)})),a}}]),n}(function(){function t(e){Object(o.a)(this,t);var n=e.dataSource,r=e.dimensions,a=e.measures;this.dataSource=n,this.dimensions=r,this.measures=a}return Object(s.a)(t,[{key:"normalize",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(n,r){var a=(e[n]||"others").toString();t.valueSets[r].has(a)||(t.valueSets[r].set(a,t.valueSets[r].size),t.valueParser[r].push(a))})),t.measures.forEach((function(n,r){var a=e[n];"number"===typeof a&&(t.ranges[r][0]=Math.min(t.ranges[r][0],a),t.ranges[r][1]=Math.max(t.ranges[r][1],a))}))})),this.dataSource.forEach((function(e){var n=t.normalizeRecord(e);t.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,n={};return this.measures.forEach((function(r,a){n[r]=(t[r]-e.ranges[a][0])/(e.ranges[a][1]-e.ranges[a][0])})),this.dimensions.forEach((function(r,a){var i=(t[r]||"others").toString();n[r]=e.valueSets[a].get(i)})),n}}]),t}())},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(7),a=n(8),i=n(16),o=n(15),s=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){return Object(r.a)(this,n),e.apply(this,arguments)}return Object(a.a)(n,[{key:"getTargetValuePercent",value:function(t,e,n){var r=[];return t.forEach((function(t,a){var i=0;n.forEach((function(n){n[t]===e[t]&&i++})),r.push(i/n.length)})),r}},{key:"getSignificance",value:function(t,e){var n=this,r=0;return this.normalizedDataSource.forEach((function(a){var i=n.getNeighbors(a,t),o=n.getTargetValuePercent(e,a,i),s=0;o.forEach((function(t){s+=t})),s/=o.length,r+=s})),r/=this.normalizedDataSource.length}}]),n}(n(37).a)},function(t,e,n){t.exports=function(){"use strict";var t=1e3,e=6e4,n=36e5,r="millisecond",a="second",i="minute",o="hour",s="day",u="week",c="month",f="quarter",l="year",h="date",p="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},b={s:g,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),a=n%60;return(e<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),a=e.clone().add(r,c),i=n-a<0,o=e.clone().add(r+(i?-1:1),c);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:l,w:u,d:s,D:h,h:o,m:i,s:a,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",w={};w[y]=m;var O=function(t){return t instanceof j},S=function(t,e,n){var r;if(!t)return y;if("string"==typeof t)w[t]&&(r=t),e&&(w[t]=e,r=t);else{var a=t.name;w[a]=t,r=a}return!n&&r&&(y=r),r||!n&&y},x=function(t,e){if(O(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new j(n)},k=b;k.l=S,k.i=O,k.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var j=function(){function m(t){this.$L=S(t.locale,null,!0),this.parse(t)}var g=m.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(k.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(d);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return k},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(t,e){var n=x(t);return this.startOf(e)<=n&&n<=this.endOf(e)},g.isAfter=function(t,e){return x(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<x(t)},g.$g=function(t,e,n){return k.u(t)?this[e]:this.set(n,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var n=this,r=!!k.u(e)||e,f=k.p(t),p=function(t,e){var a=k.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?a:a.endOf(s)},d=function(t,e){return k.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},v=this.$W,m=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(f){case l:return r?p(1,0):p(31,11);case c:return r?p(1,m):p(0,m+1);case u:var y=this.$locale().weekStart||0,w=(v<y?v+7:v)-y;return p(r?g-w:g+(6-w),m);case s:case h:return d(b+"Hours",0);case o:return d(b+"Minutes",1);case i:return d(b+"Seconds",2);case a:return d(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var n,u=k.p(t),f="set"+(this.$u?"UTC":""),p=(n={},n[s]=f+"Date",n[h]=f+"Date",n[c]=f+"Month",n[l]=f+"FullYear",n[o]=f+"Hours",n[i]=f+"Minutes",n[a]=f+"Seconds",n[r]=f+"Milliseconds",n)[u],d=u===s?this.$D+(e-this.$W):e;if(u===c||u===l){var v=this.clone().set(h,1);v.$d[p](d),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[k.p(t)]()},g.add=function(r,f){var h,p=this;r=Number(r);var d=k.p(f),v=function(t){var e=x(p);return k.w(e.date(e.date()+Math.round(t*r)),p)};if(d===c)return this.set(c,this.$M+r);if(d===l)return this.set(l,this.$y+r);if(d===s)return v(1);if(d===u)return v(7);var m=(h={},h[i]=e,h[o]=n,h[a]=t,h)[d]||1,g=this.$d.getTime()+r*m;return k.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",a=k.z(this),i=this.$H,o=this.$m,s=this.$M,u=n.weekdays,c=n.months,f=function(t,n,a,i){return t&&(t[n]||t(e,r))||a[n].substr(0,i)},l=function(t){return k.s(i%12||12,t,"0")},h=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:k.s(s+1,2,"0"),MMM:f(n.monthsShort,s,c,3),MMMM:f(c,s),D:this.$D,DD:k.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,u,2),ddd:f(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:k.s(i,2,"0"),h:l(1),hh:l(2),a:h(i,o,!0),A:h(i,o,!1),m:String(o),mm:k.s(o,2,"0"),s:String(this.$s),ss:k.s(this.$s,2,"0"),SSS:k.s(this.$ms,3,"0"),Z:a};return r.replace(v,(function(t,e){return e||d[t]||a.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,p){var d,v=k.p(h),m=x(r),g=(m.utcOffset()-this.utcOffset())*e,b=this-m,y=k.m(this,m);return y=(d={},d[l]=y/12,d[c]=y,d[f]=y/3,d[u]=(b-g)/6048e5,d[s]=(b-g)/864e5,d[o]=b/n,d[i]=b/e,d[a]=b/t,d)[v]||b,p?y:k.a(y)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return w[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},g.clone=function(){return k.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),M=j.prototype;return x.prototype=M,[["$ms",r],["$s",a],["$m",i],["$H",o],["$W",s],["$M",c],["$y",l],["$D",h]].forEach((function(t){M[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,j,x),t.$i=!0),x},x.locale=S,x.isDayjs=O,x.unix=function(t){return x(1e3*t)},x.en=w[y],x.Ls=w,x.p={},x}()},function(t,e){var n,r,a=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,c=[],f=!1,l=-1;function h(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!f){var t=s(h);f=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||f||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e,n){t.exports=n(65)},function(t,e,n){"use strict";n(5),n(9)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum_unsafe=function(t,e){var n={};e.forEach((function(t){n[t]=0}));for(var r=function(r,a){e.forEach((function(e){n[e]+=t[r][e]}))},a=0,i=t.length;a<i;a++)r(a);return n},e.sum=function(t,e){var n={};e.forEach((function(t){n[t]=0}));for(var r=function(r,a){e.forEach((function(e){n[e]+=Number(t[r][e])||0}))},a=0,i=t.length;a<i;a++)r(a);return n},e.count=function(t,e){var n={};e.forEach((function(t){n[t]=0}));for(var r=0,a=t.length;r<a;r++)e.forEach((function(t){n[t]++}));return n},e.mean=function(t,e){var n={};e.forEach((function(t){n[t]=0}));for(var r=function(r,a){e.forEach((function(e){n[e]+=Number(t[r][e])||0}))},a=0,i=t.length;a<i;a++)r(a);return e.forEach((function(e){n[e]/=t.length})),n}},function(t,e,n){"use strict";n(4),n(1),n(9)},function(t,e,n){"use strict";n(4),n(1),n(11),n(23),n(3),n(12)},function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},function(t,e,n){"use strict";var r=n(14);function a(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var i;if(n)i=n(e);else if(r.isURLSearchParams(e))i=e.toString();else{var o=[];r.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),o.push(a(e)+"="+a(t))})))})),i=o.join("&")}if(i){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,n){"use strict";t.exports=function(t,e,n,r,a){return t.config=e,n&&(t.code=n),t.request=r,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}},function(t,e,n){"use strict";var r=n(14),a=n(71),i=n(72),o=n(47),s=n(73),u=n(76),c=n(77),f=n(50),l=n(34),h=n(35);t.exports=function(t){return new Promise((function(e,n){var p,d=t.data,v=t.headers,m=t.responseType;function g(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}r.isFormData(d)&&delete v["Content-Type"];var b=new XMLHttpRequest;if(t.auth){var y=t.auth.username||"",w=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";v.Authorization="Basic "+btoa(y+":"+w)}var O=s(t.baseURL,t.url);function S(){if(b){var r="getAllResponseHeaders"in b?u(b.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:t,request:b};a((function(t){e(t),g()}),(function(t){n(t),g()}),i),b=null}}if(b.open(t.method.toUpperCase(),o(O,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(f("Request aborted",t,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(f("Network Error",t,null,b)),b=null},b.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded",r=t.transitional||l.transitional;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(f(e,t,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var x=(t.withCredentials||c(O))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;x&&(v[t.xsrfHeaderName]=x)}"setRequestHeader"in b&&r.forEach(v,(function(t,e){"undefined"===typeof d&&"content-type"===e.toLowerCase()?delete v[e]:b.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),m&&"json"!==m&&(b.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&b.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){b&&(n(!t||t&&t.type?new h("canceled"):t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),d||(d=null),b.send(d)}))}},function(t,e,n){"use strict";var r=n(48);t.exports=function(t,e,n,a,i){var o=new Error(t);return r(o,e,n,a,i)}},function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,n){"use strict";var r=n(14);t.exports=function(t,e){e=e||{};var n={};function a(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function i(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:a(void 0,t[n]):a(t[n],e[n])}function o(t){if(!r.isUndefined(e[t]))return a(void 0,e[t])}function s(n){return r.isUndefined(e[n])?r.isUndefined(t[n])?void 0:a(void 0,t[n]):a(void 0,e[n])}function u(n){return n in e?a(t[n],e[n]):n in t?a(void 0,t[n]):void 0}var c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||i,a=e(t);r.isUndefined(a)&&e!==u||(n[t]=a)})),n}},function(t,e){t.exports={version:"0.22.0"}},function(t,e){},function(t,e,n){"use strict";n.r(e),n.d(e,"insightExtraction",(function(){return d})),n.d(e,"subspaceSearching",(function(){return p})),n.d(e,"getVisSpaces",(function(){return C})),n.d(e,"IntentionWorkerCollection",(function(){return I})),n.d(e,"DefaultIWorker",(function(){return j})),n.d(e,"getIntentionSpaces",(function(){return N})),n.d(e,"Subspace",(function(){return r})),n.d(e,"VIEngine",(function(){return Z}));var r=n(17),a=n(4),i=n(1),o=n(23),s=n.n(o),u=n(3),c=n(12),f=n(11),l=n(6);function h(t,e){var n,r=[],o=function(t,e){for(var n=e.map((function(t){return e.map((function(t){return 0}))})),r=0;r<e.length;r++){n[r][r]=1;for(var a=r+1;a<e.length;a++)n[r][a]=n[a][r]=Object(u.c)(t,e[r],e[a])}return n}(t,e),s=f.a.kruskal({matrix:o,measures:e,groupMaxSize:Math.round(e.length/4),threshold:c.a}),h=Object(i.a)(s);try{for(h.s();!(n=h.n()).done;){var p=n.value,d=Object(u.f)(p,1,l.b.maxDimensionNumber);r.push.apply(r,Object(a.a)(d))}}catch(v){h.e(v)}finally{h.f()}return r}function p(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?h(t,e):Object(u.f)(e)}function d(t,e,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum",o=[],c=p(t,e,!0),f=Object(i.a)(c);try{for(f.s();!(r=f.n()).done;){var l,h=r.value,d={},v=s()({dataSource:t,dimensions:h,measures:n,asFields:n,operator:a||"sum"}),m=Object(i.a)(n);try{var g=function(){var t=l.value,e=v.map((function(e){return e[t]})),n=Object(u.k)(Object(u.i)(e)),r=Object(u.d)(n);d[t]=r};for(m.s();!(l=m.n()).done;)g()}catch(S){m.e(S)}finally{m.f()}for(var b=n.map((function(t){return n.map((function(t){return 0}))})),y=0;y<n.length;y++){b[y][y]=1;for(var w=y+1;w<n.length;w++){var O=Object(u.m)(v,n[y],n[w]);b[w][y]=b[y][w]=O}}o.push([h,d,b])}}catch(S){f.e(S)}finally{f.f()}return o}var v=n(10),m=n(7),g=n(8),b=n(0),y=n.n(b),w=n(2),O=n(38),S="=;=";function x(t,e){var n,r=[],a=Object(i.a)(t);try{for(a.s();!(n=a.n()).done;){var o,s=n.value,u=Object(i.a)(e);try{for(u.s();!(o=u.n()).done;){var c=o.value;r.push({dimensions:s,measures:c})}}catch(f){u.e(f)}finally{u.f()}}}catch(f){a.e(f)}finally{a.f()}return r}function k(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.b.maxDimensionNumber,r=[],o=Object(i.a)(t);try{for(o.s();!(e=o.n()).done;){var s=e.value,c=Object(u.f)(s,1,n);r.push.apply(r,Object(a.a)(c))}}catch(f){o.e(f)}finally{o.f()}return r}var j,M=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var a,o,s,c,f;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,o=0,s=Object(i.a)(r);try{for(f=function(){var t=c.value,n=e.map((function(e){return e[t]})),r=Object(u.k)(Object(u.i)(n)),i=Object(u.d)(r);a+=i,o+=i/Math.log2(n.length)},s.s();!(c=s.n()).done;)f()}catch(l){s.e(l)}finally{s.f()}return a/=r.length,o=1-(o/=r.length),t.abrupt("return",{dimensions:n,measures:r,type:"default_general",score:a,impurity:a,significance:o,order:"asc"});case 8:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),_=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var a,i,o,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new f.b.IsolationForest([],r,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,s=0,u=0;u<i.length;u++)i[u]>s&&(s=i[u],o=u);return c={},n.concat(r).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:n,measures:r,score:s,significance:s,order:"desc",description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),E=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var o,s,c,f,l,h;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===n.length){t.next=2;break}return t.abrupt("return",null);case 2:(o=Object(a.a)(e)).sort((function(t,e){return t[n[0]]>e[n[0]]?1:t[n[0]]===e[n[0]]?0:t[n[0]]<e[n[0]]?-1:void 0})),s=0,c=Object(i.a)(r);try{for(c.s();!(f=c.n()).done;)l=f.value,(h=new u.l(o,n[0],l)).normalizeDimensions(n),s+=h.significance()}catch(p){c.e(p)}finally{c.f()}return s/=r.length,t.abrupt("return",{dimensions:n,measures:r,score:s,significance:s,order:"desc"});case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),D=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var a,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length<2)){t.next=2;break}return t.abrupt("return",null);case 2:return 0,i=new O.a({dataSource:e,dimensions:n,measures:r,K:8}),a=i.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),t.abrupt("return",{dimensions:n,measures:r,score:a,significance:a,order:"desc"});case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(j||(j={}));var I=function(){function t(){Object(m.a)(this,t),this.workers=new Map}return Object(g.a)(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var n=this.workers.get(t);n[0]=e,this.workers.set(t,n)}},{key:"each",value:function(t){var e,n=Object(i.a)(this.workers);try{for(n.s();!(e=n.n()).done;){var r=Object(v.a)(e.value,2),a=r[0],o=r[1];o[0]&&t(o[1],a)}}catch(s){n.e(s)}finally{n.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=e.withDefaultIWorkers,r=void 0===n||n;for(var a in t.colletion||(t.colletion=new t,r&&(t.colletion.register(j.outlier,_),t.colletion.register(j.cluster,D),t.colletion.register(j.trend,E))),j)t.colletion.enable(j[a],r);return t.colletion}}]),t}();function N(t,e,n){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(y.a.mark((function t(e,n,r){var a,o,s,u;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],o=Object(i.a)(n),t.prev=2,u=y.a.mark((function t(){var n,i,o,u,c,f;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.value,i=n.dimensions,o=n.measures,u=i.join(S),!e.has(u)){t.next=9;break}return c=e.get(u),t.next=7,M(c,i,o);case 7:f=t.sent,r.each(function(){var t=Object(w.a)(y.a.mark((function t(e,n){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(c,i,o);case 3:null!==(r=t.sent)&&(r.type=n,r.impurity=f.impurity,a.push(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:o,aggData:c},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})),o.s();case 5:if((s=o.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(y.a.mark((function t(e){var n,a,o,u,f,l,h,p,d,v,m,g,b,w,O,j,M,_,E,D,T,C,A,R,L,F,q,P;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.dataSource,a=e.dimensions,o=e.measures,u=e.collection,f=e.dimension_correlation_threshold,l=void 0===f?c.a:f,h=e.measure_correlation_threshold,p=void 0===h?c.b.strong:h,d=e.max_dimension_num_in_view,v=void 0===d?3:d,m=e.max_measure_num_in_view,g=void 0===m?3:m,b=a,w=Object(r.getDimClusterGroups)(n,b,l),O=k(w,v),j=Object(r.getMeaSetsBasedOnClusterGroups)(n,o,p),M=k(j,g),_=x(O,M),E=new Map,D=(new Date).getTime(),T=Object(i.a)(O);try{for(T.s();!(C=T.n()).done;)A=C.value,R=A.join(S),L=s()({dataSource:n,dimensions:A,measures:o,asFields:o,operator:"sum"}),E.set(R,L)}catch(y){T.e(y)}finally{T.f()}return F=(new Date).getTime(),console.log("cube cost",F-D),E.set("*",n),q=u||I.init(),t.next=18,N(E,_,q);case 18:return P=t.sent,t.abrupt("return",P);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var R=n(5),L=n(24),F={boolean:function(t){return"true"===t||"false"===t||!0===t||!1===t},integer:function(t){return F.number(t)&&(t=+t)===~~t},number:function(t){return!isNaN(+t)},date:function(t){return!isNaN(Date.parse(t))}};function q(t,e){var n,r=[],o=new Map,s=Object(i.a)(t);try{var u=function(){var t=n.value,s=new Map;e.forEach((function(e){s.has(e[t])||s.set(e[t],0),s.set(e[t],s.get(e[t])+1)}));var u=function(t){var e,n,r=["boolean","integer","number","date"],a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){for(var o=e.value,s=0;s<r.length;++s)null==(n=o)||n!==n||F[r[s]](o)||(r.splice(s,1),s-=1);if(0===r.length)return"string"}}catch(u){a.e(u)}finally{a.f()}return r[0]}(Object(a.a)(s.keys())),c=Object(L.getFieldType)(e,t),f=Math.log2(s.size),h=f,p="dimension",d=!1;if(("integer"===u||"number"===u)&&"ordinal"!==c&&(p="measure",s.size>l.a)){var v=Object(L.getFloatFieldEntropy)(e,t);h=v.entropy,f=v.maxEntropy,d=!0}if(!d){var m=Object(L.getFieldEntropy)(e,t);h=m.entropy,f=m.maxEntropy}var g={key:t,analyticType:p,semanticType:c,dataType:u,features:{unique:s.size,size:e.length,entropy:h,maxEntropy:f}};r.push(g),o.set(g.key,g)};for(s.s();!(n=s.n()).done;)u()}catch(c){s.e(c)}finally{s.f()}return{fields:r,dictonary:o}}var P,z=n(30),G=n(31),$=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var a,i,o,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new f.b.IsolationForest([],r,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,s=0,u=0;u<i.length;u++)i[u]>s&&(s=i[u],o=u);return c={},n.concat(r).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:n,measures:r,significance:s,description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),B=function(){var t=Object(w.a)(y.a.mark((function t(e,n,r){var o,s,c,f,l,h;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===n.length){t.next=2;break}return t.abrupt("return",null);case 2:(o=Object(a.a)(e)).sort((function(t,e){return t[n[0]]>e[n[0]]?1:t[n[0]]===e[n[0]]?0:-1})),s=0,c=Object(i.a)(r);try{for(c.s();!(f=c.n()).done;)l=f.value,(h=new u.l(o,n[0],l)).normalizeDimensions(n),s+=h.significance()}catch(p){c.e(p)}finally{c.f()}return s/=r.length,t.abrupt("return",{dimensions:n,measures:r,significance:s});case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.trend="default_trend"}(P||(P={}));var U=function(){function t(){Object(m.a)(this,t),this.workers=new Map}return Object(g.a)(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var n=this.workers.get(t);n[0]=e,this.workers.set(t,n)}},{key:"each",value:function(t){var e,n=Object(i.a)(this.workers);try{for(n.s();!(e=n.n()).done;){var r=Object(v.a)(e.value,2),a=r[0],o=r[1];o[0]&&t(o[1],a)}}catch(s){n.e(s)}finally{n.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=e.withDefaultIWorkers,r=void 0===n||n;return t.colletion||(t.colletion=new t,r&&(t.colletion.register(P.outlier,$),t.colletion.register(P.trend,B))),Object.values(P).forEach((function(e){t.colletion.enable(e,r)})),t.colletion}}]),t}(),V=n(19),W=n(9),Y=Math.round(Math.pow(75,2)/500);function H(t){var e=t.length,n=Object(a.a)(t);return n.sort((function(t,e){return t.features.entropy-e.features.entropy})),e<25?n:e<500?n.slice(0,Math.round(Math.sqrt(Y*(e-25))+25)):n.slice(0,100)}function X(t,e){var n=t.length,r=Object(a.a)(t);return r.sort((function(t,e){return t.features.entropy-e.features.entropy})),r.slice(0,Math.round(n*e))}function J(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];for(var r=Math.log2(e),a=0,i=0;i<t.length;i++)a+=t[i]*(Math.log2(t[i])-r)/e;return-a}function K(t,e,n,r){var a,o=n,s=(r-o)/8,u=new Array(9).fill(0),c=Object(i.a)(t);try{for(c.s();!(a=c.n()).done;){var f=a.value;u[Math.floor((f[e]-o)/s)]++}}catch(l){c.e(l)}finally{c.f()}return u[7]+=u[8],J(u.slice(0,8).filter((function(t){return t>0})))}function Q(t,e,n){var r,o=new Map,s=Object(i.a)(t);try{var u=function(){var t,n=r.value,a=e.map((function(t){return n[t]})).join("_");o.has(a)||o.set(a,[]),null===(t=o.get(a))||void 0===t||t.push(n)};for(s.s();!(r=s.n()).done;)u()}catch(p){s.e(p)}finally{s.f()}var c,f=0,l=Object(i.a)(n);try{var h=function(){var e=c.value,n=Math.min.apply(Math,Object(a.a)(t.map((function(t){return t[e]})))),r=Math.max.apply(Math,Object(a.a)(t.map((function(t){return t[e]})))),i=K(t,e,n,r),s=0,u=[],l=Object(a.a)(o.entries());l.sort((function(t,e){return e[1].length-t[1].length}));for(var h=0;h<l.length&&!(h>=7);h++){var p=l[h][1],d=p.length/t.length,v=K(p,e,n,r);s+=d*v,u.push([d,v])}for(var m=[],g=7;g<l.length;g++)m.push.apply(m,Object(a.a)(l[g][1]));m.length>0&&(s+=m.length/t.length*K(m,e,n,r));f+=m.length>0?(i-s)/Math.log2(8):(i-s)/Math.log2(o.size)};for(l.s();!(c=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}return f/n.length}var Z=function(){function t(){Object(m.a)(this,t),this.env="browser",this._dimensions=[],this._measures=[],this.cubeStorageName="_cuboids",this.minDistEvalSampleSize=80,this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count","dist"],this.workerCollection=U.init()}return Object(g.a)(t,[{key:"serialize",value:function(){var t=this.fields,e=this.dataGraph,n=this.subSpaces,r=this.insightSpaces,a=this.dataSource,i=this.rawDataSource,o=this.cube;return{storage:{version:l.f,fields:t,dataGraph:{MClusters:e.MClusters,DClusters:e.DClusters,DG:e.DG,MG:e.MG},subSpaces:n,insightSpaces:r},dataStorage:{version:l.f,dataSource:{raw:i,view:a},cuboids:o.exportCuboids()}}}},{key:"deSerialize",value:function(t,e){var n=this;this.fields=t.fields,"undefined"!==typeof this.fieldDictonary&&null!==this.fieldDictonary?this.fieldDictonary.clear():this.fieldDictonary=new Map,t.fields.forEach((function(t){n.fieldDictonary.set(t.key,t)}));var r=this.dimensions,a=this.measures;if(this.dataGraph=new z.a(r,a),this.dataGraph.DG=t.dataGraph.DG,this.dataGraph.MG=t.dataGraph.MG,this.dataGraph.DClusters=t.dataGraph.DClusters,this.dataGraph.MClusters=t.dataGraph.MClusters,this.subSpaces=t.subSpaces,this.insightSpaces=t.insightSpaces,e){var i=this.aggregators;this.rawDataSource=e.dataSource.raw,this.dataSource=e.dataSource.view,this.cube=new G.a({dataSource:e.dataSource.view,dimensions:r,measures:a,ops:i}),Object.keys(e.cuboids).forEach((function(t){n.cube.loadCuboid(t,e.cuboids[t])}))}}},{key:"setFields",value:function(t){this._mutFields=t,this.dataSource=Object(W.a)(this.rawDataSource);var e=q(t.map((function(t){return t.key})),this.dataSource),n=e.fields;e.dictonary;this.rawFields=n.map((function(e,n){var r=Object(R.a)({},e);return"?"!==t[n].dataType&&(r.dataType=t[n].dataType),"?"!==t[n].semanticType&&(r.semanticType=t[n].semanticType),"?"!==t[n].analyticType&&(r.analyticType=t[n].analyticType),r}))}},{key:"setData",value:function(t){return this.rawDataSource=t,this.dataSource=Object(W.a)(t),this}},{key:"dimensions",get:function(){return this.fields.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))}},{key:"measures",get:function(){return this.fields.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))}},{key:"buildfieldsSummary",value:function(){var t=q(this.fields.map((function(t){return t.key})),this.dataSource),e=t.fields,n=t.dictonary;return this.fields=e,this.fieldDictonary=n,this}},{key:"univarSelection",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.rawFields,r=this.rawDataSource,a=[],i=[],o=0;o<n.length;o++){var s=n[o],u=s.key;if("dimension"===s.analyticType)if("quantitative"===s.semanticType&&s.features.unique>50);else if("nominal"===s.semanticType&&s.features.unique&&s.features.unique>l.d&&r.length/s.features.unique>=this.minDistEvalSampleSize)continue;i.push(o),a.push(u)}var c=q(a,this.dataSource),f=c.fields,h=c.dictonary;if(f.forEach((function(t,e){var r=i[e];t.semanticType=n[r].semanticType,t.dataType=n[r].dataType,t.analyticType=n[r].analyticType})),this.fields="auto"===t?H(f):X(f,e),-1===this.fields.findIndex((function(t){return"dimension"===t.analyticType}))){var p=f.filter((function(t){return"dimension"===t.analyticType}));p.length>0&&(p.sort((function(t,e){return t.features.entropy-e.features.entropy})),this.fields.push(p[0]))}this.fieldDictonary=h}},{key:"buildGraph",value:function(){return this.dataGraph=new z.a(this.dimensions,this.measures),this.dataGraph.computeDGraph(this.dataSource),this.dataGraph.computeMGraph(this.dataSource),this}},{key:"buildCube",value:function(){var t=Object(w.a)(y.a.mark((function t(e){var n,r,a,i,o,s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.measures,r=this.dataSource,a=this.dataGraph,i=this.dimensions,o=this.aggregators,s=e,"undefined"===typeof e?(s=new G.a({dimensions:i,measures:n,dataSource:r,ops:o})).storage.env=this.env:s=e,t.next=5,s.buildBaseCuboid();case 5:return a.DClusters.forEach((function(t){s.buildCuboidOnCluster(t)})),t.next=8,Promise.all(a.DClusters.map((function(t){return s.buildCuboidOnCluster(t)})));case 8:return this.cube=s,t.abrupt("return",this);case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:"buildSubspaces",value:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,o=this.dataGraph.MClusters,s=t.getCombinationFromClusterGroups(o,r),c=[],f=Object(i.a)(a);try{for(f.s();!(e=f.n()).done;){var l,h=e.value,p=Object(u.f)(h,n.MIN,n.MAX),d=Object(i.a)(p);try{for(d.s();!(l=d.n()).done;){var v,m=l.value,g=Object(i.a)(s);try{for(g.s();!(v=g.n()).done;){var b=v.value;c.push({dimensions:m,measures:b})}}catch(y){g.e(y)}finally{g.f()}}}catch(y){d.e(y)}finally{d.f()}}}catch(y){f.e(y)}finally{f.f()}return this.subSpaces=c,this}},{key:"exploreViewsPOC",value:function(){var t=Object(w.a)(y.a.mark((function t(){var e,n,r,a,o,s,u,c,f,l=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=l.length>0&&void 0!==l[0]?l[0]:this.subSpaces,n=this,r=[],a=Object(i.a)(e);try{for(a.s();!(o=a.n()).done;)s=o.value,u=s.dimensions,c=s.measures,f=Q(n.dataSource,u,c),r.push({impurity:f,significance:1,dimensions:u,measures:c})}catch(h){a.e(h)}finally{a.f()}return r.sort((function(t,e){return(e.impurity||0)-(t.impurity||0)})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"exploreViews",value:function(){var t=Object(w.a)(y.a.mark((function t(){var e,n,r,a,o,s,u,c,f,h,p=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=p.length>0&&void 0!==p[0]?p[0]:this.subSpaces,r=(n=this).measures,a=n.fieldDictonary,n.dataSource,o=[],t.next=6,n.cube.getCuboid([]);case 6:return s=t.sent,t.next=9,s.getAggregatedRows(r,r.map((function(){return"dist"})));case 9:u=t.sent,c=Object(i.a)(e),t.prev=11,h=y.a.mark((function t(){var e,r,s,c,h,p,d,v,m,g;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.value,r=e.dimensions,s=e.measures,t.next=4,n.cube.getCuboid(r);case 4:return c=t.sent,t.next=7,c.loadStateInCache();case 7:return t.next=9,c.getAggregatedRows(s,s.map((function(){return"dist"})));case 9:return h=t.sent,t.next=12,c.getAggregatedRows(s,s.map((function(){return"count"})));case 12:p=t.sent,c.clearState(),d=0,v=Object(i.a)(s);try{for(g=function(){var t=m.value,e=0;u.length>0&&(e=J(u[0][t].filter((function(t){return t>0}))));var n=0,r=a.get(t).features.size,i=h.map((function(e,n){return{freq:p[n][t],dist:e[t]}}));i.sort((function(t,e){return e.freq-t.freq}));for(var o=0;o<i.length&&!(o>=l.c-1);o++){var s=J(i[o].dist.filter((function(t){return t>0})));n+=i[o].freq/r*s}for(var c=new Array(l.c).fill(0),f=0,v=l.c-1;v<i.length;v++){for(var g=0;g<c.length;g++)c[g]+=i[v].dist[g];f+=i[v].freq}f>0&&(n+=f/r*J(c.filter((function(t){return t>0})))),d+=(e-n)/Math.log2(Math.min(l.c,i.length))},v.s();!(m=v.n()).done;)g()}catch(b){v.e(b)}finally{v.f()}d/=s.length,o.push({dimensions:r,measures:s,significance:1,score:d,impurity:d});case 19:case"end":return t.stop()}}),t)})),c.s();case 14:if((f=c.n()).done){t.next=18;break}return t.delegateYield(h(),"t0",16);case 16:t.next=14;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(11),c.e(t.t1);case 23:return t.prev=23,c.f(),t.finish(23);case 26:return o.sort((function(t,e){return e.impurity-t.impurity})),t.abrupt("return",o);case 28:case"end":return t.stop()}}),t,this,[[11,20,23,26]])})));return function(){return t.apply(this,arguments)}}()},{key:"searchPointInterests",value:function(t){}},{key:"insightExtraction",value:function(){var e=Object(w.a)(y.a.mark((function e(){var n,r,a,o,s,u,c=this,f=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=f.length>0&&void 0!==f[0]?f[0]:this.subSpaces,r=this,a=[],o=Object(i.a)(n),e.prev=4,u=y.a.mark((function e(){var n,i,o,u,f,l,h,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.value,i=n.dimensions,o=n.measures,u=r.cube,e.next=5,u.getCuboid(i);case 5:return f=e.sent,e.next=8,f.getAggregatedRows(o,o.map((function(){return"sum"})));case 8:return l=e.sent,h=t.getSpaceImpurity(l,i,o),p=[],c.workerCollection.each((function(t,e){var n=function(){var t=Object(w.a)(y.a.mark((function t(e,n){var s;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(l,i,o,r.fieldDictonary,r);case 3:null!==(s=t.sent)&&(s.type=n,s.impurity=h,a.push(s)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:o,aggData:l},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}();p.push(n(t,e))})),e.next=14,Promise.all(p);case 14:case"end":return e.stop()}}),e)})),o.s();case 7:if((s=o.n()).done){e.next=11;break}return e.delegateYield(u(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),o.e(e.t1);case 16:return e.prev=16,o.f(),e.finish(16);case 19:return r.insightSpaces=a,this.setInsightScores(),this.insightSpaces.sort((function(t,e){return(t.score||0)-(e.score||0)})),e.abrupt("return",this.insightSpaces);case 23:case"end":return e.stop()}}),e,this,[[4,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"setInsightScores",value:function(){return this.insightSpaces.forEach((function(t){t.score=t.impurity/t.significance})),this}},{key:"getFieldInfoInVis",value:function(){var t=Object(w.a)(y.a.mark((function t(e){var n,r,a,o,s,c,f,l,h,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=this.cube,a=this.fieldDictonary,o=e.dimensions,s=e.measures,c=Object(i.a)(o),t.prev=5,l=y.a.mark((function t(){var e,i,o,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=f.value,t.next=3,r.getCuboid([e]);case 3:return i=t.sent,t.next=6,i.getAggregatedRows(s,s.map((function(){return"sum"})));case 6:o=t.sent,c=0,s.forEach((function(t){var e=o.map((function(e){return e[t]})),n=Object(u.k)(Object(u.i)(e)),r=Object(u.d)(n);c+=r})),n.push(Object(R.a)(Object(R.a)({},a.get(e)),{},{impurity:c}));case 10:case"end":return t.stop()}}),t)})),c.s();case 8:if((f=c.n()).done){t.next=12;break}return t.delegateYield(l(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),c.e(t.t1);case 17:return t.prev=17,c.f(),t.finish(17);case 20:return t.next=22,r.getCuboid(o);case 22:return h=t.sent,t.next=25,h.getAggregatedRows(s,s.map((function(){return"sum"})));case 25:return p=t.sent,s.forEach((function(t){var e=p.map((function(e){return e[t]})),r=Object(u.k)(Object(u.i)(e)),i=Object(u.d)(r);n.push(Object(R.a)(Object(R.a)({},a.get(t)),{},{impurity:i}))})),t.abrupt("return",n);case 28:case"end":return t.stop()}}),t,this,[[5,14,17,20]])})));return function(e){return t.apply(this,arguments)}}()},{key:"getFieldInfoInVisBeta",value:function(){var t=Object(w.a)(y.a.mark((function t(e){var n,r,a,i,o,s,u,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r=this.cube,a=this.fieldDictonary,i=e.dimensions,o=e.measures,i.forEach((function(t){var e=a.get(t);n.push(Object(R.a)(Object(R.a)({},e),{},{impurity:e.features.entropy}))})),t.next=7,r.getCuboid(i);case 7:return s=t.sent,t.next=10,s.getAggregatedRows(o,o.map((function(){return"dist"})));case 10:return u=t.sent,t.next=13,s.getAggregatedRows(o,o.map((function(){return"count"})));case 13:return c=t.sent,o.forEach((function(t){var e=0,r=a.get(t).features.size,i=u.map((function(e,n){return{freq:c[n][t],dist:e[t]}}));i.sort((function(t,e){return e.freq-t.freq}));for(var o=0;o<i.length&&!(o>=l.c-1);o++){var s=J(i[o].dist.filter((function(t){return t>0})));e+=i[o].freq/r*s}for(var f=new Array(l.c).fill(0),h=0,p=l.c-1;p<i.length;p++){for(var d=0;d<f.length;d++)f[d]+=i[p].dist[d];h+=i[p].freq}h>0&&(e+=h/r*J(f.filter((function(t){return t>0}))));var v=a.get(t);n.push(Object(R.a)(Object(R.a)({},v),{},{impurity:e}))})),t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"specification",value:function(){var t=Object(w.a)(y.a.mark((function t(e){var n,r,a,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dimensions,r=e.measures,t.next=3,this.getFieldInfoInVisBeta(e);case 3:return a=t.sent,t.next=6,this.cube.getCuboid(n);case 6:return i=t.sent,t.next=9,i.getAggregatedRows(r,r.map((function(){return"sum"})));case 9:return o=t.sent,t.abrupt("return",Object(V.c)(a,o));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getCombinationFromClusterGroups",value:function(t,e){var n,r=[],o=Object(i.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=Object(u.f)(s,e.MIN,e.MAX);r.push.apply(r,Object(a.a)(c))}}catch(f){o.e(f)}finally{o.f()}return r}},{key:"getSpaceImpurity",value:function(t,e,n){var r,a=0,o=Object(i.a)(n);try{var s=function(){var e=r.value,n=t.map((function(t){return t[e]})),i=Object(u.k)(Object(u.i)(n)),o=Object(u.d)(i);a+=o};for(o.s();!(r=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return a/=n.length}}]),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"ClickHouseEngine",(function(){return T}));var r=n(1),a=n(5),i=n(0),o=n.n(i),s=n(2),u=n(7),c=n(8),f={Int8:"integer",Int16:"integer",Int32:"integer",Int64:"integer",UInt8:"integer",UInt16:"integer",UInt32:"number",UInt64:"number",Float32:"number",Float64:"number",BOOLEAN:"boolean",String:"string"},l={number:"quantitative",integer:"quantitative",boolean:"nominal",date:"temporal",string:"nominal"},h={number:"measure",integer:"measure",boolean:"dimension",date:"dimension",string:"dimension"};function p(t){return l[t]}function d(t){return h[t]}function v(t,e){switch(e){case"Int8":case"Int16":case"Int32":case"Int64":case"UInt8":case"UInt16":case"UInt32":case"UInt64":return parseInt(t);case"Float32":case"Float64":return Number(t);default:return t}}function m(t,e){var n,a=[],i=t.substring(0,t.length-1).split("\n"),o=Object(r.a)(i);try{for(o.s();!(n=o.n()).done;){for(var s=n.value,u={},c=s.split(/[\t]/),f=0;f<e.length;f++)u[e[f].fid]=v(c[f],e[f].dataType);a.push(u)}}catch(l){o.e(l)}finally{o.f()}return a}var g=n(6),b=n(12),y=n(11),w=function(){function t(e,n,r){Object(u.a)(this,t),this.DIMENSION_CORRELATION_THRESHOLD=b.a,this.MEASURE_CORRELATION_THRESHOLD=b.b.strong,this.SOFT_MAX_DIM_IN_VIEW=4,this.SOFT_MAX_MEA_IN_VIEW=3,this.dimensions=[],this.measures=[],this.viewName=e,this.dimensions=n,this.measures=r}return Object(c.a)(t,[{key:"computeGraph",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,a,i,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.viewName,a=e.map((function(){return e.map((function(){return 0}))})),i=0;case 3:if(!(i<e.length)){t.next=15;break}s=0;case 5:if(!(s<e.length)){t.next=12;break}return t.next=8,n(r,e[i],e[s]);case 8:a[i][s]=a[s][i]=t.sent;case 9:s++,t.next=5;break;case 12:i++,t.next=3;break;case 15:return t.abrupt("return",a);case 16:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"computeDGraph",value:function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.computeGraph(this.dimensions,e);case 2:return this.DG=t.sent,t.abrupt("return",this.DG);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"computeMGraph",value:function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.computeGraph(this.measures,e);case 2:return this.MG=t.sent,t.abrupt("return",this.MG);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"clusterDGraph",value:function(t){var e=this.DG,n=this.dimensions,r=this.SOFT_MAX_DIM_IN_VIEW,a=this.DIMENSION_CORRELATION_THRESHOLD,i="number"===typeof t?t:a;return this.DClusters=y.a.kruskal({matrix:e,measures:n,groupMaxSize:Math.round(n.length/r),threshold:i}),this.DClusters}},{key:"clusterMGraph",value:function(t){var e=this.MG,n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD,a=this.SOFT_MAX_MEA_IN_VIEW,i="number"===typeof t?t:r;return this.MClusters=y.a.kruskal({matrix:e,measures:n,groupMaxSize:Math.round(n.length/a),threshold:i}),this.MClusters}}]),t}(),O=n(4),S=n(3);function x(t,e){var n,a=[],i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=Object(S.f)(o,e.MIN,e.MAX);a.push.apply(a,Object(O.a)(s))}}catch(u){i.e(u)}finally{i.f()}return a}var k=function(){function t(e){var n=this;Object(u.a)(this,t),this.chiSquared=function(){var t=Object(s.a)(o.a.mark((function t(e,r,a){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.utils.query("with col1Totals as (select `".concat(r,"` as col1, count(*) as values_count from ").concat(e," group by `").concat(r,"`),\n            col2Totals as (select `").concat(a,"` as col2, count(*) as values_count from ").concat(e," group by `").concat(a,"`),\n            total as (select count(*) as values_count from ").concat(e,"),\n            colPairs as (select `").concat(r,"` as col1, `").concat(a,"` as col2, count(*) as values_count from ").concat(e," group by `").concat(r,"`, `").concat(a,"`)\n            select sum(value) from (select pow(col1Totals.values_count * (col2Totals.values_count / total.values_count) - colPairs.values_count, 2) / (col1Totals.values_count * (col2Totals.values_count / total.values_count)) as value\n            from colPairs, total \n            inner join col1Totals on colPairs.col1 = col1Totals.col1\n            inner join col2Totals on colPairs.col2 = col2Totals.col2);\n        "));case 2:return i=t.sent,t.abrupt("return",Number(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.cramersV=function(){var t=Object(s.a)(o.a.mark((function t(e,r,a){var i,s,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.chiSquared(e,r,a);case 2:return i=t.sent,t.next=5,n.utils.query("select count(*), uniq(`".concat(r,"`), uniq(`").concat(a,"`) from ").concat(e));case 5:return s=t.sent,u=s.slice(0,-1).split("\t").map((function(t){return parseInt(t)})),c=Math.sqrt(i/(u[0]*Math.min(u[1]-1,u[2]-1))),t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.pearsonCC=function(){var t=Object(s.a)(o.a.mark((function t(e,r,a){var i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.utils.query("select corr(`".concat(r,"`, `").concat(a,"`) from ").concat(e));case 2:return i=t.sent,t.abrupt("return",Number(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.getSpaceImpurity=function(){var t=Object(s.a)(o.a.mark((function t(e,r,a){var i,s,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.utils.query("with agg_view as (select count(*) as values_count, ".concat(a.map((function(t){return"sum(`".concat(t,"`) as `sum_").concat(t,"`")})).join(",")," from ").concat(e," group by ").concat(r.map((function(t){return"`".concat(t,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(a.map((function(t){return"sum(abs(`sum_".concat(t,"`)) as `abssum_sum_").concat(t,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(a.map((function(t){return"abs(`sum_".concat(t,"`) / `abssum_sum_").concat(t,"` as `pb_").concat(t,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(a.map((function(t){return"if(`pb_".concat(t,"` = 0, 0, -`pb_").concat(t,"` * log2(`pb_").concat(t,"`)) as `safe_").concat(t,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(a.map((function(t){return"sum(`safe_".concat(t,"`)")})).join(",")," from safe_value\n        "));case 2:for(i=t.sent,s=i.slice(0,-1).split("\t").map((function(t){return Number(t)})),u=0,c=1;c<s.length;c++)u+=s[c];return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),this.utils=e}return Object(c.a)(t,[{key:"getCombinationFromClusterGroups",value:function(t,e){var n,a=[],i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value,s=Object(S.f)(o,e.MIN,e.MAX);a.push.apply(a,Object(O.a)(s))}}catch(u){i.e(u)}finally{i.f()}return a}}]),t}(),j=n(19);function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=t.sort((function(t,e){return t.impurity-e.impurity})),r=Object(j.a)(n),a=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),i=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(r.position&&2===r.position.length)if(a.has(r.position[0])&&i.has(r.position[1])||a.has(r.position[1])&&i.has(r.position[0])){var o=a.has(r.position[0])?0:1,s=r.position[o],u=r.position[(o+1)%2];r.position=[s,u];var c=t.find((function(t){return t.key===s})),f=c?c.features.unique:0;r.geomType=["interval","line","area"].filter((function(t){return f>=j.b[t][0]&&f<=j.b[t][1]})),"nominal"===c.semanticType&&(r.geomType=["interval"])}else r.geomType=["point","density"].filter((function(t){return e>=j.b[t][0]&&e<=j.b[t][1]}));return{schema:r}}var _=n(41),E=n.n(_);var D=function(){function t(e){Object(u.a)(this,t),this.config=e||{protocol:"http",host:"localhost",port:8123,path:""}}return Object(c.a)(t,[{key:"getCHConfig",value:function(){return this.config}},{key:"setCHConfig",value:function(t){var e=this;Object.keys(t).forEach((function(n){e.config[n]=t[n]}))}},{key:"query",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.config,t.next=4,E()("".concat(n.protocol,"://").concat(n.host,":").concat(n.port).concat(n.path,"?query=").concat(e));case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(0),new Error("[SQL Error] ".concat(e,".\n").concat(t.t0.toString()));case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},{key:"queryw",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=this.config,t.next=4,E()({url:"".concat(n.protocol,"://").concat(n.host,":").concat(n.port).concat(n.path),method:"post",params:{query:e}});case 4:return r=t.sent,t.abrupt("return",r.data);case 8:throw t.prev=8,t.t0=t.catch(0),new Error("[SQL Error] ".concat(e,".\n").concat(t.t0.toString()));case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}]),t}(),I="bin_";function N(t,e){for(var n=[],r=(t[1]-t[0])/e,a=0;a<e;a++)n.push([t[0]+a*r,t[0]+(a+1)*r]);return n}var T=function(){function t(){Object(u.a)(this,t),this.rawFields=[],this.fields=[],this.dataViewName=null,this.dataGraph=null,this.dataViewMetas=[],this.insightSpaces=[],this.dbMetas=[],this.features={size:0},this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.utils=new D,this.statistics=new k(this.utils)}return Object(c.a)(t,[{key:"dimensions",get:function(){return this.fields.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))}},{key:"measures",get:function(){return this.fields.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))}},{key:"setRawFields",value:function(t){this.rawFields=t}},{key:"query",value:function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.utils.query(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"queryw",value:function(){var t=Object(s.a)(o.a.mark((function t(e){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.utils.queryw(e));case 1:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"loadData",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.query("SELECT * from ".concat(e,";"));case 2:return n=t.sent,t.next=5,this.getFieldMetas(e);case 5:return r=t.sent,this.dbMetas=r,a=m(n,r),t.abrupt("return",a);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getFieldMetas",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.query("DESC ".concat(e));case 2:return n=t.sent,t.abrupt("return",n.substr(0,n.length-1).split("\n").map((function(t){var e=t.split("\t");return{fid:e[0],dataType:e[1]}})));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"buildFieldsSummary",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r,a,i,s,u,c,l,h,v;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFieldMetas(e);case 2:return n=t.sent,this.dbMetas=n,t.next=6,this.query("SELECT ".concat(n.map((function(t){return"uniq(`".concat(t.fid,"`)")})).join(",")," FROM ").concat(e,";"));case 6:return r=t.sent,a=r.split("\t").map((function(t){return parseInt(t)})),t.t0=parseInt,t.next=11,this.query("SELECT COUNT(*) FROM ".concat(e,";"));case 11:t.t1=t.sent,i=(0,t.t0)(t.t1),this.features.size=i,s=[],u=0;case 16:if(!(u<n.length)){t.next=32;break}if(c=Math.log2(a[u]),l=1/0,a[u]!==i){t.next=23;break}l=c,t.next=27;break;case 23:return t.next=25,this.query("with frequency_list as (SELECT COUNT(*) as frequency FROM ".concat(e," GROUP BY `").concat(n[u].fid,"`),\n                total as (select sum(frequency) as total from frequency_list),\n                pb_list as (select (frequency_list.frequency / total.total) as pb from frequency_list, total) \n                SELECT SUM(-pb * log2(pb)) FROM pb_list"));case 25:h=t.sent,l=Number(h);case 27:o=n[u].dataType,v=f[o]||"string",s.push({key:n[u].fid,name:n[u].fid,analyticType:d(v),semanticType:p(v),dataType:v,features:{entropy:l,maxEntropy:c,unique:a[u],size:i}});case 29:u++,t.next=16;break;case 32:return t.abrupt("return",s);case 33:case"end":return t.stop()}var o}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"uvsView",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r,i,s,u,c=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n="test_view",0!==this.rawFields.length){t.next=5;break}return t.next=4,this.buildFieldsSummary(e);case 4:this.rawFields=t.sent;case 5:return t.next=7,this.featureTransform(e,n);case 7:r=t.sent,i=[],s=function(t){var e=c.rawFields[t];if("dimension"===e.analyticType&&"quantitative"===e.semanticType&&e.features.unique>50){var n=r.find((function(t){return t.key==="".concat(I)}));return n&&i.push(Object(a.a)(Object(a.a)({},n),{},{features:Object(a.a)({},n.features)})),"continue"}if("quantitative"===e.semanticType){var o=r.find((function(t){return t.key==="".concat(I).concat(e.key)})),s=Object(a.a)(Object(a.a)({},e),{},{features:Object(a.a)({},e.features)});o&&(s.features.entropy=o.features.entropy,s.features.maxEntropy=o.features.maxEntropy),i.push(s)}else i.push(Object(a.a)(Object(a.a)({},e),{},{features:Object(a.a)({},e.features)}))},u=0;case 11:if(!(u<this.rawFields.length)){t.next=18;break}if("continue"!==s(u)){t.next=15;break}return t.abrupt("continue",15);case 15:u++,t.next=11;break;case 18:return this.fields=i,t.abrupt("return",i);case 20:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getContinuousRanges",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r,a,i,s,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.rawFields.filter((function(t){return"quantitative"===t.semanticType})),r=n.map((function(t){return"min(`".concat(t.key,"`),max(`").concat(t.key,"`)")})),t.next=4,this.query("SELECT ".concat(r.join(",")," FROM ").concat(e,";"));case 4:for(a=t.sent,i=[],s=a.substring(0,a.length-1).split("\t").map((function(t){return Number(t)})),u=0;u<n.length;u++)i.push({fid:n[u].key,range:[s[2*u],s[2*u+1]]});return t.abrupt("return",i);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"binContinuousFields",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getContinuousRanges(e);case 2:return r=t.sent,a=r.map((function(t){var e=N(t.range,n),r="case ";r+="when `".concat(t.fid,"` < ").concat(e[0][1]," then '(-Infinity, ").concat(e[0][1],")'\n");for(var a=1;a<e.length-1;a++)r+="when `".concat(t.fid,"` >= ").concat(e[a][0]," and `").concat(t.fid,"` < ").concat(e[a][1]," then '[").concat(e[a][0],", ").concat(e[a][1],")'\n");return r+="when `".concat(t.fid,"` >= ").concat(e[e.length-1][0]," then '[").concat(e[e.length-1][0],", Infinity)' end\n"),r+="as `".concat(I).concat(t.fid,"`")})),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"featureTransform",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.binContinuousFields(e,g.c);case 2:return r=t.sent,t.next=5,this.queryw("DROP VIEW IF EXISTS ".concat(n,";"));case 5:return t.next=7,this.queryw("CREATE VIEW IF NOT EXISTS ".concat(n," AS SELECT *, ").concat(r.join(",")," FROM ").concat(e,";"));case 7:return t.next=9,this.buildFieldsSummary(n);case 9:return a=t.sent,this.dataViewName=n,t.abrupt("return",a);case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"buildDataGraph",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e,n,r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.dimensions,n=this.measures,r=this.dataViewName,a=this.statistics,this.dataGraph=new w(r,e,n),t.next=4,this.dataGraph.computeDGraph(a.cramersV);case 4:return t.next=6,this.dataGraph.computeMGraph(a.pearsonCC);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(),this.dataGraph.clusterMGraph(),this}},{key:"buildSubspaces",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,i=this.dataGraph.MClusters,o=x(i,n),s=[],u=Object(r.a)(a);try{for(u.s();!(t=u.n()).done;){var c,f=t.value,l=Object(S.f)(f,e.MIN,e.MAX),h=Object(r.a)(l);try{for(h.s();!(c=h.n()).done;){var p,d=c.value,v=Object(r.a)(o);try{for(v.s();!(p=v.n()).done;){var m=p.value;s.push({dimensions:d,measures:m})}}catch(g){v.e(g)}finally{v.f()}}}catch(g){h.e(g)}finally{h.f()}}}catch(g){u.e(g)}finally{u.f()}return this.dataViewMetas=s,this}},{key:"getSpaceImpurity",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n,r){var a,i,s,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.query("with agg_view as (select count(*) as values_count, ".concat(r.map((function(t){return"sum(`".concat(t,"`) as `sum_").concat(t,"`")})).join(",")," from ").concat(e," group by ").concat(n.map((function(t){return"`".concat(t,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(r.map((function(t){return"sum(abs(`sum_".concat(t,"`)) as `abssum_sum_").concat(t,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(r.map((function(t){return"abs(`sum_".concat(t,"`) / `abssum_sum_").concat(t,"` as `pb_").concat(t,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(r.map((function(t){return"if(`pb_".concat(t,"` = 0, 0, -`pb_").concat(t,"` * log2(`pb_").concat(t,"`)) as `safe_").concat(t,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(r.map((function(t){return"sum(`safe_".concat(t,"`)")})).join(",")," from safe_value\n        "));case 2:for(a=t.sent,i=a.slice(0,-1).split("\t").map((function(t){return Number(t)})),s=0,u=1;u<i.length;u++)s+=i[u];return t.abrupt("return",s);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"fastInsightRecommand",value:function(){var t=Object(s.a)(o.a.mark((function t(){var e,n,a,i,s,u,c,f,l=arguments;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=l.length>0&&void 0!==l[0]?l[0]:this.dataViewMetas,n=[],a=Object(r.a)(e),t.prev=3,a.s();case 5:if((i=a.n()).done){t.next=14;break}return s=i.value,u=s.dimensions,c=s.measures,t.next=10,this.getSpaceImpurity(this.dataViewName,u,c);case 10:f=t.sent,n.push({dimensions:u,measures:c,impurity:f,score:f,significance:1});case 12:t.next=5;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3),a.e(t.t0);case 19:return t.prev=19,a.f(),t.finish(19);case 22:return n.sort((function(t,e){return t.score-e.score})),this.insightSpaces=n,t.abrupt("return",n);case 25:case"end":return t.stop()}}),t,this,[[3,16,19,22]])})));return function(){return t.apply(this,arguments)}}()},{key:"getFieldInfoInVis",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,i,s,u,c,f,l,h,p,d=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],i=e.dimensions,s=e.measures,u=Object(r.a)(i),t.prev=3,f=o.a.mark((function t(){var e,r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=c.value,t.next=3,d.statistics.getSpaceImpurity(d.dataViewName,[e],s);case 3:r=t.sent,(i=d.fields.find((function(t){return t.key===e})))&&n.push(Object(a.a)(Object(a.a)({},i),{},{impurity:r}));case 6:case"end":return t.stop()}}),t)})),u.s();case 6:if((c=u.n()).done){t.next=10;break}return t.delegateYield(f(),"t0",8);case 8:t.next=6;break;case 10:t.next=15;break;case 12:t.prev=12,t.t1=t.catch(3),u.e(t.t1);case 15:return t.prev=15,u.f(),t.finish(15);case 18:l=Object(r.a)(s),t.prev=19,p=o.a.mark((function t(){var e,r,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.value,t.next=3,d.statistics.getSpaceImpurity(d.dataViewName,i,[e]);case 3:r=t.sent,(s=d.fields.find((function(t){return t.key===e})))&&n.push(Object(a.a)(Object(a.a)({},s),{},{impurity:r}));case 6:case"end":return t.stop()}}),t)})),l.s();case 22:if((h=l.n()).done){t.next=26;break}return t.delegateYield(p(),"t2",24);case 24:t.next=22;break;case 26:t.next=31;break;case 28:t.prev=28,t.t3=t.catch(19),l.e(t.t3);case 31:return t.prev=31,l.f(),t.finish(31);case 34:return t.abrupt("return",n);case 35:case"end":return t.stop()}}),t,null,[[3,12,15,18],[19,28,31,34]])})));return function(e){return t.apply(this,arguments)}}()},{key:"queryAggDataView",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n,r,a){var i,s,u,c,f=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.concat(n).map((function(t){return f.dbMetas.find((function(e){return e.fid===t}))})).filter((function(t){return Boolean(t)})),s="select ".concat(e.map((function(t){return"`".concat(t,"`")})).join(","),", ").concat(n.map((function(t,e){return"".concat(r[e],"(`").concat(t,"`) as `").concat(t,"`")})).join(",")," from ").concat(this.dataViewName," group by ").concat(e.map((function(t){return"`".concat(t,"`")})).join(",")),"number"===typeof a&&(s+=" limit ".concat(a)),t.next=5,this.query(s);case 5:return u=t.sent,c=m(u,i),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r,a){return t.apply(this,arguments)}}()},{key:"queryDataView",value:function(){var t=Object(s.a)(o.a.mark((function t(e,n,r){var a,i,s,u,c=this;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.concat(n).map((function(t){return c.dbMetas.find((function(e){return e.fid===t}))})).filter((function(t){return Boolean(t)})),i="select ".concat(e.concat(n).map((function(t){return"`".concat(t,"`")})).join(",")," from ").concat(this.dataViewName),"number"===typeof r&&(i+=" limit ".concat(r)),t.next=5,this.query(i);case 5:return s=t.sent,u=m(s,a),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"specification",value:function(){var t=Object(s.a)(o.a.mark((function t(e){var n,r,i,s,u;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.dimensions,r=e.measures,t.next=3,this.getFieldInfoInVis(e);case 3:return i=t.sent,t.next=6,this.queryAggDataView(n,r,r.map((function(){return"sum"})));case 6:return s=t.sent,u=M(i),t.abrupt("return",Object(a.a)(Object(a.a)({},u),{},{detailSize:this.features.size,dataView:s}));case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"destroyView",value:function(){var t=Object(s.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.queryw("drop view if exists ".concat(this.dataViewName));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()},function(t,e,n){"use strict";n(5),n(1),n(4),n(3),n(9)},function(t,e,n){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,i={},o=function(t){return(t=+t)+(t>68?1900:2e3)},s=function(t){return function(e){this[t]=+e}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],c=function(t){var e=i[t];return e&&(e.indexOf?e:e.s.concat(e.f))},f=function(t,e){var n,r=i.meridiem;if(r){for(var a=1;a<=24;a+=1)if(t.indexOf(r(a,0,e))>-1){n=a>12;break}}else n=t===(e?"pm":"PM");return n},l={A:[a,function(t){this.afternoon=f(t,!1)}],a:[a,function(t){this.afternoon=f(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[r,s("seconds")],ss:[r,s("seconds")],m:[r,s("minutes")],mm:[r,s("minutes")],H:[r,s("hours")],h:[r,s("hours")],HH:[r,s("hours")],hh:[r,s("hours")],D:[r,s("day")],DD:[n,s("day")],Do:[a,function(t){var e=i.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var r=1;r<=31;r+=1)e(r).replace(/\[|\]/g,"")===t&&(this.day=r)}],M:[r,s("month")],MM:[n,s("month")],MMM:[a,function(t){var e=c("months"),n=(c("monthsShort")||e.map((function(t){return t.substr(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[a,function(t){var e=c("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(t){this.year=o(t)}],YYYY:[/\d{4}/,s("year")],Z:u,ZZ:u};function h(n){var r,a;r=n,a=i&&i.formats;for(var o=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,r){var i=r&&r.toUpperCase();return n||a[r]||t[r]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),s=o.length,u=0;u<s;u+=1){var c=o[u],f=l[c],h=f&&f[0],p=f&&f[1];o[u]=p?{regex:h,parser:p}:c.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,r=0;n<s;n+=1){var a=o[n];if("string"==typeof a)r+=a.length;else{var i=a.regex,u=a.parser,c=t.substr(r),f=i.exec(c)[0];u.call(e,f),t=t.replace(f,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(o=t.parseTwoDigitYear);var r=e.prototype,a=r.parse;r.parse=function(t){var e=t.date,r=t.utc,o=t.args;this.$u=r;var s=o[1];if("string"==typeof s){var u=!0===o[2],c=!0===o[3],f=u||c,l=o[2];c&&(l=o[2]),i=this.$locale(),!u&&l&&(i=n.Ls[l]),this.$d=function(t,e,n){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var r=h(e)(t),a=r.year,i=r.month,o=r.day,s=r.hours,u=r.minutes,c=r.seconds,f=r.milliseconds,l=r.zone,p=new Date,d=o||(a||i?1:p.getDate()),v=a||p.getFullYear(),m=0;a&&!i||(m=i>0?i-1:p.getMonth());var g=s||0,b=u||0,y=c||0,w=f||0;return l?new Date(Date.UTC(v,m,d,g,b,y,w+60*l.offset*1e3)):n?new Date(Date.UTC(v,m,d,g,b,y,w)):new Date(v,m,d,g,b,y,w)}catch(t){return new Date("")}}(e,s,r),this.init(),l&&!0!==l&&(this.$L=this.locale(l).$L),f&&e!=this.format(s)&&(this.$d=new Date("")),i={}}else if(s instanceof Array)for(var p=s.length,d=1;d<=p;d+=1){o[1]=s[d-1];var v=n.apply(this,o);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}d===p&&(this.$d=new Date(""))}else a.call(this,t)}}}()},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(N){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(t,e,n){var r=l;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===a)throw i;return I()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var s=j(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=f(t,e,n);if("normal"===u.type){if(r=n.done?d:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,o),i}function f(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function m(){}function g(){}function b(){}var y={};y[i]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==n&&r.call(O,i)&&(y=O);var S=b.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function n(a,i,o,s){var u=f(t[a],t,i);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,o,s)}),(function(t){n("throw",t,o,s)})):e.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return n("throw",t,o,s)}))}s(u.arg)}var a;this._invoke=function(t,r){function i(){return new e((function(e,a){n(t,r,e,a)}))}return a=a?a.then(i,i):i()}}function j(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,j(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=f(r,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function D(t){if(t){var n=t[i];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=S.constructor=b,b.constructor=g,g.displayName=u(b,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,u(t,s,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},x(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,n,r,a,i){void 0===i&&(i=Promise);var o=new k(c(e,n,r,a),i);return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},x(S),u(S,s,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(_),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return s.type="throw",s.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(u&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(62);e.periodCube=r.default;var a=n(63);e.momentCube=a.default},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,a,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this._rawData).push.apply(t,a(e))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,e;if(!this.cache){if(0!==this.children.size){var n=this.children.values(),r=[];try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var s=o.value,u=void 0,c=s.rawData,f=c.length;for(u=0;u<f;u++)r.push(c[u])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._rawData=r}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function e(n,a){var o,s;if(a===t.length)return n;var u=n.children.entries();try{for(var c=i(u),f=c.next();!f.done;f=c.next()){var l=r(f.value,2),h=l[0],p=l[1];if(h===t[a])return e(p,a+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}(),s=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var e=this,n=e.tree,a=(e.aggFunc,e.measures);return function e(n,o){var s,u;if(o===t.length)return n.aggData(a);var c=n.children.entries();try{for(var f=i(c),l=f.next();!l.done;l=f.next()){var h=r(l.value,2),p=h[0],d=h[1];if(p===t[o])return e(d,o+1)}}catch(v){s={error:v}}finally{try{l&&!l.done&&(u=f.return)&&u.call(f)}finally{if(s)throw s.error}}return!1}(n,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,e=new o(this.aggFunc),n=this.factTable.length;for(t=0;t<n;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,n){if(e.push(t),e.cache=!1,n<this.dimensions.length){var r=t[this.dimensions[n]];e.children.has(r)||e.children.set(r,new o(this.aggFunc)),this.insertNode(t,e.children.get(r),n+1)}},t.prototype.aggTree=function(t){var e,n;void 0===t&&(t=this.tree);var r=t.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var s=o.value;this.aggTree(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var e,n;void 0===t&&(t=this.tree);var r=t.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var s=o.value;this.aggTree(s)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,a,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(t=this.rawData).push.apply(t,a(e))},t.prototype.aggData=function(t,e){return void 0===e&&(e=[]),this._aggData=t(this.rawData,e),this._aggData},t.prototype.getNode=function(t){return function e(n,a){var o,s;if(a===t.length)return n;var u=n.children.entries();try{for(var c=i(u),f=c.next();!f.done;f=c.next()){var l=r(f.value,2),h=l[0],p=l[1];if(h===t[a])return e(p,a+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}();e.Node=o;var s=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var e=this,n=e.tree,a=e.aggFunc,o=e.measures;return function e(n,s){var u,c;if(s===t.length)return n.aggData(a,o);var f=n.children.entries();try{for(var l=i(f),h=l.next();!h.done;h=l.next()){var p=r(h.value,2),d=p[0],v=p[1];if(d===t[s])return e(v,s+1)}}catch(m){u={error:m}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(u)throw u.error}}return!1}(n,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var e=t.aggFunc,n=void 0===e?this.aggFunc:e,r=t.factTable,a=void 0===r?this.factTable:r,i=t.dimensions,o=void 0===i?this.dimensions:i,s=t.measures,u=void 0===s?this.measures:s;o!==this.dimensions||a!==this.factTable?(this.dimensions=o,this.factTable=a,this.measures=u,this.aggFunc=n,this.buildTree(),this.aggTree()):u===this.measures&&n===this.aggFunc||(this.measures=u,this.aggFunc=n,this.aggTree())},t.prototype.buildTree=function(){var t,e=new o,n=this.factTable.length;for(t=0;t<n;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,n){if(n===this.dimensions.length)e.push(t);else{var r=t[this.dimensions[n]];e.children.has(r)||e.children.set(r,new o),this.insertNode(t,e.children.get(r),n+1)}},t.prototype.aggTree=function(t){var e,n;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var r=t.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var s=o.value,u=void 0,c=this.aggTree(s).rawData,f=c.length;for(u=0;u<f;u++)t.rawData.push(c[u])}}catch(l){e={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();e.default=s},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var a in e=arguments[n])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,a,i=n.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(e,"__esModule",{value:!0}),e.tree2Table=function(t){var e=t.dimensions,n=(t.measures,t.cube),o=(n.aggFunc,[]);return function t(n,s,u){var c,f,l;if(0!==n.children.size)try{for(var h=a(n.children.entries()),p=h.next();!p.done;p=h.next()){var d=i(p.value,2),v=d[0];t(d[1],r(r({},s),((l={})[e[u]]=v,l)),u+1)}}catch(g){c={error:g}}finally{try{p&&!p.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}else{var m=n._aggData;o.push(r(r({},s),m))}}(n.tree,{},0),o}},function(t,e,n){"use strict";var r=n(14),a=n(46),i=n(66),o=n(52);var s=function t(e){var n=new i(e),s=a(i.prototype.request,n);return r.extend(s,i.prototype,n),r.extend(s,n),s.create=function(n){return t(o(e,n))},s}(n(34));s.Axios=i,s.Cancel=n(35),s.CancelToken=n(79),s.isCancel=n(51),s.VERSION=n(53).version,s.all=function(t){return Promise.all(t)},s.spread=n(80),s.isAxiosError=n(81),t.exports=s,t.exports.default=s},function(t,e,n){"use strict";var r=n(14),a=n(47),i=n(67),o=n(68),s=n(52),u=n(78),c=u.validators;function f(t){this.defaults=t,this.interceptors={request:new i,response:new i}}f.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&u.assertOptions(e,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(t){i.push(t.fulfilled,t.rejected)})),!r){var f=[o,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(i),a=Promise.resolve(t);f.length;)a=a.then(f.shift(),f.shift());return a}for(var l=t;n.length;){var h=n.shift(),p=n.shift();try{l=h(l)}catch(d){p(d);break}}try{a=o(l)}catch(d){return Promise.reject(d)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},f.prototype.getUri=function(t){return t=s(this.defaults,t),a(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){f.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){f.prototype[t]=function(e,n,r){return this.request(s(r||{},{method:t,url:e,data:n}))}})),t.exports=f},function(t,e,n){"use strict";var r=n(14);function a(){this.handlers=[]}a.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},a.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=a},function(t,e,n){"use strict";var r=n(14),a=n(69),i=n(51),o=n(34),s=n(35);function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s("canceled")}t.exports=function(t){return u(t),t.headers=t.headers||{},t.data=a.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||o.adapter)(t).then((function(e){return u(t),e.data=a.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(u(t),e&&e.response&&(e.response.data=a.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,n){"use strict";var r=n(14),a=n(34);t.exports=function(t,e,n){var i=this||a;return r.forEach(n,(function(n){t=n.call(i,t,e)})),t}},function(t,e,n){"use strict";var r=n(14);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},function(t,e,n){"use strict";var r=n(50);t.exports=function(t,e,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},function(t,e,n){"use strict";var r=n(14);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,a,i,o){var s=[];s.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(a)&&s.push("path="+a),r.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,n){"use strict";var r=n(74),a=n(75);t.exports=function(t,e){return t&&!r(e)?a(t,e):e}},function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,n){"use strict";var r=n(14),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,i,o={};return t?(r.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=r.trim(t.substr(0,i)).toLowerCase(),n=r.trim(t.substr(i+1)),e){if(o[e]&&a.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([n]):o[e]?o[e]+", "+n:n}})),o):o}},function(t,e,n){"use strict";var r=n(14);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=a(window.location.href),function(e){var n=r.isString(e)?a(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},function(t,e,n){"use strict";var r=n(53).version,a={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){a[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var i={};a.transitional=function(t,e,n){function a(t,e){return"[Axios v"+r+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,o){if(!1===t)throw new Error(a(r," has been removed"+(e?" in "+e:"")));return e&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,o)}},t.exports={assertOptions:function(t,e,n){if("object"!==typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),a=r.length;a-- >0;){var i=r[a],o=e[i];if(o){var s=t[i],u=void 0===s||o(s,i,t);if(!0!==u)throw new TypeError("option "+i+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},function(t,e,n){"use strict";var r=n(35);function a(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},a.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},a.source=function(){var t;return{token:new a((function(e){t=e})),cancel:t}},t.exports=a},function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,n){"use strict";t.exports=function(t){return"object"===typeof t&&!0===t.isAxiosError}},function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(2),o=n(31),s=n(5),u=n(7),c=n(8),f=n(16),l=n(15),h=n(18),p=n(1);var d=n(39),v=n.n(d),m=n(58),g=n.n(m);v.a.extend(g.a);function b(t,e){if(t.length!==e.length)return!1;var n,r=new Set(e),a=Object(p.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(!r.has(i))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}function y(t,e){var n=new Set(e);if(0===t.length||0===e.length)return!0;var r,a=Object(p.a)(t);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(n.has(i))return!0}}catch(o){a.e(o)}finally{a.f()}return!1}var w=function(t){Object(f.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"createInsightSpaces",value:function(){var t=Object(i.a)(a.a.mark((function t(){var e,n=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:this.dataViewMetas,t.abrupt("return",this.createInsightSpaces(e));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"scanDetail",value:function(){var t=Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",[]);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"associate",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,o,u,c,f,l,h,p,d,v,m,g,w,O,S,x,k,j;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.insightSpaces,r=this.dimensions,i=this.measures,o=this.dataGraph,u=e.dimensions.map((function(t){return r.findIndex((function(e){return t===e}))})),c=e.measures.map((function(t){return i.findIndex((function(e){return t===e}))})),f=[],l=[],h=0;case 7:if(!(h<n.length)){t.next=26;break}if(y(n[h].dimensions,e.dimensions)){t.next=10;break}return t.abrupt("continue",23);case 10:if(!b(n[h].measures,e.measures)){t.next=12;break}return t.abrupt("continue",23);case 12:if(b(n[h].dimensions,e.dimensions)){t.next=14;break}return t.abrupt("continue",23);case 14:if(p=0,d=n[h].measures.map((function(t){return i.findIndex((function(e){return t===e}))})),null!==o)for(v=0;v<c.length;v++)for(m=0;m<d.length;m++)p+=o.MG[v][m];if(!((p/=c.length*d.length)>.7)){t.next=23;break}return t.next=21,this.specification(n[h]);case 21:(g=t.sent)&&f.push(Object(s.a)(Object(s.a)({},n[h]),{},{score:p,schema:g.schema,dataView:g.dataView}));case 23:h++,t.next=7;break;case 26:w=0;case 27:if(!(w<n.length)){t.next=44;break}if(y(n[w].measures,e.measures)){t.next=30;break}return t.abrupt("continue",41);case 30:if(!b(n[w].dimensions,e.dimensions)){t.next=32;break}return t.abrupt("continue",41);case 32:if(O=0,S=n[w].dimensions.map((function(t){return r.findIndex((function(e){return t===e}))})),null!==o)for(x=0;x<u.length;x++)for(k=0;k<S.length;k++)O+=o.DG[x][k];if(!((O/=u.length*S.length)>.65)){t.next=41;break}return t.next=39,this.specification(n[w]);case 39:(j=t.sent)&&f.push(Object(s.a)(Object(s.a)({},n[w]),{},{score:O,schema:j.schema,dataView:j.dataView}));case 41:w++,t.next=27;break;case 44:return f.sort((function(t,e){return(e.score||0)-(t.score||0)})),l.sort((function(t,e){return(e.score||0)-(t.score||0)})),t.abrupt("return",{assSpacesT1:f,assSpacesT2:l});case 47:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),n}(h.Computation.ClickHouseEngine),O=(n(4),n(30)),S=n(38),x=function(){var t=Object(i.a)(a.a.mark((function t(e,n,r){var i,o;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length<2)){t.next=2;break}return t.abrupt("return",null);case 2:return 0,o=new S.a({dataSource:e,dimensions:n,measures:r,K:8}),i=o.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),t.abrupt("return",{dimensions:n,measures:r,significance:i});case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),k=h.Insight.VIEngine;function j(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];for(var r=Math.log2(e),a=0,i=0;i<t.length;i++)a+=t[i]*(Math.log2(t[i])-r)/e;return-a}var M=function(t){Object(f.a)(n,t);var e=Object(l.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"clusterDGraph",value:function(t,e){for(var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD,a=e||r,i=this.DG,o=[],s=0;s<n.length;s++){for(var u=[],c=0;c<n.length;c++)i[s][c]>=a&&u.push(n[c]);o.push(u)}for(var f=[],l=0;l<o.length;l++){for(var h=!0,p=l+1;p<o.length;p++)if(b(o[l],o[p])){h=!1;break}h&&f.push(o[l])}return this.DClusters=f,f}}]),n}(O.a),_=function(t){Object(f.a)(n,t);var e=Object(l.a)(n);function n(){var t;return Object(u.a)(this,n),(t=e.call(this)).workerCollection.register("clusters",x),t.workerCollection.enable("clusters",!0),t}return Object(c.a)(n,[{key:"createInsightSpaces",value:function(){var t=Object(i.a)(a.a.mark((function t(){var e,n,r,i,o=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:this.subSpaces,n=new Set,r=e.filter((function(t){var e=t.dimensions.join("-")+"||"+t.measures.join("-");return!n.has(e)&&(n.add(e),!0)})),t.next=5,this.exploreViews(r);case 5:return i=t.sent,this.insightSpaces=i,t.abrupt("return",i);case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"buildGraph",value:function(){return this.dataGraph=new M(this.dimensions,this.measures),this.dataGraph.computeDGraph(this.dataSource),this.dataGraph.computeMGraph(this.dataSource),this}},{key:"scanDetail",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,o,s,u,c,f,l,h;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=(n=this).cube,o=n.fieldDictonary,s=e.dimensions,u=e.measures,t.next=5,r.getCuboid(e.dimensions);case 5:return c=t.sent,t.next=8,c.getAggregatedRows(u,u.map((function(){return"sum"})));case 8:return f=t.sent,l=[],h=[],this.workerCollection.each((function(t,e){var r=function(){var r=Object(i.a)(a.a.mark((function r(){var i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t(f,s,u,o,n);case 2:(i=r.sent)&&(i.type=e,l.push(i));case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();h.push(r())})),t.next=14,Promise.all(h);case 14:return t.abrupt("return",l);case 15:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"searchPointInterests",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,o,u,c,f,l,h,d,v,m,g,b,y,w,O,S,x,k,j,M,_;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],!(e.dimensions.length>0)){t.next=23;break}return t.next=4,this.cube.getCuboid(e.dimensions);case 4:return r=t.sent,t.next=7,this.cube.getCuboid([]);case 7:return i=t.sent,t.next=10,i.getAggregatedRows(e.measures,e.measures.map((function(){return"dist"})));case 10:return o=t.sent,t.next=13,r.getAggregatedRows(e.measures,e.measures.map((function(){return"dist"})));case 13:if(u=t.sent,0!==o.length){t.next=16;break}return t.abrupt("return",n);case 16:c=new Map,f=Object(p.a)(e.measures);try{for(h=function(){var t=l.value,e=o[0][t].reduce((function(t,e){return t+e}),0),n=o[0][t].map((function(t){return t/e}));c.set(t,n)},f.s();!(l=f.n()).done;)h()}catch(a){f.e(a)}finally{f.f()}d=Object(p.a)(u);try{for(d.s();!(v=d.n()).done;){m=v.value,g=0,b=Object(p.a)(e.measures);try{for(b.s();!(y=b.n()).done;){for(w=y.value,O=0,S=c.get(w),x=m[w],k=x.reduce((function(t,e){return t+e}),0),j=0;j<S.length;j++)M=x[j]/k,_=S[j],M>0&&_>0&&(O+=M*Math.log2(M/_));g+=O}}catch(a){b.e(a)}finally{b.f()}g/=e.measures.length,n.push(Object(s.a)(Object(s.a)({},m),{},{kl:g}))}}catch(a){d.e(a)}finally{d.f()}t.next=23;break;case 23:return n.sort((function(t,e){return e.kl-t.kl})),t.abrupt("return",n);case 25:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"associate",value:function(){var t=Object(i.a)(a.a.mark((function t(e){var n,r,i,o,u,c,f,l,h,p,d,v,m,g,w,O,S,x,k,j,M,_,E=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=this.insightSpaces,r=this.dimensions,i=this.measures,o=this.dataGraph,u=e.dimensions.map((function(t){return r.findIndex((function(e){return t===e}))})),c=e.measures.map((function(t){return i.findIndex((function(e){return t===e}))})),f=[],l=[],h=0;case 7:if(!(h<n.length)){t.next=31;break}if(!(e.dimensions.length>0)||y(n[h].dimensions,e.dimensions)){t.next=10;break}return t.abrupt("continue",28);case 10:if(!b(n[h].measures,e.measures)){t.next=12;break}return t.abrupt("continue",28);case 12:if(!(e.dimensions.length>0)||b(n[h].dimensions,e.dimensions)){t.next=14;break}return t.abrupt("continue",28);case 14:if(0!==e.dimensions.length||y(n[h].measures,e.measures)){t.next=16;break}return t.abrupt("continue",28);case 16:if(0!==e.dimensions.length||0===n[h].dimensions.length){t.next=18;break}return t.abrupt("continue",28);case 18:if(p=0,d=n[h].measures.map((function(t){return i.findIndex((function(e){return t===e}))})),null!==o)for(v=0;v<c.length;v++)for(m=0;m<d.length;m++)p+=o.MG[c[v]][d[m]];if(!((p/=c.length*d.length)>.7)){t.next=28;break}return g=n[h].dimensions.map((function(t){return E.fields.find((function(e){return e.key===t}))})).filter((function(t){return void 0!==t})).map((function(t){return Number(null===t||void 0===t?void 0:t.features.unique)})).reduce((function(t,e){return t*e}),1),t.next=26,this.specification(n[h]);case 26:(w=t.sent)&&f.push(Object(s.a)(Object(s.a)({},n[h]),{},{score:p/g/d.length,card:g,schema:w.schema,dataView:w.dataView}));case 28:h++,t.next=7;break;case 31:O=0;case 32:if(!(O<n.length)){t.next=50;break}if(y(n[O].measures,e.measures)){t.next=35;break}return t.abrupt("continue",47);case 35:if(!b(n[O].dimensions,e.dimensions)){t.next=37;break}return t.abrupt("continue",47);case 37:if(S=0,x=n[O].dimensions.map((function(t){return r.findIndex((function(e){return t===e}))})),null!==o)for(k=0;k<u.length;k++)for(j=0;j<x.length;j++)S+=o.DG[u[k]][x[j]];if(!((S/=u.length*x.length)>.35)){t.next=47;break}return M=n[O].dimensions.map((function(t){return E.fields.find((function(e){return e.key===t}))})).filter((function(t){return void 0!==t})).map((function(t){return Number(null===t||void 0===t?void 0:t.features.unique)})).reduce((function(t,e){return t+e}),0),t.next=45,this.specification(n[O]);case 45:(_=t.sent)&&l.push(Object(s.a)(Object(s.a)({},n[O]),{},{score:S/M,card:M},_));case 47:O++,t.next=32;break;case 50:return f.sort((function(t,e){return(e.score||0)-(t.score||0)})),l.sort((function(t,e){return(e.score||0)-(t.score||0)})),t.abrupt("return",{assSpacesT1:f,assSpacesT2:l});case 53:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"exploreViews",value:function(){var t=Object(i.a)(a.a.mark((function t(){var e,n,r,i,o,s,u,c,f,l,h,d,v,m,g,b,y,w,O,S,x,k,M,_,E,D,I,N,T,C=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=C.length>0&&void 0!==C[0]?C[0]:this.subSpaces,r=16,i=(n=this).measures,o=n.fieldDictonary,s=[],t.next=7,n.cube.getCuboid([]);case 7:return u=t.sent,t.next=10,u.getAggregatedRows(i,i.map((function(){return"dist"})));case 10:c=t.sent,f=Object(p.a)(n.dataGraph.MClusters);try{for(f.s();!(l=f.n()).done;){h=l.value,d=0,v=Object(p.a)(h);try{for(v.s();!(m=v.n()).done;)g=m.value,b=0,c.length>0&&(b=j(c[0][g].filter((function(t){return t>0})))),d+=(Math.log2(r)-b)/Math.log2(r)}catch(a){v.e(a)}finally{v.f()}d/=h.length,s.push({dimensions:[],measures:h,significance:1,score:d,impurity:d})}}catch(a){f.e(a)}finally{f.f()}y=Object(p.a)(e),t.prev=14,y.s();case 16:if((w=y.n()).done){t.next=56;break}return O=w.value,S=O.dimensions,x=O.measures,k=!1,t.next=22,n.cube.getCuboid(S);case 22:return M=t.sent,t.next=25,M.loadStateInCache();case 25:return t.next=27,M.getAggregatedRows(x,x.map((function(){return"dist"})));case 27:_=t.sent,M.clearState(),E=0,D=Object(p.a)(x),t.prev=31,N=function(){var t=I.value,e=0;c.length>0&&(e=j(c[0][t].filter((function(t){return t>0}))));var n=0;if(!o.has(t))return"continue";var a=o.get(t).features.size,i=_.map((function(e){return{freq:e[t].reduce((function(t,e){return t+e}),0),dist:e[t]}}));i.sort((function(t,e){return e.freq-t.freq}));for(var s=0;s<i.length&&!(s>=r-1);s++){var u=j(i[s].dist.filter((function(t){return t>0})));n+=i[s].freq/a*u}for(var f=new Array(r).fill(0),l=0,h=r-1;h<i.length;h++){for(var p=0;p<f.length;p++)f[p]+=i[h].dist[p];l+=i[h].freq}return l>0&&(n+=l/a*j(f.filter((function(t){return t>0})))),E+=(e-n)/Math.log2(Math.min(r,i.length)),(e-n)/e<.005?(k=!0,"break"):void 0},D.s();case 34:if((I=D.n()).done){t.next=42;break}if("continue"!==(T=N())){t.next=38;break}return t.abrupt("continue",40);case 38:if("break"!==T){t.next=40;break}return t.abrupt("break",42);case 40:t.next=34;break;case 42:t.next=47;break;case 44:t.prev=44,t.t0=t.catch(31),D.e(t.t0);case 47:return t.prev=47,D.f(),t.finish(47);case 50:if(E/=x.length,!k){t.next=53;break}return t.abrupt("continue",54);case 53:s.push({dimensions:S,measures:x,significance:1,score:E,impurity:E});case 54:t.next=16;break;case 56:t.next=61;break;case 58:t.prev=58,t.t1=t.catch(14),y.e(t.t1);case 61:return t.prev=61,y.f(),t.finish(61);case 64:return s.sort((function(t,e){return Number(e.score)-Number(t.score)})),t.abrupt("return",s);case 66:case"end":return t.stop()}}),t,this,[[14,58,61,64],[31,44,47,50]])})));return function(){return t.apply(this,arguments)}}()}]),n}(k),E={mode:"webworker",current:null};function D(t){"webworker"===t?(E.current=new _,E.mode=t):"clickhouse"===t&&(E.current=new w,E.current.utils.setCHConfig({protocol:"https",host:"localhost",port:2333,path:"/api/ch/general"}),E.mode=t),console.log("Rath engine is created, engine mode is [".concat(E.mode,"]."))}function I(){E.current=null}function N(t){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(a.a.mark((function t(e){var n,r,i,s,u,c,f,l,h,p,d,v;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=[],i=[],s=[],u=[],(n=[]).push(performance.now()),console.log("[computation engine mode]",e.mode),"webworker"!==E.mode||"webworker"!==e.mode){t.next=44;break}if(c=e.dataSource,f=e.fieldMetas,l=f.map((function(t){return{key:t.fid,semanticType:t.semanticType,analyticType:t.analyticType,dataType:"?"}})),null!==(h=E.current)){t.next=13;break}throw new Error("Engine is not created.");case 13:return h.setData(c).setFields(l),h.univarSelection(),n.push(performance.now()),r.push({task:"init&univar",value:n[n.length-1]-n[n.length-2]}),h.buildGraph(),h.dataGraph.DIMENSION_CORRELATION_THRESHOLD=.5,n.push(performance.now()),r.push({task:"co-graph",value:n[n.length-1]-n[n.length-2]}),h.clusterFields(),n.push(performance.now()),r.push({task:"clusters",value:n[n.length-1]-n[n.length-2]}),(p=new o.a({dimensions:h.dimensions,measures:h.measures,cubeStorageManageMode:e.cubeStorageManageMode,dataSource:h.dataSource})).storage.env="browser",t.next=28,h.buildCube(p);case 28:return n.push(performance.now()),r.push({task:"cube",value:n[n.length-1]-n[n.length-2]}),h.buildSubspaces(),n.push(performance.now()),r.push({task:"subspaces",value:n[n.length-1]-n[n.length-2]}),t.next=35,h.createInsightSpaces();case 35:n.push(performance.now()),r.push({task:"insights",value:n[n.length-1]-n[n.length-2]}),h.insightSpaces=h.insightSpaces.filter((function(t){return"number"===typeof t.score&&!isNaN(t.score)})),h.insightSpaces.sort((function(t,e){return Number(e.impurity)-Number(t.impurity)})),u=h.fields,i=h.insightSpaces,s=h.dataSource,t.next=65;break;case 44:if("clickhouse"!==E.mode||"clickhouse"!==e.mode){t.next=64;break}if(null!==(d=E.current)){t.next=48;break}throw new Error("Engine is not created.");case 48:return v=e.viewName,t.next=51,d.uvsView(v);case 51:return t.next=53,d.buildDataGraph();case 53:return d.clusterFields(),d.buildSubspaces(),t.next=57,d.fastInsightRecommand();case 57:return i=t.sent,u=d.fields,t.next=61,d.loadData(v);case 61:s=t.sent,t.next=65;break;case 64:throw new Error("Engine mode is not support: ".concat(e.mode));case 65:return t.abrupt("return",{insightSpaces:i.slice(0,1e4),fields:u,dataSource:s,performance:r});case 66:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=E.current)){t.next=3;break}throw new Error("Engine is not created.");case 3:return t.abrupt("return",n.specification(e));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){var e=E.current;if(null===e)throw new Error("Engine is not created.");var n=e.insightSpaces[t];if(n)return e.scanDetail(n);throw new Error("insightSpaces(".concat(t,"/").concat(e.insightSpaces.length,") not exist."))}function L(t){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(a.a.mark((function t(e){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=E.current)){t.next=3;break}throw new Error("Engine is not created.");case 3:if(n.associate(e),"webworker"!==E.mode||"webworker"!==E.mode){t.next=8;break}return t.abrupt("return",n.associate(e));case 8:if("clickhouse"!==E.mode||"clickhouse"!==E.mode){t.next=10;break}return t.abrupt("return",n.associate(e));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(a.a.mark((function t(e){var n,r,i,o,s,u,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("webworker"!==E.mode||"webworker"!==E.mode){t.next=15;break}if(null!==(n=E.current)){t.next=4;break}throw new Error("Engine is not created.");case 4:return r=e.dimensions,i=e.measures,o=e.aggregators,s=n.cube,t.next=8,s.getCuboid(r);case 8:return u=t.sent,t.next=11,u.getAggregatedRows(i,o);case 11:return c=t.sent,t.abrupt("return",c);case 15:if("clickhouse"!==E.mode||"clickhouse"!==E.mode){t.next=20;break}if(null!==E.current){t.next=19;break}throw new Error("Engine is not created.");case 19:case 20:return t.abrupt("return",[]);case 21:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function z(){if("webworker"===E.mode){var t=E.current;if(null===t)throw new Error("Engine is not created.");var e=t.serialize();return{dataStorage:JSON.stringify(e.dataStorage),engineStorage:JSON.stringify(e.storage)}}throw new Error("Not supported current data engine type.")}function G(t){if("webworker"!==E.mode)throw new Error("Not supported current data engine type.");var e=E.current;if(null===e)throw new Error("Engine is not created.");var n=t.dataStorage,r=t.engineStorage;e.deSerialize(JSON.parse(r),JSON.parse(n))}function $(){if("webworker"===E.mode){var t=E.current;if(null===t)throw new Error("Engine is not created.");return{fields:t.fields,dataSource:t.dataSource,insightSpaces:t.insightSpaces}}throw new Error("Not supported current data engine type.")}function B(t){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("webworker"!==E.mode){t.next=10;break}if(null!==(n=E.current)){t.next=4;break}throw new Error("Engine is not created.");case 4:return t.next=6,n.searchPointInterests(e);case 6:return r=t.sent,t.abrupt("return",r);case 10:throw new Error("Not supported current data engine type.");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function V(){return(V=Object(i.a)(a.a.mark((function t(e,n,r){var i,o,s,u,c,f,l,h,p,d;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.data,console.log(i.task,"worker router"),t.prev=2,t.t0=i.task,t.next="cube"===t.t0?6:"init"===t.t0?11:"destroy"===t.t0?14:"start"===t.t0?17:"specification"===t.t0?22:"associate"===t.t0?27:"detail"===t.t0?32:"download"===t.t0?35:"sync"===t.t0?38:"subinsight"===t.t0?41:"upload"===t.t0?46:49;break;case 6:return t.next=8,q(i.props);case 8:return o=t.sent,n(o),t.abrupt("break",50);case 11:return D(i.props),n(),t.abrupt("break",50);case 14:return I(),n(),t.abrupt("break",50);case 17:return t.next=19,N(i.props);case 19:return s=t.sent,n(s),t.abrupt("break",50);case 22:return t.next=24,C(i.props);case 24:return u=t.sent,n(u),t.abrupt("break",50);case 27:return t.next=29,L(i.props);case 29:return c=t.sent,n(c),t.abrupt("break",50);case 32:return f=R(i.props),n(f),t.abrupt("break",50);case 35:return l=z(),n(l),t.abrupt("break",50);case 38:return h=$(),n(h),t.abrupt("break",50);case 41:return t.next=43,B(i.props);case 43:return p=t.sent,n(p),t.abrupt("break",50);case 46:return d=G(i.props),n(d),t.abrupt("break",50);case 49:throw new Error('Unknow task: "'.concat(i.task,'".'));case 50:t.next=55;break;case 52:t.prev=52,t.t1=t.catch(2),r("[".concat(i.task,"]").concat(t.t1,"\n").concat(t.t1.stack));case 55:case"end":return t.stop()}}),t,null,[[2,52]])})))).apply(this,arguments)}self.addEventListener("message",(function(t){!function(t,e,n){V.apply(this,arguments)}(t,(t=>{self.postMessage({success:!0,data:t})}),(t=>{self.postMessage({success:!1,message:`[worker]${t}`})}))}),!1)}]);