!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./",r(r.s=9)}([function(t,e,r){t.exports=r(8)},function(t,e,r){"use strict";this&&this.__assign;Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),a=r(7),i=r(3),o={sum:i.sum_unsafe,mean:i.mean,count:i.count};function u(t){var e=t.type,r=t.aggFunc,a=void 0===r?i.count:r,o=t.factTable,u=void 0===o?[]:o,s=t.dimensions,c=void 0===s?[]:s,f=t.measures,h=void 0===f?[]:f;switch(e){case"period":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:h});case"moment":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:h})}}e.createCube=u,e.default=function(t){var e=t.dimensions,r=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,f=u({type:"moment",aggFunc:o[s]||i.count,dimensions:e,measures:r,factTable:c}),h=a.tree2Table({dimensions:e,measures:r,cube:f});return h.forEach((function(t){n.forEach((function(e,n){t[e]=t[r[n]]}))})),h},function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(3))},function(t,e,r){!function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,r=t[0],n=0,a=1;a<t.length;a++)e=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-e+t[a]:n+=t[a]-e+r,r=e;return r+n}function r(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function n(t,e){var n,a,i=r(t),o=0;if(2===e)for(a=0;a<t.length;a++)o+=(n=t[a]-i)*n;else for(a=0;a<t.length;a++)o+=Math.pow(t[a]-i,e);return o}function a(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function i(t){if(1===t.length)return 0;var e=a(t);return Math.sqrt(e)}function o(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],r=NaN,n=0,a=1,i=1;i<t.length+1;i++)t[i]!==e?(a>n&&(n=a,r=e),a=1,e=t[i]):a++;return r}function u(t){return t.slice().sort((function(t,e){return t-e}))}function s(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function c(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}function f(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function h(t,e){var r=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function l(t,e,r,n){for(r=r||0,n=n||t.length-1;n>r;){if(n-r>600){var a=n-r+1,i=e-r+1,o=Math.log(a),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(a-u)/a);i-a/2<0&&(s*=-1),l(t,e,Math.max(r,Math.floor(e-i*u/a+s)),Math.min(n,Math.floor(e+(a-i)*u/a+s)))}var c=t[e],f=r,h=n;for(v(t,r,e),t[n]>c&&v(t,r,n);f<h;){for(v(t,f,h),f++,h--;t[f]<c;)f++;for(;t[h]>c;)h--}t[r]===c?v(t,r,h):v(t,++h,n),h<=e&&(r=h+1),e<=h&&(n=h-1)}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e){var r=t.slice();if(Array.isArray(e)){!function(t,e){for(var r=[0],n=0;n<e.length;n++)r.push(g(t.length,e[n]));r.push(t.length-1),r.sort(m);for(var a=[0,r.length-1];a.length;){var i=Math.ceil(a.pop()),o=Math.floor(a.pop());if(!(i-o<=1)){var u=Math.floor((o+i)/2);d(t,r[u],Math.floor(r[o]),Math.ceil(r[i])),a.push(o,u,u,i)}}}(r,e);for(var n=[],a=0;a<e.length;a++)n[a]=h(r,e[a]);return n}return d(r,g(r.length,e),0,r.length-1),h(r,e)}function d(t,e,r,n){e%1==0?l(t,e,r,n):(l(t,e=Math.floor(e),r,n),l(t,e+1,e+1,n))}function m(t,e){return t-e}function g(t,e){var r=t*e;return 1===e?t-1:0===e?0:r%1!=0?Math.ceil(r)-1:t%2==0?r-.5:r}function y(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var r=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e<=t[r=n+a>>>1]?a=r:n=-~r;return n}(t,e);if(t[r]!==e)return r/t.length;r++;var n=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e>=t[r=n+a>>>1]?n=-~r:a=r;return n}(t,e);if(n===r)return r/t.length;var a=n-r+1;return a*(n+r)/2/a/t.length}function w(t){var e=p(t,.75),r=p(t,.25);if("number"==typeof e&&"number"==typeof r)return e-r}function b(t){return+p(t,.5)}function M(t){for(var e=b(t),r=[],n=0;n<t.length;n++)r.push(Math.abs(t[n]-e));return b(r)}function S(t,e){e=e||Math.random;for(var r,n,a=t.length;a>0;)n=Math.floor(e()*a--),r=t[a],t[a]=t[n],t[n]=r;return t}function E(t,e){return S(t.slice(),e)}function k(t,e,r){return E(t,r).slice(0,e)}function x(t,e){for(var r=[],n=0;n<t;n++){for(var a=[],i=0;i<e;i++)a.push(0);r.push(a)}return r}function _(t){for(var e,r=0,n=0;n<t.length;n++)0!==n&&t[n]===e||(e=t[n],r++);return r}function D(t,e,r,n){var a;if(t>0){var i=(r[e]-r[t-1])/(e-t+1);a=n[e]-n[t-1]-(e-t+1)*i*i}else a=n[e]-r[e]*r[e]/(e+1);return a<0?0:a}function T(t,e,r,n,a,i,o){if(!(t>e)){var u=Math.floor((t+e)/2);n[r][u]=n[r-1][u-1],a[r][u]=u;var s=r;t>r&&(s=Math.max(s,a[r][t-1]||0)),s=Math.max(s,a[r-1][u]||0);var c,f,h,l=u-1;e<n[0].length-1&&(l=Math.min(l,a[r][e+1]||0));for(var v=l;v>=s&&!((c=D(v,u,i,o))+n[r-1][s-1]>=n[r][u]);--v)(f=D(s,u,i,o)+n[r-1][s-1])<n[r][u]&&(n[r][u]=f,a[r][u]=s),s++,(h=c+n[r-1][v-1])<n[r][u]&&(n[r][u]=h,a[r][u]=v);T(t,u-1,r,n,a,i,o),T(u+1,e,r,n,a,i,o)}}function O(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(t),a=r(e),i=0,o=0;o<t.length;o++)i+=(t[o]-n)*(e[o]-a);return i/(t.length-1)}function I(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function z(t){var e=I(t);return Math.sqrt(e)}function N(t,e,r,n){return(t*e+r*n)/(e+n)}function j(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return f(t)/t.length}function P(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return Math.sqrt(e/t.length)}var q=function(){this.totalCount=0,this.data={}};q.prototype.train=function(t,e){for(var r in this.data[e]||(this.data[e]={}),t){var n=t[r];void 0===this.data[e][r]&&(this.data[e][r]={}),void 0===this.data[e][r][n]&&(this.data[e][r][n]=0),this.data[e][r][n]++}this.totalCount++},q.prototype.score=function(t){var e,r={};for(var n in t){var a=t[n];for(e in this.data)r[e]={},this.data[e][n]?r[e][n+"_"+a]=(this.data[e][n][a]||0)/this.totalCount:r[e][n+"_"+a]=0}var i={};for(e in r)for(var o in i[e]=0,r[e])i[e]+=r[e][o];return i};var F=function(){this.weights=[],this.bias=0};F.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,r=0;r<this.weights.length;r++)e+=this.weights[r]*t[r];return(e+=this.bias)>0?1:0},F.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var r=this.predict(t);if("number"==typeof r&&r!==e){for(var n=e-r,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var C=1e-4;function L(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,r=2;r<=t;r++)e*=r;return e}var R=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],A=Math.log(Math.sqrt(2*Math.PI)),G={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),U={gaussian:function(t){return Math.exp(-.5*t*t)/V}},W={nrd:function(t){var e=z(t),r=w(t);return"number"==typeof r&&(e=Math.min(e,r/1.34)),1.06*e*Math.pow(t.length,-.2)}};function X(t,e,r){var n,a;if(void 0===e)n=U.gaussian;else if("string"==typeof e){if(!U[e])throw new Error('Unknown kernel "'+e+'"');n=U[e]}else n=e;if(void 0===r)a=W.nrd(t);else if("string"==typeof r){if(!W[r])throw new Error('Unknown bandwidth method "'+r+'"');a=W[r](t)}else a=r;return function(e){var r=0,i=0;for(r=0;r<t.length;r++)i+=n((e-t[r])/a);return i/a/t.length}}var H=Math.sqrt(2*Math.PI);function K(t){for(var e=t,r=t,n=1;n<15;n++)e+=r*=t*t/(2*n+1);return Math.round(1e4*(.5+e/H*Math.exp(-t*t/2)))/1e4}for(var Y=[],B=0;B<=3.09;B+=.01)Y.push(K(B));function $(t){var e=1/(1+.5*Math.abs(t)),r=e*Math.exp(-t*t+((((((((.17087277*e-.82215223)*e+1.48851587)*e-1.13520398)*e+.27886807)*e-.18628806)*e+.09678418)*e+.37409196)*e+1.00002368)*e-1.26551223);return t>=0?1-r:r-1}function J(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),r=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?r:-r}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,e){for(var r=0,n=0;n<t.length;n++){var a=t[n]-e[n];r+=a*a}return Math.sqrt(r)}function tt(t,e){return t.map((function(t){for(var r=Number.MAX_VALUE,n=-1,a=0;a<e.length;a++){var i=Z(t,e[a]);i<r&&(r=i,n=a)}return n}))}function et(t,e,r){for(var n=t[0].length,a=x(r,n),i=Array(r).fill(0),o=t.length,u=0;u<o;u++){for(var s=t[u],c=e[u],f=a[c],h=0;h<n;h++)f[h]+=s[h];i[c]+=1}for(var l=0;l<r;l++){if(0===i[l])throw new Error("Centroid "+l+" has no friends");for(var v=a[l],p=0;p<n;p++)v[p]/=i[l]}return a}function rt(t,e){for(var r=0,n=0;n<t.length;n++)r+=Z(t[n],e[n]);return r}function nt(t,e){if(t.length!==e.length)throw new Error("must have exactly as many labels as points");for(var r=function(t){for(var e=1+c(t),r=Array(e),n=0;n<t.length;n++){var a=t[n];void 0===r[a]&&(r[a]=[]),r[a].push(n)}return r}(e),n=function(t){for(var e=t.length,r=x(e,e),n=0;n<e;n++)for(var a=0;a<n;a++)r[n][a]=Z(t[n],t[a]),r[a][n]=r[n][a];return r}(t),a=[],i=0;i<t.length;i++){var o=0;if(r[e[i]].length>1){var u=it(i,r[e[i]],n),s=at(i,e,r,n);o=(s-u)/Math.max(u,s)}a.push(o)}return a}function at(t,e,r,n){for(var a=e[t],i=Number.MAX_VALUE,o=0;o<r.length;o++)if(o!==a){var u=it(t,r[o],n);u<i&&(i=u)}return i}function it(t,e,r){for(var n=0,a=0;a<e.length;a++)n+=r[t][e[a]];return n/e.length}function ot(t,e){return 0===t&&0===e?0:Math.abs((t-e)/e)}t.BayesianClassifier=q,t.PerceptronModel=F,t.addToMean=function(t,e,r){return t+(r-t)/(e+1)},t.approxEqual=function(t,e,r){return void 0===r&&(r=C),ot(t,e)<=r},t.average=r,t.averageSimple=j,t.bayesian=q,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||e>1||t<=0||t%1!=0)){var r=0,n=0,a=[],i=1;do{a[r]=i*Math.pow(e,r)*Math.pow(1-e,t-r),n+=a[r],i=i*(t-++r+1)/r}while(n<.9999);return a}},t.bisect=function(t,e,r,n,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var i=0;i<n;i++){var o=(e+r)/2;if(0===t(o)||Math.abs((r-e)/2)<a)return o;Q(t(o))===Q(t(e))?e=o:r=o}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=G,t.chiSquaredGoodnessOfFit=function(t,e,n){for(var a=0,i=e(r(t)),o=[],u=[],s=0;s<t.length;s++)void 0===o[t[s]]&&(o[t[s]]=0),o[t[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in i)f in o&&(u[+f]=i[f]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),o[h-1]+=o[h],o.pop());for(var l=0;l<o.length;l++)a+=Math.pow(o[l]-u[l],2)/u[l];var v=o.length-1-1;return G[v][n]<a},t.chunk=function(t,e){var r=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var r=u(t);if(1===_(r))return[r];var n=x(e,r.length),a=x(e,r.length);!function(t,e,r){for(var n=e[0].length,a=t[Math.floor(n/2)],i=[],o=[],u=0,s=void 0;u<n;++u)s=t[u]-a,0===u?(i.push(s),o.push(s*s)):(i.push(i[u-1]+s),o.push(o[u-1]+s*s)),e[0][u]=D(0,u,i,o),r[0][u]=0;for(var c=1;c<e.length;++c)T(c<e.length-1?c:n-1,n-1,c,e,r,i,o)}(r,n,a);for(var i=[],o=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][o];i[s]=r.slice(c,o+1),s>0&&(o=c-1)}return i},t.combinations=function t(e,r){var n,a,i,o,u=[];for(n=0;n<e.length;n++)if(1===r)u.push([e[n]]);else for(i=t(e.slice(n+1,e.length),r-1),a=0;a<i.length;a++)(o=i[a]).unshift(e[n]),u.push(o);return u},t.combinationsReplacement=function t(e,r){for(var n=[],a=0;a<e.length;a++)if(1===r)n.push([e[a]]);else for(var i=t(e.slice(a,e.length),r-1),o=0;o<i.length;o++)n.push([e[a]].concat(i[o]));return n},t.combineMeans=N,t.combineVariances=function(t,e,r,n,a,i){var o=N(e,r,a,i);return(r*(t+Math.pow(e-o,2))+i*(n+Math.pow(a-o,2)))/(r+i)},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),r=Math.min(Math.round(100*e),Y.length-1);return t>=0?Y[r]:+(1-Y[r]).toFixed(4)},t.epsilon=C,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var r=s(t),n=c(t),a=[r],i=(n-r)/e,o=1;o<e;o++)a.push(a[0]+i*o);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]),t[n]<e&&(e=t[n]);return[e,r]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=L,t.gamma=function t(e){if(Number.isInteger(e))return e<=0?NaN:L(e-1);if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var r=e+1/4;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(r,2)-1/12960/Math.pow(r,3)-257/207360/Math.pow(r,4)-52/2612736/Math.pow(r,5)+5741173/9405849600/Math.pow(r,6)+37529/18811699200/Math.pow(r,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=R[0],r=1;r<15;r++)e+=R[r]/(t+r);var n=5.2421875+t;return A+Math.log(e)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[r]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[r]}return t.length/e},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,e,r){void 0===r&&(r=Math.random);for(var n=null,a=k(t,e,r),i=null,o=Number.MAX_VALUE;0!==o;)n=a,o=rt(a=et(t,i=tt(t,a),e),n);return{labels:i,centroids:a}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var e,r,n=t.length;if(1===n)e=0,r=t[0][1];else{for(var a,i,o,u=0,s=0,c=0,f=0,h=0;h<n;h++)u+=i=(a=t[h])[0],s+=o=a[1],c+=i*i,f+=i*o;r=s/n-(e=(n*f-u*s)/(n*c-u*u))*u/n}return{m:e,b:r}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.mad=M,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=r,t.meanSimple=j,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=s,t.minSorted=function(t){return t[0]},t.mode=function(t){return o(u(t))},t.modeFast=function(t){for(var e,r=new Map,n=0,a=0;a<t.length;a++){var i=r.get(t[a]);void 0===i?i=1:i++,i>n&&(e=t[a],n=i),r.set(t[a],i)}if(0===n)throw new Error("mode requires at last one data point");return e},t.modeSorted=o,t.numericSort=u,t.perceptron=F,t.permutationTest=function(t,e,n,a,i){if(void 0===a&&(a=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=r(t)-r(e),u=new Array(a),s=t.concat(e),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,i);var h=s.slice(0,c),l=s.slice(c,s.length),v=r(h)-r(l);u[f]=v}var p=0;if("two_side"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(o)&&(p+=1);else if("greater"===n)for(var m=0;m<=a;m++)u[m]>=o&&(p+=1);else for(var g=0;g<=a;g++)u[g]<=o&&(p+=1);return p/a},t.permutationsHeap=function(t){for(var e=new Array(t.length),r=[t.slice()],n=0;n<t.length;n++)e[n]=0;for(var a=0;a<t.length;)if(e[a]<a){var i=0;a%2!=0&&(i=e[a]);var o=t[i];t[i]=t[a],t[a]=o,r.push(t.slice()),e[a]++,a=0}else e[a]=0,a++;return r},t.poissonDistribution=function(t){if(!(t<=0)){var e=0,r=0,n=[],a=1;do{n[e]=Math.exp(-t)*Math.pow(t,e)/a,r+=n[e],a*=++e}while(r<.9999);return n}},t.probit=function(t){return 0===t?t=C:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var e=1,r=0;r<t.length;r++)e*=t[r];return e},t.quantile=p,t.quantileRank=function(t,e){return y(u(t),e)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=l,t.rSquared=function(t,e){if(t.length<2)return 1;for(var r=0,n=0;n<t.length;n++)r+=t[n][1];for(var a=r/t.length,i=0,o=0;o<t.length;o++)i+=Math.pow(a-t[o][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-e(t[s][0]),2);return 1-u/i},t.relativeError=ot,t.rms=P,t.rootMeanSquare=P,t.sample=k,t.sampleCorrelation=function(t,e){return O(t,e)/z(t)/z(e)},t.sampleCovariance=O,t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,a=r(t),i=0,o=0,u=0;u<e;u++)i+=(n=t[u]-a)*n,o+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(i*i)-3*(e-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,n=r(t),a=0,i=0,o=0;o<t.length;o++)a+=(e=t[o]-n)*e,i+=e*e*e;var u=t.length-1,s=Math.sqrt(a/u),c=t.length;return c*i/((c-1)*(c-2)*Math.pow(s,3))},t.sampleStandardDeviation=z,t.sampleVariance=I,t.sampleWithReplacement=function(t,e,r){if(0===t.length)return[];r=r||Math.random;for(var n=t.length,a=[],i=0;i<e;i++){var o=Math.floor(r()*n);a.push(t[o])}return a},t.shuffle=E,t.shuffleInPlace=S,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,e){return c(nt(t,e))},t.standardDeviation=i,t.standardNormalTable=Y,t.subtractFromMean=function(t,e,r){return(t*e-r)/(e-1)},t.sum=e,t.sumNthPowerDeviations=n,t.sumSimple=f,t.tTest=function(t,e){return(r(t)-e)/(i(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,n){var a=t.length,i=e.length;if(!a||!i)return null;n||(n=0);var o=r(t),u=r(e),s=I(t),c=I(e);if("number"==typeof o&&"number"==typeof u&&"number"==typeof s&&"number"==typeof c){var f=((a-1)*s+(i-1)*c)/(a+i-2);return(o-u-n)/Math.sqrt(f*(1/a+1/i))}},t.uniqueCountSorted=_,t.variance=a,t.zScore=function(t,e,r){return(t-e)/r},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum_unsafe=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=t[n][e]}))},a=0,i=t.length;a<i;a++)n(a);return r},e.sum=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return r},e.count=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=0,a=t.length;n<a;n++)e.forEach((function(t){r[t]++}));return r},e.mean=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return e.forEach((function(e){r[e]/=t.length})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.periodCube=n.default;var a=r(6);e.momentCube=a.default},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._rawData).push.apply(t,a(e))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,e;if(!this.cache){if(0!==this.children.size){var r=this.children.values(),n=[];try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)n.push(c[s])}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var e=this,r=e.tree,a=(e.aggFunc,e.measures);return function e(r,o){var u,s;if(o===t.length)return r.aggData(a);var c=r.children.entries();try{for(var f=i(c),h=f.next();!h.done;h=f.next()){var l=n(h.value,2),v=l[0],p=l[1];if(v===t[o])return e(p,o+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,e=new o(this.aggFunc),r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(e.push(t),e.cache=!1,r<this.dimensions.length){var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o(this.aggFunc)),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this.rawData).push.apply(t,a(e))},t.prototype.aggData=function(t,e){return void 0===e&&(e=[]),this._aggData=t(this.rawData,e),this._aggData},t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}();e.Node=o;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var e=this,r=e.tree,a=e.aggFunc,o=e.measures;return function e(r,u){var s,c;if(u===t.length)return r.aggData(a,o);var f=r.children.entries();try{for(var h=i(f),l=h.next();!l.done;l=h.next()){var v=n(l.value,2),p=v[0],d=v[1];if(p===t[u])return e(d,u+1)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var e=t.aggFunc,r=void 0===e?this.aggFunc:e,n=t.factTable,a=void 0===n?this.factTable:n,i=t.dimensions,o=void 0===i?this.dimensions:i,u=t.measures,s=void 0===u?this.measures:u;o!==this.dimensions||a!==this.factTable?(this.dimensions=o,this.factTable=a,this.measures=s,this.aggFunc=r,this.buildTree(),this.aggTree()):s===this.measures&&r===this.aggFunc||(this.measures=s,this.aggFunc=r,this.aggTree())},t.prototype.buildTree=function(){var t,e=new o,r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(r===this.dimensions.length)e.push(t);else{var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)t.rawData.push(c[s])}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(e,"__esModule",{value:!0}),e.tree2Table=function(t){var e=t.dimensions,r=(t.measures,t.cube),o=(r.aggFunc,[]);return function t(r,u,s){var c,f,h;if(0!==r.children.size)try{for(var l=a(r.children.entries()),v=l.next();!v.done;v=l.next()){var p=i(v.value,2),d=p[0];t(p[1],n(n({},u),((h={})[e[s]]=d,h)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var m=r._aggData;o.push(n(n({},u),m))}}(r.tree,{},0),o}},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(z){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),o=new T(n||[]);return i._invoke=function(t,e,r){var n=h;return function(a,i){if(n===v)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=x(o,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var s=f(t,e,r);if("normal"===s.type){if(n=r.done?p:l,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(z){return{type:"throw",arg:z}}}t.wrap=c;var h="suspendedStart",l="suspendedYield",v="executing",p="completed",d={};function m(){}function g(){}function y(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(O([])));M&&M!==r&&n.call(M,i)&&(w=M);var S=y.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,i,o,u){var s=f(t[a],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,u)}),(function(t){r("throw",t,o,u)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,u)}))}u(s.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function x(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var a=f(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,d;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function O(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new k(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),s(S,u,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return u.type="throw",u.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"kruskal",(function(){return C})),r.d(n,"kruskalWithFullMST",(function(){return F}));var a={};r.r(a),r.d(a,"getDimCorrelationMatrix",(function(){return Y})),r.d(a,"getMeaCorrelationMatrix",(function(){return B})),r.d(a,"getDimClusterGroups",(function(){return $})),r.d(a,"getDimSetsBasedOnClusterGroups",(function(){return J})),r.d(a,"getMeaSetsBasedOnClusterGroups",(function(){return Q})),r.d(a,"subspaceSearching",(function(){return Z})),r.d(a,"getRelatedVertices",(function(){return tt}));var i={};function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(t){if("string"===typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(s){a=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}r.r(i),r.d(i,"insightExtraction",(function(){return it})),r.d(i,"subspaceSearching",(function(){return at})),r.d(i,"getVisSpaces",(function(){return St})),r.d(i,"IntentionWorkerCollection",(function(){return wt})),r.d(i,"DefaultIWorker",(function(){return pt})),r.d(i,"getIntentionSpaces",(function(){return bt})),r.d(i,"Subspace",(function(){return a})),r.d(i,"VIEngine",(function(){return At}));var p=function(t,e,r){for(var n=new Set,a=new Set,i=new Map,o=t.length,u=0;u<o;u++){var s=t[u];n.add(s[e]),a.add(s[r]),i.has(s[e])||i.set(s[e],new Map);var f=i.get(s[e]);f.has(s[r])||f.set(s[r],0),f.set(s[r],f.get(s[r])+1)}var h=function(t,e,r){if("undefined"===typeof t||"undefined"===typeof e||"undefined"===typeof r)return 0;var n,a=new Map,i=new Map,o=0,u=v(e);try{for(u.s();!(n=u.n()).done;){var s=n.value;a.set(s,0)}}catch(P){u.e(P)}finally{u.f()}var f,h=v(r);try{for(h.s();!(f=h.n()).done;){var l=f.value;i.set(l,0)}}catch(P){h.e(P)}finally{h.f()}var p,d=v(t);try{for(d.s();!(p=d.n()).done;){var m,g=c(p.value,2),y=g[0],w=v(g[1]);try{for(w.s();!(m=w.n()).done;){var b=c(m.value,2),M=b[0],S=b[1];a.set(y,a.get(y)+S),i.set(M,i.get(M)+S),o+=S}}catch(P){w.e(P)}finally{w.f()}}}catch(P){d.e(P)}finally{d.f()}var E,k=0,x=v(t);try{for(x.s();!(E=x.n()).done;){var _,D=c(E.value,2),T=D[0],O=v(D[1]);try{for(O.s();!(_=O.n()).done;){var I=c(_.value,2),z=I[0],N=I[1],j=a.get(T)*i.get(z)/o;k+=Math.pow(N-j,2)/j}}catch(P){O.e(P)}finally{O.f()}}}catch(P){x.e(P)}finally{x.f()}return k}(i,n,a);return Math.sqrt(h/(t.length*Math.min(n.size-1,a.size-1)))},d=function(t,e,r){var n=m(t.map((function(t){return t[e]})))/t.length,a=m(t.map((function(t){return t[r]})))/t.length;return m(t.map((function(t){return(t[e]-n)*(t[r]-a)})))/Math.sqrt(m(t.map((function(t){return Math.pow(t[e]-n,2)})))*m(t.map((function(t){return Math.pow(t[r]-a,2)}))))};function m(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e}function g(t){var e=Math.min.apply(Math,f(t));return t.map((function(t){return t-e+1}))}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function e(r,a,i){a.length!==i?r>=t.length||(e(r+1,[].concat(f(a),[t[r]]),i),e(r+1,a,i)):n.push(f(a))},i=e;i<=r;i++)a(0,[],i);return n}function w(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a}}catch(i){n.e(i)}finally{n.f()}return t.map((function(t){return t/r}))}var b=function(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a*Math.log2(a)}}catch(i){n.e(i)}finally{n.f()}return-r};function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e,r){return e&&S(t.prototype,e),r&&S(t,r),t}var k=function(){function t(e,r,n){M(this,t),this.dataSource=e,this.X=r,this.Y=n,this.normalizedDataSource=e}return E(t,[{key:"normalizeDimensions",value:function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(r){t.forEach((function(t,n){var a=(r[t]||"others").toString();e.valueSets[n].has(a)||e.valueSets[n].set(a,e.valueSets[n].size)}))})),this.dataSource.forEach((function(r){var n=e.normalizeRecord(r,t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t,e){var r=this,n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),e.forEach((function(e,a){var i=(t[e]||"others").toString();n[e]=r.valueSets[a].get(i)})),n}},{key:"mean",value:function(){var t=this,e=0,r=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,a){e+=n[t.X],r+=n[t.Y]})),e/=this.normalizedDataSource.length,r/=this.normalizedDataSource.length),[e,r]}},{key:"getRegressionEquation",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,r=c(this.mean(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(e){i+=(e[t.X]-n)*(e[t.Y]-a),o+=Math.pow(e[t.X]-n,2)})),[a-n*(e=i/o),e]}},{key:"r_squared",value:function(){var t=this,e=c(this.mean(),2)[1],r=c(this.getRegressionEquation(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(r){var u=r[t.X],s=r[t.Y],c=u*a+n;i+=Math.pow(c-e,2),o+=Math.pow(s-e,2)})),i/o}},{key:"cumulativeLogisticDistribution",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:"pValue",value:function(){var t=c(this.getRegressionEquation(),2)[1],e=this.cumulativeLogisticDistribution(Math.abs(t));return e>.5?2*(1-e):2*e}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),x=r(2),_="_join_",D={sum:x.sum,max:x.max,mean:x.mean,min:x.min,count:function(t){return t.length}};function T(t){return D[t]||x.sum}var O=.3,I=.5;function z(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t[r].length;n++)e.push([[r,n],Math.abs(t[r][n])]);return e}function N(t,e){return t[e]===e?e:t[e]=N(t,t[e])}function j(t,e,r){var n=N(t,e),a=N(t,r);t[n]=a,N(t,e),N(t,r)}function P(t,e,r){return t[r]===r?r:(t[r]=P(t,e,t[r]),e[r]=e[t[r]],t[r])}function q(t,e,r,n){var a=P(t,e,r),i=P(t,e,n),o=e[a],u=e[i];t[a]=i,e[a]=e[i]=o+u,P(t,e,r),P(t,e,n)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=[],o=t.map((function(t,e){return e})),u=f(o),s=!1,c=v(n);try{for(c.s();!(a=c.n()).done;){var h=a.value;N(o,h[0][0])!==N(o,h[0][1])&&(j(o,h[0][0],h[0][1]),i.push([h[0],h[1],s]));for(var l=0;l<o.length;l++)o[l]=N(o,l);var p=new Set(o);if(p.size<=e||h[1]<r?s=!0:u=f(o),1===p.size)break}}catch(d){c.e(d)}finally{c.f()}return{edgesInMST:i,groups:u}}var C=function(t){var e,r=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),i=void 0===a?4:a,o=t.limitSize,u=void 0!==o&&o,s=t.threshold,c=void 0===s?0:s;e=u?function(t,e){var r=z(t);r.sort((function(t,e){return e[1]-t[1]}));var n,a=t.map((function(t,e){return e})),i=t.map((function(){return 1})),o=v(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(P(a,i,u[0][0])!==P(a,i,u[0][1])){if(i[u[0][0]]+i[u[0][1]]>e)continue;q(a,i,u[0][0],u[0][1])}for(var s=0;s<a.length;s++)a[s]=P(a,i,s);if(1===new Set(a).size)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<a.length;f++)c.has(a[f])||c.set(a[f],[]),c.get(a[f]).push(f);return c}(r,i):function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=t.map((function(t,e){return e})),o=v(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;N(i,u[0][0])!==N(i,u[0][1])&&j(i,u[0][0],u[0][1]);for(var s=0;s<i.length;s++)i[s]=N(i,s);if(new Set(i).size<=e||u[1]<r)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<i.length;f++)c.has(i[f])||c.set(i[f],[]),c.get(i[f]).push(f);return c}(r,i,c);var f,h=[],l=v(e.values());try{for(l.s();!(f=l.n()).done;){var p=f.value;h.push(p.map((function(t){return n[t]})))}}catch(d){l.e(d)}finally{l.f()}return h};function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return!e||"object"!==G(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var a=A(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return V(this,r)}}var W=function(t){R(r,t);var e=U(r);function r(t){var n;M(this,r),n=e.call(this,t);var a=t.K;return n.K=a,n.normalize(),n}return E(r,[{key:"getNeighbors",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.length!==e.length&&e.forEach((function(t){r.push(1)}));for(var n=[],a=[],i=[],o=[],u=new Set(this.dimensions),s=0;s<e.length;s++)u.has(e[s])?(n.push(e[s]),i.push(r[s])):(a.push(e[s]),o.push(r[s]));var c=[];this.normalizedDataSource.forEach((function(e,r){var u=0;a.forEach((function(r,n){u+=Math.pow((e[r]-t[r])*o[n],2)})),n.forEach((function(r,n){e[r]!==t[r]&&(u+=Math.pow(i[n],2))})),c.push({dis:u,index:r})})),c.sort((function(t,e){return t.dis-e.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:"getTargetValue",value:function(t,e){var r=this,n=[];return t.forEach((function(t){var a=new Map;e.forEach((function(e){a.has(e[t])||a.set(e[t],0),a.set(e[t],a.get(e[t])+1)}));var i,o=0,u=0,s=v(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;c[1]>o&&(o=c[1],u=c[0])}}catch(h){s.e(h)}finally{s.f()}var f=r.dimensions.indexOf(t);f>-1?n.push(r.valueParser[f][u]):n.push(u)})),n}}]),r}(function(){function t(e){M(this,t);var r=e.dataSource,n=e.dimensions,a=e.measures;this.dataSource=r,this.dimensions=n,this.measures=a}return E(t,[{key:"normalize",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(n,a){r[n]=(t[n]-e.ranges[a][0])/(e.ranges[a][1]-e.ranges[a][0])})),this.dimensions.forEach((function(n,a){var i=(t[n]||"others").toString();r[n]=e.valueSets[a].get(i)})),r}}]),t}());function X(t,e){for(var r=function(t,e){if(0===t)return[];for(var r=2147483647,n=[e],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%r);return n.map((function(t){return t/r}))}(e,2147483647*Math.random()),n=[],a=0;a<e;a++){var i=Math.floor(r[a]*e)%e;n.push(t[i])}return n}var H=8,K={IsolationForest:function(){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;M(this,t),this.dimensions=e,this.measures=r,this.dataSource=n,n.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return E(t,[{key:"normalizeDimensions",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(e){r[e]=t[e]})),this.dimensions.forEach((function(n,a){var i=(t[n]||"others").toString();r[n]=e.valueSets[a].get(i)})),r}},{key:"buildIsolationTree",value:function(t,e){if(e>=this.limitHeight||t.length<=1)return null;var r=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,i=this.measures.length,o=0;if(r>=a/(a+i)){var u=Math.floor(Math.random()*i)%i;n=this.measures[u],o=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],o=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c,f=[],h=[],l=v(t);try{for(l.s();!(c=l.n()).done;){var p=c.value;p[n]<o?f.push(p):h.push(p)}}catch(m){l.e(m)}finally{l.f()}var d={field:n,value:o,size:t.length};return d.left=this.buildIsolationTree(f,e+1),d.right=this.buildIsolationTree(h,e+1),d}},{key:"AFS",value:function(t){return t>2?2*(Math.log(t-1)+.5772156649)-2*(t-1)/t:2===t?1:0}},{key:"getPathLength",value:function(t,e,r,n){return null===e?r+this.AFS(n):t[e.field]<e.value?this.getPathLength(t,e.left,r+1,e.size):this.getPathLength(t,e.right,r+1,e.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=X(this.normalizedDataSource,this.sampleSize),r=this.buildIsolationTree(e,0);this.iForest.push(r)}return this.iForest}},{key:"estimateOutierScore",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var r,n=0;t.iForest.forEach((function(r){n+=t.getPathLength(e,r,0,t.sampleSize)})),n/=t.iForest.length,r=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(r)})),this.recordScoreList}}]),t}()};function Y(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}function B(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++){var i=d(t,e[n],e[a]);r[a][n]=r[n][a]=i}}return r}function $(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,a=arguments.length>3?arguments[3]:void 0,i=4,o=Y(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r});return u}function J(t,e,r,n){var a,i=[],o=v($(t,e,r));try{for(o.s();!(a=o.n()).done;){var u=y(a.value,1,n||H);i.push.apply(i,f(u))}}catch(s){o.e(s)}finally{o.f()}return i}function Q(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=3,o=B(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r||I});return u}function Z(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?J(t,e):y(e)}function tt(t,e,r,n){for(var a=e.map((function(t){return r.includes(t)})),i=[],o=[],u=0;u<t.length;u++)if(a[u])for(var s=0;s<t[u].length;s++)a[s]||i.push([t[u][s],[u,s]]);i.sort((function(t,e){return e[0]-t[0]}));for(var c=0;c<i.length;c++){var f=i[c][1][1];a[f]||(a[f]=!0,o.push({field:e[f],corValue:i[c][0]}))}return o.slice(0,n||o.length)}var et=r(1),rt=r.n(et);function nt(t,e){var r,a=[],i=function(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}(t,e),o=v(n.kruskal({matrix:i,measures:e,groupMaxSize:Math.round(e.length/4),threshold:O}));try{for(o.s();!(r=o.n()).done;){var u=y(r.value,1,H);a.push.apply(a,f(u))}}catch(s){o.e(s)}finally{o.f()}return a}function at(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?nt(t,e):y(e)}function it(t,e,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum",i=[],o=at(t,e,!0),u=v(o);try{for(u.s();!(n=u.n()).done;){var s,c=n.value,f={},h=rt()({dataSource:t,dimensions:c,measures:r,asFields:r,operator:a||"sum"}),l=v(r);try{var p=function(){var t=s.value,e=w(g(h.map((function(e){return e[t]})))),r=b(e);f[t]=r};for(l.s();!(s=l.n()).done;)p()}catch(E){l.e(E)}finally{l.f()}for(var m=r.map((function(t){return r.map((function(t){return 0}))})),y=0;y<r.length;y++){m[y][y]=1;for(var M=y+1;M<r.length;M++){var S=d(h,r[y],r[M]);m[M][y]=m[y][M]=S}}i.push([c,f,m])}}catch(E){u.e(E)}finally{u.f()}return i}var ot=r(0),ut=r.n(ot);function st(t,e,r,n,a,i,o){try{var u=t[i](o),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,a)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){st(i,n,a,o,u,"next",t)}function u(t){st(i,n,a,o,u,"throw",t)}o(void 0)}))}}var ft=function(t){R(r,t);var e=U(r);function r(){return M(this,r),e.apply(this,arguments)}return E(r,[{key:"getTargetValuePercent",value:function(t,e,r){var n=[];return t.forEach((function(t,a){var i=0;r.forEach((function(r){r[t]===e[t]&&i++})),n.push(i/r.length)})),n}},{key:"getSignificance",value:function(t,e){var r=this,n=0;return this.normalizedDataSource.forEach((function(a){var i=r.getNeighbors(a,t),o=r.getTargetValuePercent(e,a,i),u=0;o.forEach((function(t){u+=t})),u/=o.length,n+=u})),n/=this.normalizedDataSource.length}}]),r}(W),ht="=;=";function lt(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=v(e);try{for(u.s();!(i=u.n()).done;){var s=i.value;n.push({dimensions:o,measures:s})}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function vt(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=[],a=v(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=y(i,1,r);n.push.apply(n,f(o))}}catch(u){a.e(u)}finally{a.f()}return n}var pt,dt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,i=0,o=v(n);try{for(s=function(){var t=u.value,r=e.map((function(e){return e[t]})),n=w(g(r)),o=b(n);a+=o,i+=o/Math.log2(r.length)},o.s();!(u=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return a/=n.length,i=1-(i/=n.length),t.abrupt("return",{dimensions:r,measures:n,type:"default_general",score:a,impurity:a,significance:i,order:"asc"});case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),mt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:r,measures:n,score:u,significance:u,order:"desc",description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),gt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt("return",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:t[r[0]]<e[r[0]]?-1:void 0})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt("return",{dimensions:r,measures:n,score:i,significance:i,order:"desc"});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),yt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<2)){t.next=2;break}return t.abrupt("return",null);case 2:return 0,i=new ft({dataSource:e,dimensions:r,measures:n,K:8}),a=i.getSignificance(n.concat(r.slice(0,-1)),r.slice(-1)),t.abrupt("return",{dimensions:r,measures:n,score:a,significance:a,order:"desc"});case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(pt||(pt={}));var wt=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:"each",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(pt.outlier,mt),t.colletion.register(pt.cluster,yt),t.colletion.register(pt.trend,gt))),pt)t.colletion.enable(pt[a],n);return t.colletion}}]),t}();function bt(t,e,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=ct(ut.a.mark((function t(e,r,n){var a,i,o,u;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=v(r),t.prev=2,u=ut.a.mark((function t(){var r,i,u,s,c,f;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.value,i=r.dimensions,u=r.measures,s=i.join(ht),!e.has(s)){t.next=9;break}return c=e.get(s),t.next=7,dt(c,i,u);case 7:f=t.sent,n.each(function(){var t=ct(ut.a.mark((function t(e,r){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(c,i,u);case 3:null!==(n=t.sent)&&(n.type=r,n.impurity=f.impurity,a.push(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:u,aggData:c},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})),i.s();case 5:if((o=i.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),i.e(t.t1);case 14:return t.prev=14,i.f(),t.finish(14);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function St(t){return Et.apply(this,arguments)}function Et(){return(Et=ct(ut.a.mark((function t(e){var r,n,a,i,o,u,s,c,f,h,l,p,d,m,g,y,w,b,M,S,E,k,x,_,D,T,z;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.dataSource,n=e.dimensions,a=e.measures,i=e.collection,o=e.dimension_correlation_threshold,u=void 0===o?O:o,s=e.measure_correlation_threshold,c=void 0===s?I:s,f=e.max_dimension_num_in_view,h=void 0===f?3:f,l=e.max_measure_num_in_view,p=void 0===l?3:l,d=$(r,n,u),m=vt(d,h),g=Q(r,a,c),y=vt(g,p),w=lt(m,y),b=new Map,M=(new Date).getTime(),S=v(m);try{for(S.s();!(E=S.n()).done;)k=E.value,x=k.join(ht),_=rt()({dataSource:r,dimensions:k,measures:a,asFields:a,operator:"sum"}),b.set(x,_)}catch(N){S.e(N)}finally{S.f()}return D=(new Date).getTime(),console.log("cube cost",D-M),b.set("*",r),T=i||wt.init(),t.next=18,bt(b,w,T);case 18:return z=t.sent,t.abrupt("return",z);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(t,e){return function(t,e){return t.every((function(t){return Number(t[e])>=1800&&Number(t[e])<=2200||!isNaN(Date.parse(t[e]))&&"string"===typeof t[e]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[e])||"undefined"===typeof t[e]||null===t[e]}))}(t,e)?"temporal":function(t,e){return t.every((function(t){return"number"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))}(t,e)?"quantitative":(function(t,e){t.every((function(t){return"string"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))}(t,e),"nominal")}var xt={boolean:function(t){return"true"===t||"false"===t||!0===t||!1===t},integer:function(t){return xt.number(t)&&(t=+t)===~~t},number:function(t){return!isNaN(+t)},date:function(t){return!isNaN(Date.parse(t))}};function _t(t,e){var r,n=[],a=new Map,i=v(t);try{var o=function(){var t=r.value,i=new Map;e.forEach((function(e){i.has(e[t])||i.set(e[t],0),i.set(e[t],i.get(e[t])+1)}));var o=function(t){var e,r,n=["boolean","integer","number","date"],a=v(t);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,o=0;o<n.length;++o)null==(r=i)||r!==r||xt[n[o]](i)||(n.splice(o,1),o-=1);if(0===n.length)return"string"}}catch(u){a.e(u)}finally{a.f()}return n[0]}(f(i.keys())),u=kt(e,t),s="dimension";"integer"!==o&&"number"!==o||(s="measure");var c={key:t,analyticType:s,semanticType:u,dataType:o,domain:i};n.push(c),a.set(c.key,c)};for(i.s();!(r=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return{fields:n,dictonary:a}}var Dt,Tt=function(){function t(e,r,n){M(this,t),this.DIMENSION_CORRELATION_THRESHOLD=O,this.MEASURE_CORRELATION_THRESHOLD=I,this.dimensions=r,this.measures=n,this.computeDGraph(e),this.computeMGraph(e)}return E(t,[{key:"computeGraph",value:function(t,e,r){for(var n=e.map((function(t){return e.map((function(){return 0}))})),a=0;a<e.length;a++){n[a][a]=1;for(var i=a+1;i<e.length;i++)n[a][i]=n[i][a]=r(t,e[a],e[i])}return n}},{key:"computeDGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return this.DG=this.computeGraph(t,this.dimensions,e),this.DG}},{key:"computeMGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return this.MG=this.computeGraph(t,this.measures,e),this.MG}},{key:"clusterDGraph",value:function(t,e){var r=this.dimensions,n=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=$(t,r,e||n),this.DClusters}},{key:"clusterMGraph",value:function(t,e){var r=this.measures,n=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=Q(t,r,e||n),this.MClusters}}]),t}(),Ot=["max","min","sum","mean","count"],It=function(){function t(e){M(this,t);var r=e.dimensions,n=e.measures,a=e.ops,i=void 0===a?Ot:a;this.dimensions=r,this.measures=n,this.ops=i,this.state=[]}return E(t,[{key:"setData",value:function(t){return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(e){return e[t]})))}))}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:t}),this.state}},{key:"computeFromCuboid",value:function(t){var e=this.ops,r=this.measures,n=this.dimensions;return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.filter((function(t){return!["sum","count","mean"].includes(t)})).forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(r){return r[t][e]})))})),o[t].sum=T("sum")(r.map((function(e){return e[t].sum}))),o[t].count=T("sum")(r.map((function(e){return e[t].count}))),o[t].mean=o[t].sum/o[t].count}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:n,measures:r,ops:e,dataSource:t.getRawState()}),this.state}},{key:"getState",value:function(t,e){var r,n=[],a=this.state,i=this.dimensions,o=v(a);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c={},f=v(i);try{for(f.s();!(u=f.n()).done;){var h=u.value;c[h]=s[h]}}catch(m){f.e(m)}finally{f.f()}for(var l=0;l<t.length;l++){var p=t[l],d=e[l];c[p]=s[p][d]}n.push(c)}}catch(m){o.e(m)}finally{o.f()}return n}},{key:"getRawState",value:function(){return this.state}},{key:"size",get:function(){return this.state.length}}]),t}(),zt="_join_",Nt=["max","min","sum","mean","count"],jt=function(){function t(e){var r=this;M(this,t);var n=e.dimensions,a=e.measures,i=e.dataSource,o=e.ops,u=void 0===o?Nt:o;this.dimensions=n,this.measures=a,this.dataSource=i,this.ops=u,this.dimOrder=new Map,n.forEach((function(t,e){r.dimOrder.set(t,e)})),this.cuboids=new Map}return E(t,[{key:"sortDimension",value:function(t){var e=this,r=f(t);return r.sort((function(t,r){return e.dimOrder.get(t)-e.dimOrder.get(r)})),r}},{key:"getCuboid",value:function(t){var e=this.sortDimension(t),r=e.join(zt);if(this.cuboids.has(r))return this.cuboids.get(r);var n,a=new Set(t),i=[],o=[],u=v(this.dimensions);try{for(u.s();!(n=u.n()).done;){var s=n.value;if(!a.has(s)){var c=this.sortDimension([].concat(f(e),[s])).join(zt);this.cuboids.has(c)?i.push(c):o.push(c)}}}catch(b){u.e(b)}finally{u.f()}var h=1/0,l=this.dimensions.join(zt);if(i.length>0){var p,d=v(i);try{for(d.s();!(p=d.n()).done;){var m=p.value,g=this.cuboids.get(m);g.size<h&&(h=g.size,l=m)}}catch(b){d.e(b)}finally{d.f()}}else o.length>0&&(l=o[0]);var y=this.getCuboid(l.split(zt)),w=new It({dimensions:t,measures:this.measures,ops:this.ops});return w.computeFromCuboid(y),this.cuboids.set(r,w),w}},{key:"buildBaseCuboid",value:function(){var t=new It({dimensions:this.dimensions,measures:this.measures,ops:this.ops});return t.setData(this.dataSource),this.cuboids.set(this.dimensions.join(zt),t),t}},{key:"baseCuboid",get:function(){var t=this.dimensions.join(zt);return this.cuboids.has(t)?this.cuboids.get(t):this.buildBaseCuboid()}}]),t}(),Pt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:r,measures:n,significance:u,description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),qt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt("return",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:-1})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt("return",{dimensions:r,measures:n,significance:i});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.trend="default_trend"}(Dt||(Dt={}));var Ft=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:"each",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;return t.colletion||(t.colletion=new t,n&&(t.colletion.register(Dt.outlier,Pt),t.colletion.register(Dt.trend,qt))),Object.values(Dt).forEach((function(e){t.colletion.enable(e,n)})),t.colletion}}]),t}(),Ct={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Lt(t,e){for(var r=e.length-1;r>=0;r--)if(e[r].semanticType===t&&!e[r].choosen)return e[r];return!1}function Rt(t,e){var r=function(t){for(var e={},r={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},n=t.map((function(t){return l(l({},t),{},{choosen:!1})})),a=[["quantitative",["position","size","color","highFacets","opacity","page","filter"]],["temporal",["position","page","filter"]],["ordinal",["position","color","opacity","facets","size","page","filter","highFacets"]],["nominal",["position","color","facets","shape","page","filter","hightFacets"]]],i=n.length,o=0;o<a.length&&i>0;o++)for(var u=a[o][0],s=a[o][1],c=0;c<s.length&&i>0;c++)for(var f=s[c],h=void 0;r[f]>0&&(h=Lt(u,n));)"undefined"===typeof e[f]&&(e[f]=[]),e[f].push(h.key),r[f]--,i--,h.choosen=!0;return e}(t.sort((function(t,e){return t.impurity-e.impurity}))),n=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),a=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(r.position&&2===r.position.length)if(n.has(r.position[0])&&a.has(r.position[1])||n.has(r.position[1])&&a.has(r.position[0])){var i=n.has(r.position[0])?0:1,o=r.position[i],u=r.position[(i+1)%2];r.position=[o,u];var s=t.find((function(t){return t.key===o})),c=s?s.domain.size:0;r.geomType=["interval","line","area"].filter((function(t){return c>=Ct[t][0]&&c<=Ct[t][1]})),"nominal"===s.semanticType&&(r.geomType=["interval"])}else r.geomType=["point","density"].filter((function(t){return e.length>=Ct[t][0]&&e.length<=Ct[t][1]}));return{schema:r,dataView:e}}var At=function(){function t(){M(this,t),this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count"],this.workerCollection=Ft.init()}return E(t,[{key:"setDataSource",value:function(t){return this.dataSource=t,this}},{key:"setDimensions",value:function(t){return this._dimensions=t,this._fields.forEach((function(e){"dimension"!==e.analyticType&&t.includes(e.key)&&(e.analyticType="dimension")})),this}},{key:"setMeasures",value:function(t){return this._measures=t,this._fields.forEach((function(e){"measure"!==e.analyticType&&t.includes(e.key)&&(e.analyticType="measure")})),this}},{key:"setFieldKeys",value:function(t){return this._fieldKeys=t,this}},{key:"buildfieldsSummary",value:function(){var t=this,e=_t(this._fieldKeys,this.dataSource),r=e.fields,n=e.dictonary;return this.dimensions&&this.measures&&r.forEach((function(e){t.dimensions.includes(e.key)?e.analyticType="dimension":e.analyticType="measure"})),this.fields=r,this.fieldDictonary=n,this}},{key:"buildGraph",value:function(){return this.dataGraph=new Tt(this.dataSource,this.dimensions,this.measures),this}},{key:"buildCube",value:function(){var t=this.measures,e=this.dataSource,r=this.dataGraph,n=this.dimensions,a=this.aggregators,i=new jt({dimensions:n,measures:t,dataSource:e,ops:a});return i.buildBaseCuboid(),r.DClusters.forEach((function(t){i.getCuboid(t)})),this.cube=i,this}},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:"buildSubspaces",value:function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,i=this.dataGraph.MClusters,o=t.getCombinationFromClusterGroups(i,n),u=[],s=v(a);try{for(s.s();!(e=s.n()).done;){var c,f=e.value,h=y(f,r.MIN,r.MAX),l=v(h);try{for(l.s();!(c=l.n()).done;){var p,d=c.value,m=v(o);try{for(m.s();!(p=m.n()).done;){var g=p.value;u.push({dimensions:d,measures:g})}}catch(w){m.e(w)}finally{m.f()}}}catch(w){l.e(w)}finally{l.f()}}}catch(w){s.e(w)}finally{s.f()}return this.subSpaces=u,this}},{key:"insightExtraction",value:function(){var e=ct(ut.a.mark((function e(){var r,n,a,i,o,u,s=this,c=arguments;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>0&&void 0!==c[0]?c[0]:this.subSpaces,n=this,a=[],i=v(r),e.prev=4,u=ut.a.mark((function e(){var r,i,u,c,f,h,l,v;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.value,i=r.dimensions,u=r.measures,c=n.cube,f=c.getCuboid(i),h=f.getState(u,u.map((function(){return"sum"}))),l=t.getSpaceImpurity(h,i,u),v=[],s.workerCollection.each((function(t,e){var r=function(){var t=ct(ut.a.mark((function t(e,r){var o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(h,i,u,n.fieldDictonary,n);case 3:null!==(o=t.sent)&&(o.type=r,o.impurity=l,a.push(o)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:u,aggData:h},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}();v.push(r(t,e))})),e.next=10,Promise.all(v);case 10:case"end":return e.stop()}}),e)})),i.s();case 7:if((o=i.n()).done){e.next=11;break}return e.delegateYield(u(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),i.e(e.t1);case 16:return e.prev=16,i.f(),e.finish(16);case 19:return n.insightSpaces=a,e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[4,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"setInsightScores",value:function(){return this.insightSpaces.forEach((function(t){t.score=t.impurity/t.significance})),this}},{key:"getFieldInfoInVis",value:function(t){var e=[],r=this.cube,n=this.fieldDictonary,a=t.dimensions,i=t.measures;a.forEach((function(t){var a=r.getCuboid([t]).getState(i,i.map((function(){return"sum"}))),o=0;i.forEach((function(t){var e=w(g(a.map((function(e){return e[t]})))),r=b(e);o+=r})),e.push(l(l({},n.get(t)),{},{impurity:o}))}));var o=r.getCuboid(a).getState(i,i.map((function(){return"sum"})));return i.forEach((function(t){var r=w(g(o.map((function(e){return e[t]})))),a=b(r);e.push(l(l({},n.get(t)),{},{impurity:a}))})),e}},{key:"specification",value:function(t){var e=t.dimensions,r=t.measures;return Rt(this.getFieldInfoInVis(t),this.cube.getCuboid(e).getState(r,r.map((function(){return"sum"}))))}},{key:"fields",get:function(){return this._fields},set:function(t){this._fields=t,this._dimensions=t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key})),this._measures=t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))}},{key:"dimensions",get:function(){return this._dimensions}},{key:"measures",get:function(){return this._measures}}],[{key:"getCombinationFromClusterGroups",value:function(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i=y(r.value,e.MIN,e.MAX);n.push.apply(n,f(i))}}catch(o){a.e(o)}finally{a.f()}return n}},{key:"getSpaceImpurity",value:function(t,e,r){var n,a=0,i=v(r);try{var o=function(){var e=n.value,r=w(g(t.map((function(t){return t[e]})))),i=b(r);a+=i};for(i.s();!(n=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return a/=r.length}}]),t}();var Gt;self.addEventListener("message",(Gt=t=>{try{const{dataSource:e,dimensions:r,measures:n,operator:a,topKPercent:o=1}=t.data;let u=i.insightExtraction(e,r,n,a).map((t=>{let e=0;for(let r in t[1])e+=t[1][r];return{...t,score:e}}));u.sort(((t,e)=>t.score-e.score));let s=Math.round(o*u.length);self.postMessage({success:!0,data:u.slice(0,s).map((t=>({score:t.score,dimensions:t[0],measures:n.map((e=>({name:e,value:t[1][e]}))),correlationMatrix:t[2]})))})}catch(e){self.postMessage({success:!1,message:e.toString()})}},function(t){var e=(new Date).getTime();try{Gt(t)}finally{var r=(new Date).getTime()-e;console.log("Task [".concat(Gt.name,"] cost ").concat(r," ms."))}}),!1)}]);
//# sourceMappingURL=combineFields.worker.34201631.worker.js.map