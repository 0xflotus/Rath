(self.webpackJsonpfrontend=self.webpackJsonpfrontend||[]).push([[0],{213:function(t,e,r){},273:function(t,e,r){},276:function(t,e){},287:function(t,e,r){},407:function(t,e,r){},408:function(t,e,r){},412:function(t,e){},413:function(t,e){},414:function(t,e){},415:function(t,e){},431:function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"csvLoader",(function(){return $})),r.d(n,"jsonLoader",(function(){return tt}));var a={};r.r(a),r.d(a,"transNumber",(function(){return et}));var o=r(0),i=r.n(o),u=r(68),s=r.n(u),c=(r(273),r(6)),l=r(13),f=r.n(l),h=r(4),d=r(50),v=r(9),p=r.n(v),m=r(16),g=r(15),y=r(46),b=r.n(y);function w(){return b()('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="./",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){"use strict";this&&this.__assign;Object.defineProperty(r,"__esModule",{value:!0});var n=e(4),a=e(7),o=e(3),i={sum:o.sum_unsafe,mean:o.mean,count:o.count};function u(t){var r=t.type,e=t.aggFunc,a=void 0===e?o.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,s=void 0===f?[]:f,l=t.measures,h=void 0===l?[]:l;switch(r){case"period":return new n.periodCube({aggFunc:a,factTable:u,dimensions:s,measures:h});case"moment":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:s,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,s=t.dataSource,l=u({type:"moment",aggFunc:i[f]||o.count,dimensions:r,measures:e,factTable:s}),h=a.tree2Table({dimensions:r,measures:e,cube:l});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,a=1;a<t.length;a++)r=e+t[a],Math.abs(e)>=Math.abs(t[a])?n+=e-r+t[a]:n+=t[a]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function n(t,r){var n,a,o=e(t),i=0;if(2===r)for(a=0;a<t.length;a++)i+=(n=t[a]-o)*n;else for(a=0;a<t.length;a++)i+=Math.pow(t[a]-o,r);return i}function a(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function o(t){if(1===t.length)return 0;var r=a(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,a=1,o=1;o<t.length+1;o++)t[o]!==r?(a>n&&(n=a,e=r),a=1,r=t[o]):a++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function s(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function l(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function c(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var a=n-e+1,o=r-e+1,i=Math.log(a),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(a-u)/a);o-a/2<0&&(f*=-1),c(t,r,Math.max(e,Math.floor(r-o*u/a+f)),Math.min(n,Math.floor(r+(a-o)*u/a+f)))}var s=t[r],l=e,h=n;for(v(t,e,r),t[n]>s&&v(t,e,n);l<h;){for(v(t,l,h),l++,h--;t[l]<s;)l++;for(;t[h]>s;)h--}t[e]===s?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(p);for(var a=[0,e.length-1];a.length;){var o=Math.ceil(a.pop()),i=Math.floor(a.pop());if(!(o-i<=1)){var u=Math.floor((i+o)/2);d(t,e[u],Math.floor(e[i]),Math.ceil(e[o])),a.push(i,u,u,o)}}}(e,r);for(var n=[],a=0;a<r.length;a++)n[a]=h(e,r[a]);return n}return d(e,m(e.length,r),0,e.length-1),h(e,r)}function d(t,r,e,n){r%1==0?c(t,r,e,n):(c(t,r=Math.floor(r),e,n),c(t,r+1,r+1,n))}function p(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r<=t[e=n+a>>>1]?a=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r>=t[e=n+a>>>1]?n=-~e:a=e;return n}(t,r);if(n===e)return e/t.length;var a=n-e+1;return a*(n+e)/2/a/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if("number"==typeof r&&"number"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function x(t,r){r=r||Math.random;for(var e,n,a=t.length;a>0;)n=Math.floor(r()*a--),e=t[a],t[a]=t[n],t[n]=e;return t}function E(t,r){return x(t.slice(),r)}function S(t,r,e){return E(t,e).slice(0,r)}function _(t,r){for(var e=[],n=0;n<t;n++){for(var a=[],o=0;o<r;o++)a.push(0);e.push(a)}return e}function q(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function T(t,r,e,n){var a;if(t>0){var o=(e[r]-e[t-1])/(r-t+1);a=n[r]-n[t-1]-(r-t+1)*o*o}else a=n[r]-e[r]*e[r]/(r+1);return a<0?0:a}function O(t,r,e,n,a,o,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],a[e][u]=u;var f=e;t>e&&(f=Math.max(f,a[e][t-1]||0)),f=Math.max(f,a[e-1][u]||0);var s,l,h,c=u-1;r<n[0].length-1&&(c=Math.min(c,a[e][r+1]||0));for(var v=c;v>=f&&!((s=T(v,u,o,i))+n[e-1][f-1]>=n[e][u]);--v)(l=T(f,u,o,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=l,a[e][u]=f),f++,(h=s+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,a[e][u]=v);O(t,u-1,e,n,a,o,i),O(u+1,r,e,n,a,o,i)}}function D(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=e(t),a=e(r),o=0,i=0;i<t.length;i++)o+=(t[i]-n)*(r[i]-a);return o/(t.length-1)}function j(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function k(t){var r=j(t);return Math.sqrt(r)}function F(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return l(t)/t.length}function N(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var a=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+"_"+a]=(this.data[r][n][a]||0)/this.totalCount:e[r][n+"_"+a]=0}var o={};for(r in e)for(var i in o[r]=0,e[r])o[r]+=e[r][i];return o};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if("number"==typeof e&&e!==r){for(var n=r-e,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),B={gaussian:function(t){return Math.exp(-.5*t*t)/V}},U={nrd:function(t){var r=k(t),e=w(t);return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function X(t,r,e){var n,a;if(void 0===r)n=B.gaussian;else if("string"==typeof r){if(!B[r])throw new Error(\'Unknown kernel "\'+r+\'"\');n=B[r]}else n=r;if(void 0===e)a=U.nrd(t);else if("string"==typeof e){if(!U[e])throw new Error(\'Unknown bandwidth method "\'+e+\'"\');a=U[e](t)}else a=e;return function(r){var e=0,o=0;for(e=0;e<t.length;e++)o+=n((r-t[e])/a);return o/a/t.length}}var K=Math.sqrt(2*Math.PI);function W(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/K*Math.exp(-t*t/2)))/1e4}for(var Y=[],H=0;H<=3.09;H+=.01)Y.push(W(H));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var a=t[n]-r[n];e+=a*a}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,a=0;a<r.length;a++){var o=Z(t,r[a]);o<e&&(e=o,n=a)}return n}))}function rt(t,r,e){for(var n=t[0].length,a=_(e,n),o=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],s=r[u],l=a[s],h=0;h<n;h++)l[h]+=f[h];o[s]+=1}for(var c=0;c<e;c++){if(0===o[c])throw new Error("Centroid "+c+" has no friends");for(var v=a[c],g=0;g<n;g++)v[g]/=o[c]}return a}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error("must have exactly as many labels as points");for(var e=function(t){for(var r=1+s(t),e=Array(r),n=0;n<t.length;n++){var a=t[n];void 0===e[a]&&(e[a]=[]),e[a].push(n)}return e}(r),n=function(t){for(var r=t.length,e=_(r,r),n=0;n<r;n++)for(var a=0;a<n;a++)e[n][a]=Z(t[n],t[a]),e[a][n]=e[n][a];return e}(t),a=[],o=0;o<t.length;o++){var i=0;if(e[r[o]].length>1){var u=ot(o,e[r[o]],n),f=at(o,r,e,n);i=(f-u)/Math.max(u,f)}a.push(i)}return a}function at(t,r,e,n){for(var a=r[t],o=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==a){var u=ot(t,e[i],n);u<o&&(o=u)}return o}function ot(t,r,e){for(var n=0,a=0;a<r.length;a++)n+=e[t][r[a]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,a=[],o=1;do{a[e]=o*Math.pow(r,e)*Math.pow(1-r,t-e),n+=a[e],o=o*(t-++e+1)/e}while(n<.9999);return a}},t.bisect=function(t,r,e,n,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<n;o++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<a)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var a=0,o=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var s=0;s<i.length;s++)void 0===i[s]&&(i[s]=0);for(var l in o)l in i&&(u[+l]=o[l]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var c=0;c<i.length;c++)a+=Math.pow(i[c]-u[c],2)/u[c];var v=i.length-1-1;return R[v][n]<a},t.chunk=function(t,r){var e=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var e=u(t);if(1===q(e))return[e];var n=_(r,e.length),a=_(r,e.length);!function(t,r,e){for(var n=r[0].length,a=t[Math.floor(n/2)],o=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-a,0===u?(o.push(f),i.push(f*f)):(o.push(o[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=T(0,u,o,i),e[0][u]=0;for(var s=1;s<r.length;++s)O(s<r.length-1?s:n-1,n-1,s,r,e,o,i)}(e,n,a);for(var o=[],i=a[0].length-1,f=a.length-1;f>=0;f--){var s=a[f][i];o[f]=e.slice(s,i+1),f>0&&(i=s-1)}return o},t.combinations=function t(r,e){var n,a,o,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(o=t(r.slice(n+1,r.length),e-1),a=0;a<o.length;a++)(i=o[a]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],a=0;a<r.length;a++)if(1===e)n.push([r[a]]);else for(var o=t(r.slice(a,r.length),e-1),i=0;i<o.length;i++)n.push([r[a]].concat(o[i]));return n},t.combineMeans=F,t.combineVariances=function(t,r,e,n,a,o){var i=F(r,e,a,o);return(e*(t+Math.pow(r-i,2))+o*(n+Math.pow(a-i,2)))/(e+o)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),Y.length-1);return t>=0?Y[e]:+(1-Y[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=s(t),a=[e],o=(n-e)/r,i=1;i<r;i++)a.push(a[0]+o*i);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,a=S(t,r,e),o=null,i=Number.MAX_VALUE;0!==i;)n=a,i=et(a=rt(t,o=tt(t,a),r),n);return{labels:o,centroids:a}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var a,o,i,u=0,f=0,s=0,l=0,h=0;h<n;h++)u+=o=(a=t[h])[0],f+=i=a[1],s+=o*o,l+=o*i;e=f/n-(r=(n*l-u*f)/(n*s-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=s,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,a=0;a<t.length;a++){var o=e.get(t[a]);void 0===o?o=1:o++,o>n&&(r=t[a],n=o),e.set(t[a],o)}if(0===n)throw new Error("mode requires at last one data point");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,a,o){if(void 0===a&&(a=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var i=e(t)-e(r),u=new Array(a),f=t.concat(r),s=Math.floor(f.length/2),l=0;l<a;l++){x(f,o);var h=f.slice(0,s),c=f.slice(s,f.length),v=e(h)-e(c);u[l]=v}var g=0;if("two_side"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(i)&&(g+=1);else if("greater"===n)for(var p=0;p<=a;p++)u[p]>=i&&(g+=1);else for(var m=0;m<=a;m++)u[m]<=i&&(g+=1);return g/a},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var a=0;a<t.length;)if(r[a]<a){var o=0;a%2!=0&&(o=r[a]);var i=t[o];t[o]=t[a],t[a]=i,e.push(t.slice()),r[a]++,a=0}else r[a]=0,a++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],a=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/a,e+=n[r],a*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=c,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var a=e/t.length,o=0,i=0;i<t.length;i++)o+=Math.pow(a-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/o},t.relativeError=it,t.rms=N,t.rootMeanSquare=N,t.sample=S,t.sampleCorrelation=function(t,r){return D(t,r)/k(t)/k(r)},t.sampleCovariance=D,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,a=e(t),o=0,i=0,u=0;u<r;u++)o+=(n=t[u]-a)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(o*o)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,n=e(t),a=0,o=0,i=0;i<t.length;i++)a+=(r=t[i]-n)*r,o+=r*r*r;var u=t.length-1,f=Math.sqrt(a/u),s=t.length;return s*o/((s-1)*(s-2)*Math.pow(f,3))},t.sampleStandardDeviation=k,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,a=[],o=0;o<r;o++){var i=Math.floor(e()*n);a.push(t[i])}return a},t.shuffle=E,t.shuffleInPlace=x,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return s(nt(t,r))},t.standardDeviation=o,t.standardNormalTable=Y,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=l,t.tTest=function(t,r){return(e(t)-r)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var a=t.length,o=r.length;if(!a||!o)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),s=j(r);if("number"==typeof i&&"number"==typeof u&&"number"==typeof f&&"number"==typeof s){var l=((a-1)*f+(o-1)*s)/(a+o-2);return(i-u-n)/Math.sqrt(l*(1/a+1/o))}},t.uniqueCountSorted=q,t.variance=a,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=t[n][r]}))},a=0,o=t.length;a<o;a++)n(a);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,a=t.length;n<a;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(5);r.periodCube=n.default;var a=e(6);r.momentCube=a.default},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,a(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var u=i.value,f=void 0,s=u.rawData,l=s.length;for(f=0;f<l;f++)n.push(s[f])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var f=e.children.entries();try{for(var s=o(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[a])return r(v,a+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,a=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(a);var s=e.children.entries();try{for(var l=o(s),h=l.next();!h.done;h=l.next()){var c=n(h.value,2),v=c[0],g=c[1];if(v===t[i])return r(g,i+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(f=l.return)&&f.call(l)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,a(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var f=e.children.entries();try{for(var s=o(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[a])return r(v,a+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,a=r.aggFunc,i=r.measures;return function r(e,u){var f,s;if(u===t.length)return e.aggData(a,i);var l=e.children.entries();try{for(var h=o(l),c=h.next();!c.done;c=h.next()){var v=n(c.value,2),g=v[0],d=v[1];if(g===t[u])return r(d,u+1)}}catch(p){f={error:p}}finally{try{c&&!c.done&&(s=h.return)&&s.call(h)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,a=void 0===n?this.factTable:n,o=t.dimensions,i=void 0===o?this.dimensions:o,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||a!==this.factTable?(this.dimensions=i,this.factTable=a,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value,f=void 0,s=this.aggTree(u).rawData,l=s.length;for(f=0;f<l;f++)t.rawData.push(s[f])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var s,l,h;if(0!==e.children.size)try{for(var c=a(e.children.entries()),v=c.next();!v.done;v=c.next()){var g=o(v.value,2),d=g[0];t(g[1],n(n({},u),((h={})[r[f]]=d,h)),f+1)}}catch(m){s={error:m}}finally{try{v&&!v.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}else{var p=e._aggData;i.push(n(n({},u),p))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(k){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var a=r&&r.prototype instanceof p?r:p,o=Object.create(a.prototype),i=new O(n||[]);return o._invoke=function(t,r,e){var n=h;return function(a,o){if(n===v)throw new Error("Generator is already running");if(n===g){if("throw"===a)throw o;return j()}for(e.method=a,e.arg=o;;){var i=e.delegate;if(i){var u=_(i,e);if(u){if(u===d)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=g,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=v;var f=l(t,r,e);if("normal"===f.type){if(n=e.done?g:c,f.arg===d)continue;return{value:f.arg,done:e.done}}"throw"===f.type&&(n=g,e.method="throw",e.arg=f.arg)}}}(t,e,i),o}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(k){return{type:"throw",arg:k}}}t.wrap=s;var h="suspendedStart",c="suspendedYield",v="executing",g="completed",d={};function p(){}function m(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(D([])));M&&M!==e&&n.call(M,o)&&(w=M);var x=y.prototype=p.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function S(t,r){function e(a,o,i,u){var f=l(t[a],t,o);if("throw"!==f.type){var s=f.arg,h=s.value;return h&&"object"===typeof h&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,i,u)}),(function(t){e("throw",t,i,u)})):r.resolve(h).then((function(t){s.value=t,i(s)}),(function(t){return e("throw",t,i,u)}))}u(f.arg)}var a;this._invoke=function(t,n){function o(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return d}var a=l(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function q(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(q,this),this.reset(!0)}function D(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,m.displayName=f(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(S.prototype),S.prototype[i]=function(){return this},t.AsyncIterator=S,t.async=function(r,e,n,a,o){void 0===o&&(o=Promise);var i=new S(s(r,e,n,a),o);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(x),f(x,u,"Generator"),x[o]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=D,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return u.type="throw",u.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(f&&s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var a=n.arg;T(e)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){"use strict";e.r(r);var n={};e.r(n),e.d(n,"kruskal",(function(){return q})),e.d(n,"kruskalWithFullMST",(function(){return _}));var a={};function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){if(t){if("string"===typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function u(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(f){a=!0,o=f}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return e}}(t,r)||i(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=i(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,o=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw o}}}}e.r(a),e.d(a,"getEntropyMatrix",(function(){return k})),e.d(a,"getDashBoardSubspace",(function(){return F})),e.d(a,"getDashBoardView",(function(){return P})),e.d(a,"crammersV",(function(){return l}));var l=function(t,r,e){for(var n=new Set,a=new Set,o=new Map,i=t.length,f=0;f<i;f++){var l=t[f];n.add(l[r]),a.add(l[e]),o.has(l[r])||o.set(l[r],new Map);var h=o.get(l[r]);h.has(l[e])||h.set(l[e],0),h.set(l[e],h.get(l[e])+1)}var c=function(t,r,e){if("undefined"===typeof t||"undefined"===typeof r||"undefined"===typeof e)return 0;var n,a=new Map,o=new Map,i=0,f=s(r);try{for(f.s();!(n=f.n()).done;){var l=n.value;a.set(l,0)}}catch(N){f.e(N)}finally{f.f()}var h,c=s(e);try{for(c.s();!(h=c.n()).done;){var v=h.value;o.set(v,0)}}catch(N){c.e(N)}finally{c.f()}var g,d=s(t);try{for(d.s();!(g=d.n()).done;){var p,m=u(g.value,2),y=m[0],w=s(m[1]);try{for(w.s();!(p=w.n()).done;){var b=u(p.value,2),M=b[0],x=b[1];a.set(y,a.get(y)+x),o.set(M,o.get(M)+x),i+=x}}catch(N){w.e(N)}finally{w.f()}}}catch(N){d.e(N)}finally{d.f()}var E,S=0,_=s(t);try{for(_.s();!(E=_.n()).done;){var q,T=u(E.value,2),O=T[0],D=s(T[1]);try{for(D.s();!(q=D.n()).done;){var j=u(q.value,2),k=j[0],F=j[1],P=a.get(O)*o.get(k)/i;S+=Math.pow(F-P,2)/P}}catch(N){D.e(N)}finally{D.f()}}}catch(N){_.e(N)}finally{_.f()}return S}(o,n,a);return Math.sqrt(c/(t.length*Math.min(n.size-1,a.size-1)))},h=function(t,r,e){var n=c(t.map((function(t){return t[r]})))/t.length,a=c(t.map((function(t){return t[e]})))/t.length;return c(t.map((function(t){return(t[r]-n)*(t[e]-a)})))/Math.sqrt(c(t.map((function(t){return Math.pow(t[r]-n,2)})))*c(t.map((function(t){return Math.pow(t[e]-a,2)}))))};function c(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e];return r}function v(t){var r=Math.min.apply(Math,f(t));return t.map((function(t){return t-r+1}))}function g(t){var r,e=0,n=s(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a}}catch(o){n.e(o)}finally{n.f()}return t.map((function(t){return t/e}))}var d=function(t){var r,e=0,n=s(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a*Math.log2(a)}}catch(o){n.e(o)}finally{n.f()}return-e};var p=e(2);p.sum,p.max,p.mean,p.min;var m=.3,y=.5,w=.3;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function x(t,r,e){var n=M(t,r),a=M(t,e);t[n]=a,M(t,r),M(t,e)}function E(t,r,e){return t[e]===e?e:(t[e]=E(t,r,t[e]),r[e]=r[t[e]],t[e])}function S(t,r,e,n){var a=E(t,r,e),o=E(t,r,n),i=r[a],u=r[o];t[a]=o,r[a]=r[o]=i+u,E(t,r,e),E(t,r,n)}function _(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,h=s(n);try{for(h.s();!(a=h.n()).done;){var c=a.value;M(i,c[0][0])!==M(i,c[0][1])&&(x(i,c[0][0],c[0][1]),o.push([c[0],c[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var g=new Set(i);if(g.size<=r||c[1]<e?l=!0:u=f(i),1===g.size)break}}catch(d){h.e(d)}finally{h.f()}return{edgesInMST:o,groups:u}}var q=function(t){var r,e=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),o=void 0===a?4:a,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,a=t.map((function(t,r){return r})),o=t.map((function(){return 1})),i=s(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(E(a,o,u[0][0])!==E(a,o,u[0][1])){if(o[u[0][0]]+o[u[0][1]]>r)continue;S(a,o,u[0][0],u[0][1])}for(var f=0;f<a.length;f++)a[f]=E(a,o,f);if(1===new Set(a).size)break}}catch(c){i.e(c)}finally{i.f()}for(var l=new Map,h=0;h<a.length;h++)l.has(a[h])||l.set(a[h],[]),l.get(a[h]).push(h);return l}(e,o):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=t.map((function(t,r){return r})),i=s(n);try{for(i.s();!(a=i.n()).done;){var u=a.value;M(o,u[0][0])!==M(o,u[0][1])&&x(o,u[0][0],u[0][1]);for(var f=0;f<o.length;f++)o[f]=M(o,f);if(new Set(o).size<=r||u[1]<e)break}}catch(c){i.e(c)}finally{i.f()}for(var l=new Map,h=0;h<o.length;h++)l.has(o[h])||l.set(o[h],[]),l.get(o[h]).push(h);return l}(e,o,l);var h,c=[],v=s(r.values());try{for(v.s();!(h=v.n()).done;){var g=h.value;c.push(g.map((function(t){return n[t]})))}}catch(d){v.e(d)}finally{v.f()}return c};var T=e(1),O=e.n(T);e(0);var D;!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(D||(D={}));var j;!function(t){t.outlier="default_outlier",t.trend="default_trend"}(j||(j={}));function k(t,r,e,n){for(var a=[],o=0;o<t.length;o++){var i=t[o];a.push([]);var u,f=O()({dataSource:e,dimensions:i,measures:r,asFields:r,operator:n||"sum"}),l=s(r);try{var h=function(){var t=u.value,r=g(v(f.map((function(r){return r[t]})))),e=d(r);a[o].push(e)};for(l.s();!(u=l.n()).done;)h()}catch(c){l.e(c)}finally{l.f()}}return a}function F(t,r,e,a){for(var o=e.map((function(t){return e.map((function(t){return 0}))})),i=0;i<e.length;i++){o[i][i]=1;for(var u=i+1;u<e.length;u++){var c=h(t,e[i],e[u]);o[u][i]=o[i][u]=c}}for(var v=n.kruskal({matrix:o,measures:e,groupMaxSize:Math.round(e.length/6),threshold:w}),g=r.map((function(t){return r.map((function(t){return 0}))})),d=0;d<r.length;d++){g[d][d]=1;for(var p=d+1;p<r.length;p++)g[d][p]=g[p][d]=l(t,r[d],r[p])}var m,y=new Set,b=s(a);try{for(b.s();!(m=b.n()).done;){var M,x=s(m.value[0]);try{for(x.s();!(M=x.n()).done;){var E=M.value;y.add(E)}}catch(D){x.e(D)}finally{x.f()}}}catch(D){b.e(D)}finally{b.f()}var S,_=f(y),q=[],T=s(v);try{var O=function(){for(var n=S.value,a=n.map((function(t){return n.map((function(t){return 0}))})),i=0;i<n.length;i++)for(var u=e.indexOf(n[i]),f=0;f<n.length;f++){var s=e.indexOf(n[f]);a[i][f]=o[u][s]}for(var l=_.map((function(t){return _.map((function(t){return 0}))})),h=0;h<_.length;h++)for(var c=r.indexOf(_[h]),v=0;v<_.length;v++){var d=r.indexOf(_[v]);l[h][v]=g[c][d]}q.push({dimensions:_,measures:n,correlationMatrix:a,dimensionCorrelationMatrix:l,entropyMatrix:k(_.map((function(t){return[t]})),n,t)})};for(T.s();!(S=T.n()).done;)O()}catch(D){T.e(D)}finally{T.f()}return q}function P(t,r){var e,a=t.dimensions,o=t.measures,i=t.entropyMatrix,u=t.dimensionCorrelationMatrix,f=[],l=s(n.kruskal({matrix:t.correlationMatrix,measures:o,groupMaxSize:Math.round(o.length/3),threshold:y}));try{var h=function(){var t=e.value,r=t.map((function(t){return o.indexOf(t)})),n=a.map((function(t,e){var n,a=0,o=s(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;a+=i[e][u]}}catch(f){o.e(f)}finally{o.f()}return a})),u=a[N(n)];f.push({type:"target",dimensions:[u],measures:t})};for(l.s();!(e=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}for(var c=n.kruskal({matrix:u,measures:a,groupMaxSize:2,limitSize:!0,threshold:m}),v=k(c,o,r),g=0;g<c.length;g++){var d=o[N(v[g])];f.push({type:"feature",dimensions:c[g],measures:[d]})}return f}function N(t){var r=0,e=t.length,n=1/0,a=-1;for(r=0;r<e;r++)t[r]<n&&(n=t[r],a=r);return a}var L;self.addEventListener("message",(L=t=>{const{dataSource:r,dimensions:e,measures:n,subspaces:o}=t.data;try{const t=function(t){let r=[];for(let e of t){let t={};e.measures.forEach((r=>{t[r.name]=r.value})),r.push([e.dimensions,t,e.correlationMatrix])}return r}(o),i=a.getDashBoardSubspace(r,e,n,t),u=[];for(let e=0;e<i.length;e++){const t=a.getDashBoardView(i[e],r);t.sort(((t,r)=>"feature"===t.type&&"target"===r.type?1:t.measures.length-r.measures.length)),u.push(t)}self.postMessage({success:!0,data:u})}catch(i){self.postMessage({success:!1,message:i})}},function(t){var r=(new Date).getTime();try{L(t)}finally{var e=(new Date).getTime()-r;console.log("Task [".concat(L.name,"] cost ").concat(e," ms."))}}),!1)}]);\n//# sourceMappingURL=dashboard.worker.d28c7181.worker.js.map',"Worker",void 0,r.p+"static/js/dashboard.worker.d28c7181.worker.js")}function M(){return b()('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="./",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){"use strict";this&&this.__assign;Object.defineProperty(r,"__esModule",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,s=void 0===f?[]:f,l=t.measures,h=void 0===l?[]:l;switch(r){case"period":return new n.periodCube({aggFunc:o,factTable:u,dimensions:s,measures:h});case"moment":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:s,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,s=t.dataSource,l=u({type:"moment",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:s}),h=o.tree2Table({dimensions:r,measures:e,cube:l});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function s(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function l(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function c(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),c(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var s=t[r],l=e,h=n;for(v(t,e,r),t[n]>s&&v(t,e,n);l<h;){for(v(t,l,h),l++,h--;t[l]<s;)l++;for(;t[h]>s;)h--}t[e]===s?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);p(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=h(e,r[o]);return n}return p(e,m(e.length,r),0,e.length-1),h(e,r)}function p(t,r,e,n){r%1==0?c(t,r,e,n):(c(t,r=Math.floor(r),e,n),c(t,r+1,r+1,n))}function d(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if("number"==typeof r&&"number"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function x(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function E(t,r){return x(t.slice(),r)}function _(t,r,e){return E(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function T(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function q(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function D(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var s,l,h,c=u-1;r<n[0].length-1&&(c=Math.min(c,o[e][r+1]||0));for(var v=c;v>=f&&!((s=q(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(l=q(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=l,o[e][u]=f),f++,(h=s+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,o[e][u]=v);D(t,u-1,e,n,o,a,i),D(u+1,r,e,n,o,a,i)}}function O(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function j(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function F(t){var r=j(t);return Math.sqrt(r)}function N(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return l(t)/t.length}function k(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+"_"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+"_"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if("number"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},W={nrd:function(t){var r=F(t),e=w(t);return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function X(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if("string"==typeof r){if(!V[r])throw new Error(\'Unknown kernel "\'+r+\'"\');n=V[r]}else n=r;if(void 0===e)o=W.nrd(t);else if("string"==typeof e){if(!W[e])throw new Error(\'Unknown bandwidth method "\'+e+\'"\');o=W[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var B=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/B*Math.exp(-t*t/2)))/1e4}for(var Y=[],H=0;H<=3.09;H+=.01)Y.push(K(H));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],s=r[u],l=o[s],h=0;h<n;h++)l[h]+=f[h];a[s]+=1}for(var c=0;c<e;c++){if(0===a[c])throw new Error("Centroid "+c+" has no friends");for(var v=o[c],g=0;g<n;g++)v[g]/=a[c]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error("must have exactly as many labels as points");for(var e=function(t){for(var r=1+s(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if("function"!=typeof t)throw new TypeError("func must be a function");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var s=0;s<i.length;s++)void 0===i[s]&&(i[s]=0);for(var l in a)l in i&&(u[+l]=a[l]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var c=0;c<i.length;c++)o+=Math.pow(i[c]-u[c],2)/u[c];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var e=u(t);if(1===T(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=q(0,u,a,i),e[0][u]=0;for(var s=1;s<r.length;++s)D(s<r.length-1?s:n-1,n-1,s,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var s=o[f][i];a[f]=e.slice(s,i+1),f>0&&(i=s-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=N,t.combineVariances=function(t,r,e,n,o,a){var i=N(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),Y.length-1);return t>=0?Y[e]:+(1-Y[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=s(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,s=0,l=0,h=0;h<n;h++)u+=a=(o=t[h])[0],f+=i=o[1],s+=a*a,l+=a*i;e=f/n-(r=(n*l-u*f)/(n*s-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=s,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error("mode requires at last one data point");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),s=Math.floor(f.length/2),l=0;l<o;l++){x(f,a);var h=f.slice(0,s),c=f.slice(s,f.length),v=e(h)-e(c);u[l]=v}var g=0;if("two_side"===n)for(var p=0;p<=o;p++)Math.abs(u[p])>=Math.abs(i)&&(g+=1);else if("greater"===n)for(var d=0;d<=o;d++)u[d]>=i&&(g+=1);else for(var m=0;m<=o;m++)u[m]<=i&&(g+=1);return g/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=c,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return O(t,r)/F(t)/F(r)},t.sampleCovariance=O,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),s=t.length;return s*a/((s-1)*(s-2)*Math.pow(f,3))},t.sampleStandardDeviation=F,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=E,t.shuffleInPlace=x,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return s(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=Y,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=l,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),s=j(r);if("number"==typeof i&&"number"==typeof u&&"number"==typeof f&&"number"==typeof s){var l=((o-1)*f+(a-1)*s)/(o+a-2);return(i-u-n)/Math.sqrt(l*(1/o+1/a))}},t.uniqueCountSorted=T,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,s=u.rawData,l=s.length;for(f=0;f<l;f++)n.push(s[f])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var s=a(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var s=e.children.entries();try{for(var l=a(s),h=l.next();!h.done;h=l.next()){var c=n(h.value,2),v=c[0],g=c[1];if(v===t[i])return r(g,i+1)}}catch(p){u={error:p}}finally{try{h&&!h.done&&(f=l.return)&&f.call(l)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var s=a(f),l=s.next();!l.done;l=s.next()){var h=n(l.value,2),c=h[0],v=h[1];if(c===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,s;if(u===t.length)return e.aggData(o,i);var l=e.children.entries();try{for(var h=a(l),c=h.next();!c.done;c=h.next()){var v=n(c.value,2),g=v[0],p=v[1];if(g===t[u])return r(p,u+1)}}catch(d){f={error:d}}finally{try{c&&!c.done&&(s=h.return)&&s.call(h)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,s=this.aggTree(u).rawData,l=s.length;for(f=0;f<l;f++)t.rawData.push(s[f])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var s,l,h;if(0!==e.children.size)try{for(var c=o(e.children.entries()),v=c.next();!v.done;v=c.next()){var g=a(v.value,2),p=g[0];t(g[1],n(n({},u),((h={})[r[f]]=p,h)),f+1)}}catch(m){s={error:m}}finally{try{v&&!v.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(F){f=function(t,r,e){return t[r]=e}}function s(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new D(n||[]);return a._invoke=function(t,r,e){var n=h;return function(o,a){if(n===v)throw new Error("Generator is already running");if(n===g){if("throw"===o)throw a;return j()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=g,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=v;var f=l(t,r,e);if("normal"===f.type){if(n=e.done?g:c,f.arg===p)continue;return{value:f.arg,done:e.done}}"throw"===f.type&&(n=g,e.method="throw",e.arg=f.arg)}}}(t,e,i),a}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(F){return{type:"throw",arg:F}}}t.wrap=s;var h="suspendedStart",c="suspendedYield",v="executing",g="completed",p={};function d(){}function m(){}function y(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(O([])));M&&M!==e&&n.call(M,a)&&(w=M);var x=y.prototype=d.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=l(t[o],t,a);if("throw"!==f.type){var s=f.arg,h=s.value;return h&&"object"===typeof h&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,i,u)}),(function(t){e("throw",t,i,u)})):r.resolve(h).then((function(t){s.value=t,i(s)}),(function(t){return e("throw",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function q(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function O(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return m.prototype=x.constructor=y,y.constructor=m,m.displayName=f(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,f(t,u,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(s(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(x),f(x,u,"Generator"),x[a]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(q),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(f&&s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),q(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;q(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){"use strict";e.r(r);var n={};function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){if(t){if("string"===typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,r):void 0}}function i(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=a(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){f=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(f)throw i}}}}e.r(n),e.d(n,"kruskal",(function(){return p})),e.d(n,"kruskalWithFullMST",(function(){return g}));var f=e(2);f.sum,f.max,f.mean,f.min;function s(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function l(t,r){return t[r]===r?r:t[r]=l(t,t[r])}function h(t,r,e){var n=l(t,r),o=l(t,e);t[n]=o,l(t,r),l(t,e)}function c(t,r,e){return t[e]===e?e:(t[e]=c(t,r,t[e]),r[e]=r[t[e]],t[e])}function v(t,r,e,n){var o=c(t,r,e),a=c(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,c(t,r,e),c(t,r,n)}function g(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=s(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],f=t.map((function(t,r){return r})),c=i(f),v=!1,g=u(n);try{for(g.s();!(o=g.n()).done;){var p=o.value;l(f,p[0][0])!==l(f,p[0][1])&&(h(f,p[0][0],p[0][1]),a.push([p[0],p[1],v]));for(var d=0;d<f.length;d++)f[d]=l(f,d);var m=new Set(f);if(m.size<=r||p[1]<e?v=!0:c=i(f),1===m.size)break}}catch(y){g.e(y)}finally{g.f()}return{edgesInMST:a,groups:c}}var p=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,f=void 0!==i&&i,g=t.threshold,p=void 0===g?0:g;r=f?function(t,r){var e=s(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=u(e);try{for(i.s();!(n=i.n()).done;){var f=n.value;if(c(o,a,f[0][0])!==c(o,a,f[0][1])){if(a[f[0][0]]+a[f[0][1]]>r)continue;v(o,a,f[0][0],f[0][1])}for(var l=0;l<o.length;l++)o[l]=c(o,a,l);if(1===new Set(o).size)break}}catch(p){i.e(p)}finally{i.f()}for(var h=new Map,g=0;g<o.length;g++)h.has(o[g])||h.set(o[g],[]),h.get(o[g]).push(g);return h}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=s(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=u(n);try{for(i.s();!(o=i.n()).done;){var f=o.value;l(a,f[0][0])!==l(a,f[0][1])&&h(a,f[0][0],f[0][1]);for(var c=0;c<a.length;c++)a[c]=l(a,c);if(new Set(a).size<=r||f[1]<e)break}}catch(p){i.e(p)}finally{i.f()}for(var v=new Map,g=0;g<a.length;g++)v.has(a[g])||v.set(a[g],[]),v.get(a[g]).push(g);return v}(e,a,p);var d,m=[],y=u(r.values());try{for(y.s();!(d=y.n()).done;){var w=d.value;m.push(w.map((function(t){return n[t]})))}}catch(b){y.e(b)}finally{y.f()}return m};e(1);e(0);var d;!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(d||(d={}));var m;!function(t){t.outlier="default_outlier",t.trend="default_trend"}(m||(m={}));function y(t){let r=0,e=t.length;for(let n=0;n<e;n++)r+=t[n];return r}var w;self.addEventListener("message",(w=t=>{try{const{spaces:r,maxGroupNumber:e}=t.data;let o=[];for(let t of r){const{edgesInMST:r,groups:a}=n.kruskalWithFullMST(t.matrix,e,.5);let i=new Map;for(let e=0;e<a.length;e++)i.has(a[e])||i.set(a[e],[]),i.get(a[e]).push(t.measures[e]);for(let e of i.values())o.push({dimensions:t.dimensions,measures:e.map((t=>t.name)),score:y(e.map((t=>t.value)))})}o.sort(((t,r)=>t.score-r.score)),self.postMessage({success:!0,data:o})}catch(r){self.postMessage({success:!1,message:r.toString()})}},function(t){var r=(new Date).getTime();try{w(t)}finally{var e=(new Date).getTime()-r;console.log("Task [".concat(w.name,"] cost ").concat(e," ms."))}}),!1)}]);\n//# sourceMappingURL=cluster.worker.57bceacd.worker.js.map',"Worker",void 0,r.p+"static/js/cluster.worker.57bceacd.worker.js")}function E(){return b()('!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./",r(r.s=9)}([function(t,e,r){t.exports=r(8)},function(t,e,r){"use strict";this&&this.__assign;Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),a=r(7),i=r(3),o={sum:i.sum_unsafe,mean:i.mean,count:i.count};function u(t){var e=t.type,r=t.aggFunc,a=void 0===r?i.count:r,o=t.factTable,u=void 0===o?[]:o,s=t.dimensions,c=void 0===s?[]:s,f=t.measures,h=void 0===f?[]:f;switch(e){case"period":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:h});case"moment":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:h})}}e.createCube=u,e.default=function(t){var e=t.dimensions,r=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,f=u({type:"moment",aggFunc:o[s]||i.count,dimensions:e,measures:r,factTable:c}),h=a.tree2Table({dimensions:e,measures:r,cube:f});return h.forEach((function(t){n.forEach((function(e,n){t[e]=t[r[n]]}))})),h},function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(3))},function(t,e,r){!function(t){"use strict";function e(t){if(0===t.length)return 0;for(var e,r=t[0],n=0,a=1;a<t.length;a++)e=r+t[a],Math.abs(r)>=Math.abs(t[a])?n+=r-e+t[a]:n+=t[a]-e+r,r=e;return r+n}function r(t){if(0===t.length)throw new Error("mean requires at least one data point");return e(t)/t.length}function n(t,e){var n,a,i=r(t),o=0;if(2===e)for(a=0;a<t.length;a++)o+=(n=t[a]-i)*n;else for(a=0;a<t.length;a++)o+=Math.pow(t[a]-i,e);return o}function a(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function i(t){if(1===t.length)return 0;var e=a(t);return Math.sqrt(e)}function o(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var e=t[0],r=NaN,n=0,a=1,i=1;i<t.length+1;i++)t[i]!==e?(a>n&&(n=a,r=e),a=1,e=t[i]):a++;return r}function u(t){return t.slice().sort((function(t,e){return t-e}))}function s(t){if(0===t.length)throw new Error("min requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]<e&&(e=t[r]);return e}function c(t){if(0===t.length)throw new Error("max requires at least one data point");for(var e=t[0],r=1;r<t.length;r++)t[r]>e&&(e=t[r]);return e}function f(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}function h(t,e){var r=t.length*e;if(0===t.length)throw new Error("quantile requires at least one data point.");if(e<0||e>1)throw new Error("quantiles must be between 0 and 1");return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function l(t,e,r,n){for(r=r||0,n=n||t.length-1;n>r;){if(n-r>600){var a=n-r+1,i=e-r+1,o=Math.log(a),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(a-u)/a);i-a/2<0&&(s*=-1),l(t,e,Math.max(r,Math.floor(e-i*u/a+s)),Math.min(n,Math.floor(e+(a-i)*u/a+s)))}var c=t[e],f=r,h=n;for(v(t,r,e),t[n]>c&&v(t,r,n);f<h;){for(v(t,f,h),f++,h--;t[f]<c;)f++;for(;t[h]>c;)h--}t[r]===c?v(t,r,h):v(t,++h,n),h<=e&&(r=h+1),e<=h&&(n=h-1)}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function p(t,e){var r=t.slice();if(Array.isArray(e)){!function(t,e){for(var r=[0],n=0;n<e.length;n++)r.push(g(t.length,e[n]));r.push(t.length-1),r.sort(m);for(var a=[0,r.length-1];a.length;){var i=Math.ceil(a.pop()),o=Math.floor(a.pop());if(!(i-o<=1)){var u=Math.floor((o+i)/2);d(t,r[u],Math.floor(r[o]),Math.ceil(r[i])),a.push(o,u,u,i)}}}(r,e);for(var n=[],a=0;a<e.length;a++)n[a]=h(r,e[a]);return n}return d(r,g(r.length,e),0,r.length-1),h(r,e)}function d(t,e,r,n){e%1==0?l(t,e,r,n):(l(t,e=Math.floor(e),r,n),l(t,e+1,e+1,n))}function m(t,e){return t-e}function g(t,e){var r=t*e;return 1===e?t-1:0===e?0:r%1!=0?Math.ceil(r)-1:t%2==0?r-.5:r}function y(t,e){if(e<t[0])return 0;if(e>t[t.length-1])return 1;var r=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e<=t[r=n+a>>>1]?a=r:n=-~r;return n}(t,e);if(t[r]!==e)return r/t.length;r++;var n=function(t,e){for(var r=0,n=0,a=t.length;n<a;)e>=t[r=n+a>>>1]?n=-~r:a=r;return n}(t,e);if(n===r)return r/t.length;var a=n-r+1;return a*(n+r)/2/a/t.length}function w(t){var e=p(t,.75),r=p(t,.25);if("number"==typeof e&&"number"==typeof r)return e-r}function b(t){return+p(t,.5)}function M(t){for(var e=b(t),r=[],n=0;n<t.length;n++)r.push(Math.abs(t[n]-e));return b(r)}function S(t,e){e=e||Math.random;for(var r,n,a=t.length;a>0;)n=Math.floor(e()*a--),r=t[a],t[a]=t[n],t[n]=r;return t}function E(t,e){return S(t.slice(),e)}function k(t,e,r){return E(t,r).slice(0,e)}function x(t,e){for(var r=[],n=0;n<t;n++){for(var a=[],i=0;i<e;i++)a.push(0);r.push(a)}return r}function _(t){for(var e,r=0,n=0;n<t.length;n++)0!==n&&t[n]===e||(e=t[n],r++);return r}function D(t,e,r,n){var a;if(t>0){var i=(r[e]-r[t-1])/(e-t+1);a=n[e]-n[t-1]-(e-t+1)*i*i}else a=n[e]-r[e]*r[e]/(e+1);return a<0?0:a}function T(t,e,r,n,a,i,o){if(!(t>e)){var u=Math.floor((t+e)/2);n[r][u]=n[r-1][u-1],a[r][u]=u;var s=r;t>r&&(s=Math.max(s,a[r][t-1]||0)),s=Math.max(s,a[r-1][u]||0);var c,f,h,l=u-1;e<n[0].length-1&&(l=Math.min(l,a[r][e+1]||0));for(var v=l;v>=s&&!((c=D(v,u,i,o))+n[r-1][s-1]>=n[r][u]);--v)(f=D(s,u,i,o)+n[r-1][s-1])<n[r][u]&&(n[r][u]=f,a[r][u]=s),s++,(h=c+n[r-1][v-1])<n[r][u]&&(n[r][u]=h,a[r][u]=v);T(t,u-1,r,n,a,i,o),T(u+1,e,r,n,a,i,o)}}function O(t,e){if(t.length!==e.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=r(t),a=r(e),i=0,o=0;o<t.length;o++)i+=(t[o]-n)*(e[o]-a);return i/(t.length-1)}function I(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function z(t){var e=I(t);return Math.sqrt(e)}function N(t,e,r,n){return(t*e+r*n)/(e+n)}function j(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return f(t)/t.length}function P(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var e=0,r=0;r<t.length;r++)e+=Math.pow(t[r],2);return Math.sqrt(e/t.length)}var q=function(){this.totalCount=0,this.data={}};q.prototype.train=function(t,e){for(var r in this.data[e]||(this.data[e]={}),t){var n=t[r];void 0===this.data[e][r]&&(this.data[e][r]={}),void 0===this.data[e][r][n]&&(this.data[e][r][n]=0),this.data[e][r][n]++}this.totalCount++},q.prototype.score=function(t){var e,r={};for(var n in t){var a=t[n];for(e in this.data)r[e]={},this.data[e][n]?r[e][n+"_"+a]=(this.data[e][n][a]||0)/this.totalCount:r[e][n+"_"+a]=0}var i={};for(e in r)for(var o in i[e]=0,r[e])i[e]+=r[e][o];return i};var F=function(){this.weights=[],this.bias=0};F.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,r=0;r<this.weights.length;r++)e+=this.weights[r]*t[r];return(e+=this.bias)>0?1:0},F.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var r=this.predict(t);if("number"==typeof r&&r!==e){for(var n=e-r,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var C=1e-4;function L(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var e=1,r=2;r<=t;r++)e*=r;return e}var R=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],A=Math.log(Math.sqrt(2*Math.PI)),G={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),U={gaussian:function(t){return Math.exp(-.5*t*t)/V}},W={nrd:function(t){var e=z(t),r=w(t);return"number"==typeof r&&(e=Math.min(e,r/1.34)),1.06*e*Math.pow(t.length,-.2)}};function X(t,e,r){var n,a;if(void 0===e)n=U.gaussian;else if("string"==typeof e){if(!U[e])throw new Error(\'Unknown kernel "\'+e+\'"\');n=U[e]}else n=e;if(void 0===r)a=W.nrd(t);else if("string"==typeof r){if(!W[r])throw new Error(\'Unknown bandwidth method "\'+r+\'"\');a=W[r](t)}else a=r;return function(e){var r=0,i=0;for(r=0;r<t.length;r++)i+=n((e-t[r])/a);return i/a/t.length}}var H=Math.sqrt(2*Math.PI);function K(t){for(var e=t,r=t,n=1;n<15;n++)e+=r*=t*t/(2*n+1);return Math.round(1e4*(.5+e/H*Math.exp(-t*t/2)))/1e4}for(var Y=[],B=0;B<=3.09;B+=.01)Y.push(K(B));function $(t){var e=1/(1+.5*Math.abs(t)),r=e*Math.exp(-t*t+((((((((.17087277*e-.82215223)*e+1.48851587)*e-1.13520398)*e+.27886807)*e-.18628806)*e+.09678418)*e+.37409196)*e+1.00002368)*e-1.26551223);return t>=0?1-r:r-1}function J(t){var e=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),r=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*e)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/e)-(2/(Math.PI*e)+Math.log(1-t*t)/2));return t>=0?r:-r}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,e){for(var r=0,n=0;n<t.length;n++){var a=t[n]-e[n];r+=a*a}return Math.sqrt(r)}function tt(t,e){return t.map((function(t){for(var r=Number.MAX_VALUE,n=-1,a=0;a<e.length;a++){var i=Z(t,e[a]);i<r&&(r=i,n=a)}return n}))}function et(t,e,r){for(var n=t[0].length,a=x(r,n),i=Array(r).fill(0),o=t.length,u=0;u<o;u++){for(var s=t[u],c=e[u],f=a[c],h=0;h<n;h++)f[h]+=s[h];i[c]+=1}for(var l=0;l<r;l++){if(0===i[l])throw new Error("Centroid "+l+" has no friends");for(var v=a[l],p=0;p<n;p++)v[p]/=i[l]}return a}function rt(t,e){for(var r=0,n=0;n<t.length;n++)r+=Z(t[n],e[n]);return r}function nt(t,e){if(t.length!==e.length)throw new Error("must have exactly as many labels as points");for(var r=function(t){for(var e=1+c(t),r=Array(e),n=0;n<t.length;n++){var a=t[n];void 0===r[a]&&(r[a]=[]),r[a].push(n)}return r}(e),n=function(t){for(var e=t.length,r=x(e,e),n=0;n<e;n++)for(var a=0;a<n;a++)r[n][a]=Z(t[n],t[a]),r[a][n]=r[n][a];return r}(t),a=[],i=0;i<t.length;i++){var o=0;if(r[e[i]].length>1){var u=it(i,r[e[i]],n),s=at(i,e,r,n);o=(s-u)/Math.max(u,s)}a.push(o)}return a}function at(t,e,r,n){for(var a=e[t],i=Number.MAX_VALUE,o=0;o<r.length;o++)if(o!==a){var u=it(t,r[o],n);u<i&&(i=u)}return i}function it(t,e,r){for(var n=0,a=0;a<e.length;a++)n+=r[t][e[a]];return n/e.length}function ot(t,e){return 0===t&&0===e?0:Math.abs((t-e)/e)}t.BayesianClassifier=q,t.PerceptronModel=F,t.addToMean=function(t,e,r){return t+(r-t)/(e+1)},t.approxEqual=function(t,e,r){return void 0===r&&(r=C),ot(t,e)<=r},t.average=r,t.averageSimple=j,t.bayesian=q,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,e){if(!(e<0||e>1||t<=0||t%1!=0)){var r=0,n=0,a=[],i=1;do{a[r]=i*Math.pow(e,r)*Math.pow(1-e,t-r),n+=a[r],i=i*(t-++r+1)/r}while(n<.9999);return a}},t.bisect=function(t,e,r,n,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var i=0;i<n;i++){var o=(e+r)/2;if(0===t(o)||Math.abs((r-e)/2)<a)return o;Q(t(o))===Q(t(e))?e=o:r=o}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=G,t.chiSquaredGoodnessOfFit=function(t,e,n){for(var a=0,i=e(r(t)),o=[],u=[],s=0;s<t.length;s++)void 0===o[t[s]]&&(o[t[s]]=0),o[t[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in i)f in o&&(u[+f]=i[f]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),o[h-1]+=o[h],o.pop());for(var l=0;l<o.length;l++)a+=Math.pow(o[l]-u[l],2)/u[l];var v=o.length-1-1;return G[v][n]<a},t.chunk=function(t,e){var r=[];if(e<1)throw new Error("chunk size must be a positive number");if(Math.floor(e)!==e)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r},t.ckmeans=function(t,e){if(e>t.length)throw new Error("cannot generate more classes than there are data values");var r=u(t);if(1===_(r))return[r];var n=x(e,r.length),a=x(e,r.length);!function(t,e,r){for(var n=e[0].length,a=t[Math.floor(n/2)],i=[],o=[],u=0,s=void 0;u<n;++u)s=t[u]-a,0===u?(i.push(s),o.push(s*s)):(i.push(i[u-1]+s),o.push(o[u-1]+s*s)),e[0][u]=D(0,u,i,o),r[0][u]=0;for(var c=1;c<e.length;++c)T(c<e.length-1?c:n-1,n-1,c,e,r,i,o)}(r,n,a);for(var i=[],o=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][o];i[s]=r.slice(c,o+1),s>0&&(o=c-1)}return i},t.combinations=function t(e,r){var n,a,i,o,u=[];for(n=0;n<e.length;n++)if(1===r)u.push([e[n]]);else for(i=t(e.slice(n+1,e.length),r-1),a=0;a<i.length;a++)(o=i[a]).unshift(e[n]),u.push(o);return u},t.combinationsReplacement=function t(e,r){for(var n=[],a=0;a<e.length;a++)if(1===r)n.push([e[a]]);else for(var i=t(e.slice(a,e.length),r-1),o=0;o<i.length;o++)n.push([e[a]].concat(i[o]));return n},t.combineMeans=N,t.combineVariances=function(t,e,r,n,a,i){var o=N(e,r,a,i);return(r*(t+Math.pow(e-o,2))+i*(n+Math.pow(a-o,2)))/(r+i)},t.cumulativeStdNormalProbability=function(t){var e=Math.abs(t),r=Math.min(Math.round(100*e),Y.length-1);return t>=0?Y[r]:+(1-Y[r]).toFixed(4)},t.epsilon=C,t.equalIntervalBreaks=function(t,e){if(t.length<2)return t;for(var r=s(t),n=c(t),a=[r],i=(n-r)/e,o=1;o<e;o++)a.push(a[0]+i*o);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var e=t[0],r=t[0],n=1;n<t.length;n++)t[n]>r&&(r=t[n]),t[n]<e&&(e=t[n]);return[e,r]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=L,t.gamma=function t(e){if(Number.isInteger(e))return e<=0?NaN:L(e-1);if(--e<0)return Math.PI/(Math.sin(Math.PI*-e)*t(-e));var r=e+1/4;return Math.pow(e/Math.E,e)*Math.sqrt(2*Math.PI*(e+1/6))*(1+1/144/Math.pow(r,2)-1/12960/Math.pow(r,3)-257/207360/Math.pow(r,4)-52/2612736/Math.pow(r,5)+5741173/9405849600/Math.pow(r,6)+37529/18811699200/Math.pow(r,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var e=R[0],r=1;r<15;r++)e+=R[r]/(t+r);var n=5.2421875+t;return A+Math.log(e)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var e=1,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("geometricMean requires only positive numbers as input");e*=t[r]}return Math.pow(e,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var e=0,r=0;r<t.length;r++){if(t[r]<=0)throw new Error("harmonicMean requires only positive numbers as input");e+=1/t[r]}return t.length/e},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,e,r){void 0===r&&(r=Math.random);for(var n=null,a=k(t,e,r),i=null,o=Number.MAX_VALUE;0!==o;)n=a,o=rt(a=et(t,i=tt(t,a),e),n);return{labels:i,centroids:a}},t.kde=X,t.kernelDensityEstimation=X,t.linearRegression=function(t){var e,r,n=t.length;if(1===n)e=0,r=t[0][1];else{for(var a,i,o,u=0,s=0,c=0,f=0,h=0;h<n;h++)u+=i=(a=t[h])[0],s+=o=a[1],c+=i*i,f+=i*o;r=s/n-(e=(n*f-u*s)/(n*c-u*u))*u/n}return{m:e,b:r}},t.linearRegressionLine=function(t){return function(e){return t.b+t.m*e}},t.mad=M,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=r,t.meanSimple=j,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=s,t.minSorted=function(t){return t[0]},t.mode=function(t){return o(u(t))},t.modeFast=function(t){for(var e,r=new Map,n=0,a=0;a<t.length;a++){var i=r.get(t[a]);void 0===i?i=1:i++,i>n&&(e=t[a],n=i),r.set(t[a],i)}if(0===n)throw new Error("mode requires at last one data point");return e},t.modeSorted=o,t.numericSort=u,t.perceptron=F,t.permutationTest=function(t,e,n,a,i){if(void 0===a&&(a=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var o=r(t)-r(e),u=new Array(a),s=t.concat(e),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,i);var h=s.slice(0,c),l=s.slice(c,s.length),v=r(h)-r(l);u[f]=v}var p=0;if("two_side"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(o)&&(p+=1);else if("greater"===n)for(var m=0;m<=a;m++)u[m]>=o&&(p+=1);else for(var g=0;g<=a;g++)u[g]<=o&&(p+=1);return p/a},t.permutationsHeap=function(t){for(var e=new Array(t.length),r=[t.slice()],n=0;n<t.length;n++)e[n]=0;for(var a=0;a<t.length;)if(e[a]<a){var i=0;a%2!=0&&(i=e[a]);var o=t[i];t[i]=t[a],t[a]=o,r.push(t.slice()),e[a]++,a=0}else e[a]=0,a++;return r},t.poissonDistribution=function(t){if(!(t<=0)){var e=0,r=0,n=[],a=1;do{n[e]=Math.exp(-t)*Math.pow(t,e)/a,r+=n[e],a*=++e}while(r<.9999);return n}},t.probit=function(t){return 0===t?t=C:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var e=1,r=0;r<t.length;r++)e*=t[r];return e},t.quantile=p,t.quantileRank=function(t,e){return y(u(t),e)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=l,t.rSquared=function(t,e){if(t.length<2)return 1;for(var r=0,n=0;n<t.length;n++)r+=t[n][1];for(var a=r/t.length,i=0,o=0;o<t.length;o++)i+=Math.pow(a-t[o][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-e(t[s][0]),2);return 1-u/i},t.relativeError=ot,t.rms=P,t.rootMeanSquare=P,t.sample=k,t.sampleCorrelation=function(t,e){return O(t,e)/z(t)/z(e)},t.sampleCovariance=O,t.sampleKurtosis=function(t){var e=t.length;if(e<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,a=r(t),i=0,o=0,u=0;u<e;u++)i+=(n=t[u]-a)*n,o+=n*n*n*n;return(e-1)/((e-2)*(e-3))*(e*(e+1)*o/(i*i)-3*(e-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var e,n=r(t),a=0,i=0,o=0;o<t.length;o++)a+=(e=t[o]-n)*e,i+=e*e*e;var u=t.length-1,s=Math.sqrt(a/u),c=t.length;return c*i/((c-1)*(c-2)*Math.pow(s,3))},t.sampleStandardDeviation=z,t.sampleVariance=I,t.sampleWithReplacement=function(t,e,r){if(0===t.length)return[];r=r||Math.random;for(var n=t.length,a=[],i=0;i<e;i++){var o=Math.floor(r()*n);a.push(t[o])}return a},t.shuffle=E,t.shuffleInPlace=S,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,e){return c(nt(t,e))},t.standardDeviation=i,t.standardNormalTable=Y,t.subtractFromMean=function(t,e,r){return(t*e-r)/(e-1)},t.sum=e,t.sumNthPowerDeviations=n,t.sumSimple=f,t.tTest=function(t,e){return(r(t)-e)/(i(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,e,n){var a=t.length,i=e.length;if(!a||!i)return null;n||(n=0);var o=r(t),u=r(e),s=I(t),c=I(e);if("number"==typeof o&&"number"==typeof u&&"number"==typeof s&&"number"==typeof c){var f=((a-1)*s+(i-1)*c)/(a+i-2);return(o-u-n)/Math.sqrt(f*(1/a+1/i))}},t.uniqueCountSorted=_,t.variance=a,t.zScore=function(t,e,r){return(t-e)/r},Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum_unsafe=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=t[n][e]}))},a=0,i=t.length;a<i;a++)n(a);return r},e.sum=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return r},e.count=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=0,a=t.length;n<a;n++)e.forEach((function(t){r[t]++}));return r},e.mean=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,i=t.length;a<i;a++)n(a);return e.forEach((function(e){r[e]/=t.length})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.periodCube=n.default;var a=r(6);e.momentCube=a.default},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._rawData).push.apply(t,a(e))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,e;if(!this.cache){if(0!==this.children.size){var r=this.children.values(),n=[];try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)n.push(c[s])}}catch(h){t={error:h}}finally{try{o&&!o.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var e=this,r=e.tree,a=(e.aggFunc,e.measures);return function e(r,o){var u,s;if(o===t.length)return r.aggData(a);var c=r.children.entries();try{for(var f=i(c),h=f.next();!h.done;h=f.next()){var l=n(h.value,2),v=l[0],p=l[1];if(v===t[o])return e(p,o+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,e=new o(this.aggFunc),r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(e.push(t),e.cache=!1,r<this.dimensions.length){var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o(this.aggFunc)),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this.rawData).push.apply(t,a(e))},t.prototype.aggData=function(t,e){return void 0===e&&(e=[]),this._aggData=t(this.rawData,e),this._aggData},t.prototype.getNode=function(t){return function e(r,a){var o,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return e(v,a+1)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},t}();e.Node=o;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var e=this,r=e.tree,a=e.aggFunc,o=e.measures;return function e(r,u){var s,c;if(u===t.length)return r.aggData(a,o);var f=r.children.entries();try{for(var h=i(f),l=h.next();!l.done;l=h.next()){var v=n(l.value,2),p=v[0],d=v[1];if(p===t[u])return e(d,u+1)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(r,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var e=t.aggFunc,r=void 0===e?this.aggFunc:e,n=t.factTable,a=void 0===n?this.factTable:n,i=t.dimensions,o=void 0===i?this.dimensions:i,u=t.measures,s=void 0===u?this.measures:u;o!==this.dimensions||a!==this.factTable?(this.dimensions=o,this.factTable=a,this.measures=s,this.aggFunc=r,this.buildTree(),this.aggTree()):s===this.measures&&r===this.aggFunc||(this.measures=s,this.aggFunc=r,this.aggTree())},t.prototype.buildTree=function(){var t,e=new o,r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(r===this.dimensions.length)e.push(t);else{var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new o),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)t.rawData.push(c[s])}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,i=r.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(e,"__esModule",{value:!0}),e.tree2Table=function(t){var e=t.dimensions,r=(t.measures,t.cube),o=(r.aggFunc,[]);return function t(r,u,s){var c,f,h;if(0!==r.children.size)try{for(var l=a(r.children.entries()),v=l.next();!v.done;v=l.next()){var p=i(v.value,2),d=p[0];t(p[1],n(n({},u),((h={})[e[s]]=d,h)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var m=r._aggData;o.push(n(n({},u),m))}}(r.tree,{},0),o}},function(t,e,r){var n=function(t){"use strict";var e,r=Object.prototype,n=r.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(z){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var a=e&&e.prototype instanceof m?e:m,i=Object.create(a.prototype),o=new T(n||[]);return i._invoke=function(t,e,r){var n=h;return function(a,i){if(n===v)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw i;return I()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=x(o,r);if(u){if(u===d)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===h)throw n=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var s=f(t,e,r);if("normal"===s.type){if(n=r.done?p:l,s.arg===d)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n=p,r.method="throw",r.arg=s.arg)}}}(t,r,o),i}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(z){return{type:"throw",arg:z}}}t.wrap=c;var h="suspendedStart",l="suspendedYield",v="executing",p="completed",d={};function m(){}function g(){}function y(){}var w={};w[i]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(O([])));M&&M!==r&&n.call(M,i)&&(w=M);var S=y.prototype=m.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(a,i,o,u){var s=f(t[a],t,i);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,o,u)}),(function(t){r("throw",t,o,u)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return r("throw",t,o,u)}))}u(s.arg)}var a;this._invoke=function(t,n){function i(){return new e((function(e,a){r(t,n,e,a)}))}return a=a?a.then(i,i):i()}}function x(t,r){var n=t.iterator[r.method];if(n===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=e,x(t,r),"throw"===r.method))return d;r.method="throw",r.arg=new TypeError("The iterator does not provide a \'throw\' method")}return d}var a=f(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,d;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,d):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,d)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function D(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function O(t){if(t){var r=t[i];if(r)return r.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}return{next:I}}function I(){return{value:e,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(k.prototype),k.prototype[o]=function(){return this},t.AsyncIterator=k,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new k(c(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},E(S),s(S,u,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=O,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return u.type="throw",u.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),D(r),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;D(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:O(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"kruskal",(function(){return C})),r.d(n,"kruskalWithFullMST",(function(){return F}));var a={};r.r(a),r.d(a,"getDimCorrelationMatrix",(function(){return Y})),r.d(a,"getMeaCorrelationMatrix",(function(){return B})),r.d(a,"getDimClusterGroups",(function(){return $})),r.d(a,"getDimSetsBasedOnClusterGroups",(function(){return J})),r.d(a,"getMeaSetsBasedOnClusterGroups",(function(){return Q})),r.d(a,"subspaceSearching",(function(){return Z})),r.d(a,"getRelatedVertices",(function(){return tt}));var i={};function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(t){if("string"===typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(s){a=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?h(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e){var r;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=s(t))||e&&t&&"number"===typeof t.length){r&&(t=r);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return o=t.done,t},e:function(t){u=!0,i=t},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}r.r(i),r.d(i,"insightExtraction",(function(){return it})),r.d(i,"subspaceSearching",(function(){return at})),r.d(i,"getVisSpaces",(function(){return St})),r.d(i,"IntentionWorkerCollection",(function(){return wt})),r.d(i,"DefaultIWorker",(function(){return pt})),r.d(i,"getIntentionSpaces",(function(){return bt})),r.d(i,"Subspace",(function(){return a})),r.d(i,"VIEngine",(function(){return At}));var p=function(t,e,r){for(var n=new Set,a=new Set,i=new Map,o=t.length,u=0;u<o;u++){var s=t[u];n.add(s[e]),a.add(s[r]),i.has(s[e])||i.set(s[e],new Map);var f=i.get(s[e]);f.has(s[r])||f.set(s[r],0),f.set(s[r],f.get(s[r])+1)}var h=function(t,e,r){if("undefined"===typeof t||"undefined"===typeof e||"undefined"===typeof r)return 0;var n,a=new Map,i=new Map,o=0,u=v(e);try{for(u.s();!(n=u.n()).done;){var s=n.value;a.set(s,0)}}catch(P){u.e(P)}finally{u.f()}var f,h=v(r);try{for(h.s();!(f=h.n()).done;){var l=f.value;i.set(l,0)}}catch(P){h.e(P)}finally{h.f()}var p,d=v(t);try{for(d.s();!(p=d.n()).done;){var m,g=c(p.value,2),y=g[0],w=v(g[1]);try{for(w.s();!(m=w.n()).done;){var b=c(m.value,2),M=b[0],S=b[1];a.set(y,a.get(y)+S),i.set(M,i.get(M)+S),o+=S}}catch(P){w.e(P)}finally{w.f()}}}catch(P){d.e(P)}finally{d.f()}var E,k=0,x=v(t);try{for(x.s();!(E=x.n()).done;){var _,D=c(E.value,2),T=D[0],O=v(D[1]);try{for(O.s();!(_=O.n()).done;){var I=c(_.value,2),z=I[0],N=I[1],j=a.get(T)*i.get(z)/o;k+=Math.pow(N-j,2)/j}}catch(P){O.e(P)}finally{O.f()}}}catch(P){x.e(P)}finally{x.f()}return k}(i,n,a);return Math.sqrt(h/(t.length*Math.min(n.size-1,a.size-1)))},d=function(t,e,r){var n=m(t.map((function(t){return t[e]})))/t.length,a=m(t.map((function(t){return t[r]})))/t.length;return m(t.map((function(t){return(t[e]-n)*(t[r]-a)})))/Math.sqrt(m(t.map((function(t){return Math.pow(t[e]-n,2)})))*m(t.map((function(t){return Math.pow(t[r]-a,2)}))))};function m(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e}function g(t){var e=Math.min.apply(Math,f(t));return t.map((function(t){return t-e+1}))}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function e(r,a,i){a.length!==i?r>=t.length||(e(r+1,[].concat(f(a),[t[r]]),i),e(r+1,a,i)):n.push(f(a))},i=e;i<=r;i++)a(0,[],i);return n}function w(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a}}catch(i){n.e(i)}finally{n.f()}return t.map((function(t){return t/r}))}var b=function(t){var e,r=0,n=v(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;r+=a*Math.log2(a)}}catch(i){n.e(i)}finally{n.f()}return-r};function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function E(t,e,r){return e&&S(t.prototype,e),r&&S(t,r),t}var k=function(){function t(e,r,n){M(this,t),this.dataSource=e,this.X=r,this.Y=n,this.normalizedDataSource=e}return E(t,[{key:"normalizeDimensions",value:function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(r){t.forEach((function(t,n){var a=(r[t]||"others").toString();e.valueSets[n].has(a)||e.valueSets[n].set(a,e.valueSets[n].size)}))})),this.dataSource.forEach((function(r){var n=e.normalizeRecord(r,t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t,e){var r=this,n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),e.forEach((function(e,a){var i=(t[e]||"others").toString();n[e]=r.valueSets[a].get(i)})),n}},{key:"mean",value:function(){var t=this,e=0,r=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,a){e+=n[t.X],r+=n[t.Y]})),e/=this.normalizedDataSource.length,r/=this.normalizedDataSource.length),[e,r]}},{key:"getRegressionEquation",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,r=c(this.mean(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(e){i+=(e[t.X]-n)*(e[t.Y]-a),o+=Math.pow(e[t.X]-n,2)})),[a-n*(e=i/o),e]}},{key:"r_squared",value:function(){var t=this,e=c(this.mean(),2)[1],r=c(this.getRegressionEquation(),2),n=r[0],a=r[1],i=0,o=0;return this.normalizedDataSource.forEach((function(r){var u=r[t.X],s=r[t.Y],c=u*a+n;i+=Math.pow(c-e,2),o+=Math.pow(s-e,2)})),i/o}},{key:"cumulativeLogisticDistribution",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:"pValue",value:function(){var t=c(this.getRegressionEquation(),2)[1],e=this.cumulativeLogisticDistribution(Math.abs(t));return e>.5?2*(1-e):2*e}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),x=r(2),_="_join_",D={sum:x.sum,max:x.max,mean:x.mean,min:x.min,count:function(t){return t.length}};function T(t){return D[t]||x.sum}var O=.3,I=.5;function z(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t[r].length;n++)e.push([[r,n],Math.abs(t[r][n])]);return e}function N(t,e){return t[e]===e?e:t[e]=N(t,t[e])}function j(t,e,r){var n=N(t,e),a=N(t,r);t[n]=a,N(t,e),N(t,r)}function P(t,e,r){return t[r]===r?r:(t[r]=P(t,e,t[r]),e[r]=e[t[r]],t[r])}function q(t,e,r,n){var a=P(t,e,r),i=P(t,e,n),o=e[a],u=e[i];t[a]=i,e[a]=e[i]=o+u,P(t,e,r),P(t,e,n)}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=[],o=t.map((function(t,e){return e})),u=f(o),s=!1,c=v(n);try{for(c.s();!(a=c.n()).done;){var h=a.value;N(o,h[0][0])!==N(o,h[0][1])&&(j(o,h[0][0],h[0][1]),i.push([h[0],h[1],s]));for(var l=0;l<o.length;l++)o[l]=N(o,l);var p=new Set(o);if(p.size<=e||h[1]<r?s=!0:u=f(o),1===p.size)break}}catch(d){c.e(d)}finally{c.f()}return{edgesInMST:i,groups:u}}var C=function(t){var e,r=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),i=void 0===a?4:a,o=t.limitSize,u=void 0!==o&&o,s=t.threshold,c=void 0===s?0:s;e=u?function(t,e){var r=z(t);r.sort((function(t,e){return e[1]-t[1]}));var n,a=t.map((function(t,e){return e})),i=t.map((function(){return 1})),o=v(r);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(P(a,i,u[0][0])!==P(a,i,u[0][1])){if(i[u[0][0]]+i[u[0][1]]>e)continue;q(a,i,u[0][0],u[0][1])}for(var s=0;s<a.length;s++)a[s]=P(a,i,s);if(1===new Set(a).size)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<a.length;f++)c.has(a[f])||c.set(a[f],[]),c.get(a[f]).push(f);return c}(r,i):function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=z(t);n.sort((function(t,e){return e[1]-t[1]}));var a,i=t.map((function(t,e){return e})),o=v(n);try{for(o.s();!(a=o.n()).done;){var u=a.value;N(i,u[0][0])!==N(i,u[0][1])&&j(i,u[0][0],u[0][1]);for(var s=0;s<i.length;s++)i[s]=N(i,s);if(new Set(i).size<=e||u[1]<r)break}}catch(h){o.e(h)}finally{o.f()}for(var c=new Map,f=0;f<i.length;f++)c.has(i[f])||c.set(i[f],[]),c.get(i[f]).push(f);return c}(r,i,c);var f,h=[],l=v(e.values());try{for(l.s();!(f=l.n()).done;){var p=f.value;h.push(p.map((function(t){return n[t]})))}}catch(d){l.e(d)}finally{l.f()}return h};function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function R(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}function A(t){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function G(t){return(G="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function V(t,e){return!e||"object"!==G(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t):e}function U(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=A(t);if(e){var a=A(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return V(this,r)}}var W=function(t){R(r,t);var e=U(r);function r(t){var n;M(this,r),n=e.call(this,t);var a=t.K;return n.K=a,n.normalize(),n}return E(r,[{key:"getNeighbors",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.length!==e.length&&e.forEach((function(t){r.push(1)}));for(var n=[],a=[],i=[],o=[],u=new Set(this.dimensions),s=0;s<e.length;s++)u.has(e[s])?(n.push(e[s]),i.push(r[s])):(a.push(e[s]),o.push(r[s]));var c=[];this.normalizedDataSource.forEach((function(e,r){var u=0;a.forEach((function(r,n){u+=Math.pow((e[r]-t[r])*o[n],2)})),n.forEach((function(r,n){e[r]!==t[r]&&(u+=Math.pow(i[n],2))})),c.push({dis:u,index:r})})),c.sort((function(t,e){return t.dis-e.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:"getTargetValue",value:function(t,e){var r=this,n=[];return t.forEach((function(t){var a=new Map;e.forEach((function(e){a.has(e[t])||a.set(e[t],0),a.set(e[t],a.get(e[t])+1)}));var i,o=0,u=0,s=v(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;c[1]>o&&(o=c[1],u=c[0])}}catch(h){s.e(h)}finally{s.f()}var f=r.dimensions.indexOf(t);f>-1?n.push(r.valueParser[f][u]):n.push(u)})),n}}]),r}(function(){function t(e){M(this,t);var r=e.dataSource,n=e.dimensions,a=e.measures;this.dataSource=r,this.dimensions=n,this.measures=a}return E(t,[{key:"normalize",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(n,a){r[n]=(t[n]-e.ranges[a][0])/(e.ranges[a][1]-e.ranges[a][0])})),this.dimensions.forEach((function(n,a){var i=(t[n]||"others").toString();r[n]=e.valueSets[a].get(i)})),r}}]),t}());function X(t,e){for(var r=function(t,e){if(0===t)return[];for(var r=2147483647,n=[e],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%r);return n.map((function(t){return t/r}))}(e,2147483647*Math.random()),n=[],a=0;a<e;a++){var i=Math.floor(r[a]*e)%e;n.push(t[i])}return n}var H=8,K={IsolationForest:function(){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;M(this,t),this.dimensions=e,this.measures=r,this.dataSource=n,n.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return E(t,[{key:"normalizeDimensions",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(e){r[e]=t[e]})),this.dimensions.forEach((function(n,a){var i=(t[n]||"others").toString();r[n]=e.valueSets[a].get(i)})),r}},{key:"buildIsolationTree",value:function(t,e){if(e>=this.limitHeight||t.length<=1)return null;var r=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,i=this.measures.length,o=0;if(r>=a/(a+i)){var u=Math.floor(Math.random()*i)%i;n=this.measures[u],o=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],o=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c,f=[],h=[],l=v(t);try{for(l.s();!(c=l.n()).done;){var p=c.value;p[n]<o?f.push(p):h.push(p)}}catch(m){l.e(m)}finally{l.f()}var d={field:n,value:o,size:t.length};return d.left=this.buildIsolationTree(f,e+1),d.right=this.buildIsolationTree(h,e+1),d}},{key:"AFS",value:function(t){return t>2?2*(Math.log(t-1)+.5772156649)-2*(t-1)/t:2===t?1:0}},{key:"getPathLength",value:function(t,e,r,n){return null===e?r+this.AFS(n):t[e.field]<e.value?this.getPathLength(t,e.left,r+1,e.size):this.getPathLength(t,e.right,r+1,e.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=X(this.normalizedDataSource,this.sampleSize),r=this.buildIsolationTree(e,0);this.iForest.push(r)}return this.iForest}},{key:"estimateOutierScore",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var r,n=0;t.iForest.forEach((function(r){n+=t.getPathLength(e,r,0,t.sampleSize)})),n/=t.iForest.length,r=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(r)})),this.recordScoreList}}]),t}()};function Y(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}function B(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++){var i=d(t,e[n],e[a]);r[a][n]=r[n][a]=i}}return r}function $(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,a=arguments.length>3?arguments[3]:void 0,i=4,o=Y(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r});return u}function J(t,e,r,n){var a,i=[],o=v($(t,e,r));try{for(o.s();!(a=o.n()).done;){var u=y(a.value,1,n||H);i.push.apply(i,f(u))}}catch(s){o.e(s)}finally{o.f()}return i}function Q(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=3,o=B(t,e),u=n.kruskal({matrix:o,measures:e,groupMaxSize:a||Math.round(e.length/i),threshold:r||I});return u}function Z(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?J(t,e):y(e)}function tt(t,e,r,n){for(var a=e.map((function(t){return r.includes(t)})),i=[],o=[],u=0;u<t.length;u++)if(a[u])for(var s=0;s<t[u].length;s++)a[s]||i.push([t[u][s],[u,s]]);i.sort((function(t,e){return e[0]-t[0]}));for(var c=0;c<i.length;c++){var f=i[c][1][1];a[f]||(a[f]=!0,o.push({field:e[f],corValue:i[c][0]}))}return o.slice(0,n||o.length)}var et=r(1),rt=r.n(et);function nt(t,e){var r,a=[],i=function(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=p(t,e[n],e[a])}return r}(t,e),o=v(n.kruskal({matrix:i,measures:e,groupMaxSize:Math.round(e.length/4),threshold:O}));try{for(o.s();!(r=o.n()).done;){var u=y(r.value,1,H);a.push.apply(a,f(u))}}catch(s){o.e(s)}finally{o.f()}return a}function at(t,e){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r?nt(t,e):y(e)}function it(t,e,r){var n,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum",i=[],o=at(t,e,!0),u=v(o);try{for(u.s();!(n=u.n()).done;){var s,c=n.value,f={},h=rt()({dataSource:t,dimensions:c,measures:r,asFields:r,operator:a||"sum"}),l=v(r);try{var p=function(){var t=s.value,e=w(g(h.map((function(e){return e[t]})))),r=b(e);f[t]=r};for(l.s();!(s=l.n()).done;)p()}catch(E){l.e(E)}finally{l.f()}for(var m=r.map((function(t){return r.map((function(t){return 0}))})),y=0;y<r.length;y++){m[y][y]=1;for(var M=y+1;M<r.length;M++){var S=d(h,r[y],r[M]);m[M][y]=m[y][M]=S}}i.push([c,f,m])}}catch(E){u.e(E)}finally{u.f()}return i}var ot=r(0),ut=r.n(ot);function st(t,e,r,n,a,i,o){try{var u=t[i](o),s=u.value}catch(c){return void r(c)}u.done?e(s):Promise.resolve(s).then(n,a)}function ct(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){st(i,n,a,o,u,"next",t)}function u(t){st(i,n,a,o,u,"throw",t)}o(void 0)}))}}var ft=function(t){R(r,t);var e=U(r);function r(){return M(this,r),e.apply(this,arguments)}return E(r,[{key:"getTargetValuePercent",value:function(t,e,r){var n=[];return t.forEach((function(t,a){var i=0;r.forEach((function(r){r[t]===e[t]&&i++})),n.push(i/r.length)})),n}},{key:"getSignificance",value:function(t,e){var r=this,n=0;return this.normalizedDataSource.forEach((function(a){var i=r.getNeighbors(a,t),o=r.getTargetValuePercent(e,a,i),u=0;o.forEach((function(t){u+=t})),u/=o.length,n+=u})),n/=this.normalizedDataSource.length}}]),r}(W),ht="=;=";function lt(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i,o=r.value,u=v(e);try{for(u.s();!(i=u.n()).done;){var s=i.value;n.push({dimensions:o,measures:s})}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function vt(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,n=[],a=v(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,o=y(i,1,r);n.push.apply(n,f(o))}}catch(u){a.e(u)}finally{a.f()}return n}var pt,dt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,i=0,o=v(n);try{for(s=function(){var t=u.value,r=e.map((function(e){return e[t]})),n=w(g(r)),o=b(n);a+=o,i+=o/Math.log2(r.length)},o.s();!(u=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}return a/=n.length,i=1-(i/=n.length),t.abrupt("return",{dimensions:r,measures:n,type:"default_general",score:a,impurity:a,significance:i,order:"asc"});case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),mt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:r,measures:n,score:u,significance:u,order:"desc",description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),gt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt("return",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:t[r[0]]<e[r[0]]?-1:void 0})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt("return",{dimensions:r,measures:n,score:i,significance:i,order:"desc"});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),yt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length<2)){t.next=2;break}return t.abrupt("return",null);case 2:return 0,i=new ft({dataSource:e,dimensions:r,measures:n,K:8}),a=i.getSignificance(n.concat(r.slice(0,-1)),r.slice(-1)),t.abrupt("return",{dimensions:r,measures:n,score:a,significance:a,order:"desc"});case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(pt||(pt={}));var wt=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error(\'Intention Worker "\'.concat(t,\'" does not exist.\'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:"each",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(pt.outlier,mt),t.colletion.register(pt.cluster,yt),t.colletion.register(pt.trend,gt))),pt)t.colletion.enable(pt[a],n);return t.colletion}}]),t}();function bt(t,e,r){return Mt.apply(this,arguments)}function Mt(){return(Mt=ct(ut.a.mark((function t(e,r,n){var a,i,o,u;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],i=v(r),t.prev=2,u=ut.a.mark((function t(){var r,i,u,s,c,f;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.value,i=r.dimensions,u=r.measures,s=i.join(ht),!e.has(s)){t.next=9;break}return c=e.get(s),t.next=7,dt(c,i,u);case 7:f=t.sent,n.each(function(){var t=ct(ut.a.mark((function t(e,r){var n;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(c,i,u);case 3:null!==(n=t.sent)&&(n.type=r,n.impurity=f.impurity,a.push(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:u,aggData:c},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})),i.s();case 5:if((o=i.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),i.e(t.t1);case 14:return t.prev=14,i.f(),t.finish(14);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function St(t){return Et.apply(this,arguments)}function Et(){return(Et=ct(ut.a.mark((function t(e){var r,n,a,i,o,u,s,c,f,h,l,p,d,m,g,y,w,b,M,S,E,k,x,_,D,T,z;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.dataSource,n=e.dimensions,a=e.measures,i=e.collection,o=e.dimension_correlation_threshold,u=void 0===o?O:o,s=e.measure_correlation_threshold,c=void 0===s?I:s,f=e.max_dimension_num_in_view,h=void 0===f?3:f,l=e.max_measure_num_in_view,p=void 0===l?3:l,d=$(r,n,u),m=vt(d,h),g=Q(r,a,c),y=vt(g,p),w=lt(m,y),b=new Map,M=(new Date).getTime(),S=v(m);try{for(S.s();!(E=S.n()).done;)k=E.value,x=k.join(ht),_=rt()({dataSource:r,dimensions:k,measures:a,asFields:a,operator:"sum"}),b.set(x,_)}catch(N){S.e(N)}finally{S.f()}return D=(new Date).getTime(),console.log("cube cost",D-M),b.set("*",r),T=i||wt.init(),t.next=18,bt(b,w,T);case 18:return z=t.sent,t.abrupt("return",z);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function kt(t,e){return function(t,e){return t.every((function(t){return Number(t[e])>=1800&&Number(t[e])<=2200||!isNaN(Date.parse(t[e]))&&"string"===typeof t[e]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[e])||"undefined"===typeof t[e]||null===t[e]}))}(t,e)?"temporal":function(t,e){return t.every((function(t){return"number"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))}(t,e)?"quantitative":(function(t,e){t.every((function(t){return"string"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))}(t,e),"nominal")}var xt={boolean:function(t){return"true"===t||"false"===t||!0===t||!1===t},integer:function(t){return xt.number(t)&&(t=+t)===~~t},number:function(t){return!isNaN(+t)},date:function(t){return!isNaN(Date.parse(t))}};function _t(t,e){var r,n=[],a=new Map,i=v(t);try{var o=function(){var t=r.value,i=new Map;e.forEach((function(e){i.has(e[t])||i.set(e[t],0),i.set(e[t],i.get(e[t])+1)}));var o=function(t){var e,r,n=["boolean","integer","number","date"],a=v(t);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,o=0;o<n.length;++o)null==(r=i)||r!==r||xt[n[o]](i)||(n.splice(o,1),o-=1);if(0===n.length)return"string"}}catch(u){a.e(u)}finally{a.f()}return n[0]}(f(i.keys())),u=kt(e,t),s="dimension";"integer"!==o&&"number"!==o||(s="measure");var c={key:t,analyticType:s,semanticType:u,dataType:o,domain:i};n.push(c),a.set(c.key,c)};for(i.s();!(r=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return{fields:n,dictonary:a}}var Dt,Tt=function(){function t(e,r,n){M(this,t),this.DIMENSION_CORRELATION_THRESHOLD=O,this.MEASURE_CORRELATION_THRESHOLD=I,this.dimensions=r,this.measures=n,this.computeDGraph(e),this.computeMGraph(e)}return E(t,[{key:"computeGraph",value:function(t,e,r){for(var n=e.map((function(t){return e.map((function(){return 0}))})),a=0;a<e.length;a++){n[a][a]=1;for(var i=a+1;i<e.length;i++)n[a][i]=n[i][a]=r(t,e[a],e[i])}return n}},{key:"computeDGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return this.DG=this.computeGraph(t,this.dimensions,e),this.DG}},{key:"computeMGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d;return this.MG=this.computeGraph(t,this.measures,e),this.MG}},{key:"clusterDGraph",value:function(t,e){var r=this.dimensions,n=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=$(t,r,e||n),this.DClusters}},{key:"clusterMGraph",value:function(t,e){var r=this.measures,n=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=Q(t,r,e||n),this.MClusters}}]),t}(),Ot=["max","min","sum","mean","count"],It=function(){function t(e){M(this,t);var r=e.dimensions,n=e.measures,a=e.ops,i=void 0===a?Ot:a;this.dimensions=r,this.measures=n,this.ops=i,this.state=[]}return E(t,[{key:"setData",value:function(t){return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(e){return e[t]})))}))}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:t}),this.state}},{key:"computeFromCuboid",value:function(t){var e=this.ops,r=this.measures,n=this.dimensions;return this.state=function(t){var e,r=t.dataSource,n=t.dimensions,a=t.measures,i=t.ops,o=new Map,u=v(r);try{var s=function(){var t=e.value,r=n.map((function(e){return t[e]})).join(_);o.has(r)||o.set(r,[]),o.get(r).push(t)};for(u.s();!(e=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}var f,h=[],l=v(o);try{var p=function(){var t=c(f.value,2),e=t[0],r=t[1],o={};a.forEach((function(t,e){o[t]={},i.filter((function(t){return!["sum","count","mean"].includes(t)})).forEach((function(e){var n=T(e);o[t][e]=n(r.map((function(r){return r[t][e]})))})),o[t].sum=T("sum")(r.map((function(e){return e[t].sum}))),o[t].count=T("sum")(r.map((function(e){return e[t].count}))),o[t].mean=o[t].sum/o[t].count}));var u=e.split(_);n.forEach((function(t,e){o[t]=u[e]})),h.push(o)};for(l.s();!(f=l.n()).done;)p()}catch(d){l.e(d)}finally{l.f()}return h}({dimensions:n,measures:r,ops:e,dataSource:t.getRawState()}),this.state}},{key:"getState",value:function(t,e){var r,n=[],a=this.state,i=this.dimensions,o=v(a);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c={},f=v(i);try{for(f.s();!(u=f.n()).done;){var h=u.value;c[h]=s[h]}}catch(m){f.e(m)}finally{f.f()}for(var l=0;l<t.length;l++){var p=t[l],d=e[l];c[p]=s[p][d]}n.push(c)}}catch(m){o.e(m)}finally{o.f()}return n}},{key:"getRawState",value:function(){return this.state}},{key:"size",get:function(){return this.state.length}}]),t}(),zt="_join_",Nt=["max","min","sum","mean","count"],jt=function(){function t(e){var r=this;M(this,t);var n=e.dimensions,a=e.measures,i=e.dataSource,o=e.ops,u=void 0===o?Nt:o;this.dimensions=n,this.measures=a,this.dataSource=i,this.ops=u,this.dimOrder=new Map,n.forEach((function(t,e){r.dimOrder.set(t,e)})),this.cuboids=new Map}return E(t,[{key:"sortDimension",value:function(t){var e=this,r=f(t);return r.sort((function(t,r){return e.dimOrder.get(t)-e.dimOrder.get(r)})),r}},{key:"getCuboid",value:function(t){var e=this.sortDimension(t),r=e.join(zt);if(this.cuboids.has(r))return this.cuboids.get(r);var n,a=new Set(t),i=[],o=[],u=v(this.dimensions);try{for(u.s();!(n=u.n()).done;){var s=n.value;if(!a.has(s)){var c=this.sortDimension([].concat(f(e),[s])).join(zt);this.cuboids.has(c)?i.push(c):o.push(c)}}}catch(b){u.e(b)}finally{u.f()}var h=1/0,l=this.dimensions.join(zt);if(i.length>0){var p,d=v(i);try{for(d.s();!(p=d.n()).done;){var m=p.value,g=this.cuboids.get(m);g.size<h&&(h=g.size,l=m)}}catch(b){d.e(b)}finally{d.f()}}else o.length>0&&(l=o[0]);var y=this.getCuboid(l.split(zt)),w=new It({dimensions:t,measures:this.measures,ops:this.ops});return w.computeFromCuboid(y),this.cuboids.set(r,w),w}},{key:"buildBaseCuboid",value:function(){var t=new It({dimensions:this.dimensions,measures:this.measures,ops:this.ops});return t.setData(this.dataSource),this.cuboids.set(this.dimensions.join(zt),t),t}},{key:"baseCuboid",get:function(){var t=this.dimensions.join(zt);return this.cuboids.has(t)?this.cuboids.get(t):this.buildBaseCuboid()}}]),t}(),Pt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new K.IsolationForest([],n,e)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},r.concat(n).forEach((function(t){c[t]=e[o][t]})),t.abrupt("return",{dimensions:r,measures:n,significance:u,description:c});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),qt=function(){var t=ct(ut.a.mark((function t(e,r,n){var a,i,o,u,s,c;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===r.length){t.next=2;break}return t.abrupt("return",null);case 2:(a=f(e)).sort((function(t,e){return t[r[0]]>e[r[0]]?1:t[r[0]]===e[r[0]]?0:-1})),i=0,o=v(n);try{for(o.s();!(u=o.n()).done;)s=u.value,(c=new k(a,r[0],s)).normalizeDimensions(r),i+=c.significance()}catch(h){o.e(h)}finally{o.f()}return i/=n.length,t.abrupt("return",{dimensions:r,measures:n,significance:i});case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.trend="default_trend"}(Dt||(Dt={}));var Ft=function(){function t(){M(this,t),this.workers=new Map}return E(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error(\'Intention Worker "\'.concat(t,\'" does not exist.\'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:"each",value:function(t){var e,r=v(this.workers);try{for(r.s();!(e=r.n()).done;){var n=c(e.value,2),a=n[0],i=n[1];i[0]&&t(i[1],a)}}catch(o){r.e(o)}finally{r.f()}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;return t.colletion||(t.colletion=new t,n&&(t.colletion.register(Dt.outlier,Pt),t.colletion.register(Dt.trend,qt))),Object.values(Dt).forEach((function(e){t.colletion.enable(e,n)})),t.colletion}}]),t}(),Ct={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Lt(t,e){for(var r=e.length-1;r>=0;r--)if(e[r].semanticType===t&&!e[r].choosen)return e[r];return!1}function Rt(t,e){var r=function(t){for(var e={},r={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},n=t.map((function(t){return l(l({},t),{},{choosen:!1})})),a=[["quantitative",["position","size","color","highFacets","opacity","page","filter"]],["temporal",["position","page","filter"]],["ordinal",["position","color","opacity","facets","size","page","filter","highFacets"]],["nominal",["position","color","facets","shape","page","filter","hightFacets"]]],i=n.length,o=0;o<a.length&&i>0;o++)for(var u=a[o][0],s=a[o][1],c=0;c<s.length&&i>0;c++)for(var f=s[c],h=void 0;r[f]>0&&(h=Lt(u,n));)"undefined"===typeof e[f]&&(e[f]=[]),e[f].push(h.key),r[f]--,i--,h.choosen=!0;return e}(t.sort((function(t,e){return t.impurity-e.impurity}))),n=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),a=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(r.position&&2===r.position.length)if(n.has(r.position[0])&&a.has(r.position[1])||n.has(r.position[1])&&a.has(r.position[0])){var i=n.has(r.position[0])?0:1,o=r.position[i],u=r.position[(i+1)%2];r.position=[o,u];var s=t.find((function(t){return t.key===o})),c=s?s.domain.size:0;r.geomType=["interval","line","area"].filter((function(t){return c>=Ct[t][0]&&c<=Ct[t][1]})),"nominal"===s.semanticType&&(r.geomType=["interval"])}else r.geomType=["point","density"].filter((function(t){return e.length>=Ct[t][0]&&e.length<=Ct[t][1]}));return{schema:r,dataView:e}}var At=function(){function t(){M(this,t),this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count"],this.workerCollection=Ft.init()}return E(t,[{key:"setDataSource",value:function(t){return this.dataSource=t,this}},{key:"setDimensions",value:function(t){return this._dimensions=t,this._fields.forEach((function(e){"dimension"!==e.analyticType&&t.includes(e.key)&&(e.analyticType="dimension")})),this}},{key:"setMeasures",value:function(t){return this._measures=t,this._fields.forEach((function(e){"measure"!==e.analyticType&&t.includes(e.key)&&(e.analyticType="measure")})),this}},{key:"setFieldKeys",value:function(t){return this._fieldKeys=t,this}},{key:"buildfieldsSummary",value:function(){var t=this,e=_t(this._fieldKeys,this.dataSource),r=e.fields,n=e.dictonary;return this.dimensions&&this.measures&&r.forEach((function(e){t.dimensions.includes(e.key)?e.analyticType="dimension":e.analyticType="measure"})),this.fields=r,this.fieldDictonary=n,this}},{key:"buildGraph",value:function(){return this.dataGraph=new Tt(this.dataSource,this.dimensions,this.measures),this}},{key:"buildCube",value:function(){var t=this.measures,e=this.dataSource,r=this.dataGraph,n=this.dimensions,a=this.aggregators,i=new jt({dimensions:n,measures:t,dataSource:e,ops:a});return i.buildBaseCuboid(),r.DClusters.forEach((function(t){i.getCuboid(t)})),this.cube=i,this}},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:"buildSubspaces",value:function(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,i=this.dataGraph.MClusters,o=t.getCombinationFromClusterGroups(i,n),u=[],s=v(a);try{for(s.s();!(e=s.n()).done;){var c,f=e.value,h=y(f,r.MIN,r.MAX),l=v(h);try{for(l.s();!(c=l.n()).done;){var p,d=c.value,m=v(o);try{for(m.s();!(p=m.n()).done;){var g=p.value;u.push({dimensions:d,measures:g})}}catch(w){m.e(w)}finally{m.f()}}}catch(w){l.e(w)}finally{l.f()}}}catch(w){s.e(w)}finally{s.f()}return this.subSpaces=u,this}},{key:"insightExtraction",value:function(){var e=ct(ut.a.mark((function e(){var r,n,a,i,o,u,s=this,c=arguments;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.length>0&&void 0!==c[0]?c[0]:this.subSpaces,n=this,a=[],i=v(r),e.prev=4,u=ut.a.mark((function e(){var r,i,u,c,f,h,l,v;return ut.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.value,i=r.dimensions,u=r.measures,c=n.cube,f=c.getCuboid(i),h=f.getState(u,u.map((function(){return"sum"}))),l=t.getSpaceImpurity(h,i,u),v=[],s.workerCollection.each((function(t,e){var r=function(){var t=ct(ut.a.mark((function t(e,r){var o;return ut.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(h,i,u,n.fieldDictonary,n);case 3:null!==(o=t.sent)&&(o.type=r,o.impurity=l,a.push(o)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:i,measures:u,aggData:h},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,r){return t.apply(this,arguments)}}();v.push(r(t,e))})),e.next=10,Promise.all(v);case 10:case"end":return e.stop()}}),e)})),i.s();case 7:if((o=i.n()).done){e.next=11;break}return e.delegateYield(u(),"t0",9);case 9:e.next=7;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),i.e(e.t1);case 16:return e.prev=16,i.f(),e.finish(16);case 19:return n.insightSpaces=a,e.abrupt("return",a);case 21:case"end":return e.stop()}}),e,this,[[4,13,16,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"setInsightScores",value:function(){return this.insightSpaces.forEach((function(t){t.score=t.impurity/t.significance})),this}},{key:"getFieldInfoInVis",value:function(t){var e=[],r=this.cube,n=this.fieldDictonary,a=t.dimensions,i=t.measures;a.forEach((function(t){var a=r.getCuboid([t]).getState(i,i.map((function(){return"sum"}))),o=0;i.forEach((function(t){var e=w(g(a.map((function(e){return e[t]})))),r=b(e);o+=r})),e.push(l(l({},n.get(t)),{},{impurity:o}))}));var o=r.getCuboid(a).getState(i,i.map((function(){return"sum"})));return i.forEach((function(t){var r=w(g(o.map((function(e){return e[t]})))),a=b(r);e.push(l(l({},n.get(t)),{},{impurity:a}))})),e}},{key:"specification",value:function(t){var e=t.dimensions,r=t.measures;return Rt(this.getFieldInfoInVis(t),this.cube.getCuboid(e).getState(r,r.map((function(){return"sum"}))))}},{key:"fields",get:function(){return this._fields},set:function(t){this._fields=t,this._dimensions=t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key})),this._measures=t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))}},{key:"dimensions",get:function(){return this._dimensions}},{key:"measures",get:function(){return this._measures}}],[{key:"getCombinationFromClusterGroups",value:function(t,e){var r,n=[],a=v(t);try{for(a.s();!(r=a.n()).done;){var i=y(r.value,e.MIN,e.MAX);n.push.apply(n,f(i))}}catch(o){a.e(o)}finally{a.f()}return n}},{key:"getSpaceImpurity",value:function(t,e,r){var n,a=0,i=v(r);try{var o=function(){var e=n.value,r=w(g(t.map((function(t){return t[e]})))),i=b(r);a+=i};for(i.s();!(n=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return a/=r.length}}]),t}();var Gt;self.addEventListener("message",(Gt=t=>{try{const{dataSource:e,dimensions:r,measures:n,operator:a,topKPercent:o=1}=t.data;let u=i.insightExtraction(e,r,n,a).map((t=>{let e=0;for(let r in t[1])e+=t[1][r];return{...t,score:e}}));u.sort(((t,e)=>t.score-e.score));let s=Math.round(o*u.length);self.postMessage({success:!0,data:u.slice(0,s).map((t=>({score:t.score,dimensions:t[0],measures:n.map((e=>({name:e,value:t[1][e]}))),correlationMatrix:t[2]})))})}catch(e){self.postMessage({success:!1,message:e.toString()})}},function(t){var e=(new Date).getTime();try{Gt(t)}finally{var r=(new Date).getTime()-e;console.log("Task [".concat(Gt.name,"] cost ").concat(r," ms."))}}),!1)}]);\n//# sourceMappingURL=combineFields.worker.34201631.worker.js.map',"Worker",void 0,r.p+"static/js/combineFields.worker.34201631.worker.js")}function x(){return b()('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="./",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){"use strict";this&&this.__assign;Object.defineProperty(r,"__esModule",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,l=void 0===f?[]:f,s=t.measures,c=void 0===s?[]:s;switch(r){case"period":return new n.periodCube({aggFunc:o,factTable:u,dimensions:l,measures:c});case"moment":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:l,measures:c})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,l=t.dataSource,s=u({type:"moment",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:l}),c=o.tree2Table({dimensions:r,measures:e,cube:s});return c.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),c},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function l(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function s(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function c(t,r){var e=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function h(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),h(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var l=t[r],s=e,c=n;for(v(t,e,r),t[n]>l&&v(t,e,n);s<c;){for(v(t,s,c),s++,c--;t[s]<l;)s++;for(;t[c]>l;)c--}t[e]===l?v(t,e,c):v(t,++c,n),c<=r&&(e=c+1),r<=c&&(n=c-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function p(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(y(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);g(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=c(e,r[o]);return n}return g(e,y(e.length,r),0,e.length-1),c(e,r)}function g(t,r,e,n){r%1==0?h(t,r,e,n):(h(t,r=Math.floor(r),e,n),h(t,r+1,r+1,n))}function d(t,r){return t-r}function y(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function m(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=p(t,.75),e=p(t,.25);if("number"==typeof r&&"number"==typeof e)return r-e}function b(t){return+p(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function E(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function x(t,r){return E(t.slice(),r)}function _(t,r,e){return x(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function T(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function O(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function q(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var l,s,c,h=u-1;r<n[0].length-1&&(h=Math.min(h,o[e][r+1]||0));for(var v=h;v>=f&&!((l=O(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(s=O(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=s,o[e][u]=f),f++,(c=l+n[e-1][v-1])<n[e][u]&&(n[e][u]=c,o[e][u]=v);q(t,u-1,e,n,o,a,i),q(u+1,r,e,n,o,a,i)}}function F(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function N(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function j(t){var r=N(t);return Math.sqrt(r)}function D(t,r,e,n){return(t*r+e*n)/(r+n)}function P(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return s(t)/t.length}function k(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+"_"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+"_"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if("number"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},X={nrd:function(t){var r=j(t),e=w(t);return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function B(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if("string"==typeof r){if(!V[r])throw new Error(\'Unknown kernel "\'+r+\'"\');n=V[r]}else n=r;if(void 0===e)o=X.nrd(t);else if("string"==typeof e){if(!X[e])throw new Error(\'Unknown bandwidth method "\'+e+\'"\');o=X[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var J=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/J*Math.exp(-t*t/2)))/1e4}for(var W=[],Y=0;Y<=3.09;Y+=.01)W.push(K(Y));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function H(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],l=r[u],s=o[l],c=0;c<n;c++)s[c]+=f[c];a[l]+=1}for(var h=0;h<e;h++){if(0===a[h])throw new Error("Centroid "+h+" has no friends");for(var v=o[h],p=0;p<n;p++)v[p]/=a[h]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error("must have exactly as many labels as points");for(var e=function(t){for(var r=1+l(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=P,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if("function"!=typeof t)throw new TypeError("func must be a function");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var l=0;l<i.length;l++)void 0===i[l]&&(i[l]=0);for(var s in a)s in i&&(u[+s]=a[s]*t.length);for(var c=u.length-1;c>=0;c--)u[c]<3&&(u[c-1]+=u[c],u.pop(),i[c-1]+=i[c],i.pop());for(var h=0;h<i.length;h++)o+=Math.pow(i[h]-u[h],2)/u[h];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var e=u(t);if(1===T(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=O(0,u,a,i),e[0][u]=0;for(var l=1;l<r.length;++l)q(l<r.length-1?l:n-1,n-1,l,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var l=o[f][i];a[f]=e.slice(l,i+1),f>0&&(i=l-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=D,t.combineVariances=function(t,r,e,n,o,a){var i=D(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),W.length-1);return t>=0?W[e]:+(1-W[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=l(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=H,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=B,t.kernelDensityEstimation=B,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,l=0,s=0,c=0;c<n;c++)u+=a=(o=t[c])[0],f+=i=o[1],l+=a*a,s+=a*i;e=f/n-(r=(n*s-u*f)/(n*l-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=l,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=P,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return c(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error("mode requires at last one data point");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),l=Math.floor(f.length/2),s=0;s<o;s++){E(f,a);var c=f.slice(0,l),h=f.slice(l,f.length),v=e(c)-e(h);u[s]=v}var p=0;if("two_side"===n)for(var g=0;g<=o;g++)Math.abs(u[g])>=Math.abs(i)&&(p+=1);else if("greater"===n)for(var d=0;d<=o;d++)u[d]>=i&&(p+=1);else for(var y=0;y<=o;y++)u[y]<=i&&(p+=1);return p/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*H(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=p,t.quantileRank=function(t,r){return m(u(t),r)},t.quantileRankSorted=m,t.quantileSorted=c,t.quickselect=h,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return F(t,r)/j(t)/j(r)},t.sampleCovariance=F,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),l=t.length;return l*a/((l-1)*(l-2)*Math.pow(f,3))},t.sampleStandardDeviation=j,t.sampleVariance=N,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=x,t.shuffleInPlace=E,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return l(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=W,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=s,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=N(t),l=N(r);if("number"==typeof i&&"number"==typeof u&&"number"==typeof f&&"number"==typeof l){var s=((o-1)*f+(a-1)*l)/(o+a-2);return(i-u-n)/Math.sqrt(s*(1/o+1/a))}},t.uniqueCountSorted=T,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=u.rawData,s=l.length;for(f=0;f<s;f++)n.push(l[f])}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var l=e.children.entries();try{for(var s=a(l),c=s.next();!c.done;c=s.next()){var h=n(c.value,2),v=h[0],p=h[1];if(v===t[i])return r(p,i+1)}}catch(g){u={error:g}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(p){i={error:p}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,l;if(u===t.length)return e.aggData(o,i);var s=e.children.entries();try{for(var c=a(s),h=c.next();!h.done;h=c.next()){var v=n(h.value,2),p=v[0],g=v[1];if(p===t[u])return r(g,u+1)}}catch(d){f={error:d}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=this.aggTree(u).rawData,s=l.length;for(f=0;f<s;f++)t.rawData.push(l[f])}}catch(c){r={error:c}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var l,s,c;if(0!==e.children.size)try{for(var h=o(e.children.entries()),v=h.next();!v.done;v=h.next()){var p=a(v.value,2),g=p[0];t(p[1],n(n({},u),((c={})[r[f]]=g,c)),f+1)}}catch(y){l={error:y}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(j){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new q(n||[]);return a._invoke=function(t,r,e){var n=c;return function(o,a){if(n===v)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw a;return N()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===g)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===c)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=v;var f=s(t,r,e);if("normal"===f.type){if(n=e.done?p:h,f.arg===g)continue;return{value:f.arg,done:e.done}}"throw"===f.type&&(n=p,e.method="throw",e.arg=f.arg)}}}(t,e,i),a}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(j){return{type:"throw",arg:j}}}t.wrap=l;var c="suspendedStart",h="suspendedYield",v="executing",p="completed",g={};function d(){}function y(){}function m(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(F([])));M&&M!==e&&n.call(M,a)&&(w=M);var E=m.prototype=d.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=s(t[o],t,a);if("throw"!==f.type){var l=f.arg,c=l.value;return c&&"object"===typeof c&&n.call(c,"__await")?r.resolve(c.__await).then((function(t){e("next",t,i,u)}),(function(t){e("throw",t,i,u)})):r.resolve(c).then((function(t){l.value=t,i(l)}),(function(t){return e("throw",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return g;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return g}var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,g;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,g):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function T(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function F(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:N}}function N(){return{value:r,done:!0}}return y.prototype=E.constructor=m,m.constructor=y,y.displayName=f(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(l(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(E),f(E,u,"Generator"),E[a]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=F,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(f&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),g},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),g}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:F(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),g}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){"use strict";e.r(r);var n={};e.r(n),e.d(n,"kruskal",(function(){return T})),e.d(n,"kruskalWithFullMST",(function(){return S}));var o={};function a(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){if(t){if("string"===typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function f(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?l(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function c(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){f=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(f)throw a}}}}e.r(o),e.d(o,"getFieldType",(function(){return q})),e.d(o,"getAllFieldTypes",(function(){return F})),e.d(o,"getFieldDistribution",(function(){return N})),e.d(o,"getAllFieldsDistribution",(function(){return j})),e.d(o,"getFieldEntropy",(function(){return D})),e.d(o,"getAllFieldsEntropy",(function(){return P})),e.d(o,"groupFields",(function(){return k}));function h(t){return JSON.parse(JSON.stringify(t))}function v(t,r){var e,n=new Map,o=c(t);try{for(o.s();!(e=o.n()).done;){var a=e.value[r];n.has(a)||n.set(a,0),n.set(a,n.get(a)+1)}}catch(i){o.e(i)}finally{o.f()}return f(n.entries())}function p(t){for(var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?"".concat(e,"(con-group)"):n,a=t.groupNumber,i=r.map((function(t){return t[e]})),u=Math.max.apply(Math,f(i)),l=Math.min.apply(Math,f(i)),s=(u-l)/a,c=[],h=0;h<a;h++){var v=l+h*s,p=l+(h+1)*s;c.push([v,p])}c[0][0]=-1/0,c[c.length-1][1]=1/0;for(var g=Math.max(1,Math.log10(Math.abs(l))-Math.log10(s))+1,d=function(t){var n=r[t],a=c.findIndex((function(t){return t[0]<=n[e]&&n[e]<t[1]})),i=c[a];n[o]="undefined"!==typeof i?"".concat(a+1,":[").concat(Number(i[0].toPrecision(g)),", ").concat(Number(i[1].toPrecision(g)),")"):"null"},y=0;y<r.length;y++)d(y);return r}function g(t){var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?"".concat(e,"(cat-group)"):n,i=t.groupNumber,u=v(r,e);u.sort((function(t,r){return r[1]-t[1]}));var f=u.map((function(t){return t[1]}));i=u.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<u.length-2;h++)if(5*u[h][1]>=f[h+1]&&u[h+1][1]/5<f[h+2]){i=h+2;break}if(i===u.length)return r.map((function(t){return s(s({},t),{},a({},o,t[e]))}));for(var p=new Set,g=i-1;g<u.length;g++)p.add(u[g][0]);var d,y=c(r);try{for(y.s();!(d=y.n()).done;){var m=d.value;p.has(m[e])?m[o]="others":m[o]=m[e]}}catch(w){y.e(w)}finally{y.f()}return r}function d(t,r){return v(t,r).every((function(t){return 1===t[1]}))}function y(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o}}catch(a){n.e(a)}finally{n.f()}return t.map((function(t){return t/e}))}var m=function(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o*Math.log2(o)}}catch(a){n.e(a)}finally{n.f()}return-e};var w=e(2);w.sum,w.max,w.mean,w.min;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function E(t,r,e){var n=M(t,r),o=M(t,e);t[n]=o,M(t,r),M(t,e)}function x(t,r,e){return t[e]===e?e:(t[e]=x(t,r,t[e]),r[e]=r[t[e]],t[e])}function _(t,r,e,n){var o=x(t,r,e),a=x(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,x(t,r,e),x(t,r,n)}function S(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,s=c(n);try{for(s.s();!(o=s.n()).done;){var h=o.value;M(i,h[0][0])!==M(i,h[0][1])&&(E(i,h[0][0],h[0][1]),a.push([h[0],h[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var p=new Set(i);if(p.size<=r||h[1]<e?l=!0:u=f(i),1===p.size)break}}catch(g){s.e(g)}finally{s.f()}return{edgesInMST:a,groups:u}}var T=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=c(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(x(o,a,u[0][0])!==x(o,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>r)continue;_(o,a,u[0][0],u[0][1])}for(var f=0;f<o.length;f++)o[f]=x(o,a,f);if(1===new Set(o).size)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<o.length;s++)l.has(o[s])||l.set(o[s],[]),l.get(o[s]).push(s);return l}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=c(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;M(a,u[0][0])!==M(a,u[0][1])&&E(a,u[0][0],u[0][1]);for(var f=0;f<a.length;f++)a[f]=M(a,f);if(new Set(a).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<a.length;s++)l.has(a[s])||l.set(a[s],[]),l.get(a[s]).push(s);return l}(e,a,l);var s,h=[],v=c(r.values());try{for(v.s();!(s=v.n()).done;){var p=s.value;h.push(p.map((function(t){return n[t]})))}}catch(g){v.e(g)}finally{v.f()}return h};e(1);e(0);var O;!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(O||(O={}));function q(t,r){return function(t,r){return t.every((function(t){return Number(t[r])>=1800&&Number(t[r])<=2200||!isNaN(Date.parse(t[r]))&&"string"===typeof t[r]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[r])||"undefined"===typeof t[r]||null===t[r]}))}(t,r)?"temporal":function(t,r){return t.every((function(t){return"number"===typeof t[r]||"undefined"===typeof t[r]||null===t[r]}))}(t,r)?"quantitative":(function(t,r){t.every((function(t){return"string"===typeof t[r]||"undefined"===typeof t[r]||null===t[r]}))}(t,r),"nominal")}function F(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({name:a,type:q(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function N(t,r){return v(t,r).map((function(t){return{memberName:t[0],count:t[1]}}))}function j(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({fieldName:a,distribution:N(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function D(t,r){var e=v(t,r),n=y(e.map((function(t){return t[1]})));return{fieldName:r,entropy:m(n),maxEntropy:Math.log2(e.length)}}function P(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push(D(t,a))}}catch(i){o.e(i)}finally{o.f()}return n}function k(t,r){var e,n=h(t),o=[],a=c(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,u="".concat(i.name,"(group)");"quantitative"===i.type&&v(t,i.name).length>50?d(t,i.name)||(n=p({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:"ordinal"})):("ordinal"===i.type||"nominal"===i.type)&&v(t,i.name).length>25&&(d(t,i.name)||(n=g({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:i.type})))}}catch(f){a.e(f)}finally{a.f()}return{groupedData:n,fields:r,newFields:o}}var L;!function(t){t.outlier="default_outlier",t.trend="default_trend"}(L||(L={}));const{getAllFieldsDistribution:A,getAllFieldTypes:I,getAllFieldsEntropy:C}=o;var z;self.addEventListener("message",(z=t=>{const{fields:r,dataSource:e}=t.data;let n=[];for(let a=0;a<r.length;a++)"string"===typeof r[a]?n.push(r[a]):n.push(r[a].name);try{const t=A(e,n),o=I(e,n).map(((t,e)=>({...t,type:"string"===typeof r[e]?t.type:r[e].type}))),a=C(e,n);self.postMessage({success:!0,data:t.map(((t,r)=>({...t,...a[r],type:o[r].type})))})}catch(o){self.postMessage({success:!1,message:o.toString()})}},function(t){var r=(new Date).getTime();try{z(t)}finally{var e=(new Date).getTime()-r;console.log("Task [".concat(z.name,"] cost ").concat(e," ms."))}}),!1)}]);\n//# sourceMappingURL=fieldsSummary.worker.00e3ebd5.worker.js.map',"Worker",void 0,r.p+"static/js/fieldsSummary.worker.00e3ebd5.worker.js")}function S(){return b()('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var o in t)e.d(n,o,function(r){return t[r]}.bind(null,o));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="./",e(e.s=9)}([function(t,r,e){t.exports=e(8)},function(t,r,e){"use strict";this&&this.__assign;Object.defineProperty(r,"__esModule",{value:!0});var n=e(4),o=e(7),a=e(3),i={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(t){var r=t.type,e=t.aggFunc,o=void 0===e?a.count:e,i=t.factTable,u=void 0===i?[]:i,f=t.dimensions,l=void 0===f?[]:f,s=t.measures,c=void 0===s?[]:s;switch(r){case"period":return new n.periodCube({aggFunc:o,factTable:u,dimensions:l,measures:c});case"moment":default:return new n.momentCube({aggFunc:o,factTable:u,dimensions:l,measures:c})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,f=t.operator,l=t.dataSource,s=u({type:"moment",aggFunc:i[f]||a.count,dimensions:r,measures:e,factTable:l}),c=o.tree2Table({dimensions:r,measures:e,cube:s});return c.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),c},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(3))},function(t,r,e){!function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,o=1;o<t.length;o++)r=e+t[o],Math.abs(e)>=Math.abs(t[o])?n+=e-r+t[o]:n+=t[o]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function n(t,r){var n,o,a=e(t),i=0;if(2===r)for(o=0;o<t.length;o++)i+=(n=t[o]-a)*n;else for(o=0;o<t.length;o++)i+=Math.pow(t[o]-a,r);return i}function o(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function a(t){if(1===t.length)return 0;var r=o(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,o=1,a=1;a<t.length+1;a++)t[a]!==r?(o>n&&(n=o,e=r),o=1,r=t[a]):o++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function f(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function l(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function s(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function c(t,r){var e=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function h(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var o=n-e+1,a=r-e+1,i=Math.log(o),u=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*u*(o-u)/o);a-o/2<0&&(f*=-1),h(t,r,Math.max(e,Math.floor(r-a*u/o+f)),Math.min(n,Math.floor(r+(o-a)*u/o+f)))}var l=t[r],s=e,c=n;for(v(t,e,r),t[n]>l&&v(t,e,n);s<c;){for(v(t,s,c),s++,c--;t[s]<l;)s++;for(;t[c]>l;)c--}t[e]===l?v(t,e,c):v(t,++c,n),c<=r&&(e=c+1),r<=c&&(n=c-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function g(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(y(t.length,r[n]));e.push(t.length-1),e.sort(d);for(var o=[0,e.length-1];o.length;){var a=Math.ceil(o.pop()),i=Math.floor(o.pop());if(!(a-i<=1)){var u=Math.floor((i+a)/2);p(t,e[u],Math.floor(e[i]),Math.ceil(e[a])),o.push(i,u,u,a)}}}(e,r);for(var n=[],o=0;o<r.length;o++)n[o]=c(e,r[o]);return n}return p(e,y(e.length,r),0,e.length-1),c(e,r)}function p(t,r,e,n){r%1==0?h(t,r,e,n):(h(t,r=Math.floor(r),e,n),h(t,r+1,r+1,n))}function d(t,r){return t-r}function y(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function m(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r<=t[e=n+o>>>1]?o=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,o=t.length;n<o;)r>=t[e=n+o>>>1]?n=-~e:o=e;return n}(t,r);if(n===e)return e/t.length;var o=n-e+1;return o*(n+e)/2/o/t.length}function w(t){var r=g(t,.75),e=g(t,.25);if("number"==typeof r&&"number"==typeof e)return r-e}function b(t){return+g(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function E(t,r){r=r||Math.random;for(var e,n,o=t.length;o>0;)n=Math.floor(r()*o--),e=t[o],t[o]=t[n],t[n]=e;return t}function x(t,r){return E(t.slice(),r)}function _(t,r,e){return x(t,e).slice(0,r)}function S(t,r){for(var e=[],n=0;n<t;n++){for(var o=[],a=0;a<r;a++)o.push(0);e.push(o)}return e}function O(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function T(t,r,e,n){var o;if(t>0){var a=(e[r]-e[t-1])/(r-t+1);o=n[r]-n[t-1]-(r-t+1)*a*a}else o=n[r]-e[r]*e[r]/(r+1);return o<0?0:o}function q(t,r,e,n,o,a,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],o[e][u]=u;var f=e;t>e&&(f=Math.max(f,o[e][t-1]||0)),f=Math.max(f,o[e-1][u]||0);var l,s,c,h=u-1;r<n[0].length-1&&(h=Math.min(h,o[e][r+1]||0));for(var v=h;v>=f&&!((l=T(v,u,a,i))+n[e-1][f-1]>=n[e][u]);--v)(s=T(f,u,a,i)+n[e-1][f-1])<n[e][u]&&(n[e][u]=s,o[e][u]=f),f++,(c=l+n[e-1][v-1])<n[e][u]&&(n[e][u]=c,o[e][u]=v);q(t,u-1,e,n,o,a,i),q(u+1,r,e,n,o,a,i)}}function N(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=e(t),o=e(r),a=0,i=0;i<t.length;i++)a+=(t[i]-n)*(r[i]-o);return a/(t.length-1)}function j(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function F(t){var r=j(t);return Math.sqrt(r)}function P(t,r,e,n){return(t*r+e*n)/(r+n)}function D(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return s(t)/t.length}function k(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var o=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+"_"+o]=(this.data[r][n][o]||0)/this.totalCount:e[r][n+"_"+o]=0}var a={};for(r in e)for(var i in a[r]=0,e[r])a[r]+=e[r][i];return a};var A=function(){this.weights=[],this.bias=0};A.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},A.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if("number"==typeof e&&e!==r){for(var n=r-e,o=0;o<this.weights.length;o++)this.weights[o]+=n*t[o];this.bias+=n}return this};var I=1e-4;function C(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,e=2;e<=t;e++)r*=e;return r}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},U=Math.sqrt(2*Math.PI),V={gaussian:function(t){return Math.exp(-.5*t*t)/U}},X={nrd:function(t){var r=F(t),e=w(t);return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function B(t,r,e){var n,o;if(void 0===r)n=V.gaussian;else if("string"==typeof r){if(!V[r])throw new Error(\'Unknown kernel "\'+r+\'"\');n=V[r]}else n=r;if(void 0===e)o=X.nrd(t);else if("string"==typeof e){if(!X[e])throw new Error(\'Unknown bandwidth method "\'+e+\'"\');o=X[e](t)}else o=e;return function(r){var e=0,a=0;for(e=0;e<t.length;e++)a+=n((r-t[e])/o);return a/o/t.length}}var J=Math.sqrt(2*Math.PI);function K(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/J*Math.exp(-t*t/2)))/1e4}for(var W=[],Y=0;Y<=3.09;Y+=.01)W.push(K(Y));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function H(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var o=t[n]-r[n];e+=o*o}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,o=0;o<r.length;o++){var a=Z(t,r[o]);a<e&&(e=a,n=o)}return n}))}function rt(t,r,e){for(var n=t[0].length,o=S(e,n),a=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var f=t[u],l=r[u],s=o[l],c=0;c<n;c++)s[c]+=f[c];a[l]+=1}for(var h=0;h<e;h++){if(0===a[h])throw new Error("Centroid "+h+" has no friends");for(var v=o[h],g=0;g<n;g++)v[g]/=a[h]}return o}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error("must have exactly as many labels as points");for(var e=function(t){for(var r=1+l(t),e=Array(r),n=0;n<t.length;n++){var o=t[n];void 0===e[o]&&(e[o]=[]),e[o].push(n)}return e}(r),n=function(t){for(var r=t.length,e=S(r,r),n=0;n<r;n++)for(var o=0;o<n;o++)e[n][o]=Z(t[n],t[o]),e[o][n]=e[n][o];return e}(t),o=[],a=0;a<t.length;a++){var i=0;if(e[r[a]].length>1){var u=at(a,e[r[a]],n),f=ot(a,r,e,n);i=(f-u)/Math.max(u,f)}o.push(i)}return o}function ot(t,r,e,n){for(var o=r[t],a=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==o){var u=at(t,e[i],n);u<a&&(a=u)}return a}function at(t,r,e){for(var n=0,o=0;o<r.length;o++)n+=e[t][r[o]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=A,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=D,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,o=[],a=1;do{o[e]=a*Math.pow(r,e)*Math.pow(1-r,t-e),n+=o[e],a=a*(t-++e+1)/e}while(n<.9999);return o}},t.bisect=function(t,r,e,n,o){if("function"!=typeof t)throw new TypeError("func must be a function");for(var a=0;a<n;a++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<o)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=R,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var o=0,a=r(e(t)),i=[],u=[],f=0;f<t.length;f++)void 0===i[t[f]]&&(i[t[f]]=0),i[t[f]]++;for(var l=0;l<i.length;l++)void 0===i[l]&&(i[l]=0);for(var s in a)s in i&&(u[+s]=a[s]*t.length);for(var c=u.length-1;c>=0;c--)u[c]<3&&(u[c-1]+=u[c],u.pop(),i[c-1]+=i[c],i.pop());for(var h=0;h<i.length;h++)o+=Math.pow(i[h]-u[h],2)/u[h];var v=i.length-1-1;return R[v][n]<o},t.chunk=function(t,r){var e=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var e=u(t);if(1===O(e))return[e];var n=S(r,e.length),o=S(r,e.length);!function(t,r,e){for(var n=r[0].length,o=t[Math.floor(n/2)],a=[],i=[],u=0,f=void 0;u<n;++u)f=t[u]-o,0===u?(a.push(f),i.push(f*f)):(a.push(a[u-1]+f),i.push(i[u-1]+f*f)),r[0][u]=T(0,u,a,i),e[0][u]=0;for(var l=1;l<r.length;++l)q(l<r.length-1?l:n-1,n-1,l,r,e,a,i)}(e,n,o);for(var a=[],i=o[0].length-1,f=o.length-1;f>=0;f--){var l=o[f][i];a[f]=e.slice(l,i+1),f>0&&(i=l-1)}return a},t.combinations=function t(r,e){var n,o,a,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(a=t(r.slice(n+1,r.length),e-1),o=0;o<a.length;o++)(i=a[o]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],o=0;o<r.length;o++)if(1===e)n.push([r[o]]);else for(var a=t(r.slice(o,r.length),e-1),i=0;i<a.length;i++)n.push([r[o]].concat(a[i]));return n},t.combineMeans=P,t.combineVariances=function(t,r,e,n,o,a){var i=P(r,e,o,a);return(e*(t+Math.pow(r-i,2))+a*(n+Math.pow(o-i,2)))/(e+a)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),W.length-1);return t>=0?W[e]:+(1-W[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=f(t),n=l(t),o=[e],a=(n-e)/r,i=1;i<r;i++)o.push(o[0]+a*i);return o.push(n),o},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=C,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:C(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=z[0],e=1;e<15;e++)r+=z[e]/(t+e);var n=5.2421875+t;return G+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=H,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,o=_(t,r,e),a=null,i=Number.MAX_VALUE;0!==i;)n=o,i=et(o=rt(t,a=tt(t,o),r),n);return{labels:a,centroids:o}},t.kde=B,t.kernelDensityEstimation=B,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var o,a,i,u=0,f=0,l=0,s=0,c=0;c<n;c++)u+=a=(o=t[c])[0],f+=i=o[1],l+=a*a,s+=a*i;e=f/n-(r=(n*s-u*f)/(n*l-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=l,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=D,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return c(t,.5)},t.min=f,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,o=0;o<t.length;o++){var a=e.get(t[o]);void 0===a?a=1:a++,a>n&&(r=t[o],n=a),e.set(t[o],a)}if(0===n)throw new Error("mode requires at last one data point");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=A,t.permutationTest=function(t,r,n,o,a){if(void 0===o&&(o=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var i=e(t)-e(r),u=new Array(o),f=t.concat(r),l=Math.floor(f.length/2),s=0;s<o;s++){E(f,a);var c=f.slice(0,l),h=f.slice(l,f.length),v=e(c)-e(h);u[s]=v}var g=0;if("two_side"===n)for(var p=0;p<=o;p++)Math.abs(u[p])>=Math.abs(i)&&(g+=1);else if("greater"===n)for(var d=0;d<=o;d++)u[d]>=i&&(g+=1);else for(var y=0;y<=o;y++)u[y]<=i&&(g+=1);return g/o},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var o=0;o<t.length;)if(r[o]<o){var a=0;o%2!=0&&(a=r[o]);var i=t[a];t[a]=t[o],t[o]=i,e.push(t.slice()),r[o]++,o=0}else r[o]=0,o++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],o=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/o,e+=n[r],o*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*H(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=g,t.quantileRank=function(t,r){return m(u(t),r)},t.quantileRankSorted=m,t.quantileSorted=c,t.quickselect=h,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var o=e/t.length,a=0,i=0;i<t.length;i++)a+=Math.pow(o-t[i][1],2);for(var u=0,f=0;f<t.length;f++)u+=Math.pow(t[f][1]-r(t[f][0]),2);return 1-u/a},t.relativeError=it,t.rms=k,t.rootMeanSquare=k,t.sample=_,t.sampleCorrelation=function(t,r){return N(t,r)/F(t)/F(r)},t.sampleCovariance=N,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,o=e(t),a=0,i=0,u=0;u<r;u++)a+=(n=t[u]-o)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(a*a)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,n=e(t),o=0,a=0,i=0;i<t.length;i++)o+=(r=t[i]-n)*r,a+=r*r*r;var u=t.length-1,f=Math.sqrt(o/u),l=t.length;return l*a/((l-1)*(l-2)*Math.pow(f,3))},t.sampleStandardDeviation=F,t.sampleVariance=j,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,o=[],a=0;a<r;a++){var i=Math.floor(e()*n);o.push(t[i])}return o},t.shuffle=x,t.shuffleInPlace=E,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return l(nt(t,r))},t.standardDeviation=a,t.standardNormalTable=W,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=s,t.tTest=function(t,r){return(e(t)-r)/(a(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var o=t.length,a=r.length;if(!o||!a)return null;n||(n=0);var i=e(t),u=e(r),f=j(t),l=j(r);if("number"==typeof i&&"number"==typeof u&&"number"==typeof f&&"number"==typeof l){var s=((o-1)*f+(a-1)*l)/(o+a-2);return(i-u-n)/Math.sqrt(s*(1/o+1/a))}},t.uniqueCountSorted=O,t.variance=o,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=t[n][r]}))},o=0,a=t.length;o<a;o++)n(o);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,o=t.length;n<o;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,o){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},o=0,a=t.length;o<a;o++)n(o);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(5);r.periodCube=n.default;var o=e(6);r.momentCube=o.default},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,o(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var o=a(e),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=u.rawData,s=l.length;for(f=0;f<s;f++)n.push(l[f])}}catch(c){t={error:c}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,o=(r.aggFunc,r.measures);return function r(e,i){var u,f;if(i===t.length)return e.aggData(o);var l=e.children.entries();try{for(var s=a(l),c=s.next();!c.done;c=s.next()){var h=n(c.value,2),v=h[0],g=h[1];if(v===t[i])return r(g,i+1)}}catch(p){u={error:p}}finally{try{c&&!c.done&&(f=s.return)&&f.call(s)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value;this.aggTree(u)}}catch(f){r={error:f}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i},o=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,o(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,o){var i,u;if(o===t.length)return e;var f=e.children.entries();try{for(var l=a(f),s=l.next();!s.done;s=l.next()){var c=n(s.value,2),h=c[0],v=c[1];if(h===t[o])return r(v,o+1)}}catch(g){i={error:g}}finally{try{s&&!s.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,o=r.aggFunc,i=r.measures;return function r(e,u){var f,l;if(u===t.length)return e.aggData(o,i);var s=e.children.entries();try{for(var c=a(s),h=c.next();!h.done;h=c.next()){var v=n(h.value,2),g=v[0],p=v[1];if(g===t[u])return r(p,u+1)}}catch(d){f={error:d}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(f)throw f.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,o=void 0===n?this.factTable:n,a=t.dimensions,i=void 0===a?this.dimensions:a,u=t.measures,f=void 0===u?this.measures:u;i!==this.dimensions||o!==this.factTable?(this.dimensions=i,this.factTable=o,this.measures=f,this.aggFunc=e,this.buildTree(),this.aggTree()):f===this.measures&&e===this.aggFunc||(this.measures=f,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var o=a(n),i=o.next();!i.done;i=o.next()){var u=i.value,f=void 0,l=this.aggTree(u).rawData,s=l.length;for(f=0;f<s;f++)t.rawData.push(l[f])}}catch(c){r={error:c}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var o in r=arguments[e])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,o,a=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=a.return)&&e.call(a)}finally{if(o)throw o.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,f){var l,s,c;if(0!==e.children.size)try{for(var h=o(e.children.entries()),v=h.next();!v.done;v=h.next()){var g=a(v.value,2),p=g[0];t(g[1],n(n({},u),((c={})[r[f]]=p,c)),f+1)}}catch(y){l={error:y}}finally{try{v&&!v.done&&(s=h.return)&&s.call(h)}finally{if(l)throw l.error}}else{var d=e._aggData;i.push(n(n({},u),d))}}(e.tree,{},0),i}},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function f(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{f({},"")}catch(F){f=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof d?r:d,a=Object.create(o.prototype),i=new q(n||[]);return a._invoke=function(t,r,e){var n=c;return function(o,a){if(n===v)throw new Error("Generator is already running");if(n===g){if("throw"===o)throw a;return j()}for(e.method=o,e.arg=a;;){var i=e.delegate;if(i){var u=S(i,e);if(u){if(u===p)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===c)throw n=g,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=v;var f=s(t,r,e);if("normal"===f.type){if(n=e.done?g:h,f.arg===p)continue;return{value:f.arg,done:e.done}}"throw"===f.type&&(n=g,e.method="throw",e.arg=f.arg)}}}(t,e,i),a}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(F){return{type:"throw",arg:F}}}t.wrap=l;var c="suspendedStart",h="suspendedYield",v="executing",g="completed",p={};function d(){}function y(){}function m(){}var w={};w[a]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(N([])));M&&M!==e&&n.call(M,a)&&(w=M);var E=m.prototype=d.prototype=Object.create(w);function x(t){["next","throw","return"].forEach((function(r){f(t,r,(function(t){return this._invoke(r,t)}))}))}function _(t,r){function e(o,a,i,u){var f=s(t[o],t,a);if("throw"!==f.type){var l=f.arg,c=l.value;return c&&"object"===typeof c&&n.call(c,"__await")?r.resolve(c.__await).then((function(t){e("next",t,i,u)}),(function(t){e("throw",t,i,u)})):r.resolve(c).then((function(t){l.value=t,i(l)}),(function(t){return e("throw",t,i,u)}))}u(f.arg)}var o;this._invoke=function(t,n){function a(){return new r((function(r,o){e(t,n,r,o)}))}return o=o?o.then(a,a):a()}}function S(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,S(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var o=s(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function O(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function T(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function q(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:r,done:!0}}return y.prototype=E.constructor=m,m.constructor=y,y.displayName=f(m,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,f(t,u,"GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},x(_.prototype),_.prototype[i]=function(){return this},t.AsyncIterator=_,t.async=function(r,e,n,o,a){void 0===a&&(a=Promise);var i=new _(l(r,e,n,o),a);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(E),f(E,u,"Generator"),E[a]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,q.prototype={constructor:q,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return u.type="throw",u.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],u=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(f&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=r&&r<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=r,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),T(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;T(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:N(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),p}},t}(t.exports);try{regeneratorRuntime=n}catch(o){Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){"use strict";e.r(r);var n={};e.r(n),e.d(n,"kruskal",(function(){return O})),e.d(n,"kruskalWithFullMST",(function(){return S}));var o={};function a(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function u(t,r){if(t){if("string"===typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,r):void 0}}function f(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?l(Object(e),!0).forEach((function(r){a(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function c(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=u(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,f=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return i=t.done,t},e:function(t){f=!0,a=t},f:function(){try{i||null==e.return||e.return()}finally{if(f)throw a}}}}e.r(o),e.d(o,"getFieldType",(function(){return q})),e.d(o,"getAllFieldTypes",(function(){return N})),e.d(o,"getFieldDistribution",(function(){return j})),e.d(o,"getAllFieldsDistribution",(function(){return F})),e.d(o,"getFieldEntropy",(function(){return P})),e.d(o,"getAllFieldsEntropy",(function(){return D})),e.d(o,"groupFields",(function(){return k}));function h(t){return JSON.parse(JSON.stringify(t))}function v(t,r){var e,n=new Map,o=c(t);try{for(o.s();!(e=o.n()).done;){var a=e.value[r];n.has(a)||n.set(a,0),n.set(a,n.get(a)+1)}}catch(i){o.e(i)}finally{o.f()}return f(n.entries())}function g(t){for(var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?"".concat(e,"(con-group)"):n,a=t.groupNumber,i=r.map((function(t){return t[e]})),u=Math.max.apply(Math,f(i)),l=Math.min.apply(Math,f(i)),s=(u-l)/a,c=[],h=0;h<a;h++){var v=l+h*s,g=l+(h+1)*s;c.push([v,g])}c[0][0]=-1/0,c[c.length-1][1]=1/0;for(var p=Math.max(1,Math.log10(Math.abs(l))-Math.log10(s))+1,d=function(t){var n=r[t],a=c.findIndex((function(t){return t[0]<=n[e]&&n[e]<t[1]})),i=c[a];n[o]="undefined"!==typeof i?"".concat(a+1,":[").concat(Number(i[0].toPrecision(p)),", ").concat(Number(i[1].toPrecision(p)),")"):"null"},y=0;y<r.length;y++)d(y);return r}function p(t){var r=t.dataSource,e=t.field,n=t.newField,o=void 0===n?"".concat(e,"(cat-group)"):n,i=t.groupNumber,u=v(r,e);u.sort((function(t,r){return r[1]-t[1]}));var f=u.map((function(t){return t[1]}));i=u.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<u.length-2;h++)if(5*u[h][1]>=f[h+1]&&u[h+1][1]/5<f[h+2]){i=h+2;break}if(i===u.length)return r.map((function(t){return s(s({},t),{},a({},o,t[e]))}));for(var g=new Set,p=i-1;p<u.length;p++)g.add(u[p][0]);var d,y=c(r);try{for(y.s();!(d=y.n()).done;){var m=d.value;g.has(m[e])?m[o]="others":m[o]=m[e]}}catch(w){y.e(w)}finally{y.f()}return r}function d(t,r){return v(t,r).every((function(t){return 1===t[1]}))}function y(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o}}catch(a){n.e(a)}finally{n.f()}return t.map((function(t){return t/e}))}var m=function(t){var r,e=0,n=c(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e+=o*Math.log2(o)}}catch(a){n.e(a)}finally{n.f()}return-e};var w=e(2);w.sum,w.max,w.mean,w.min;function b(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function M(t,r){return t[r]===r?r:t[r]=M(t,t[r])}function E(t,r,e){var n=M(t,r),o=M(t,e);t[n]=o,M(t,r),M(t,e)}function x(t,r,e){return t[e]===e?e:(t[e]=x(t,r,t[e]),r[e]=r[t[e]],t[e])}function _(t,r,e,n){var o=x(t,r,e),a=x(t,r,n),i=r[o],u=r[a];t[o]=a,r[o]=r[a]=i+u,x(t,r,e),x(t,r,n)}function S(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=[],i=t.map((function(t,r){return r})),u=f(i),l=!1,s=c(n);try{for(s.s();!(o=s.n()).done;){var h=o.value;M(i,h[0][0])!==M(i,h[0][1])&&(E(i,h[0][0],h[0][1]),a.push([h[0],h[1],l]));for(var v=0;v<i.length;v++)i[v]=M(i,v);var g=new Set(i);if(g.size<=r||h[1]<e?l=!0:u=f(i),1===g.size)break}}catch(p){s.e(p)}finally{s.f()}return{edgesInMST:a,groups:u}}var O=function(t){var r,e=t.matrix,n=t.measures,o=(t.method,t.groupMaxSize),a=void 0===o?4:o,i=t.limitSize,u=void 0!==i&&i,f=t.threshold,l=void 0===f?0:f;r=u?function(t,r){var e=b(t);e.sort((function(t,r){return r[1]-t[1]}));var n,o=t.map((function(t,r){return r})),a=t.map((function(){return 1})),i=c(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(x(o,a,u[0][0])!==x(o,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>r)continue;_(o,a,u[0][0],u[0][1])}for(var f=0;f<o.length;f++)o[f]=x(o,a,f);if(1===new Set(o).size)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<o.length;s++)l.has(o[s])||l.set(o[s],[]),l.get(o[s]).push(s);return l}(e,a):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=b(t);n.sort((function(t,r){return r[1]-t[1]}));var o,a=t.map((function(t,r){return r})),i=c(n);try{for(i.s();!(o=i.n()).done;){var u=o.value;M(a,u[0][0])!==M(a,u[0][1])&&E(a,u[0][0],u[0][1]);for(var f=0;f<a.length;f++)a[f]=M(a,f);if(new Set(a).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var l=new Map,s=0;s<a.length;s++)l.has(a[s])||l.set(a[s],[]),l.get(a[s]).push(s);return l}(e,a,l);var s,h=[],v=c(r.values());try{for(v.s();!(s=v.n()).done;){var g=s.value;h.push(g.map((function(t){return n[t]})))}}catch(p){v.e(p)}finally{v.f()}return h};e(1);e(0);var T;!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(T||(T={}));function q(t,r){return function(t,r){return t.every((function(t){return Number(t[r])>=1800&&Number(t[r])<=2200||!isNaN(Date.parse(t[r]))&&"string"===typeof t[r]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(t[r])||"undefined"===typeof t[r]||null===t[r]}))}(t,r)?"temporal":function(t,r){return t.every((function(t){return"number"===typeof t[r]||"undefined"===typeof t[r]||null===t[r]}))}(t,r)?"quantitative":(function(t,r){t.every((function(t){return"string"===typeof t[r]||"undefined"===typeof t[r]||null===t[r]}))}(t,r),"nominal")}function N(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({name:a,type:q(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function j(t,r){return v(t,r).map((function(t){return{memberName:t[0],count:t[1]}}))}function F(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push({fieldName:a,distribution:j(t,a)})}}catch(i){o.e(i)}finally{o.f()}return n}function P(t,r){var e=v(t,r),n=y(e.map((function(t){return t[1]})));return{fieldName:r,entropy:m(n),maxEntropy:Math.log2(e.length)}}function D(t,r){var e,n=[],o=c(r);try{for(o.s();!(e=o.n()).done;){var a=e.value;n.push(P(t,a))}}catch(i){o.e(i)}finally{o.f()}return n}function k(t,r){var e,n=h(t),o=[],a=c(r);try{for(a.s();!(e=a.n()).done;){var i=e.value,u="".concat(i.name,"(group)");"quantitative"===i.type&&v(t,i.name).length>50?d(t,i.name)||(n=g({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:"ordinal"})):("ordinal"===i.type||"nominal"===i.type)&&v(t,i.name).length>25&&(d(t,i.name)||(n=p({dataSource:n,field:i.name,newField:u,groupNumber:8}),o.push({name:u,type:i.type})))}}catch(f){a.e(f)}finally{a.f()}return{groupedData:n,fields:r,newFields:o}}var L;!function(t){t.outlier="default_outlier",t.trend="default_trend"}(L||(L={}));var A;self.addEventListener("message",(A=t=>{try{const{dataSource:r,fields:e}=t.data,n=o.groupFields(r,e);self.postMessage({success:!0,data:n})}catch(r){self.postMessage({success:!1,message:r.toString()})}},function(t){var r=(new Date).getTime();try{A(t)}finally{var e=(new Date).getTime()-r;console.log("Task [".concat(A.name,"] cost ").concat(e," ms."))}}),!1)}]);\n//# sourceMappingURL=groupFields.worker.ec050abe.worker.js.map',"Worker",void 0,r.p+"static/js/groupFields.worker.ec050abe.worker.js")}function k(){return b()('!function(t){var r={};function e(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:n})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,r){if(1&r&&(t=e(t)),8&r)return t;if(4&r&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)e.d(n,a,function(r){return t[r]}.bind(null,a));return n},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},e.p="./",e(e.s=9)}([function(t,r,e){t.exports=e(4)},function(t,r,e){!function(t){"use strict";function r(t){if(0===t.length)return 0;for(var r,e=t[0],n=0,a=1;a<t.length;a++)r=e+t[a],Math.abs(e)>=Math.abs(t[a])?n+=e-r+t[a]:n+=t[a]-r+e,e=r;return e+n}function e(t){if(0===t.length)throw new Error("mean requires at least one data point");return r(t)/t.length}function n(t,r){var n,a,o=e(t),i=0;if(2===r)for(a=0;a<t.length;a++)i+=(n=t[a]-o)*n;else for(a=0;a<t.length;a++)i+=Math.pow(t[a]-o,r);return i}function a(t){if(0===t.length)throw new Error("variance requires at least one data point");return n(t,2)/t.length}function o(t){if(1===t.length)return 0;var r=a(t);return Math.sqrt(r)}function i(t){if(0===t.length)throw new Error("mode requires at least one data point");if(1===t.length)return t[0];for(var r=t[0],e=NaN,n=0,a=1,o=1;o<t.length+1;o++)t[o]!==r?(a>n&&(n=a,e=r),a=1,r=t[o]):a++;return e}function u(t){return t.slice().sort((function(t,r){return t-r}))}function s(t){if(0===t.length)throw new Error("min requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]<r&&(r=t[e]);return r}function c(t){if(0===t.length)throw new Error("max requires at least one data point");for(var r=t[0],e=1;e<t.length;e++)t[e]>r&&(r=t[e]);return r}function f(t){for(var r=0,e=0;e<t.length;e++)r+=t[e];return r}function h(t,r){var e=t.length*r;if(0===t.length)throw new Error("quantile requires at least one data point.");if(r<0||r>1)throw new Error("quantiles must be between 0 and 1");return 1===r?t[t.length-1]:0===r?t[0]:e%1!=0?t[Math.ceil(e)-1]:t.length%2==0?(t[e-1]+t[e])/2:t[e]}function l(t,r,e,n){for(e=e||0,n=n||t.length-1;n>e;){if(n-e>600){var a=n-e+1,o=r-e+1,i=Math.log(a),u=.5*Math.exp(2*i/3),s=.5*Math.sqrt(i*u*(a-u)/a);o-a/2<0&&(s*=-1),l(t,r,Math.max(e,Math.floor(r-o*u/a+s)),Math.min(n,Math.floor(r+(a-o)*u/a+s)))}var c=t[r],f=e,h=n;for(v(t,e,r),t[n]>c&&v(t,e,n);f<h;){for(v(t,f,h),f++,h--;t[f]<c;)f++;for(;t[h]>c;)h--}t[e]===c?v(t,e,h):v(t,++h,n),h<=r&&(e=h+1),r<=h&&(n=h-1)}}function v(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function p(t,r){var e=t.slice();if(Array.isArray(r)){!function(t,r){for(var e=[0],n=0;n<r.length;n++)e.push(m(t.length,r[n]));e.push(t.length-1),e.sort(g);for(var a=[0,e.length-1];a.length;){var o=Math.ceil(a.pop()),i=Math.floor(a.pop());if(!(o-i<=1)){var u=Math.floor((i+o)/2);d(t,e[u],Math.floor(e[i]),Math.ceil(e[o])),a.push(i,u,u,o)}}}(e,r);for(var n=[],a=0;a<r.length;a++)n[a]=h(e,r[a]);return n}return d(e,m(e.length,r),0,e.length-1),h(e,r)}function d(t,r,e,n){r%1==0?l(t,r,e,n):(l(t,r=Math.floor(r),e,n),l(t,r+1,r+1,n))}function g(t,r){return t-r}function m(t,r){var e=t*r;return 1===r?t-1:0===r?0:e%1!=0?Math.ceil(e)-1:t%2==0?e-.5:e}function y(t,r){if(r<t[0])return 0;if(r>t[t.length-1])return 1;var e=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r<=t[e=n+a>>>1]?a=e:n=-~e;return n}(t,r);if(t[e]!==r)return e/t.length;e++;var n=function(t,r){for(var e=0,n=0,a=t.length;n<a;)r>=t[e=n+a>>>1]?n=-~e:a=e;return n}(t,r);if(n===e)return e/t.length;var a=n-e+1;return a*(n+e)/2/a/t.length}function w(t){var r=p(t,.75),e=p(t,.25);if("number"==typeof r&&"number"==typeof e)return r-e}function b(t){return+p(t,.5)}function M(t){for(var r=b(t),e=[],n=0;n<t.length;n++)e.push(Math.abs(t[n]-r));return b(e)}function S(t,r){r=r||Math.random;for(var e,n,a=t.length;a>0;)n=Math.floor(r()*a--),e=t[a],t[a]=t[n],t[n]=e;return t}function E(t,r){return S(t.slice(),r)}function x(t,r,e){return E(t,e).slice(0,r)}function _(t,r){for(var e=[],n=0;n<t;n++){for(var a=[],o=0;o<r;o++)a.push(0);e.push(a)}return e}function k(t){for(var r,e=0,n=0;n<t.length;n++)0!==n&&t[n]===r||(r=t[n],e++);return e}function D(t,r,e,n){var a;if(t>0){var o=(e[r]-e[t-1])/(r-t+1);a=n[r]-n[t-1]-(r-t+1)*o*o}else a=n[r]-e[r]*e[r]/(r+1);return a<0?0:a}function T(t,r,e,n,a,o,i){if(!(t>r)){var u=Math.floor((t+r)/2);n[e][u]=n[e-1][u-1],a[e][u]=u;var s=e;t>e&&(s=Math.max(s,a[e][t-1]||0)),s=Math.max(s,a[e-1][u]||0);var c,f,h,l=u-1;r<n[0].length-1&&(l=Math.min(l,a[e][r+1]||0));for(var v=l;v>=s&&!((c=D(v,u,o,i))+n[e-1][s-1]>=n[e][u]);--v)(f=D(s,u,o,i)+n[e-1][s-1])<n[e][u]&&(n[e][u]=f,a[e][u]=s),s++,(h=c+n[e-1][v-1])<n[e][u]&&(n[e][u]=h,a[e][u]=v);T(t,u-1,e,n,a,o,i),T(u+1,r,e,n,a,o,i)}}function z(t,r){if(t.length!==r.length)throw new Error("sampleCovariance requires samples with equal lengths");if(t.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var n=e(t),a=e(r),o=0,i=0;i<t.length;i++)o+=(t[i]-n)*(r[i]-a);return o/(t.length-1)}function q(t){if(t.length<2)throw new Error("sampleVariance requires at least two data points");return n(t,2)/(t.length-1)}function P(t){var r=q(t);return Math.sqrt(r)}function O(t,r,e,n){return(t*r+e*n)/(r+n)}function F(t){if(0===t.length)throw new Error("meanSimple requires at least one data point");return f(t)/t.length}function j(t){if(0===t.length)throw new Error("rootMeanSquare requires at least one data point");for(var r=0,e=0;e<t.length;e++)r+=Math.pow(t[e],2);return Math.sqrt(r/t.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(t,r){for(var e in this.data[r]||(this.data[r]={}),t){var n=t[e];void 0===this.data[r][e]&&(this.data[r][e]={}),void 0===this.data[r][e][n]&&(this.data[r][e][n]=0),this.data[r][e][n]++}this.totalCount++},L.prototype.score=function(t){var r,e={};for(var n in t){var a=t[n];for(r in this.data)e[r]={},this.data[r][n]?e[r][n+"_"+a]=(this.data[r][n][a]||0)/this.totalCount:e[r][n+"_"+a]=0}var o={};for(r in e)for(var i in o[r]=0,e[r])o[r]+=e[r][i];return o};var N=function(){this.weights=[],this.bias=0};N.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var r=0,e=0;e<this.weights.length;e++)r+=this.weights[e]*t[e];return(r+=this.bias)>0?1:0},N.prototype.train=function(t,r){if(0!==r&&1!==r)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var e=this.predict(t);if("number"==typeof e&&e!==r){for(var n=r-e,a=0;a<this.weights.length;a++)this.weights[a]+=n*t[a];this.bias+=n}return this};var I=1e-4;function A(t){if(t<0)throw new Error("factorial requires a non-negative value");if(Math.floor(t)!==t)throw new Error("factorial requires an integer input");for(var r=1,e=2;e<=t;e++)r*=e;return r}var R=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],C=Math.log(Math.sqrt(2*Math.PI)),V={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},G=Math.sqrt(2*Math.PI),X={gaussian:function(t){return Math.exp(-.5*t*t)/G}},Y={nrd:function(t){var r=P(t),e=w(t);return"number"==typeof e&&(r=Math.min(r,e/1.34)),1.06*r*Math.pow(t.length,-.2)}};function K(t,r,e){var n,a;if(void 0===r)n=X.gaussian;else if("string"==typeof r){if(!X[r])throw new Error(\'Unknown kernel "\'+r+\'"\');n=X[r]}else n=r;if(void 0===e)a=Y.nrd(t);else if("string"==typeof e){if(!Y[e])throw new Error(\'Unknown bandwidth method "\'+e+\'"\');a=Y[e](t)}else a=e;return function(r){var e=0,o=0;for(e=0;e<t.length;e++)o+=n((r-t[e])/a);return o/a/t.length}}var U=Math.sqrt(2*Math.PI);function W(t){for(var r=t,e=t,n=1;n<15;n++)r+=e*=t*t/(2*n+1);return Math.round(1e4*(.5+r/U*Math.exp(-t*t/2)))/1e4}for(var H=[],B=0;B<=3.09;B+=.01)H.push(W(B));function $(t){var r=1/(1+.5*Math.abs(t)),e=r*Math.exp(-t*t+((((((((.17087277*r-.82215223)*r+1.48851587)*r-1.13520398)*r+.27886807)*r-.18628806)*r+.09678418)*r+.37409196)*r+1.00002368)*r-1.26551223);return t>=0?1-e:e-1}function J(t){var r=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),e=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*r)+Math.log(1-t*t)/2,2)-Math.log(1-t*t)/r)-(2/(Math.PI*r)+Math.log(1-t*t)/2));return t>=0?e:-e}function Q(t){if("number"==typeof t)return t<0?-1:0===t?0:1;throw new TypeError("not a number")}function Z(t,r){for(var e=0,n=0;n<t.length;n++){var a=t[n]-r[n];e+=a*a}return Math.sqrt(e)}function tt(t,r){return t.map((function(t){for(var e=Number.MAX_VALUE,n=-1,a=0;a<r.length;a++){var o=Z(t,r[a]);o<e&&(e=o,n=a)}return n}))}function rt(t,r,e){for(var n=t[0].length,a=_(e,n),o=Array(e).fill(0),i=t.length,u=0;u<i;u++){for(var s=t[u],c=r[u],f=a[c],h=0;h<n;h++)f[h]+=s[h];o[c]+=1}for(var l=0;l<e;l++){if(0===o[l])throw new Error("Centroid "+l+" has no friends");for(var v=a[l],p=0;p<n;p++)v[p]/=o[l]}return a}function et(t,r){for(var e=0,n=0;n<t.length;n++)e+=Z(t[n],r[n]);return e}function nt(t,r){if(t.length!==r.length)throw new Error("must have exactly as many labels as points");for(var e=function(t){for(var r=1+c(t),e=Array(r),n=0;n<t.length;n++){var a=t[n];void 0===e[a]&&(e[a]=[]),e[a].push(n)}return e}(r),n=function(t){for(var r=t.length,e=_(r,r),n=0;n<r;n++)for(var a=0;a<n;a++)e[n][a]=Z(t[n],t[a]),e[a][n]=e[n][a];return e}(t),a=[],o=0;o<t.length;o++){var i=0;if(e[r[o]].length>1){var u=ot(o,e[r[o]],n),s=at(o,r,e,n);i=(s-u)/Math.max(u,s)}a.push(i)}return a}function at(t,r,e,n){for(var a=r[t],o=Number.MAX_VALUE,i=0;i<e.length;i++)if(i!==a){var u=ot(t,e[i],n);u<o&&(o=u)}return o}function ot(t,r,e){for(var n=0,a=0;a<r.length;a++)n+=e[t][r[a]];return n/r.length}function it(t,r){return 0===t&&0===r?0:Math.abs((t-r)/r)}t.BayesianClassifier=L,t.PerceptronModel=N,t.addToMean=function(t,r,e){return t+(e-t)/(r+1)},t.approxEqual=function(t,r,e){return void 0===e&&(e=I),it(t,r)<=e},t.average=e,t.averageSimple=F,t.bayesian=L,t.bernoulliDistribution=function(t){if(t<0||t>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-t,t]},t.binomialDistribution=function(t,r){if(!(r<0||r>1||t<=0||t%1!=0)){var e=0,n=0,a=[],o=1;do{a[e]=o*Math.pow(r,e)*Math.pow(1-r,t-e),n+=a[e],o=o*(t-++e+1)/e}while(n<.9999);return a}},t.bisect=function(t,r,e,n,a){if("function"!=typeof t)throw new TypeError("func must be a function");for(var o=0;o<n;o++){var i=(r+e)/2;if(0===t(i)||Math.abs((e-r)/2)<a)return i;Q(t(i))===Q(t(r))?r=i:e=i}throw new Error("maximum number of iterations exceeded")},t.chiSquaredDistributionTable=V,t.chiSquaredGoodnessOfFit=function(t,r,n){for(var a=0,o=r(e(t)),i=[],u=[],s=0;s<t.length;s++)void 0===i[t[s]]&&(i[t[s]]=0),i[t[s]]++;for(var c=0;c<i.length;c++)void 0===i[c]&&(i[c]=0);for(var f in o)f in i&&(u[+f]=o[f]*t.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),i[h-1]+=i[h],i.pop());for(var l=0;l<i.length;l++)a+=Math.pow(i[l]-u[l],2)/u[l];var v=i.length-1-1;return V[v][n]<a},t.chunk=function(t,r){var e=[];if(r<1)throw new Error("chunk size must be a positive number");if(Math.floor(r)!==r)throw new Error("chunk size must be an integer");for(var n=0;n<t.length;n+=r)e.push(t.slice(n,n+r));return e},t.ckmeans=function(t,r){if(r>t.length)throw new Error("cannot generate more classes than there are data values");var e=u(t);if(1===k(e))return[e];var n=_(r,e.length),a=_(r,e.length);!function(t,r,e){for(var n=r[0].length,a=t[Math.floor(n/2)],o=[],i=[],u=0,s=void 0;u<n;++u)s=t[u]-a,0===u?(o.push(s),i.push(s*s)):(o.push(o[u-1]+s),i.push(i[u-1]+s*s)),r[0][u]=D(0,u,o,i),e[0][u]=0;for(var c=1;c<r.length;++c)T(c<r.length-1?c:n-1,n-1,c,r,e,o,i)}(e,n,a);for(var o=[],i=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][i];o[s]=e.slice(c,i+1),s>0&&(i=c-1)}return o},t.combinations=function t(r,e){var n,a,o,i,u=[];for(n=0;n<r.length;n++)if(1===e)u.push([r[n]]);else for(o=t(r.slice(n+1,r.length),e-1),a=0;a<o.length;a++)(i=o[a]).unshift(r[n]),u.push(i);return u},t.combinationsReplacement=function t(r,e){for(var n=[],a=0;a<r.length;a++)if(1===e)n.push([r[a]]);else for(var o=t(r.slice(a,r.length),e-1),i=0;i<o.length;i++)n.push([r[a]].concat(o[i]));return n},t.combineMeans=O,t.combineVariances=function(t,r,e,n,a,o){var i=O(r,e,a,o);return(e*(t+Math.pow(r-i,2))+o*(n+Math.pow(a-i,2)))/(e+o)},t.cumulativeStdNormalProbability=function(t){var r=Math.abs(t),e=Math.min(Math.round(100*r),H.length-1);return t>=0?H[e]:+(1-H[e]).toFixed(4)},t.epsilon=I,t.equalIntervalBreaks=function(t,r){if(t.length<2)return t;for(var e=s(t),n=c(t),a=[e],o=(n-e)/r,i=1;i<r;i++)a.push(a[0]+o*i);return a.push(n),a},t.erf=$,t.errorFunction=$,t.extent=function(t){if(0===t.length)throw new Error("extent requires at least one data point");for(var r=t[0],e=t[0],n=1;n<t.length;n++)t[n]>e&&(e=t[n]),t[n]<r&&(r=t[n]);return[r,e]},t.extentSorted=function(t){return[t[0],t[t.length-1]]},t.factorial=A,t.gamma=function t(r){if(Number.isInteger(r))return r<=0?NaN:A(r-1);if(--r<0)return Math.PI/(Math.sin(Math.PI*-r)*t(-r));var e=r+1/4;return Math.pow(r/Math.E,r)*Math.sqrt(2*Math.PI*(r+1/6))*(1+1/144/Math.pow(e,2)-1/12960/Math.pow(e,3)-257/207360/Math.pow(e,4)-52/2612736/Math.pow(e,5)+5741173/9405849600/Math.pow(e,6)+37529/18811699200/Math.pow(e,7))},t.gammaln=function(t){if(t<=0)return 1/0;t--;for(var r=R[0],e=1;e<15;e++)r+=R[e]/(t+e);var n=5.2421875+t;return C+Math.log(r)-n+(t+.5)*Math.log(n)},t.geometricMean=function(t){if(0===t.length)throw new Error("geometricMean requires at least one data point");for(var r=1,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("geometricMean requires only positive numbers as input");r*=t[e]}return Math.pow(r,1/t.length)},t.harmonicMean=function(t){if(0===t.length)throw new Error("harmonicMean requires at least one data point");for(var r=0,e=0;e<t.length;e++){if(t[e]<=0)throw new Error("harmonicMean requires only positive numbers as input");r+=1/t[e]}return t.length/r},t.interquartileRange=w,t.inverseErrorFunction=J,t.iqr=w,t.kMeansCluster=function(t,r,e){void 0===e&&(e=Math.random);for(var n=null,a=x(t,r,e),o=null,i=Number.MAX_VALUE;0!==i;)n=a,i=et(a=rt(t,o=tt(t,a),r),n);return{labels:o,centroids:a}},t.kde=K,t.kernelDensityEstimation=K,t.linearRegression=function(t){var r,e,n=t.length;if(1===n)r=0,e=t[0][1];else{for(var a,o,i,u=0,s=0,c=0,f=0,h=0;h<n;h++)u+=o=(a=t[h])[0],s+=i=a[1],c+=o*o,f+=o*i;e=s/n-(r=(n*f-u*s)/(n*c-u*u))*u/n}return{m:r,b:e}},t.linearRegressionLine=function(t){return function(r){return t.b+t.m*r}},t.mad=M,t.max=c,t.maxSorted=function(t){return t[t.length-1]},t.mean=e,t.meanSimple=F,t.median=b,t.medianAbsoluteDeviation=M,t.medianSorted=function(t){return h(t,.5)},t.min=s,t.minSorted=function(t){return t[0]},t.mode=function(t){return i(u(t))},t.modeFast=function(t){for(var r,e=new Map,n=0,a=0;a<t.length;a++){var o=e.get(t[a]);void 0===o?o=1:o++,o>n&&(r=t[a],n=o),e.set(t[a],o)}if(0===n)throw new Error("mode requires at last one data point");return r},t.modeSorted=i,t.numericSort=u,t.perceptron=N,t.permutationTest=function(t,r,n,a,o){if(void 0===a&&(a=1e4),void 0===n&&(n="two_side"),"two_side"!==n&&"greater"!==n&&"less"!==n)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var i=e(t)-e(r),u=new Array(a),s=t.concat(r),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,o);var h=s.slice(0,c),l=s.slice(c,s.length),v=e(h)-e(l);u[f]=v}var p=0;if("two_side"===n)for(var d=0;d<=a;d++)Math.abs(u[d])>=Math.abs(i)&&(p+=1);else if("greater"===n)for(var g=0;g<=a;g++)u[g]>=i&&(p+=1);else for(var m=0;m<=a;m++)u[m]<=i&&(p+=1);return p/a},t.permutationsHeap=function(t){for(var r=new Array(t.length),e=[t.slice()],n=0;n<t.length;n++)r[n]=0;for(var a=0;a<t.length;)if(r[a]<a){var o=0;a%2!=0&&(o=r[a]);var i=t[o];t[o]=t[a],t[a]=i,e.push(t.slice()),r[a]++,a=0}else r[a]=0,a++;return e},t.poissonDistribution=function(t){if(!(t<=0)){var r=0,e=0,n=[],a=1;do{n[r]=Math.exp(-t)*Math.pow(t,r)/a,e+=n[r],a*=++r}while(e<.9999);return n}},t.probit=function(t){return 0===t?t=I:t>=1&&(t=.9999),Math.sqrt(2)*J(2*t-1)},t.product=function(t){for(var r=1,e=0;e<t.length;e++)r*=t[e];return r},t.quantile=p,t.quantileRank=function(t,r){return y(u(t),r)},t.quantileRankSorted=y,t.quantileSorted=h,t.quickselect=l,t.rSquared=function(t,r){if(t.length<2)return 1;for(var e=0,n=0;n<t.length;n++)e+=t[n][1];for(var a=e/t.length,o=0,i=0;i<t.length;i++)o+=Math.pow(a-t[i][1],2);for(var u=0,s=0;s<t.length;s++)u+=Math.pow(t[s][1]-r(t[s][0]),2);return 1-u/o},t.relativeError=it,t.rms=j,t.rootMeanSquare=j,t.sample=x,t.sampleCorrelation=function(t,r){return z(t,r)/P(t)/P(r)},t.sampleCovariance=z,t.sampleKurtosis=function(t){var r=t.length;if(r<4)throw new Error("sampleKurtosis requires at least four data points");for(var n,a=e(t),o=0,i=0,u=0;u<r;u++)o+=(n=t[u]-a)*n,i+=n*n*n*n;return(r-1)/((r-2)*(r-3))*(r*(r+1)*i/(o*o)-3*(r-1))},t.sampleSkewness=function(t){if(t.length<3)throw new Error("sampleSkewness requires at least three data points");for(var r,n=e(t),a=0,o=0,i=0;i<t.length;i++)a+=(r=t[i]-n)*r,o+=r*r*r;var u=t.length-1,s=Math.sqrt(a/u),c=t.length;return c*o/((c-1)*(c-2)*Math.pow(s,3))},t.sampleStandardDeviation=P,t.sampleVariance=q,t.sampleWithReplacement=function(t,r,e){if(0===t.length)return[];e=e||Math.random;for(var n=t.length,a=[],o=0;o<r;o++){var i=Math.floor(e()*n);a.push(t[i])}return a},t.shuffle=E,t.shuffleInPlace=S,t.sign=Q,t.silhouette=nt,t.silhouetteMetric=function(t,r){return c(nt(t,r))},t.standardDeviation=o,t.standardNormalTable=H,t.subtractFromMean=function(t,r,e){return(t*r-e)/(r-1)},t.sum=r,t.sumNthPowerDeviations=n,t.sumSimple=f,t.tTest=function(t,r){return(e(t)-r)/(o(t)/Math.sqrt(t.length))},t.tTestTwoSample=function(t,r,n){var a=t.length,o=r.length;if(!a||!o)return null;n||(n=0);var i=e(t),u=e(r),s=q(t),c=q(r);if("number"==typeof i&&"number"==typeof u&&"number"==typeof s&&"number"==typeof c){var f=((a-1)*s+(o-1)*c)/(a+o-2);return(i-u-n)/Math.sqrt(f*(1/a+1/o))}},t.uniqueCountSorted=k,t.variance=a,t.zScore=function(t,r,e){return(t-r)/e},Object.defineProperty(t,"__esModule",{value:!0})}(r)},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sum_unsafe=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=t[n][r]}))},a=0,o=t.length;a<o;a++)n(a);return e},r.sum=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return e},r.count=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=0,a=t.length;n<a;n++)r.forEach((function(t){e[t]++}));return e},r.mean=function(t,r){var e={};r.forEach((function(t){e[t]=0}));for(var n=function(n,a){r.forEach((function(r){e[r]+=Number(t[n][r])||0}))},a=0,o=t.length;a<o;a++)n(a);return r.forEach((function(r){e[r]/=t.length})),e}},function(t,r,e){"use strict";this&&this.__assign;Object.defineProperty(r,"__esModule",{value:!0});var n=e(5),a=e(8),o=e(2),i={sum:o.sum_unsafe,mean:o.mean,count:o.count};function u(t){var r=t.type,e=t.aggFunc,a=void 0===e?o.count:e,i=t.factTable,u=void 0===i?[]:i,s=t.dimensions,c=void 0===s?[]:s,f=t.measures,h=void 0===f?[]:f;switch(r){case"period":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:h});case"moment":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:h})}}r.createCube=u,r.default=function(t){var r=t.dimensions,e=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,f=u({type:"moment",aggFunc:i[s]||o.count,dimensions:r,measures:e,factTable:c}),h=a.tree2Table({dimensions:r,measures:e,cube:f});return h.forEach((function(t){n.forEach((function(r,n){t[r]=t[e[n]]}))})),h},function(t){for(var e in t)r.hasOwnProperty(e)||(r[e]=t[e])}(e(2))},function(t,r,e){var n=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(P){s=function(t,r,e){return t[r]=e}}function c(t,r,e,n){var a=r&&r.prototype instanceof g?r:g,o=Object.create(a.prototype),i=new T(n||[]);return o._invoke=function(t,r,e){var n=h;return function(a,o){if(n===v)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw o;return q()}for(e.method=a,e.arg=o;;){var i=e.delegate;if(i){var u=_(i,e);if(u){if(u===d)continue;return u}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===h)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=v;var s=f(t,r,e);if("normal"===s.type){if(n=e.done?p:l,s.arg===d)continue;return{value:s.arg,done:e.done}}"throw"===s.type&&(n=p,e.method="throw",e.arg=s.arg)}}}(t,e,i),o}function f(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(P){return{type:"throw",arg:P}}}t.wrap=c;var h="suspendedStart",l="suspendedYield",v="executing",p="completed",d={};function g(){}function m(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,M=b&&b(b(z([])));M&&M!==e&&n.call(M,o)&&(w=M);var S=y.prototype=g.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(r){s(t,r,(function(t){return this._invoke(r,t)}))}))}function x(t,r){function e(a,o,i,u){var s=f(t[a],t,o);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&n.call(h,"__await")?r.resolve(h.__await).then((function(t){e("next",t,i,u)}),(function(t){e("throw",t,i,u)})):r.resolve(h).then((function(t){c.value=t,i(c)}),(function(t){return e("throw",t,i,u)}))}u(s.arg)}var a;this._invoke=function(t,n){function o(){return new r((function(r,a){e(t,n,r,a)}))}return a=a?a.then(o,o):o()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a \'throw\' method")}return d}var a=f(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,d;var o=a.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function k(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function D(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function z(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var a=-1,i=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=r,e.done=!0,e};return i.next=i}}return{next:q}}function q(){return{value:r,done:!0}}return m.prototype=S.constructor=y,y.constructor=m,m.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"===typeof t&&t.constructor;return!!r&&(r===m||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},E(x.prototype),x.prototype[i]=function(){return this},t.AsyncIterator=x,t.async=function(r,e,n,a,o){void 0===o&&(o=Promise);var i=new x(c(r,e,n,a),o);return t.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},E(S),s(S,u,"Generator"),S[o]=function(){return this},S.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=z,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(D),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(n,a){return u.type="throw",u.arg=t,e.next=n,a&&(e.method="next",e.arg=r),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=r&&r<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=r,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(i)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),d},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),D(e),d}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var a=n.arg;D(e)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:z(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),d}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(6);r.periodCube=n.default;var a=e(7);r.momentCube=a.default},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this._rawData).push.apply(t,a(r))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,r;if(!this.cache){if(0!==this.children.size){var e=this.children.values(),n=[];try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)n.push(c[s])}}catch(h){t={error:h}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var s=e.children.entries();try{for(var c=o(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return r(v,a+1)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var r=this,e=r.tree,a=(r.aggFunc,r.measures);return function r(e,i){var u,s;if(i===t.length)return e.aggData(a);var c=e.children.entries();try{for(var f=o(c),h=f.next();!h.done;h=f.next()){var l=n(h.value,2),v=l[0],p=l[1];if(v===t[i])return r(p,i+1)}}catch(d){u={error:d}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,r=new i(this.aggFunc),e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(r.push(t),r.cache=!1,e<this.dimensions.length){var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i(this.aggFunc)),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var r,e;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}return t.aggData(this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t},o=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];(t=this.rawData).push.apply(t,a(r))},t.prototype.aggData=function(t,r){return void 0===r&&(r=[]),this._aggData=t(this.rawData,r),this._aggData},t.prototype.getNode=function(t){return function r(e,a){var i,u;if(a===t.length)return e;var s=e.children.entries();try{for(var c=o(s),f=c.next();!f.done;f=c.next()){var h=n(f.value,2),l=h[0],v=h[1];if(l===t[a])return r(v,a+1)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}();r.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var r=this,e=r.tree,a=r.aggFunc,i=r.measures;return function r(e,u){var s,c;if(u===t.length)return e.aggData(a,i);var f=e.children.entries();try{for(var h=o(f),l=h.next();!l.done;l=h.next()){var v=n(l.value,2),p=v[0],d=v[1];if(p===t[u])return r(d,u+1)}}catch(g){s={error:g}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var r=t.aggFunc,e=void 0===r?this.aggFunc:r,n=t.factTable,a=void 0===n?this.factTable:n,o=t.dimensions,i=void 0===o?this.dimensions:o,u=t.measures,s=void 0===u?this.measures:u;i!==this.dimensions||a!==this.factTable?(this.dimensions=i,this.factTable=a,this.measures=s,this.aggFunc=e,this.buildTree(),this.aggTree()):s===this.measures&&e===this.aggFunc||(this.measures=s,this.aggFunc=e,this.aggTree())},t.prototype.buildTree=function(){var t,r=new i,e=this.factTable.length;for(t=0;t<e;t++)this.insertNode(this.factTable[t],r,0);return this.tree=r,r},t.prototype.insertNode=function(t,r,e){if(e===this.dimensions.length)r.push(t);else{var n=t[this.dimensions[e]];r.children.has(n)||r.children.set(n,new i),this.insertNode(t,r.children.get(n),e+1)}},t.prototype.aggTree=function(t){var r,e;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)t.rawData.push(c[s])}}catch(h){r={error:h}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(r)throw r.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();r.default=u},function(t,r,e){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var r,e=1,n=arguments.length;e<n;e++)for(var a in r=arguments[e])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var r="function"===typeof Symbol&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,r){var e="function"===typeof Symbol&&t[Symbol.iterator];if(!e)return t;var n,a,o=e.call(t),i=[];try{for(;(void 0===r||r-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(e=o.return)&&e.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(r,"__esModule",{value:!0}),r.tree2Table=function(t){var r=t.dimensions,e=(t.measures,t.cube),i=(e.aggFunc,[]);return function t(e,u,s){var c,f,h;if(0!==e.children.size)try{for(var l=a(e.children.entries()),v=l.next();!v.done;v=l.next()){var p=o(v.value,2),d=p[0];t(p[1],n(n({},u),((h={})[r[s]]=d,h)),s+1)}}catch(m){c={error:m}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var g=e._aggData;i.push(n(n({},u),g))}}(e.tree,{},0),i}},function(t,r,e){"use strict";e.r(r);var n={};function a(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function o(t,r){if(t){if("string"===typeof t)return a(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?a(t,r):void 0}}function i(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return e}}(t,r)||o(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function s(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,r,e){return r&&s(t.prototype,r),e&&s(t,e),t}e.r(n),e.d(n,"kruskal",(function(){return F})),e.d(n,"kruskalWithFullMST",(function(){return O}));var f=e(0),h=e.n(f);function l(t,r,e,n,a,o,i){try{var u=t[o](i),s=u.value}catch(c){return void e(c)}u.done?r(s):Promise.resolve(s).then(n,a)}function v(t){return function(){var r=this,e=arguments;return new Promise((function(n,a){var o=t.apply(r,e);function i(t){l(o,n,a,i,u,"next",t)}function u(t){l(o,n,a,i,u,"throw",t)}i(void 0)}))}}function p(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||o(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,r){var e;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(e=o(t))||r&&t&&"number"===typeof t.length){e&&(t=e);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,s=!1;return{s:function(){e=t[Symbol.iterator]()},n:function(){var t=e.next();return u=t.done,t},e:function(t){s=!0,i=t},f:function(){try{u||null==e.return||e.return()}finally{if(s)throw i}}}}var g=function(t,r,e){for(var n=new Set,a=new Set,o=new Map,u=t.length,s=0;s<u;s++){var c=t[s];n.add(c[r]),a.add(c[e]),o.has(c[r])||o.set(c[r],new Map);var f=o.get(c[r]);f.has(c[e])||f.set(c[e],0),f.set(c[e],f.get(c[e])+1)}var h=function(t,r,e){if("undefined"===typeof t||"undefined"===typeof r||"undefined"===typeof e)return 0;var n,a=new Map,o=new Map,u=0,s=d(r);try{for(s.s();!(n=s.n()).done;){var c=n.value;a.set(c,0)}}catch(j){s.e(j)}finally{s.f()}var f,h=d(e);try{for(h.s();!(f=h.n()).done;){var l=f.value;o.set(l,0)}}catch(j){h.e(j)}finally{h.f()}var v,p=d(t);try{for(p.s();!(v=p.n()).done;){var g,m=i(v.value,2),y=m[0],w=d(m[1]);try{for(w.s();!(g=w.n()).done;){var b=i(g.value,2),M=b[0],S=b[1];a.set(y,a.get(y)+S),o.set(M,o.get(M)+S),u+=S}}catch(j){w.e(j)}finally{w.f()}}}catch(j){p.e(j)}finally{p.f()}var E,x=0,_=d(t);try{for(_.s();!(E=_.n()).done;){var k,D=i(E.value,2),T=D[0],z=d(D[1]);try{for(z.s();!(k=z.n()).done;){var q=i(k.value,2),P=q[0],O=q[1],F=a.get(T)*o.get(P)/u;x+=Math.pow(O-F,2)/F}}catch(j){z.e(j)}finally{z.f()}}}catch(j){_.e(j)}finally{_.f()}return x}(o,n,a);return Math.sqrt(h/(t.length*Math.min(n.size-1,a.size-1)))},m=function(t,r,e){var n=y(t.map((function(t){return t[r]})))/t.length,a=y(t.map((function(t){return t[e]})))/t.length;return y(t.map((function(t){return(t[r]-n)*(t[e]-a)})))/Math.sqrt(y(t.map((function(t){return Math.pow(t[r]-n,2)})))*y(t.map((function(t){return Math.pow(t[e]-a,2)}))))};function y(t){for(var r=0,e=0,n=t.length;e<n;e++)r+=t[e];return r}function w(t){var r=Math.min.apply(Math,p(t));return t.map((function(t){return t-r+1}))}function b(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function r(e,a,o){a.length!==o?e>=t.length||(r(e+1,[].concat(p(a),[t[e]]),o),r(e+1,a,o)):n.push(p(a))},o=r;o<=e;o++)a(0,[],o);return n}function M(t){var r,e=0,n=d(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a}}catch(o){n.e(o)}finally{n.f()}return t.map((function(t){return t/e}))}var S=function(t){var r,e=0,n=d(t);try{for(n.s();!(r=n.n()).done;){var a=r.value;e+=a*Math.log2(a)}}catch(o){n.e(o)}finally{n.f()}return-e},E=function(){function t(r,e,n){u(this,t),this.dataSource=r,this.X=e,this.Y=n,this.normalizedDataSource=r}return c(t,[{key:"normalizeDimensions",value:function(t){var r=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){r.valueSets.push(new Map)})),this.dataSource.forEach((function(e){t.forEach((function(t,n){var a=(e[t]||"others").toString();r.valueSets[n].has(a)||r.valueSets[n].set(a,r.valueSets[n].size)}))})),this.dataSource.forEach((function(e){var n=r.normalizeRecord(e,t);r.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t,r){var e=this,n={};return Object.keys(t).forEach((function(r){n[r]=t[r]})),r.forEach((function(r,a){var o=(t[r]||"others").toString();n[r]=e.valueSets[a].get(o)})),n}},{key:"mean",value:function(){var t=this,r=0,e=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,a){r+=n[t.X],e+=n[t.Y]})),r/=this.normalizedDataSource.length,e/=this.normalizedDataSource.length),[r,e]}},{key:"getRegressionEquation",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var r,e=i(this.mean(),2),n=e[0],a=e[1],o=0,u=0;return this.normalizedDataSource.forEach((function(r){o+=(r[t.X]-n)*(r[t.Y]-a),u+=Math.pow(r[t.X]-n,2)})),[a-n*(r=o/u),r]}},{key:"r_squared",value:function(){var t=this,r=i(this.mean(),2)[1],e=i(this.getRegressionEquation(),2),n=e[0],a=e[1],o=0,u=0;return this.normalizedDataSource.forEach((function(e){var i=e[t.X],s=e[t.Y],c=i*a+n;o+=Math.pow(c-r,2),u+=Math.pow(s-r,2)})),o/u}},{key:"cumulativeLogisticDistribution",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:"pValue",value:function(){var t=i(this.getRegressionEquation(),2)[1],r=this.cumulativeLogisticDistribution(Math.abs(t));return r>.5?2*(1-r):2*r}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),x=e(1);x.sum,x.max,x.mean,x.min;var _=.3,k=.5;function D(t){for(var r=[],e=0;e<t.length;e++)for(var n=e+1;n<t[e].length;n++)r.push([[e,n],Math.abs(t[e][n])]);return r}function T(t,r){return t[r]===r?r:t[r]=T(t,t[r])}function z(t,r,e){var n=T(t,r),a=T(t,e);t[n]=a,T(t,r),T(t,e)}function q(t,r,e){return t[e]===e?e:(t[e]=q(t,r,t[e]),r[e]=r[t[e]],t[e])}function P(t,r,e,n){var a=q(t,r,e),o=q(t,r,n),i=r[a],u=r[o];t[a]=o,r[a]=r[o]=i+u,q(t,r,e),q(t,r,n)}function O(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=D(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=[],i=t.map((function(t,r){return r})),u=p(i),s=!1,c=d(n);try{for(c.s();!(a=c.n()).done;){var f=a.value;T(i,f[0][0])!==T(i,f[0][1])&&(z(i,f[0][0],f[0][1]),o.push([f[0],f[1],s]));for(var h=0;h<i.length;h++)i[h]=T(i,h);var l=new Set(i);if(l.size<=r||f[1]<e?s=!0:u=p(i),1===l.size)break}}catch(v){c.e(v)}finally{c.f()}return{edgesInMST:o,groups:u}}var F=function(t){var r,e=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),o=void 0===a?4:a,i=t.limitSize,u=void 0!==i&&i,s=t.threshold,c=void 0===s?0:s;r=u?function(t,r){var e=D(t);e.sort((function(t,r){return r[1]-t[1]}));var n,a=t.map((function(t,r){return r})),o=t.map((function(){return 1})),i=d(e);try{for(i.s();!(n=i.n()).done;){var u=n.value;if(q(a,o,u[0][0])!==q(a,o,u[0][1])){if(o[u[0][0]]+o[u[0][1]]>r)continue;P(a,o,u[0][0],u[0][1])}for(var s=0;s<a.length;s++)a[s]=q(a,o,s);if(1===new Set(a).size)break}}catch(h){i.e(h)}finally{i.f()}for(var c=new Map,f=0;f<a.length;f++)c.has(a[f])||c.set(a[f],[]),c.get(a[f]).push(f);return c}(e,o):function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=D(t);n.sort((function(t,r){return r[1]-t[1]}));var a,o=t.map((function(t,r){return r})),i=d(n);try{for(i.s();!(a=i.n()).done;){var u=a.value;T(o,u[0][0])!==T(o,u[0][1])&&z(o,u[0][0],u[0][1]);for(var s=0;s<o.length;s++)o[s]=T(o,s);if(new Set(o).size<=r||u[1]<e)break}}catch(h){i.e(h)}finally{i.f()}for(var c=new Map,f=0;f<o.length;f++)c.has(o[f])||c.set(o[f],[]),c.get(o[f]).push(f);return c}(e,o,c);var f,h=[],l=d(r.values());try{for(l.s();!(f=l.n()).done;){var v=f.value;h.push(v.map((function(t){return n[t]})))}}catch(p){l.e(p)}finally{l.f()}return h};function j(t,r){return(j=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(t,r)}function L(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&j(t,r)}function N(t){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function I(t){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,r){return!r||"object"!==I(r)&&"function"!==typeof r?function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t):r}function R(t){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=N(t);if(r){var a=N(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return A(this,e)}}var C=function(t){L(e,t);var r=R(e);function e(t){var n;u(this,e),n=r.call(this,t);var a=t.K;return n.K=a,n.normalize(),n}return c(e,[{key:"getNeighbors",value:function(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e.length!==r.length&&r.forEach((function(t){e.push(1)}));for(var n=[],a=[],o=[],i=[],u=new Set(this.dimensions),s=0;s<r.length;s++)u.has(r[s])?(n.push(r[s]),o.push(e[s])):(a.push(r[s]),i.push(e[s]));var c=[];this.normalizedDataSource.forEach((function(r,e){var u=0;a.forEach((function(e,n){u+=Math.pow((r[e]-t[e])*i[n],2)})),n.forEach((function(e,n){r[e]!==t[e]&&(u+=Math.pow(o[n],2))})),c.push({dis:u,index:e})})),c.sort((function(t,r){return t.dis-r.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:"getTargetValue",value:function(t,r){var e=this,n=[];return t.forEach((function(t){var a=new Map;r.forEach((function(r){a.has(r[t])||a.set(r[t],0),a.set(r[t],a.get(r[t])+1)}));var o,i=0,u=0,s=d(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;c[1]>i&&(i=c[1],u=c[0])}}catch(h){s.e(h)}finally{s.f()}var f=e.dimensions.indexOf(t);f>-1?n.push(e.valueParser[f][u]):n.push(u)})),n}}]),e}(function(){function t(r){u(this,t);var e=r.dataSource,n=r.dimensions,a=r.measures;this.dataSource=e,this.dimensions=n,this.measures=a}return c(t,[{key:"normalize",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(r){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(r){t.dimensions.forEach((function(e,n){var a=(r[e]||"others").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(e,n){var a=r[e];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(r){var e=t.normalizeRecord(r);t.normalizedDataSource.push(e)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var r=this,e={};return this.measures.forEach((function(n,a){e[n]=(t[n]-r.ranges[a][0])/(r.ranges[a][1]-r.ranges[a][0])})),this.dimensions.forEach((function(n,a){var o=(t[n]||"others").toString();e[n]=r.valueSets[a].get(o)})),e}}]),t}());function V(t,r){for(var e=function(t,r){if(0===t)return[];for(var e=2147483647,n=[r],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%e);return n.map((function(t){return t/e}))}(r,2147483647*Math.random()),n=[],a=0;a<r;a++){var o=Math.floor(e[a]*r)%r;n.push(t[o])}return n}var G=8,X={IsolationForest:function(){function t(r,e,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;u(this,t),this.dimensions=r,this.measures=e,this.dataSource=n,n.length<o?(this.treeNumber=Math.max(1,Math.ceil(o/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=o),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return c(t,[{key:"normalizeDimensions",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(r){t.dimensions.forEach((function(e,n){var a=(r[e]||"others").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(e,n){var a=r[e];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(r){var e=t.normalizeRecord(r);t.normalizedDataSource.push(e)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var r=this,e={};return this.measures.forEach((function(r){e[r]=t[r]})),this.dimensions.forEach((function(n,a){var o=(t[n]||"others").toString();e[n]=r.valueSets[a].get(o)})),e}},{key:"buildIsolationTree",value:function(t,r){if(r>=this.limitHeight||t.length<=1)return null;var e=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,o=this.measures.length,i=0;if(e>=a/(a+o)){var u=Math.floor(Math.random()*o)%o;n=this.measures[u],i=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],i=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c,f=[],h=[],l=d(t);try{for(l.s();!(c=l.n()).done;){var v=c.value;v[n]<i?f.push(v):h.push(v)}}catch(g){l.e(g)}finally{l.f()}var p={field:n,value:i,size:t.length};return p.left=this.buildIsolationTree(f,r+1),p.right=this.buildIsolationTree(h,r+1),p}},{key:"AFS",value:function(t){return t>2?2*(Math.log(t-1)+.5772156649)-2*(t-1)/t:2===t?1:0}},{key:"getPathLength",value:function(t,r,e,n){return null===r?e+this.AFS(n):t[r.field]<r.value?this.getPathLength(t,r.left,e+1,r.size):this.getPathLength(t,r.right,e+1,r.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var r=V(this.normalizedDataSource,this.sampleSize),e=this.buildIsolationTree(r,0);this.iForest.push(e)}return this.iForest}},{key:"estimateOutierScore",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(r){var e,n=0;t.iForest.forEach((function(e){n+=t.getPathLength(r,e,0,t.sampleSize)})),n/=t.iForest.length,e=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(e)})),this.recordScoreList}}]),t}()};function Y(t,r){for(var e=r.map((function(t){return r.map((function(t){return 0}))})),n=0;n<r.length;n++){e[n][n]=1;for(var a=n+1;a<r.length;a++)e[n][a]=e[a][n]=g(t,r[n],r[a])}return e}function K(t,r){for(var e=r.map((function(t){return r.map((function(t){return 0}))})),n=0;n<r.length;n++){e[n][n]=1;for(var a=n+1;a<r.length;a++){var o=m(t,r[n],r[a]);e[a][n]=e[n][a]=o}}return e}function U(t,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,a=arguments.length>3?arguments[3]:void 0,o=4,i=Y(t,r),u=n.kruskal({matrix:i,measures:r,groupMaxSize:a||Math.round(r.length/o),threshold:e});return u}function W(t,r,e){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=3,i=K(t,r),u=n.kruskal({matrix:i,measures:r,groupMaxSize:a||Math.round(r.length/o),threshold:e||k});return u}var H=e(3),B=e.n(H),$=function(t){L(e,t);var r=R(e);function e(){return u(this,e),r.apply(this,arguments)}return c(e,[{key:"getTargetValuePercent",value:function(t,r,e){var n=[];return t.forEach((function(t,a){var o=0;e.forEach((function(e){e[t]===r[t]&&o++})),n.push(o/e.length)})),n}},{key:"getSignificance",value:function(t,r){var e=this,n=0;return this.normalizedDataSource.forEach((function(a){var o=e.getNeighbors(a,t),i=e.getTargetValuePercent(r,a,o),u=0;i.forEach((function(t){u+=t})),u/=i.length,n+=u})),n/=this.normalizedDataSource.length}}]),e}(C),J="=;=";function Q(t,r){var e,n=[],a=d(t);try{for(a.s();!(e=a.n()).done;){var o,i=e.value,u=d(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;n.push({dimensions:i,measures:s})}}catch(c){u.e(c)}finally{u.f()}}}catch(c){a.e(c)}finally{a.f()}return n}function Z(t){var r,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:G,n=[],a=d(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,i=b(o,1,e);n.push.apply(n,p(i))}}catch(u){a.e(u)}finally{a.f()}return n}var tt,rt=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=0,o=0,i=d(n);try{for(s=function(){var t=u.value,e=r.map((function(r){return r[t]})),n=M(w(e)),i=S(n);a+=i,o+=i/Math.log2(e.length)},i.s();!(u=i.n()).done;)s()}catch(c){i.e(c)}finally{i.f()}return a/=n.length,o=1-(o/=n.length),t.abrupt("return",{dimensions:e,measures:n,type:"default_general",score:a,impurity:a,significance:o,order:"asc"});case 8:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),et=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for((a=new X.IsolationForest([],n,r)).buildIsolationForest(),o=a.estimateOutierScore(),i=0,u=0,s=0;s<o.length;s++)o[s]>u&&(u=o[s],i=s);return c={},e.concat(n).forEach((function(t){c[t]=r[i][t]})),t.abrupt("return",{dimensions:e,measures:n,score:u,significance:u,order:"desc",description:c});case 9:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),nt=function(){var t=v(h.a.mark((function t(r,e,n){var a,o,i,u,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1===e.length){t.next=2;break}return t.abrupt("return",null);case 2:(a=p(r)).sort((function(t,r){return t[e[0]]>r[e[0]]?1:t[e[0]]===r[e[0]]?0:t[e[0]]<r[e[0]]?-1:void 0})),o=0,i=d(n);try{for(i.s();!(u=i.n()).done;)s=u.value,(c=new E(a,e[0],s)).normalizeDimensions(e),o+=c.significance()}catch(f){i.e(f)}finally{i.f()}return o/=n.length,t.abrupt("return",{dimensions:e,measures:n,score:o,significance:o,order:"desc"});case 9:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}(),at=function(){var t=v(h.a.mark((function t(r,e,n){var a,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<2)){t.next=2;break}return t.abrupt("return",null);case 2:return 0,o=new $({dataSource:r,dimensions:e,measures:n,K:8}),a=o.getSignificance(n.concat(e.slice(0,-1)),e.slice(-1)),t.abrupt("return",{dimensions:e,measures:n,score:a,significance:a,order:"desc"});case 6:case"end":return t.stop()}}),t)})));return function(r,e,n){return t.apply(this,arguments)}}();!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(tt||(tt={}));var ot=function(){function t(){u(this,t),this.workers=new Map}return c(t,[{key:"register",value:function(t,r){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,r])}},{key:"enable",value:function(t,r){if(!this.workers.has(t))throw new Error(\'Intention Worker "\'.concat(t,\'" does not exist.\'));var e=this.workers.get(t);e[0]=r,this.workers.set(t,e)}},{key:"each",value:function(t){var r,e=d(this.workers);try{for(e.s();!(r=e.n()).done;){var n=i(r.value,2),a=n[0],o=n[1];o[0]&&t(o[1],a)}}catch(u){e.e(u)}finally{e.f()}}}],[{key:"init",value:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},e=r.withDefaultIWorkers,n=void 0===e||e;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(tt.outlier,et),t.colletion.register(tt.cluster,at),t.colletion.register(tt.trend,nt))),tt)t.colletion.enable(tt[a],n);return t.colletion}}]),t}();function it(t,r,e){return ut.apply(this,arguments)}function ut(){return(ut=v(h.a.mark((function t(r,e,n){var a,o,i,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=[],o=d(e),t.prev=2,u=h.a.mark((function t(){var e,o,u,s,c,f;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=i.value,o=e.dimensions,u=e.measures,s=o.join(J),!r.has(s)){t.next=9;break}return c=r.get(s),t.next=7,rt(c,o,u);case 7:f=t.sent,n.each(function(){var t=v(h.a.mark((function t(r,e){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r(c,o,u);case 3:null!==(n=t.sent)&&(n.type=e,n.impurity=f.impurity,a.push(n)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("worker failed",{dimensions:o,measures:u,aggData:c},t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(r,e){return t.apply(this,arguments)}}());case 9:case"end":return t.stop()}}),t)})),o.s();case 5:if((i=o.n()).done){t.next=9;break}return t.delegateYield(u(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})))).apply(this,arguments)}function st(){return(st=v(h.a.mark((function t(r){var e,n,a,o,i,u,s,c,f,l,v,p,g,m,y,w,b,M,S,E,x,D,T,z,q,P,O;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.dataSource,n=r.dimensions,a=r.measures,o=r.collection,i=r.dimension_correlation_threshold,u=void 0===i?_:i,s=r.measure_correlation_threshold,c=void 0===s?k:s,f=r.max_dimension_num_in_view,l=void 0===f?3:f,v=r.max_measure_num_in_view,p=void 0===v?3:v,g=U(e,n,u),m=Z(g,l),y=W(e,a,c),w=Z(y,p),b=Q(m,w),M=new Map,S=(new Date).getTime(),E=d(m);try{for(E.s();!(x=E.n()).done;)D=x.value,T=D.join(J),z=B()({dataSource:e,dimensions:D,measures:a,asFields:a,operator:"sum"}),M.set(T,z)}catch(h){E.e(h)}finally{E.f()}return q=(new Date).getTime(),console.log("cube cost",q-S),M.set("*",e),P=o||ot.init(),t.next=18,it(M,b,P);case 18:return O=t.sent,t.abrupt("return",O);case 20:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ct;self.addEventListener("message",(ct=async t=>{const{dataSource:r,dimensions:e,measures:n}=t.data;try{let t=await function(t){return st.apply(this,arguments)}({dataSource:r,dimensions:e,measures:n});t.sort(((t,r)=>t.impurity/t.significance-r.impurity/r.significance)),self.postMessage({success:!0,data:t})}catch(a){self.postMessage({success:!1,message:a})}},function(t){var r=(new Date).getTime();try{ct(t)}finally{var e=(new Date).getTime()-r;console.log("Task [".concat(ct.name,"] cost ").concat(e," ms."))}}),!1)}]);\n//# sourceMappingURL=dev.worker.d3fa18fb.worker.js.map',"Worker",void 0,r.p+"static/js/dev.worker.d3fa18fb.worker.js")}var O="//lobay.moe:8443";function j(t,e){return new Promise((function(r,n){t.postMessage(e),t.onmessage=function(t){r(t.data)},t.onerror=function(t){n({success:!1,message:t.error})}}))}function _(t,e,r){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!n){t.next=21;break}return t.prev=2,t.next=5,fetch(O+"/api/service/fieldsSummary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:e,fields:r})});case 5:return o=t.sent,t.next=8,o.json();case 8:if(!0!==(i=t.sent).success){t.next=13;break}a=i.data,t.next=14;break;case 13:throw new Error("[fields summary failed]"+i.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:t.next=31;break;case 21:return u=new x,t.next=24,j(u,{dataSource:e,fields:r});case 24:if(!0!==(s=t.sent).success){t.next=29;break}a=s.data,t.next=30;break;case 29:throw new Error("[fields summary failed]"+s.message);case 30:u.terminate();case 31:return t.abrupt("return",a);case 32:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function T(t,e,r){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={groupedData:[],newFields:[],fields:[]},!n){t.next=21;break}return t.prev=2,t.next=5,fetch(O+"/api/service/groupFields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:e,fields:r})});case 5:return o=t.sent,t.next=8,o.json();case 8:if(!0!==(i=t.sent).success){t.next=13;break}a=i.data,t.next=14;break;case 13:throw new Error("[group fields failed]"+i.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:t.next=31;break;case 21:return u=new S,t.next=24,j(u,{dataSource:e,fields:r});case 24:if(!0!==(s=t.sent).success){t.next=29;break}a=s.data,t.next=30;break;case 29:throw new Error("[group fields failed]"+s.message);case 30:u.terminate();case 31:return t.abrupt("return",a);case 32:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function A(t,e,r,n,a){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(p.a.mark((function t(e,r,n,a,o){var i,u,s,c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],!o){t.next=21;break}return t.prev=2,t.next=5,fetch(O+"/api/service/combineFields",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:e,dimensions:r,measures:n,operator:a})});case 5:return u=t.sent,t.next=8,u.json();case 8:if(!0!==(s=t.sent).success){t.next=13;break}i=s.data,t.next=14;break;case 13:throw new Error("[combine fields failed]"+s.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:t.next=31;break;case 21:return c=new E,t.next=24,j(c,{dataSource:e,dimensions:r,measures:n,operator:a});case 24:if(!0!==(l=t.sent).success){t.next=29;break}i=l.data,t.next=30;break;case 29:throw new Error("[combine fields failed]"+l.message);case 30:c.terminate();case 31:return t.abrupt("return",i);case 32:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function q(t,e,r){return P.apply(this,arguments)}function P(){return(P=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=[],!n){t.next=21;break}return t.prev=2,t.next=5,fetch(O+"/api/service/clusterMeasures",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({maxGroupNumber:e,spaces:r})});case 5:return o=t.sent,t.next=8,o.json();case 8:if(!0!==(i=t.sent).success){t.next=13;break}a=i.data.map((function(t,e){return Object(g.a)(Object(g.a)({},t),{},{index:e})})),t.next=14;break;case 13:throw new Error("[cluster measures]"+i.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:t.next=31;break;case 21:return u=new M,t.next=24,j(u,{maxGroupNumber:e,spaces:r});case 24:if(!0!==(s=t.sent).success){t.next=29;break}a=s.data.map((function(t,e){return Object(g.a)(Object(g.a)({},t),{},{index:e})})),t.next=30;break;case 29:throw new Error("[cluster measures]"+s.message);case 30:u.terminate();case 31:return t.abrupt("return",a);case 32:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function F(t,e,r,n,a){return I.apply(this,arguments)}function I(){return(I=Object(m.a)(p.a.mark((function t(e,r,n,a,o){var i,u,s,c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],!o){t.next=21;break}return t.prev=2,t.next=5,fetch(O+"/api/service/generateDashBoard",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dataSource:e,dimensions:r,measures:n,subspaces:a})});case 5:return u=t.sent,t.next=8,u.json();case 8:if(!(s=t.sent).success){t.next=13;break}i=s.data,t.next=14;break;case 13:throw new Error("[generateDashBoard]"+s.message);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(2),console.error(t.t0);case 19:t.next=31;break;case 21:return c=new w,t.next=24,j(c,{dataSource:e,dimensions:r,measures:n,subspaces:a});case 24:if(!(l=t.sent).success){t.next=29;break}i=l.data,t.next=30;break;case 29:throw new Error("[generateDashBoard]"+l.message);case 30:c.terminate();case 31:return t.abrupt("return",i);case 32:case"end":return t.stop()}}),t,null,[[2,16]])})))).apply(this,arguments)}function z(){return(z=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.prev=1,o=new k,t.next=5,j(o,{dataSource:e,dimensions:r,measures:n});case 5:if(!(i=t.sent).success){t.next=10;break}a=i.data,t.next=11;break;case 10:throw new Error("[getInsightViewSpace]"+i.message);case 11:o.terminate(),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),console.error(t.t0);case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[1,14]])})))).apply(this,arguments)}var L=function(){var t=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s,c,l,f,h,d,v,m,g,y,b;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.dataSource,o=n.fields,i=e(),u=o.filter((function(t){return"dimension"===t.type})).map((function(t){return t.name})),s=o.filter((function(t){return"measure"===t.type})).map((function(t){return t.name})),t.prev=4,t.next=7,_(a,o.map((function(t){return t.name})),i.useServer);case 7:return c=t.sent,l=c?c.filter((function(t){return u.includes(t.fieldName)})).map((function(t){return{name:t.fieldName,type:t.type}})):[],t.next=11,T(a,l,i.useServer);case 11:return f=t.sent,d=(h=f||{groupedData:a,newFields:l}).groupedData,v=h.newFields,m=o.map((function(t){var e=v.find((function(e){return e.name===t.name+"(group)"}));return{name:e?e.name:t.name,type:t.type}})),g=m.filter((function(t){return"dimension"===t.type})).map((function(t){return t.name})),t.next=17,_(d,v,i.useServer);case 17:return y=t.sent,r((function(t){t.cookedDataSource=d,t.summary={origin:c||[],grouped:y||[]},t.loading.univariateSummary=!1})),b=(y||[]).concat(c||[]),t.abrupt("return",{groupedData:d,summary:b,newDimensions:g,measures:s});case 23:t.prev=23,t.t0=t.catch(4),console.error(t.t0),r((function(t){t.loading.univariateSummary=!1}));case 27:case"end":return t.stop()}}),t,null,[[4,23]])})));return function(e,r,n){return t.apply(this,arguments)}}(),R=function(){var t=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s,c,l,f,h;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.groupedData,o=n.summary,i=n.dimensions,u=n.measures,s=n.operator,c=e(),r((function(t){t.loading.subspaceSearching=!0})),l=[],(l=i.map((function(t){var e=o.find((function(e){return e.fieldName===t}));return{name:t,entropy:e?e.entropy:1/0}}))).sort((function(t,e){return t.entropy-e.entropy})),r((function(t){t.cookedDimensions=l.map((function(t){return t.name})),t.cookedMeasures=u})),f=l.map((function(t){return t.name})).slice(0,Math.round(l.length*c.topK.dimensionSize)),t.prev=8,t.next=11,A(a,f,u,s,c.useServer);case 11:(h=t.sent)&&r((function(t){t.subspaceList=h})),r((function(t){t.loading.subspaceSearching=!1})),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),r((function(t){t.loading.subspaceSearching=!1}));case 19:case"end":return t.stop()}}),t,null,[[8,16]])})));return function(e,r,n){return t.apply(this,arguments)}}(),B=function(){var t=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.subspaceList,o=n.maxGroupNumber,i=n.useServer,u=[],t.prev=2,t.next=5,q(o,a.map((function(t){return{dimensions:t.dimensions,measures:t.measures,matrix:t.correlationMatrix}})),i);case 5:u=t.sent,r((function(t){t.viewSpaces=u})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e,r,n){return t.apply(this,arguments)}}(),G=function(){var t=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s,c,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.dataSource,o=n.fields,r((function(t){t.loading.gallery=!0})),t.prev=2,t.next=5,L(e,r,{dataSource:a,fields:o});case 5:if(!(i=t.sent)){t.next=10;break}return u=i.groupedData,s=i.summary,c=i.newDimensions,l=i.measures,t.next=10,R(e,r,{groupedData:u,summary:s,dimensions:c,measures:l,operator:"sum"});case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(2);case 14:return t.prev=14,r((function(t){t.loading.gallery=!1,t.loading.gallery=!1})),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[2,12,14,17]])})));return function(e,r,n){return t.apply(this,arguments)}}(),U={univariateSummary:L,subspaceSearch:R,extractInsights:G,getDashBoard:function(){var t=Object(m.a)(p.a.mark((function t(e,r,n){var a,o,i,u,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e(),o=n.dataSource,i=n.dimensions,u=n.measures,r((function(t){t.loading.dashBoard=!0})),t.prev=3,t.next=6,F(o,i,u,a.subspaceList,a.useServer);case 6:s=t.sent,r((function(t){t.dashBoardList=s})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.error(t.t0);case 13:return t.prev=13,r((function(t){t.loading.dashBoard=!1})),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[3,10,13,16]])})));return function(e,r,n){return t.apply(this,arguments)}}(),getViewSpaces:B},K=[{name:"English",value:"en-US"},{name:"\u4e2d\u6587(Chinese)",value:"zh-CN"}];Object(d.b)(!1);var V={lang:K[0].value,beCool:!1,currentPage:0,useServer:!1,fields:[],rawData:[],cookedDataSource:[],cookedDimensions:[],cookedMeasures:[],loading:{univariateSummary:!1,subspaceSearching:!1,gallery:!1,dashBoard:!1},topK:{subspacePercentSize:.3,dimensionSize:.72},maxGroupNumber:4,subspaceList:[],summary:{origin:[],grouped:[]},viewSpaces:[],dashBoardList:[]},Q=Object(o.createContext)(null);function Y(t){var e=t.children,r=Object(o.useState)(V),n=Object(c.a)(r,2),a=n[0],u=n[1],s=Object(o.useRef)(V),l=function(t){return{dimScores:Object(o.useMemo)((function(){return[].concat(Object(h.a)(t.summary.origin),Object(h.a)(t.summary.grouped)).map((function(t){return[t.fieldName,t.entropy,t.maxEntropy,{name:t.fieldName,type:t.type}]}))}),[t.summary])}}(a),f=Object(o.useCallback)((function(t){u((function(e){var r=Object(d.a)(e,(function(e){return t(e)}));return s.current=r,r}))}),[u]),v=Object(o.useCallback)((function(t,e){if("function"===typeof U[t]){U[t]((function(){return s.current}),f,e)}}),[f]);return i.a.createElement(Q.Provider,{value:[a,f,v,l]},e)}function H(){return Object(o.useContext)(Q)}var X=r(499),W=r(236),J=r(220),Z=r.n(J);function $(t){return new Promise((function(e,r){Z.a.parse(t,{complete:function(t,r){var n=t.data,a=n[0],o=n.slice(1).map((function(t){var e={};return a.forEach((function(r,n){e[r]=t[n]})),e}));e(o)},error:function(t,e){r(t)}})}))}function tt(t){return new Promise((function(e,r){var n=new FileReader;n.readAsText(t),n.onload=function(t){if(t.target)try{var n=JSON.parse(t.target.result);e(n)}catch(a){r(a)}else r(t)},n.onerror=r}))}function et(t){return isNaN(t)?null:Number(t)}function rt(t){var e=Object(o.useState)(t),r=Object(c.a)(e,2),n=r[0],a=r[1];return[n,Object(o.useCallback)((function(t){a((function(e){return Object(d.a)(e,(function(e){return t(e)}))}))}),[a])]}r(287);var nt=r.p+"static/media/rath-glasses.a2df4be3.png",at=r(507),ot=r(513),it=r(500),ut=r(493),st=r(245),ct=r(19),lt=r(476),ft=r(502),ht=r(39),dt=r(504),vt=r(496),pt=r(505),mt=function(){return{root:{marginTop:"10px"}}},gt=[{key:"sum",text:"Sum"},{key:"count",text:"Count"},{key:"mean",text:"Mean"}],yt=function(t){var e=t.show,r=void 0!==e&&e,n=t.onUpdateConfig,a=t.onClose,u=t.config,s=Object(o.useState)("sum"),l=Object(c.a)(s,2),f=l[0],h=l[1],d=Object(o.useState)(!0),v=Object(c.a)(d,2),p=v[0],m=v[1],g=Object(o.useState)(!0),y=Object(c.a)(g,2),b=y[0],w=y[1];Object(o.useEffect)((function(){var t=u.aggregator,e=u.defaultAggregated,r=u.defaultStack;h(t),m(e),w(r)}),[u,r]);return i.a.createElement(ft.a,{isOpen:r,type:ht.a.smallFixedFar,onDismiss:a,headerText:"Preference",closeButtonAriaLabel:"Close",onRenderFooterContent:function(){return i.a.createElement("div",null,i.a.createElement(lt.a,{onClick:function(){n({aggregator:f,defaultAggregated:p,defaultStack:b})}},"Save"))}},i.a.createElement(dt.a,null,"Preference"),i.a.createElement(ut.a,{verticalFill:!0,tokens:{childrenGap:50,padding:6}},i.a.createElement(vt.a,{selectedKey:f,label:"Aggregator",allowFreeform:!0,autoComplete:"on",options:gt,onChange:function(t,e){e&&h(e.key)}}),i.a.createElement(pt.a,{styles:mt,label:"measurement aggregation",checked:p,onChange:function(t,e){m(e||!1)}}),i.a.createElement(pt.a,{styles:mt,label:"measurement stack",checked:b,onChange:function(t,e){w(e||!1)}})))},bt=r(71),wt=r.n(bt),Mt=r(32),Et=r(2);function xt(t,e){return e[t]?e[t].semanticType:"nominal"}function St(t,e){return e[t]?e[t].type:"dimension"}function kt(t,e){console.log({query:t,fields:e});var r,n={},a=Object(Et.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n[o.name]=o}}catch(p){a.e(p)}finally{a.f()}var i=function(t){return xt(t,n)};function u(t,e){if("point"===e)return!1;var r=i(t);return"rect"===e?"quantitative"!==r:"quantitative"===r&&"measure"===function(t){return St(t,n)}(t)}var s=t.geomType[0]&&_t[t.geomType[0]]?_t[t.geomType[0]]:t.geomType[0],c=i(t.position[0]),l=i(t.position[1]),f=i(t.color[0]),h=u(t.position[0],s),d=u(t.position[1],s),v=t.color[0];return"rect"===s&&(t.color[0]&&"quantitative"!==f?s="point":t.opacity[0]&&t.size[0]&&(v=t.size[0]||t.opacity[0])),{data:{name:"dataSource"},autosize:{type:"pad"},mark:s,selection:{sl:{type:"bar"===s?"single":"interval",encodings:"bar"===s?["x"]:void 0}},encoding:{x:t.position[0]&&{field:t.position[0],type:i(t.position[0]),bin:"rect"===s&&"quantitative"===c&&{maxbins:20},aggregate:"rect"!==s&&h&&"sum"},y:t.position[1]&&{field:t.position[1],type:i(t.position[1]),bin:"rect"===s&&"quantitative"===l&&{maxbins:20},aggregate:"rect"!==s&&d&&"sum"},size:t.size[0]&&{field:t.size[0],type:i(t.size[0])},column:t.facets[0]&&{field:t.facets[0],type:i(t.facets[0])},row:t.facets[1]&&{field:t.facets[1],type:i(t.facets[1])},opacity:t.opacity[0]&&{field:t.opacity[0],type:i(t.opacity[0])},shape:t.shape[0]&&{field:t.shape[0],type:i(t.shape[0])},color:(v||"rect"===s)&&{field:v,aggregate:"rect"===s&&"quantitative"===i(v)&&(v?"sum":"count"),type:v&&i(v)}}}}function Ot(t,e){var r,n={},a=Object(Et.a)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;n[o.name]=o}}catch(m){a.e(m)}finally{a.f()}var i=function(t){return xt(t,n)};function u(t,e){if("point"===e)return!1;var r=i(t);return"rect"===e?"quantitative"!==r:"quantitative"===r&&"measure"===function(t){return St(t,n)}(t)}var s=t.geomType[0]&&_t[t.geomType[0]]?_t[t.geomType[0]]:t.geomType[0],c=i(t.position[0]),l=i(t.position[1]),f=i(t.color[0]),h=u(t.position[0],s),d=u(t.position[1],s),v=[t.position[1]];t.highFacets&&(v=v.concat(t.highFacets.filter((function(t){return"quantitative"===i(t)}))));var p=t.color[0];return"rect"===s&&(t.color[0]&&"quantitative"!==f?s="point":t.opacity[0]&&t.size[0]&&(p=t.size[0]||t.opacity[0])),{config:{repeat:{columns:5}},data:{name:"dataSource"},autosize:{type:"pad"},repeat:v,spec:{mark:s,selection:{sl:{type:"bar"===s?"single":"interval",encodings:"bar"===s?["x"]:void 0}},encoding:{x:t.position[0]&&{field:t.position[0],type:i(t.position[0]),bin:"rect"===s&&"quantitative"===c&&{maxbins:20},aggregate:"rect"!==s&&h&&"sum"},y:v[0]&&{field:{repeat:"repeat"},type:i(v[0]),bin:"rect"===s&&"quantitative"===l&&{maxbins:20},aggregate:"rect"!==s&&d&&"sum"},size:t.size[0]&&{field:t.size[0],type:i(t.size[0])},opacity:t.opacity[0]&&{field:t.opacity[0],type:i(t.opacity[0])},shape:t.shape[0]&&{field:t.shape[0],type:i(t.shape[0])},color:(p||"rect"===s)&&{field:p,aggregate:"rect"===s&&"quantitative"===i(p)&&(p?"sum":"count"),type:p&&i(p)}}}}}var jt={interval:"bar",line:"line",point:"point",density:"point"};var _t={interval:"bar",line:"line",point:"point",density:"rect"},Dt=function(t){var e=t.defaultAggregated,r=t.defaultStack,n=t.aggregator,a=t.dataSource,u=void 0===a?[]:a,s=t.dimensions,c=void 0===s?[]:s,l=t.measures,f=void 0===l?[]:l,h=t.schema,d=void 0===h?{}:h,v=t.fieldFeatures,p=void 0===v?[]:v,m=Object(o.useRef)(null),y=Object(o.useMemo)((function(){return f.map((function(t){return{op:n,field:t,as:"".concat(t,"_").concat(n)}}))}),[f,n]),b=Object(o.useMemo)((function(){return e?wt()({dataSource:u,dimensions:c,measures:f,operator:n,asFields:y.map((function(t){return t.as}))}):u}),[e,u,c,f,n,y]);return Object(o.useEffect)((function(){if(null!==m.current&&d.position&&d.position.length>0&&d.geomType&&d.geomType.length>0){var t=function(t,e,r,n,a,o,i,u){var s=t.position,c=void 0===s?[]:s,l=t.color,f=void 0===l?[]:l,h=t.size,d=void 0===h?[]:h,v=t.facets,p=void 0===v?[]:v,m=t.opacity,y=void 0===m?[]:m,b=t.geomType,w=void 0===b?[]:b,M=t.page,E=void 0===M?[]:M;function x(t){if(i&&n.includes(t)){var e=a.find((function(e){return e.field===t}));return e?e.as:t}return t}function S(t){var e=o.find((function(e){return e.name===t}));return e?e.type:"nominal"}var k={x:c[0],y:c[1],color:f[0],size:d[0],opacity:y[0],row:p[0],column:p[1]},O={width:600,data:{values:e}},j={width:600,mark:{type:w[0]&&jt[w[0]]?jt[w[0]]:w[0],tooltip:!0},encoding:{}};for(var _ in k)k[_]&&(j.encoding[_]={field:x(k[_]),type:S(k[_])},["x","y"].includes(_)&&"quantitative"===S(k[_])&&!u&&(j.encoding[_].stack=null));if(u||0!==y.length||(j.encoding.opacity={value:.7}),0===E.length)O=Object(g.a)(Object(g.a)({},O),j);else if(E.length>0){j.transform=[{filter:{selection:"brush"}},i?{aggregate:a,groupby:r.filter((function(t){return t!==E[0]}))}:null].filter(Boolean);var D={width:600,mark:"tick",selection:{brush:{encodings:["x"],type:"interval"}},encoding:{x:{field:E[0],type:S(E[0])}}};O.vconcat=[j,D]}return O}(d,b,c,f,y,p,e,r);Object(Mt.a)(m.current,t)}}),[d,b,c,f,y,p,e,r]),i.a.createElement("div",{ref:m})},Tt=r(26),Nt=r(139),At=r.n(Nt),Ct=r(497),qt=r(23),Pt=(r(213),function(t){var e=t.space,r=t.dimensions,n=void 0===r?[]:r,a=t.measures,u=void 0===a?[]:a,s=t.dimScores,l=void 0===s?[]:s,f=t.spaceList,d=void 0===f?[]:f,v=t.schema,p=Object(o.useState)(!1),m=Object(c.a)(p,2),g=m[0],y=m[1],b=Object(o.useMemo)((function(){return Object(h.a)(l).sort((function(t,e){return t[1]-e[1]}))}),[l]),w=Object(o.useMemo)((function(){if("undefined"!==typeof e){var t,r=Object(Et.a)(d);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.dimensions.some((function(t){return e.dimensions.includes(t)})))return n.dimensions.find((function(t){return e.dimensions.includes(t)}))}}catch(a){r.e(a)}finally{r.f()}}}),[e,d]),M=Object(o.useMemo)((function(){if("undefined"!==typeof e){for(var t=e.measures.filter((function(t){return u.includes(t.name)})),r=1/0,n=0,a=0;a<t.length;a++)t[a].value<r&&(r=t[a].value,n=a);return t[n].name}}),[u,e]),E=Object(o.useMemo)((function(){var t=b.find((function(t){return n.includes(t[0])}));return t?t[0]:void 0}),[b,n]),x="\n  ".concat(v&&v.position?"Current chart mainly focus on the relationship between ***".concat(v.position[0],"*** and ***").concat(v.position[1],"***"):"","\n  ").concat(n.length>1?"+ DataSource is grouped by ***".concat(n.join(", "),"***, measures(indicators) will propose strong difference of distribution between each other."):"","\n  ").concat(u.length>1?"+ ***".concat(u.join(", "),"***are strongly related to each other"):"","\n  ").concat(E?"+ The distribution of member countings of ***".concat(E,"*** seems to contain more orders and patterns."):"","\n  ").concat(w?"+ ***".concat(w,"*** has great influence on aggregated measure values."):"","\n  ").concat(M?"+ ***".concat(M,"*** is more likely to have patterns according to its distribution."):"","\n  ``  ");return i.a.createElement("div",null,i.a.createElement(st.a,{id:"vis-summary",text:"Summary",onClick:function(){y(!0)}}),g?i.a.createElement("div",null,i.a.createElement(Ct.a,{calloutProps:{directionalHint:qt.a.bottomCenter},isWide:!0,hasCloseIcon:!0,closeButtonAriaLabel:"Close",target:"#vis-summary",onDismiss:function(){y(!1)},headline:"Chart Description"},i.a.createElement(At.a,{source:x}))):null)}),Ft=function(t){var e=t.space,r=t.dimensions,n=void 0===r?[]:r,a=t.measures,u=void 0===a?[]:a,s=t.dimScores,c=void 0===s?[]:s,l=t.spaceList,f=void 0===l?[]:l,d=t.schema,v=Object(o.useMemo)((function(){return Object(h.a)(c).sort((function(t,e){return t[1]-e[1]}))}),[c]),p=Object(o.useMemo)((function(){if("undefined"!==typeof e){var t,r=Object(Et.a)(f);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(n.dimensions.some((function(t){return e.dimensions.includes(t)})))return n.dimensions.find((function(t){return e.dimensions.includes(t)}))}}catch(a){r.e(a)}finally{r.f()}}}),[e,f]),m=Object(o.useMemo)((function(){if("undefined"!==typeof e){for(var t=e.measures.filter((function(t){return u.includes(t.name)})),r=1/0,n=0,a=0;a<t.length;a++)t[a].value<r&&(r=t[a].value,n=a);return t[n].name}}),[u,e]),g=Object(o.useMemo)((function(){var t=v.find((function(t){return n.includes(t[0])}));return t?t[0]:void 0}),[v,n]),y="\n  ".concat(d&&d.position?"Current chart mainly focus on the relationship between ***".concat(d.position[0],"*** and ***").concat(d.position[1],"***"):"","\n  ").concat(n.length>1?"+ DataSource is grouped by ***".concat(n.join(", "),"***, measures(indicators) will propose strong difference of distribution between each other."):"","\n  ").concat(u.length>1?"+ ***".concat(u.join(", "),"***are strongly related to each other"):"","\n  ").concat(g?"+ The distribution of member countings of ***".concat(g,"*** seems to contain more orders and patterns."):"","\n  ").concat(p?"+ ***".concat(p,"*** has great influence on aggregated measure values."):"","\n  ").concat(m?"+ ***".concat(m,"*** is more likely to have patterns according to its distribution."):"","\n  ``  ");return i.a.createElement(At.a,{source:y})};function It(t,e){var r,n=new Set([].concat(Object(h.a)(t),Object(h.a)(e))),a=new Set(t),o=new Set(e),i=[],u=[],s=Object(Et.a)(n);try{for(s.s();!(r=s.n()).done;){var c=r.value;i.push(Number(a.has(c))),u.push(Number(o.has(c)))}}catch(d){s.e(d)}finally{s.f()}for(var l=0,f=0;f<i.length;f++)l+=i[f]*u[f];return l/=Math.sqrt(t.length)*Math.sqrt(e.length)}var zt=function(t){var e=t.viewSpaces,r=t.interestedViewSpace,n=t.fieldScores,a=t.dataSource,i=Object(o.useMemo)((function(){var t,n=[],a=Object(Et.a)(e);try{var o=function(){var e=t.value;e.dimensions.length>r.dimensions.length&&e.dimensions.length-r.dimensions.length<=2&&(r.dimensions.every((function(t){return e.dimensions.find((function(e){return t===e}))}))&&n.push(e))};for(a.s();!(t=a.n()).done;)o()}catch(i){a.e(i)}finally{a.f()}return n}),[r,e]),u=Object(o.useMemo)((function(){var t,e=[],n=Object(Et.a)(i);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=It(r.measures,a.measures);o>.2&&e.push(Object(g.a)(Object(g.a)({},a),{},{relatedScore:a.score/Math.sqrt(o)}))}}catch(u){n.e(u)}finally{n.f()}return e.sort((function(t,e){return t.relatedScore-e.relatedScore}))}),[i,r.measures]);return Object(o.useMemo)((function(){return u.slice(0,5).map((function(t){var e=n.filter((function(e){return t.dimensions.includes(e[0])||t.measures.includes(e[0])}));return Object(g.a)(Object(g.a)({},t),{},{schema:Object(Tt.g)(e,a,t.dimensions,t.measures).schema})}))}),[u,n,a])};var Lt=function(t){var e=t.digDimensionProps,r=t.subspaceList,n=t.onSelectView,a=e.dataSource,o=e.visualConfig,u=e.fieldScores,s=zt(e),c=u.map((function(t){return t[3]}));return i.a.createElement("div",null,i.a.createElement("div",{className:"ms-Grid"},s.map((function(t,e){var s=r.find((function(e){return r=e.dimensions,n=t.dimensions,r.length===n.length&&r.every((function(t){return n.includes(t)}));var r,n}));return i.a.createElement("div",{key:"associate-row-".concat(e),className:"ms-Grid-row",style:{border:"solid 1px #bfbfbf",margin:"1em",padding:"1em"}},i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg9",style:{overflow:"auto"}},i.a.createElement(Dt,{aggregator:o.aggregator,defaultAggregated:!t.schema.geomType||!t.schema.geomType.includes("point"),defaultStack:o.defaultStack,dimensions:t.dimensions,measures:t.measures,dataSource:a,schema:t.schema,fieldFeatures:c})),i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg3",style:{fontSize:14,color:"#8a8886",overflow:"auto"}},i.a.createElement("div",null,i.a.createElement(ut.a,{tokens:{childrenGap:8},horizontal:!0},i.a.createElement(ot.a,{iconProps:{iconName:"Lightbulb"},title:"Interested",onClick:function(){n(t.index)}}))),s&&i.a.createElement(Ft,{dimensions:t.dimensions,measures:t.measures,dimScores:u,space:s,spaceList:r,schema:t.schema})))}))))},Rt=r(22),Bt=r(506),Gt=r(232),Ut=r.n(Gt),Kt=r(21);function Vt(){var t=Object(Rt.a)(["\n  margin-right: 1rem;\n  cursor: pointer;\n  color: rgb(16, 110, 190);\n"]);return Vt=function(){return t},t}function Qt(){var t=Object(Rt.a)(["\n  padding: 1rem;\n  overflow-x: auto;\n  margin: 1rem;\n"]);return Qt=function(){return t},t}var Yt=Kt.c.div(Qt()),Ht=Kt.c.a(Vt());var Xt=function(t){var e=H(),r=Object(c.a)(e,4),n=r[0],a=r[2],u=r[3],s=Object(o.useState)([]),l=Object(c.a)(s,2),f=l[0],d=l[1],v=n.subspaceList,p=n.viewSpaces,m=n.maxGroupNumber,g=n.useServer,y=u.dimScores;Object(o.useEffect)((function(){a("getViewSpaces",{subspaceList:v,maxGroupNumber:m,useServer:g})}),[v,m,g,a]);var b=Object(o.useMemo)((function(){return new Ut.a(p,{keys:["dimensions","measures"]})}),[p]),w=function(t){var e=Object(o.useState)(0),r=Object(c.a)(e,2),n=r[0],a=r[1];Object(o.useEffect)((function(){a(0)}),[t]);var i=Math.ceil(t/4),u=Math.max(n-2,0),s=Math.min(n+2,i),l=Object(o.useMemo)((function(){return[4*n,Math.min(4*(n+1),t)]}),[t,n]),f=Object(h.a)(new Array(s-u+1)).map((function(t,e){return u+e}));return{currentPage:n,visPageRange:f,itemRange:l,gotoPage:function(t){a((t+i)%i)},lastPage:function(){a((function(t){return(t+i-1)%i}))},nextPage:function(){a((function(t){return(t+i+1)%i}))}}}(f.length),M=w.currentPage,E=w.visPageRange,x=w.itemRange,S=w.gotoPage,k=w.lastPage,O=w.nextPage,j=Object(o.useMemo)((function(){return f.slice(x[0],x[1]).map((function(t){var e=t.dimensions,r=t.measures,a=y.filter((function(t){return e.includes(t[0])||r.includes(t[0])}));return{schema:Object(Tt.g)(a,n.cookedDataSource,e,r).schema,fieldFeatures:a.map((function(t){return t[3]})),aggData:n.cookedDataSource,dimensions:e,measures:r}}))}),[n.cookedDataSource,f,x,y]);return i.a.createElement("div",null,i.a.createElement(Bt.a,{placeholder:"Search",onSearch:function(t){var e=b.search(t);d(e)},underlined:!0}),i.a.createElement("p",{className:"state-description"},f.length," results are found. current page is ",M+1),i.a.createElement("div",null,i.a.createElement(Ht,{onClick:k},"Last Page"),f.length>0&&E.map((function(t){return i.a.createElement(Ht,{key:"page-btn-".concat(t),onClick:function(){S(t)}},t+1)})),i.a.createElement(Ht,{onClick:O},"Next Page")),i.a.createElement("div",null,j.map((function(t,e){return i.a.createElement(Yt,{key:"result-".concat(e)},i.a.createElement(Dt,{aggregator:"sum",defaultAggregated:!0,defaultStack:!0,dimensions:t.dimensions,measures:t.measures,dataSource:t.aggData,schema:t.schema,fieldFeatures:t.fieldFeatures}))}))))},Wt=["rankList","search"],Jt=function(t){var e=t.dataSource,r=t.summary,n=t.subspaceList,a=H(),u=Object(c.a)(a,2),s=u[0],l=u[1],d=Object(o.useMemo)((function(){return Wt.map((function(t,e){return{title:f.a.get("explore.".concat(t)),itemKey:"pivot-"+e}}))}),[s.lang]),v=Object(o.useState)(0),p=Object(c.a)(v,2),m=p[0],y=p[1],b=Object(o.useState)(d[0].itemKey),w=Object(c.a)(b,2),M=w[0],E=w[1],x=rt({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1}}),S=Object(c.a)(x,2),k=S[0],O=S[1],j=Object(o.useState)(!1),_=Object(c.a)(j,2),D=_[0],T=_[1],N=Object(o.useState)({aggregator:"sum",defaultAggregated:!0,defaultStack:!0}),A=Object(c.a)(N,2),C=A[0],P=A[1],F=Object(o.useState)([]),I=Object(c.a)(F,2),z=I[0],L=I[1],R=Object(o.useState)({schema:{position:[],color:[],opacity:[],geomType:[]},fieldFeatures:[],aggData:[],dimensions:[],measures:[]}),B=Object(c.a)(R,2),G=B[0],U=B[1],K=function(t){y(t)};Object(o.useEffect)((function(){l((function(t){t.loading.gallery=!0})),q(s.maxGroupNumber,n.map((function(t){return{dimensions:t.dimensions,measures:t.measures,matrix:t.correlationMatrix}})),s.useServer).then((function(t){L(t),l((function(t){t.loading.gallery=!1}))}))}),[n,e,s.maxGroupNumber,s.useServer,l]);var V=Object(o.useMemo)((function(){return[].concat(Object(h.a)(r.origin),Object(h.a)(r.grouped)).map((function(t){return[t.fieldName,t.entropy,t.maxEntropy,{name:t.fieldName,type:t.type}]}))}),[r.origin,r.grouped]);Object(o.useEffect)((function(){var t=z[m];if(t){var r=t.dimensions,n=t.measures;try{var a=V.filter((function(t){return r.includes(t[0])||n.includes(t[0])})),o=Object(Tt.g)(a,e,r,n).schema;U({schema:o,fieldFeatures:a.map((function(t){return t[3]})),aggData:e,dimensions:r,measures:n}),o.geomType&&(o.geomType.includes("point")||o.geomType.includes("density"))?P((function(t){return Object(g.a)(Object(g.a)({},t),{},{defaultAggregated:!1})})):P((function(t){return Object(g.a)(Object(g.a)({},t),{},{defaultAggregated:!0})}))}catch(i){console.log(i)}}}),[z,m,e,V]);var Q=Object(o.useMemo)((function(){return n.find((function(t){return t.dimensions.join(",")===G.dimensions.join(",")}))}),[n,G]);return Object(o.useEffect)((function(){T(!1)}),[m]),i.a.createElement("div",{className:"content-container"},i.a.createElement(yt,{show:k.show.configPanel,config:C,onUpdateConfig:function(t){P(t),O((function(t){t.show.configPanel=!1}))},onClose:function(){O((function(t){t.show.configPanel=!1}))}}),i.a.createElement("div",{className:"card",style:{paddingTop:"0.2rem"}},i.a.createElement(X.a,{selectedKey:M,onLinkClick:function(t){t&&E(t.props.itemKey)}},d.map((function(t){return i.a.createElement(W.a,{headerText:t.title,key:t.itemKey,itemKey:t.itemKey})}))),(s.loading.gallery||s.loading.subspaceSearching||s.loading.univariateSummary)&&i.a.createElement(at.a,{description:"calculating"}),M===d[0].itemKey&&i.a.createElement("div",null,i.a.createElement("h2",{style:{marginBottom:0}},f.a.get("explore.title"),i.a.createElement(ot.a,{iconProps:{iconName:"Settings"},title:f.a.get("explore.preference"),ariaLabel:f.a.get("explore.preference"),onClick:function(){O((function(t){t.show.configPanel=!0}))}}),i.a.createElement(ot.a,{iconProps:{iconName:"Lightbulb"},title:f.a.get("explore.digIn"),ariaLabel:f.a.get("explore.digIn"),onClick:function(){T(!0)}})),i.a.createElement("p",{className:"state-description"},f.a.get("explore.desc")),i.a.createElement("p",{className:"state-description"},f.a.get("explore.tip")),i.a.createElement("div",{className:"ms-Grid",dir:"ltr"},i.a.createElement("div",{className:"ms-Grid-row"},i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg3",style:{overflow:"auto"}},i.a.createElement("div",{style:{marginBottom:"1rem"}},i.a.createElement(it.a,{label:f.a.get("expore.currentPage"),value:(m+1).toString(),min:0,max:z.length,step:1,iconProps:{iconName:"Search"},labelPosition:ct.a.end,onValidate:function(t){K((Number(t)-1)%z.length)},onIncrement:function(){K((m+1)%z.length)},onDecrement:function(){K((m-1+z.length)%z.length)},incrementButtonAriaLabel:"Increase value by 1",decrementButtonAriaLabel:"Decrease value by 1"})),i.a.createElement("p",{className:"state-description"},"Page No. ",m+1," of ",z.length),i.a.createElement(ut.a,{horizontal:!0,tokens:{childrenGap:20}},i.a.createElement(st.a,{text:f.a.get("explore.last"),onClick:function(){K((m-1+z.length)%z.length)},allowDisabledFocus:!0}),i.a.createElement(st.a,{text:f.a.get("explore.next"),onClick:function(){K((m+1)%z.length)},allowDisabledFocus:!0})),i.a.createElement("h3",null,"Specification"),i.a.createElement("pre",null,JSON.stringify(G.schema,null,2)),i.a.createElement(Pt,{dimensions:G.dimensions,measures:G.measures,dimScores:V,space:Q,spaceList:n,schema:G.schema})),i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg9",style:{overflow:"auto"}},i.a.createElement(Dt,{aggregator:C.aggregator,defaultAggregated:C.defaultAggregated,defaultStack:C.defaultStack,dimensions:G.dimensions,measures:G.measures,dataSource:G.aggData,schema:G.schema,fieldFeatures:G.fieldFeatures}))))),M===d[1].itemKey&&i.a.createElement(Xt,null)),M===d[0].itemKey&&D&&i.a.createElement("div",{className:"card"},i.a.createElement("h2",null," ",f.a.get("explore.related.title")," "),i.a.createElement(Lt,{onSelectView:function(t){var e=z.findIndex((function(e){return e.index===t}));e>-1&&K(e)},subspaceList:n,digDimensionProps:{visualConfig:C,dataSource:e,viewSpaces:z,fieldScores:V,interestedViewSpace:z[m]}})))},Zt=r(501),$t=r(491),te=r(237),ee=r.n(te),re=r(148),ne=function(t){var e=Object(o.useRef)(null),r=t.x,n=t.y,a=t.dataSource,u=t.fieldType;return Object(o.useEffect)((function(){if(e.current){var t=[],o=!1;t="ordinal"===u&&a.some((function(t){return/(\[|\()-?([0-9.]+|Infinity),\s*([0-9.]+|Infinity)(\]|\))/.test(t.memberName)}))?a.map((function(t){o=!0;var e=Object(re.a)(/(\[|\()(\x2D?([\.0-9]+|Infinity)),[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\.0-9]+|Infinity)(\]|\))/,{left:2}).exec(t.memberName);return Object(g.a)(Object(g.a)({},t),{},{index:null===e?t.name:Number(e.groups.left)})})):a;var i=void 0;"nominal"===u?i="-y":"ordinal"===u&&o&&(i={field:"index"}),Object(Mt.a)(e.current,{background:"#fff",data:{values:t},height:120,width:200,mark:["quantitative","temporal"].includes(u)?"line":"bar",encoding:{x:{field:r,axis:a.length>16?null:void 0,type:u,sort:i},y:{field:n,type:"quantitative",aggregate:"sum"}}},{actions:!1})}}),[r,n,a,u]),i.a.createElement("div",{ref:e})},ae=r(490);r(407);function oe(){var t=Object(Rt.a)(["\n    --header-bgcolor: #fafafa;\n    --bgcolor: rgba(0, 0, 0, 0);\n    --header-row-height: 48px;\n"]);return oe=function(){return t},t}var ie=Object(Kt.c)(ae.a)(oe()),ue=[{code:"fieldName",name:"fieldName"},{code:"type",name:"type",width:160},{code:"entropy",name:"entropy",width:220,align:"right"},{code:"maxEntropy",name:"maxEntropy",width:220,align:"right"}];function se(t){switch(t){case"nominal":return"TextField";case"quantitative":return"NumberField";case"ordinal":return"Breadcrumb";case"temporal":return"EventDate";default:return""}}var ce=function(t){var e=t.originSummary,r=t.groupedSummary,n=Object(o.useMemo)((function(){var t=e.map((function(t){return t.maxEntropy}));return[0,Math.max.apply(Math,Object(h.a)(t))]}),[e]),a=Object(o.useCallback)((function(t){return i.a.createElement("div",{className:"field-hover-card"},i.a.createElement("h2",null,t.fieldName),i.a.createElement("div",null,"Field entropy is ",Number(t.entropy).toFixed(2)),i.a.createElement("div",{className:"chart-vertical-margin-container"},i.a.createElement(ne,{x:"memberName",y:"count",fieldType:t.type,dataSource:t.distribution})))}),[]),u=Object(o.useCallback)((function(t){var e=t.fieldName,n=r.find((function(t){return t.fieldName===e+"(group)"}));return i.a.createElement("div",{className:"field-hover-card"},n?i.a.createElement("div",null,i.a.createElement("h3",null,n.fieldName),i.a.createElement("div",null,"Field entropy is ",Number(n.entropy).toFixed(2)),i.a.createElement("div",{className:"chart-vertical-margin-container"},i.a.createElement(ne,{x:"memberName",y:"count",fieldType:n.type,dataSource:n.distribution}))):i.a.createElement("div",null,"This field is not grouped."))}),[r]),s=Object(o.useMemo)((function(){return ue.map((function(t){var e=Object(g.a)(Object(g.a)({},t),{},{name:f.a.get("noteBook.univariate.columns.".concat(t.code)),render:function(e,n,o){var s=n.fieldName,c=r.find((function(t){return t.fieldName===s+"(group)"})),l={onRenderCompactCard:a,onRenderExpandedCard:u,renderData:n,compactCardHeight:320,expandedCardHeight:c?320:40},f=n[t.code];switch(t.code){case"type":return i.a.createElement("div",null,i.a.createElement(Zt.a,{iconName:se(f)})," ",f);case"entropy":case"maxEntropy":default:return i.a.createElement($t.a,{expandedCardOpenDelay:800,expandingCardProps:l,instantOpenOnClick:!0},i.a.createElement("div",null,f))}}});return"entropy"!==t.code&&"maxEntropy"!==t.code||(e.getCellProps=function(t,e,r){var a,o=function(t,e){return ee.a.scale("YlGnBu").domain([e[1],e[0]])(t).rgb()}(t,n);return{style:{backgroundColor:"rgb(".concat(o.join(","),")"),color:"rgb(".concat((a=o,(.299*a[0]+.587*a[1]+.114*a[2])/255>.5?[0,0,0]:[255,255,255]).join(","),")")}}}),e}))}),[n,r,u,a]);return i.a.createElement(ie,{dataSource:e,columns:s,style:{height:"600px"}})};function le(t){return t.join(",")}var fe=function(t){var e=t.subspaceList,r=t.onSpaceChange,n=Object(o.useState)(0),a=Object(c.a)(n,2),u=a[0],s=a[1],l=Object(o.useRef)(null),f=Object(o.useRef)(null);Object(o.useEffect)((function(){var t=e.length-1;if(t>-1){var n=e[t];r(n.dimensions,n.measures.map((function(t){return t.name})),n.correlationMatrix),s(t)}}),[e,r]);var h=Object(o.useMemo)((function(){for(var t=[],r=0;r<e.length;r++){var n,a=e[r],o=le(a.dimensions),i=Object(Et.a)(a.measures);try{for(i.s();!(n=i.n()).done;){var u=n.value,s=u.name,c=u.value,l={test:r,score:a.score,dimensions:o,measureName:s,measureValue:c};t.push(l)}}catch(f){i.e(f)}finally{i.f()}}return t}),[e]);return Object(o.useEffect)((function(){l.current&&e.length>0&&Object(Mt.a)(l.current,{data:{values:h},vconcat:[{mark:"rect",selection:{dim:{type:"single",on:"click",encodings:["y"]}},encoding:{x:{field:"measureName",type:"nominal"},y:{field:"dimensions",type:"ordinal",sort:{field:"score"}},color:{field:"measureValue",type:"quantitative",aggregate:"mean",scale:{reverse:!0}},opacity:{condition:{selection:"dim",value:1},value:.72}}}]}).then((function(t){t.view.addEventListener("click",(function(t,n){if(n){var a=n.datum,o=e.findIndex((function(t){return le(t.dimensions)===a.dimensions}));if(o>-1){var i=e[o];r(i.dimensions,i.measures.map((function(t){return t.name})),i.correlationMatrix),s(o)}}}))}))}),[e,h]),Object(o.useEffect)((function(){var t=e[u];if(f.current&&e.length>0&&t){for(var r=[],n=0;n<t.correlationMatrix.length;n++)for(var a=0;a<t.correlationMatrix[n].length;a++)r.push({x:t.measures[n].name,y:t.measures[a].name,correlation:t.correlationMatrix[n][a]});Object(Mt.a)(f.current,{data:{values:r},mark:"rect",encoding:{x:{field:"x",type:"nominal"},y:{field:"y",type:"nominal"},color:{field:"correlation",type:"quantitative",aggregate:"mean",scale:{scheme:"redyellowgreen",domain:[-1,1]}}}})}}),[e,u]),i.a.createElement("div",null,i.a.createElement("div",{ref:l}),i.a.createElement("div",{ref:f}))},he=function(t){var e=t.adjMatrix,r=t.measures,n=t.onFocusGroup,a=H(),u=Object(c.a)(a,1)[0],s=Object(o.useRef)(null),l=Object(o.useMemo)((function(){var t=Tt.b.kruskalWithFullMST(e,u.maxGroupNumber);return{edgesInMST:t.edgesInMST,groups:t.groups}}),[e,u.maxGroupNumber]),f=Object(o.useMemo)((function(){for(var t=l.edgesInMST,e=l.groups,n=t.map((function(t){return{source:t[0][0],target:t[0][1],value:1/t[1],inCutEdge:t[2]}})),a=[],o=0;o<e.length;o++)a.push({name:r[o],index:o,value:1,group:e[o]});return{nodes:a,edges:n}}),[r,l]);return Object(o.useEffect)((function(){s.current&&r.length>0&&Object(Mt.a)(s.current,{$schema:"https://vega.github.io/schema/vega/v5.json",width:700,height:500,padding:0,autosize:"none",signals:[{name:"cx",update:"width / 2"},{name:"cy",update:"height / 2"},{description:"State variable for active node fix status.",name:"fix",value:!1,on:[{events:"text:mouseout[!event.buttons], window:mouseup",update:"false"},{events:"text:mouseover",update:"fix || true"},{events:"[text:mousedown, window:mouseup] > window:mousemove!",update:"xy()",force:!0}]},{description:"Graph node most recently interacted with.",name:"node",value:null,on:[{events:"text:mouseover",update:"fix === true ? item() : node"}]},{description:"Flag to restart Force simulation upon data changes.",name:"restart",value:!1,on:[{events:{signal:"fix"},update:"fix && fix.length"}]}],data:[{name:"node-data",values:f.nodes},{name:"link-data",values:f.edges}],scales:[{name:"color",type:"ordinal",domain:{data:"node-data",field:"group"},range:{scheme:"tableau20"}},{name:"colorEdge",type:"quantize",domain:{data:"link-data",field:"value"},range:{scheme:"viridis"}}],marks:[{name:"nodes",type:"text",zindex:1,from:{data:"node-data"},on:[{trigger:"fix",modify:"node",values:"fix === true ? {fx: node.x, fy: node.y} : {fx: fix[0], fy: fix[1]}"},{trigger:"!fix",modify:"node",values:"{fx: null, fy: null}"}],encode:{enter:{fill:{scale:"color",field:"group"},text:{field:"name"},fontSize:{value:14},fontWeight:{value:600}},update:{cursor:{value:"pointer"}}},transform:[{type:"force",iterations:300,restart:{signal:"restart"},signal:"force",forces:[{force:"center",x:{signal:"cx"},y:{signal:"cy"}},{force:"collide"},{force:"nbody"},{force:"link",links:"link-data"}]}]},{type:"path",from:{data:"link-data"},interactive:!1,encode:{update:{stroke:{scale:"colorEdge",field:"value"},strokeWidth:{value:.8},opacity:{value:.5}}},transform:[{type:"linkpath",require:{signal:"force"},shape:"line",sourceX:"datum.source.x",sourceY:"datum.source.y",targetX:"datum.target.x",targetY:"datum.target.y"}]}]}).then((function(t){t.view.addEventListener("click",(function(t,e){if(e){var a=e.datum.group,o=r.filter((function(t,e){return l.groups[e]===a}));n(o)}}))}))}),[f,r,l.groups,n]),i.a.createElement("div",{ref:s})},de=r(508),ve=r(509),pe=(r(408),function(t){var e=t.summary,r=t.subspaceList,n=t.dataSource,a=H(),u=Object(c.a)(a,2),s=u[0],l=u[1],d=Object(o.useState)(!0),v=Object(c.a)(d,2),p=v[0],m=v[1],g=Object(o.useState)({measures:[],dimensions:[],matrix:[]}),y=Object(c.a)(g,2),b=y[0],w=y[1],M=Object(o.useState)([]),E=Object(c.a)(M,2),x=E[0],S=E[1],k=Object(o.useMemo)((function(){return[].concat(Object(h.a)(e.origin),Object(h.a)(e.grouped)).map((function(t){return[t.fieldName,t.entropy,t.maxEntropy,{name:t.fieldName,type:t.type}]}))}),[e.origin,e.grouped]),O=Object(o.useMemo)((function(){var t=b.dimensions;try{var e=k.filter((function(e){return t.includes(e[0])||x.includes(e[0])}));return Object(Tt.g)(e,n,t,x).schema}catch(r){return console.log(r),{position:[]}}}),[k,b,n,x]),j=Object(o.useMemo)((function(){return r.slice(0,Math.round(r.length*s.topK.subspacePercentSize))}),[r,s.topK.subspacePercentSize]);Object(o.useEffect)((function(){l((function(t){t.maxGroupNumber=Math.round(s.cookedMeasures.length/4)}))}),[s.cookedMeasures,l]);var _=Object(o.useCallback)((function(t,e,r){w({dimensions:t,measures:e,matrix:r})}),[w]),D=Object(o.useCallback)((function(t){S(t)}),[]);return i.a.createElement("div",null,i.a.createElement("h3",{className:"notebook header"},f.a.get("noteBook.univariate.title")),i.a.createElement("p",{className:"state-description"},f.a.get("noteBook.univariate.desc")),s.loading.univariateSummary&&i.a.createElement(at.a,{description:"analyzing"}),i.a.createElement("div",{className:"notebook content container"},i.a.createElement(ce,{originSummary:e.origin,groupedSummary:e.grouped})),i.a.createElement("h3",{className:"notebook header"},f.a.get("noteBook.subspace.title")),i.a.createElement("p",{className:"state-description"},f.a.get("noteBook.subspace.desc")),s.loading.subspaceSearching&&i.a.createElement(at.a,{description:"analyzing"}),!s.loading.univariateSummary&&i.a.createElement(de.a,{disabled:s.loading.subspaceSearching,value:100*s.topK.dimensionSize,label:f.a.get("noteBook.subspace.topKDimension"),max:100,valueFormat:function(t){return"".concat(t,"%")},showValue:!0,onChange:function(t){l((function(e){e.topK.dimensionSize=t/100,e.loading.subspaceSearching=!0}));var e=s.cookedDimensions.slice(0,Math.round(s.cookedDimensions.length*t/100));A(n,e,s.cookedMeasures,"sum",s.useServer).then((function(t){t&&l((function(e){e.subspaceList=t,e.loading.subspaceSearching=!1}))}))}}),!s.loading.univariateSummary&&i.a.createElement(de.a,{disabled:s.loading.subspaceSearching,value:100*s.topK.subspacePercentSize,label:f.a.get("noteBook.subspace.topKSubspace"),max:100,valueFormat:function(t){return"".concat(t,"%")},showValue:!0,onChange:function(t){l((function(e){e.topK.subspacePercentSize=t/100}))}}),i.a.createElement("div",{className:"notebook content center container"},i.a.createElement(fe,{subspaceList:j,onSpaceChange:_})),i.a.createElement("h3",{className:"notebook header"},f.a.get("noteBook.clustering.title")),i.a.createElement("p",{className:"state-description"},f.a.get("noteBook.clustering.desc")),i.a.createElement(de.a,{label:f.a.get("noteBook.clustering.maxGroupNum"),min:1,max:s.cookedMeasures.length||4,step:1,value:s.maxGroupNumber,showValue:!0,onChange:function(t){l((function(e){e.maxGroupNumber=t}))}}),i.a.createElement("div",{className:"notebook content center container"},i.a.createElement(he,{adjMatrix:b.matrix,measures:b.measures,onFocusGroup:D})),i.a.createElement("h3",{className:"notebook header"},f.a.get("noteBook.vis.title")),i.a.createElement("p",{className:"state-description"},f.a.get("noteBook.vis.desc")),i.a.createElement(ve.a,{checked:p,label:f.a.get("noteBook.vis.aggMea"),defaultChecked:!0,onText:"On",offText:"Off",onChange:function(t,e){m(!!e)}}),i.a.createElement("div",{className:"notebook content center container"},i.a.createElement(Dt,{defaultAggregated:p,defaultStack:!0,aggregator:"sum",schema:O,fieldFeatures:k.map((function(t){return t[3]})),dataSource:n,dimensions:b.dimensions,measures:x})))}),me=r(5),ge=r(97);function ye(){var t=Object(Rt.a)(["\n  padding: 0.2em 0.4em;\n  margin: 0.2em;\n  border-radius: 0.2em;\n  background-color: ",";\n  color: #fff;\n  ",";\n  position: relative;\n"]);return ye=function(){return t},t}function be(){var t=Object(Rt.a)(["\n  display: flex;\n  border: 1px solid #dfe3e8;\n  margin: 0.2em;\n  div.fl-header {\n    /* flex-basis: 100px; */\n    width: 100px;\n    border-right: 1px solid #dfe3e8;\n    background-color: #f5f5f5;\n    flex-shrink: 0;\n    h4 {\n      margin: 0.6em;\n      font-weight: 400;\n    }\n  }\n  div.fl-container {\n    flex-grow: 10;\n    /* display: flex;\n    flex-wrap: wrap; */\n    /* overflow-x: auto;\n    overflow-y: hidden; */\n  }\n"]);return be=function(){return t},t}function we(){var t=Object(Rt.a)(["\n  display: flex;\n  padding: 0.2em;\n  min-height: 2.4em;\n  display: flex;\n    flex-wrap: wrap;\n    >div{\n      margin: 1px;\n    }\n"]);return we=function(){return t},t}var Me=function(t){return i.a.createElement(xe,null,i.a.createElement("div",{className:"fl-header"},i.a.createElement("h4",null,t.name)),i.a.createElement("div",{className:"fl-container"},t.children))},Ee=Kt.c.div(we()),xe=Kt.c.div(be());Kt.c.div(ye(),(function(t){return"D"===t.type?"#2185d0":"#21ba45"}),(function(t){return t.highlight?"box-shadow: 0px 0px 5px 1px #21ba45":null}));function Se(){var t=Object(Rt.a)(["\n  border: 1px solid #d9d9d9;\n  padding: 1em;\n  margin: 1em;\n  background-color: #fff;\n"]);return Se=function(){return t},t}var ke=Kt.c.div(Se()),Oe=r(31);function je(){var t=Object(Rt.a)(["\n  font-size: 12px;\n"]);return je=function(){return t},t}var _e=Kt.c.div(je()),De=[{value:"sum",label:"\u6c42\u548c"},{value:"mean",label:"\u5e73\u5747\u503c"},{value:"count",label:"\u8ba1\u6570"}],Te=[{id:"fields",name:"\u5b57\u6bb5",mode:0},{id:"columns",name:"\u5217",mode:0},{id:"rows",name:"\u884c",mode:0},{id:"color",name:"\u989c\u8272",mode:1},{id:"opacity",name:"\u900f\u660e\u5ea6",mode:1},{id:"size",name:"\u5927\u5c0f",mode:1}],Ne=function(t){var e=t.fields,r=void 0===e?[]:e,n=t.onStateChange,a=Object(o.useState)({fields:[],rows:[],columns:[],color:[],opacity:[],size:[]}),u=Object(c.a)(a,2),s=u[0],l=u[1];Object(o.useEffect)((function(){l({fields:r,rows:[],columns:[],color:[],opacity:[],size:[]})}),[r]),Object(o.useEffect)((function(){n&&n(s)}),[s,n]);var f=Object(o.useCallback)((function(t,e){if(t.destination){var r=t.destination;if(r.droppableId===t.source.droppableId){if(r.index===t.source.index)return;l((function(e){var n=r.droppableId,a=function(t,e,r){var n=Object(h.a)(t);return n.splice(e,1),n.splice(r,0,t[e]),n}(e[n],t.source.index,r.index);return Object(g.a)(Object(g.a)({},e),{},Object(me.a)({},n,a))}))}else l((function(e){var n,a=t.source.droppableId,o=r.droppableId,i=function(t,e,r,n){var a=Object(h.a)(t),o=a.splice(e,1),i=Object(c.a)(o,1)[0],u=Object(h.a)(r);return u.splice(n,0,i),{originList:a,targetList:u}}(e[a],t.source.index,e[o],r.index),u=i.originList,s=i.targetList;return Object(g.a)(Object(g.a)({},e),{},(n={},Object(me.a)(n,a,u),Object(me.a)(n,o,s),n))}))}}),[l]);return i.a.createElement(_e,null,i.a.createElement(ge.a,{onDragEnd:f},Te.filter((function(t){return 0===t.mode})).map((function(t){return i.a.createElement(Me,{name:t.name,key:t.id},i.a.createElement(ge.c,{droppableId:t.id,direction:"horizontal"},(function(e,r){return i.a.createElement(Ee,Object.assign({},e.droppableProps,{ref:e.innerRef}),s[t.id].map((function(e,r){return i.a.createElement(ge.b,{key:e.id,draggableId:e.id,index:r},(function(n,a){return i.a.createElement(Oe.Pill,Object.assign({ref:n.innerRef,kind:"D"===e.type?"discrete":"continuous"},n.draggableProps,n.dragHandleProps),e.name,"\xa0","M"===e.type&&i.a.createElement(Oe.DropdownSelect,{kind:"text",style:{float:"right"},value:e.aggName||"",onChange:function(e){l((function(n){return Object(d.a)(n,(function(n){n[t.id][r].aggName=e.target.value}))}))}},De.map((function(t){return i.a.createElement("option",{value:t.value,key:t.value},t.label)}))))}))})))})))})),i.a.createElement("div",{style:{position:"relative"}},i.a.createElement(ke,{style:{position:"absolute",width:300,right:0,top:0}},Te.filter((function(t){return 1===t.mode})).map((function(t){return i.a.createElement(Me,{name:t.name,key:t.id},i.a.createElement(ge.c,{droppableId:t.id,direction:"horizontal"},(function(e,r){return i.a.createElement(Ee,Object.assign({},e.droppableProps,{ref:e.innerRef}),s[t.id].map((function(e,r){return i.a.createElement(ge.b,{key:e.id,draggableId:e.id,index:r},(function(n,a){return i.a.createElement(Oe.Pill,Object.assign({ref:n.innerRef,kind:"D"===e.type?"discrete":"continuous"},n.draggableProps,n.dragHandleProps),e.name,"\xa0","M"===e.type&&i.a.createElement(Oe.DropdownSelect,{kind:"text",style:{float:"right"},value:e.aggName||"",onChange:function(e){l((function(n){return Object(d.a)(n,(function(n){n[t.id][r].aggName=e.target.value}))}))}},De.map((function(t){return i.a.createElement("option",{value:t.value,key:t.value},t.label)}))))}))})))})))}))))))},Ae=r(248),Ce=r(488),qe=r(487),Pe="geom",Fe={id:"",name:"",aggName:"sum",type:"D"},Ie=new Ae.a,ze=new Ae.a,Le=ze.pipe(Ce.a(Ie),qe.a((function(t){var e=Object(c.a)(t,2),r=e[0];e[1];return Object.keys(r).length>0})));function Re(t){return"M"===t.type?"quantitative":"nominal"}var Be=function(t){var e=t.dataSource,r=void 0===e?[]:e,n=t.rows,a=void 0===n?[]:n,u=t.columns,s=void 0===u?[]:u,l=t.defaultAggregate,f=void 0===l||l,d=t.geomType,v=t.color,p=t.opacity,m=t.size,g=t.onGeomClick,y=Object(o.useRef)(null);return Object(o.useEffect)((function(){var t=Le.subscribe((function(t){var e=Object(c.a)(t,2),r=e[0],n=e[1];g&&g(r,n)}));return function(){t.unsubscribe()}}),[]),Object(o.useEffect)((function(){if(y.current){var t=a.length>0?a[a.length-1]:Fe,e=s.length>0?s[s.length-1]:Fe,n=a.length>1?a[a.length-2]:Fe,o=s.length>1?s[s.length-2]:Fe,i=[].concat(Object(h.a)(a),Object(h.a)(s),[v,p,m]).filter((function(t){return Boolean(t)})).map((function(t){return t.id}));Object(Mt.a)(y.current,{data:{values:r},mark:d,selection:Object(me.a)({},Pe,{type:"single",fields:i}),encoding:{x:{field:e.id,type:Re(e),aggregate:"M"===e.type&&f&&e.aggName},y:{field:t.id,type:Re(t),aggregate:"M"===t.type&&f&&t.aggName},row:n!==Fe?{field:n.id,type:Re(n)}:void 0,column:o!==Fe?{field:o.id,type:Re(o)}:void 0,color:v&&{field:v.id,type:Re(v)},opacity:p&&{field:p.id,type:Re(p)},size:m&&{field:m.id,type:Re(m)}}},{mode:"vega-lite",actions:!1}).then((function(t){t.view.addEventListener("click",(function(t){Ie.next(t)})),t.view.addSignalListener(Pe,(function(t,e){ze.next(e)}))}))}}),[r,a,s,f,d,v,p,m]),i.a.createElement("div",{ref:y})},Ge=[{value:"bar",label:"\u533a\u95f4"},{value:"line",label:"\u7ebf"},{value:"point",label:"\u70b9"},{value:"tick",label:"\u6807\u8bb0"}];function Ue(){var t=Object(Rt.a)(["\n  display: flex;\n  align-items: center;\n  .item{\n    margin: 0em 1em;\n    display: flex;\n    align-items: center;\n    >label {\n      margin-right: 4px;\n      line-height: 20px;\n      font-size: 12px;\n    }\n  }\n"]);return Ue=function(){return t},t}var Ke=Kt.c.div(Ue());function Ve(){var t=Object(Rt.a)(["\n  width: 100px;\n  background-color: #fff;\n  border: 1px solid #f0f0f0;\n  position: absolute;\n  z-index: 99;\n  cursor: pointer;\n  box-shadow: 0px 0px 8px 1px rgba(0, 0, 0, 0.09);\n  border-radius: 2px;\n  padding: 4px;\n"]);return Ve=function(){return t},t}var Qe=Kt.c.div(Ve()),Ye=function(t){var e=t.x,r=t.y,n=t.children;return i.a.createElement(Qe,{style:{left:e+"px",top:r+"px"}},n)},He=r(30),Xe={interval:"bar",line:"line",point:"point",density:"point"};function We(t,e,r,n,a,o,i,u,s,c){var l=t.position,f=void 0===l?[]:l,d=t.color,v=void 0===d?[]:d,p=t.size,m=void 0===p?[]:p,y=t.facets,b=void 0===y?[]:y,w=t.opacity,M=void 0===w?[]:w,E=t.geomType,x=void 0===E?[]:E,S=t.page,k=void 0===S?[]:S;function O(t){var e=i.find((function(e){return e.name===t}));return e?e.type:"nominal"}var j={x:f[0],y:f[1],color:v[0],size:m[0],opacity:M[0],row:b[0],column:b[1]},_={data:{values:e},transform:[]},D={transform:[],mark:{type:x[0]&&Xe[x[0]]?Xe[x[0]]:x[0],tooltip:!0},encoding:{}},T=[];Object.values(t).forEach((function(t){t.forEach((function(t){r.includes(t)&&T.push(t)}))})),s&&o.length>0&&D.transform.push({aggregate:[],groupby:T});var N=new Map,A=function(t){if(j[t]){if("quantitative"===O(j[t])&&s){var e=o.find((function(e){return e.field===j[t]}));e&&(N.set(e.field,"".concat(e.op,"_of_").concat(e.field)),D.transform[0].aggregate.push({op:"count"===e.op?"sum":e.op,field:e.field,as:"".concat(e.op,"_of_").concat(e.field)}))}var r=function(t){if(s&&n.includes(t)){var e=o.find((function(e){return e.field===t}));return e?e.as:t}return t}(j[t]);D.encoding[t]={field:N.has(r)?N.get(r):r,type:O(j[t])},["x","y"].includes(t)&&"quantitative"===O(j[t])&&!c&&(D.encoding[t].stack=null)}};for(var C in j)A(C);if(c||0!==M.length||(D.encoding.opacity={value:.7}),null===a)return Object(g.a)(Object(g.a)({},_),D);var q=Object(He.deepcopy)(D);return D.mark.opacity=.9,D.mark.color="#8c8c8c",q.mark.opacity=.8,q.mark.size=10,"undefined"===typeof q.transform&&(q.transform=[]),q.transform=[].concat(Object(h.a)(a.map((function(t){var e={filter:{field:t.key}};return"continuous"===t.type?e.filter.range=t.range:e.filter.oneOf=Object(h.a)(t.range.values()),e}))),Object(h.a)(q.transform)),"selection_mea_distribution"!==u&&v.length+m.length+M.length+k.length>0?_=Object(g.a)(Object(g.a)({},_),{},{vconcat:[D,q]}):(q.encoding.color&&(q.encoding.color={value:"grey"}),_=Object(g.a)(Object(g.a)({},_),{},{layer:[D,q]})),_}function Je(){return b()('!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=10)}([function(e,t,n){e.exports=n(9)},function(e,t,n){"use strict";this&&this.__assign;Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),i=n(8),a=n(3),o={sum:a.sum_unsafe,mean:a.mean,count:a.count};function u(e){var t=e.type,n=e.aggFunc,i=void 0===n?a.count:n,o=e.factTable,u=void 0===o?[]:o,s=e.dimensions,c=void 0===s?[]:s,f=e.measures,h=void 0===f?[]:f;switch(t){case"period":return new r.periodCube({aggFunc:i,factTable:u,dimensions:c,measures:h});case"moment":default:return new r.momentCube({aggFunc:i,factTable:u,dimensions:c,measures:h})}}t.createCube=u,t.default=function(e){var t=e.dimensions,n=e.measures,r=e.asFields,s=e.operator,c=e.dataSource,f=u({type:"moment",aggFunc:o[s]||a.count,dimensions:t,measures:n,factTable:c}),h=i.tree2Table({dimensions:t,measures:n,cube:f});return h.forEach((function(e){r.forEach((function(t,r){e[t]=e[n[r]]}))})),h},function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(3))},function(e,t,n){!function(e){"use strict";function t(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,i=1;i<e.length;i++)t=n+e[i],Math.abs(n)>=Math.abs(e[i])?r+=n-t+e[i]:r+=e[i]-t+n,n=t;return n+r}function n(e){if(0===e.length)throw new Error("mean requires at least one data point");return t(e)/e.length}function r(e,t){var r,i,a=n(e),o=0;if(2===t)for(i=0;i<e.length;i++)o+=(r=e[i]-a)*r;else for(i=0;i<e.length;i++)o+=Math.pow(e[i]-a,t);return o}function i(e){if(0===e.length)throw new Error("variance requires at least one data point");return r(e,2)/e.length}function a(e){if(1===e.length)return 0;var t=i(e);return Math.sqrt(t)}function o(e){if(0===e.length)throw new Error("mode requires at least one data point");if(1===e.length)return e[0];for(var t=e[0],n=NaN,r=0,i=1,a=1;a<e.length+1;a++)e[a]!==t?(i>r&&(r=i,n=t),i=1,t=e[a]):i++;return n}function u(e){return e.slice().sort((function(e,t){return e-t}))}function s(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function c(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function f(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function h(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function l(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var i=r-n+1,a=t-n+1,o=Math.log(i),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(i-u)/i);a-i/2<0&&(s*=-1),l(e,t,Math.max(n,Math.floor(t-a*u/i+s)),Math.min(r,Math.floor(t+(i-a)*u/i+s)))}var c=e[t],f=n,h=r;for(v(e,n,t),e[r]>c&&v(e,n,r);f<h;){for(v(e,f,h),f++,h--;e[f]<c;)f++;for(;e[h]>c;)h--}e[n]===c?v(e,n,h):v(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(g(e.length,t[r]));n.push(e.length-1),n.sort(m);for(var i=[0,n.length-1];i.length;){var a=Math.ceil(i.pop()),o=Math.floor(i.pop());if(!(a-o<=1)){var u=Math.floor((o+a)/2);p(e,n[u],Math.floor(n[o]),Math.ceil(n[a])),i.push(o,u,u,a)}}}(n,t);for(var r=[],i=0;i<t.length;i++)r[i]=h(n,t[i]);return r}return p(n,g(n.length,t),0,n.length-1),h(n,t)}function p(e,t,n,r){t%1==0?l(e,t,n,r):(l(e,t=Math.floor(t),n,r),l(e,t+1,t+1,r))}function m(e,t){return e-t}function g(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}function y(e,t){if(t<e[0])return 0;if(t>e[e.length-1])return 1;var n=function(e,t){for(var n=0,r=0,i=e.length;r<i;)t<=e[n=r+i>>>1]?i=n:r=-~n;return r}(e,t);if(e[n]!==t)return n/e.length;n++;var r=function(e,t){for(var n=0,r=0,i=e.length;r<i;)t>=e[n=r+i>>>1]?r=-~n:i=n;return r}(e,t);if(r===n)return n/e.length;var i=r-n+1;return i*(r+n)/2/i/e.length}function b(e){var t=d(e,.75),n=d(e,.25);if("number"==typeof t&&"number"==typeof n)return t-n}function w(e){return+d(e,.5)}function M(e){for(var t=w(e),n=[],r=0;r<e.length;r++)n.push(Math.abs(e[r]-t));return w(n)}function S(e,t){t=t||Math.random;for(var n,r,i=e.length;i>0;)r=Math.floor(t()*i--),n=e[i],e[i]=e[r],e[r]=n;return e}function E(e,t){return S(e.slice(),t)}function k(e,t,n){return E(e,n).slice(0,t)}function x(e,t){for(var n=[],r=0;r<e;r++){for(var i=[],a=0;a<t;a++)i.push(0);n.push(i)}return n}function _(e){for(var t,n=0,r=0;r<e.length;r++)0!==r&&e[r]===t||(t=e[r],n++);return n}function D(e,t,n,r){var i;if(e>0){var a=(n[t]-n[e-1])/(t-e+1);i=r[t]-r[e-1]-(t-e+1)*a*a}else i=r[t]-n[t]*n[t]/(t+1);return i<0?0:i}function O(e,t,n,r,i,a,o){if(!(e>t)){var u=Math.floor((e+t)/2);r[n][u]=r[n-1][u-1],i[n][u]=u;var s=n;e>n&&(s=Math.max(s,i[n][e-1]||0)),s=Math.max(s,i[n-1][u]||0);var c,f,h,l=u-1;t<r[0].length-1&&(l=Math.min(l,i[n][t+1]||0));for(var v=l;v>=s&&!((c=D(v,u,a,o))+r[n-1][s-1]>=r[n][u]);--v)(f=D(s,u,a,o)+r[n-1][s-1])<r[n][u]&&(r[n][u]=f,i[n][u]=s),s++,(h=c+r[n-1][v-1])<r[n][u]&&(r[n][u]=h,i[n][u]=v);O(e,u-1,n,r,i,a,o),O(u+1,t,n,r,i,a,o)}}function T(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var r=n(e),i=n(t),a=0,o=0;o<e.length;o++)a+=(e[o]-r)*(t[o]-i);return a/(e.length-1)}function N(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");return r(e,2)/(e.length-1)}function z(e){var t=N(e);return Math.sqrt(t)}function I(e,t,n,r){return(e*t+n*r)/(t+r)}function j(e){if(0===e.length)throw new Error("meanSimple requires at least one data point");return f(e)/e.length}function C(e){if(0===e.length)throw new Error("rootMeanSquare requires at least one data point");for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}var F=function(){this.totalCount=0,this.data={}};F.prototype.train=function(e,t){for(var n in this.data[t]||(this.data[t]={}),e){var r=e[n];void 0===this.data[t][n]&&(this.data[t][n]={}),void 0===this.data[t][n][r]&&(this.data[t][n][r]=0),this.data[t][n][r]++}this.totalCount++},F.prototype.score=function(e){var t,n={};for(var r in e){var i=e[r];for(t in this.data)n[t]={},this.data[t][r]?n[t][r+"_"+i]=(this.data[t][r][i]||0)/this.totalCount:n[t][r+"_"+i]=0}var a={};for(t in n)for(var o in a[t]=0,n[t])a[t]+=n[t][o];return a};var P=function(){this.weights=[],this.bias=0};P.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return(t+=this.bias)>0?1:0},P.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if("number"==typeof n&&n!==t){for(var r=t-n,i=0;i<this.weights.length;i++)this.weights[i]+=r*e[i];this.bias+=r}return this};var q=1e-4;function L(e){if(e<0)throw new Error("factorial requires a non-negative value");if(Math.floor(e)!==e)throw new Error("factorial requires an integer input");for(var t=1,n=2;n<=e;n++)t*=n;return t}var G=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],A=Math.log(Math.sqrt(2*Math.PI)),R={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},V=Math.sqrt(2*Math.PI),K={gaussian:function(e){return Math.exp(-.5*e*e)/V}},H={nrd:function(e){var t=z(e),n=b(e);return"number"==typeof n&&(t=Math.min(t,n/1.34)),1.06*t*Math.pow(e.length,-.2)}};function U(e,t,n){var r,i;if(void 0===t)r=K.gaussian;else if("string"==typeof t){if(!K[t])throw new Error(\'Unknown kernel "\'+t+\'"\');r=K[t]}else r=t;if(void 0===n)i=H.nrd(e);else if("string"==typeof n){if(!H[n])throw new Error(\'Unknown bandwidth method "\'+n+\'"\');i=H[n](e)}else i=n;return function(t){var n=0,a=0;for(n=0;n<e.length;n++)a+=r((t-e[n])/i);return a/i/e.length}}var W=Math.sqrt(2*Math.PI);function X(e){for(var t=e,n=e,r=1;r<15;r++)t+=n*=e*e/(2*r+1);return Math.round(1e4*(.5+t/W*Math.exp(-e*e/2)))/1e4}for(var B=[],Y=0;Y<=3.09;Y+=.01)B.push(X(Y));function $(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-e*e+((((((((.17087277*t-.82215223)*t+1.48851587)*t-1.13520398)*t+.27886807)*t-.18628806)*t+.09678418)*t+.37409196)*t+1.00002368)*t-1.26551223);return e>=0?1-n:n-1}function J(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?n:-n}function Q(e){if("number"==typeof e)return e<0?-1:0===e?0:1;throw new TypeError("not a number")}function Z(e,t){for(var n=0,r=0;r<e.length;r++){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function ee(e,t){return e.map((function(e){for(var n=Number.MAX_VALUE,r=-1,i=0;i<t.length;i++){var a=Z(e,t[i]);a<n&&(n=a,r=i)}return r}))}function te(e,t,n){for(var r=e[0].length,i=x(n,r),a=Array(n).fill(0),o=e.length,u=0;u<o;u++){for(var s=e[u],c=t[u],f=i[c],h=0;h<r;h++)f[h]+=s[h];a[c]+=1}for(var l=0;l<n;l++){if(0===a[l])throw new Error("Centroid "+l+" has no friends");for(var v=i[l],d=0;d<r;d++)v[d]/=a[l]}return i}function ne(e,t){for(var n=0,r=0;r<e.length;r++)n+=Z(e[r],t[r]);return n}function re(e,t){if(e.length!==t.length)throw new Error("must have exactly as many labels as points");for(var n=function(e){for(var t=1+c(e),n=Array(t),r=0;r<e.length;r++){var i=e[r];void 0===n[i]&&(n[i]=[]),n[i].push(r)}return n}(t),r=function(e){for(var t=e.length,n=x(t,t),r=0;r<t;r++)for(var i=0;i<r;i++)n[r][i]=Z(e[r],e[i]),n[i][r]=n[r][i];return n}(e),i=[],a=0;a<e.length;a++){var o=0;if(n[t[a]].length>1){var u=ae(a,n[t[a]],r),s=ie(a,t,n,r);o=(s-u)/Math.max(u,s)}i.push(o)}return i}function ie(e,t,n,r){for(var i=t[e],a=Number.MAX_VALUE,o=0;o<n.length;o++)if(o!==i){var u=ae(e,n[o],r);u<a&&(a=u)}return a}function ae(e,t,n){for(var r=0,i=0;i<t.length;i++)r+=n[e][t[i]];return r/t.length}function oe(e,t){return 0===e&&0===t?0:Math.abs((e-t)/t)}e.BayesianClassifier=F,e.PerceptronModel=P,e.addToMean=function(e,t,n){return e+(n-e)/(t+1)},e.approxEqual=function(e,t,n){return void 0===n&&(n=q),oe(e,t)<=n},e.average=n,e.averageSimple=j,e.bayesian=F,e.bernoulliDistribution=function(e){if(e<0||e>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-e,e]},e.binomialDistribution=function(e,t){if(!(t<0||t>1||e<=0||e%1!=0)){var n=0,r=0,i=[],a=1;do{i[n]=a*Math.pow(t,n)*Math.pow(1-t,e-n),r+=i[n],a=a*(e-++n+1)/n}while(r<.9999);return i}},e.bisect=function(e,t,n,r,i){if("function"!=typeof e)throw new TypeError("func must be a function");for(var a=0;a<r;a++){var o=(t+n)/2;if(0===e(o)||Math.abs((n-t)/2)<i)return o;Q(e(o))===Q(e(t))?t=o:n=o}throw new Error("maximum number of iterations exceeded")},e.chiSquaredDistributionTable=R,e.chiSquaredGoodnessOfFit=function(e,t,r){for(var i=0,a=t(n(e)),o=[],u=[],s=0;s<e.length;s++)void 0===o[e[s]]&&(o[e[s]]=0),o[e[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in a)f in o&&(u[+f]=a[f]*e.length);for(var h=u.length-1;h>=0;h--)u[h]<3&&(u[h-1]+=u[h],u.pop(),o[h-1]+=o[h],o.pop());for(var l=0;l<o.length;l++)i+=Math.pow(o[l]-u[l],2)/u[l];var v=o.length-1-1;return R[v][r]<i},e.chunk=function(e,t){var n=[];if(t<1)throw new Error("chunk size must be a positive number");if(Math.floor(t)!==t)throw new Error("chunk size must be an integer");for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},e.ckmeans=function(e,t){if(t>e.length)throw new Error("cannot generate more classes than there are data values");var n=u(e);if(1===_(n))return[n];var r=x(t,n.length),i=x(t,n.length);!function(e,t,n){for(var r=t[0].length,i=e[Math.floor(r/2)],a=[],o=[],u=0,s=void 0;u<r;++u)s=e[u]-i,0===u?(a.push(s),o.push(s*s)):(a.push(a[u-1]+s),o.push(o[u-1]+s*s)),t[0][u]=D(0,u,a,o),n[0][u]=0;for(var c=1;c<t.length;++c)O(c<t.length-1?c:r-1,r-1,c,t,n,a,o)}(n,r,i);for(var a=[],o=i[0].length-1,s=i.length-1;s>=0;s--){var c=i[s][o];a[s]=n.slice(c,o+1),s>0&&(o=c-1)}return a},e.combinations=function e(t,n){var r,i,a,o,u=[];for(r=0;r<t.length;r++)if(1===n)u.push([t[r]]);else for(a=e(t.slice(r+1,t.length),n-1),i=0;i<a.length;i++)(o=a[i]).unshift(t[r]),u.push(o);return u},e.combinationsReplacement=function e(t,n){for(var r=[],i=0;i<t.length;i++)if(1===n)r.push([t[i]]);else for(var a=e(t.slice(i,t.length),n-1),o=0;o<a.length;o++)r.push([t[i]].concat(a[o]));return r},e.combineMeans=I,e.combineVariances=function(e,t,n,r,i,a){var o=I(t,n,i,a);return(n*(e+Math.pow(t-o,2))+a*(r+Math.pow(i-o,2)))/(n+a)},e.cumulativeStdNormalProbability=function(e){var t=Math.abs(e),n=Math.min(Math.round(100*t),B.length-1);return e>=0?B[n]:+(1-B[n]).toFixed(4)},e.epsilon=q,e.equalIntervalBreaks=function(e,t){if(e.length<2)return e;for(var n=s(e),r=c(e),i=[n],a=(r-n)/t,o=1;o<t;o++)i.push(i[0]+a*o);return i.push(r),i},e.erf=$,e.errorFunction=$,e.extent=function(e){if(0===e.length)throw new Error("extent requires at least one data point");for(var t=e[0],n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]),e[r]<t&&(t=e[r]);return[t,n]},e.extentSorted=function(e){return[e[0],e[e.length-1]]},e.factorial=L,e.gamma=function e(t){if(Number.isInteger(t))return t<=0?NaN:L(t-1);if(--t<0)return Math.PI/(Math.sin(Math.PI*-t)*e(-t));var n=t+1/4;return Math.pow(t/Math.E,t)*Math.sqrt(2*Math.PI*(t+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},e.gammaln=function(e){if(e<=0)return 1/0;e--;for(var t=G[0],n=1;n<15;n++)t+=G[n]/(e+n);var r=5.2421875+e;return A+Math.log(t)-r+(e+.5)*Math.log(r)},e.geometricMean=function(e){if(0===e.length)throw new Error("geometricMean requires at least one data point");for(var t=1,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("geometricMean requires only positive numbers as input");t*=e[n]}return Math.pow(t,1/e.length)},e.harmonicMean=function(e){if(0===e.length)throw new Error("harmonicMean requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");t+=1/e[n]}return e.length/t},e.interquartileRange=b,e.inverseErrorFunction=J,e.iqr=b,e.kMeansCluster=function(e,t,n){void 0===n&&(n=Math.random);for(var r=null,i=k(e,t,n),a=null,o=Number.MAX_VALUE;0!==o;)r=i,o=ne(i=te(e,a=ee(e,i),t),r);return{labels:a,centroids:i}},e.kde=U,e.kernelDensityEstimation=U,e.linearRegression=function(e){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var i,a,o,u=0,s=0,c=0,f=0,h=0;h<r;h++)u+=a=(i=e[h])[0],s+=o=i[1],c+=a*a,f+=a*o;n=s/r-(t=(r*f-u*s)/(r*c-u*u))*u/r}return{m:t,b:n}},e.linearRegressionLine=function(e){return function(t){return e.b+e.m*t}},e.mad=M,e.max=c,e.maxSorted=function(e){return e[e.length-1]},e.mean=n,e.meanSimple=j,e.median=w,e.medianAbsoluteDeviation=M,e.medianSorted=function(e){return h(e,.5)},e.min=s,e.minSorted=function(e){return e[0]},e.mode=function(e){return o(u(e))},e.modeFast=function(e){for(var t,n=new Map,r=0,i=0;i<e.length;i++){var a=n.get(e[i]);void 0===a?a=1:a++,a>r&&(t=e[i],r=a),n.set(e[i],a)}if(0===r)throw new Error("mode requires at last one data point");return t},e.modeSorted=o,e.numericSort=u,e.perceptron=P,e.permutationTest=function(e,t,r,i,a){if(void 0===i&&(i=1e4),void 0===r&&(r="two_side"),"two_side"!==r&&"greater"!==r&&"less"!==r)throw new Error("`alternative` must be either \'two_side\', \'greater\', or \'less\'");for(var o=n(e)-n(t),u=new Array(i),s=e.concat(t),c=Math.floor(s.length/2),f=0;f<i;f++){S(s,a);var h=s.slice(0,c),l=s.slice(c,s.length),v=n(h)-n(l);u[f]=v}var d=0;if("two_side"===r)for(var p=0;p<=i;p++)Math.abs(u[p])>=Math.abs(o)&&(d+=1);else if("greater"===r)for(var m=0;m<=i;m++)u[m]>=o&&(d+=1);else for(var g=0;g<=i;g++)u[g]<=o&&(d+=1);return d/i},e.permutationsHeap=function(e){for(var t=new Array(e.length),n=[e.slice()],r=0;r<e.length;r++)t[r]=0;for(var i=0;i<e.length;)if(t[i]<i){var a=0;i%2!=0&&(a=t[i]);var o=e[a];e[a]=e[i],e[i]=o,n.push(e.slice()),t[i]++,i=0}else t[i]=0,i++;return n},e.poissonDistribution=function(e){if(!(e<=0)){var t=0,n=0,r=[],i=1;do{r[t]=Math.exp(-e)*Math.pow(e,t)/i,n+=r[t],i*=++t}while(n<.9999);return r}},e.probit=function(e){return 0===e?e=q:e>=1&&(e=.9999),Math.sqrt(2)*J(2*e-1)},e.product=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},e.quantile=d,e.quantileRank=function(e,t){return y(u(e),t)},e.quantileRankSorted=y,e.quantileSorted=h,e.quickselect=l,e.rSquared=function(e,t){if(e.length<2)return 1;for(var n=0,r=0;r<e.length;r++)n+=e[r][1];for(var i=n/e.length,a=0,o=0;o<e.length;o++)a+=Math.pow(i-e[o][1],2);for(var u=0,s=0;s<e.length;s++)u+=Math.pow(e[s][1]-t(e[s][0]),2);return 1-u/a},e.relativeError=oe,e.rms=C,e.rootMeanSquare=C,e.sample=k,e.sampleCorrelation=function(e,t){return T(e,t)/z(e)/z(t)},e.sampleCovariance=T,e.sampleKurtosis=function(e){var t=e.length;if(t<4)throw new Error("sampleKurtosis requires at least four data points");for(var r,i=n(e),a=0,o=0,u=0;u<t;u++)a+=(r=e[u]-i)*r,o+=r*r*r*r;return(t-1)/((t-2)*(t-3))*(t*(t+1)*o/(a*a)-3*(t-1))},e.sampleSkewness=function(e){if(e.length<3)throw new Error("sampleSkewness requires at least three data points");for(var t,r=n(e),i=0,a=0,o=0;o<e.length;o++)i+=(t=e[o]-r)*t,a+=t*t*t;var u=e.length-1,s=Math.sqrt(i/u),c=e.length;return c*a/((c-1)*(c-2)*Math.pow(s,3))},e.sampleStandardDeviation=z,e.sampleVariance=N,e.sampleWithReplacement=function(e,t,n){if(0===e.length)return[];n=n||Math.random;for(var r=e.length,i=[],a=0;a<t;a++){var o=Math.floor(n()*r);i.push(e[o])}return i},e.shuffle=E,e.shuffleInPlace=S,e.sign=Q,e.silhouette=re,e.silhouetteMetric=function(e,t){return c(re(e,t))},e.standardDeviation=a,e.standardNormalTable=B,e.subtractFromMean=function(e,t,n){return(e*t-n)/(t-1)},e.sum=t,e.sumNthPowerDeviations=r,e.sumSimple=f,e.tTest=function(e,t){return(n(e)-t)/(a(e)/Math.sqrt(e.length))},e.tTestTwoSample=function(e,t,r){var i=e.length,a=t.length;if(!i||!a)return null;r||(r=0);var o=n(e),u=n(t),s=N(e),c=N(t);if("number"==typeof o&&"number"==typeof u&&"number"==typeof s&&"number"==typeof c){var f=((i-1)*s+(a-1)*c)/(i+a-2);return(o-u-r)/Math.sqrt(f*(1/i+1/a))}},e.uniqueCountSorted=_,e.variance=i,e.zScore=function(e,t,n){return(e-t)/n},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sum_unsafe=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=e[r][t]}))},i=0,a=e.length;i<a;i++)r(i);return n},t.sum=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},i=0,a=e.length;i<a;i++)r(i);return n},t.count=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=0,i=e.length;r<i;r++)t.forEach((function(e){n[e]++}));return n},t.mean=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,i){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},i=0,a=e.length;i<a;i++)r(i);return t.forEach((function(t){n[t]/=e.length})),n}},function(e,t){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6);t.periodCube=r.default;var i=n(7);t.momentCube=i.default},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.children=new Map,this._rawData=[],this.aggFunc=e,this.cache=!1}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._rawData).push.apply(e,i(t))},e.prototype.aggData=function(e){return void 0===e&&(e=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,e),this.cache=!0),this._aggData},e.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(e.prototype,"rawData",{get:function(){var e,t;if(!this.cache){if(0!==this.children.size){var n=this.children.values(),r=[];try{for(var i=a(n),o=i.next();!o.done;o=i.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)r.push(c[s])}}catch(h){e={error:h}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}this._rawData=r}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),e.prototype.getNode=function(e){return function t(n,i){var o,u;if(i===e.length)return n;var s=n.children.entries();try{for(var c=a(s),f=c.next();!f.done;f=c.next()){var h=r(f.value,2),l=h[0],v=h[1];if(l===e[i])return t(v,i+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}(),u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures}return e.prototype.get=function(e){var t=this,n=t.tree,i=(t.aggFunc,t.measures);return function t(n,o){var u,s;if(o===e.length)return n.aggData(i);var c=n.children.entries();try{for(var f=a(c),h=f.next();!h.done;h=f.next()){var l=r(h.value,2),v=l[0],d=l[1];if(v===e[o])return t(d,o+1)}}catch(p){u={error:p}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.buildTree=function(){var e,t=new o(this.aggFunc),n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(t.push(e),t.cache=!1,n<this.dimensions.length){var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o(this.aggFunc)),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e.prototype.aggNode=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},i=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.children=new Map,this.rawData=[]}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.rawData).push.apply(e,i(t))},e.prototype.aggData=function(e,t){return void 0===t&&(t=[]),this._aggData=e(this.rawData,t),this._aggData},e.prototype.getNode=function(e){return function t(n,i){var o,u;if(i===e.length)return n;var s=n.children.entries();try{for(var c=a(s),f=c.next();!f.done;f=c.next()){var h=r(f.value,2),l=h[0],v=h[1];if(l===e[i])return t(v,i+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}();t.Node=o;var u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures,this.buildTree(),this.aggTree()}return e.prototype.get=function(e){var t=this,n=t.tree,i=t.aggFunc,o=t.measures;return function t(n,u){var s,c;if(u===e.length)return n.aggData(i,o);var f=n.children.entries();try{for(var h=a(f),l=h.next();!l.done;l=h.next()){var v=r(l.value,2),d=v[0],p=v[1];if(d===e[u])return t(p,u+1)}}catch(m){s={error:m}}finally{try{l&&!l.done&&(c=h.return)&&c.call(h)}finally{if(s)throw s.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.setData=function(e){var t=e.aggFunc,n=void 0===t?this.aggFunc:t,r=e.factTable,i=void 0===r?this.factTable:r,a=e.dimensions,o=void 0===a?this.dimensions:a,u=e.measures,s=void 0===u?this.measures:u;o!==this.dimensions||i!==this.factTable?(this.dimensions=o,this.factTable=i,this.measures=s,this.aggFunc=n,this.buildTree(),this.aggTree()):s===this.measures&&n===this.aggFunc||(this.measures=s,this.aggFunc=n,this.aggTree())},e.prototype.buildTree=function(){var e,t=new o,n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(n===this.dimensions.length)t.push(e);else{var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;if(void 0===e&&(e=this.tree),e.children.size>0){e.rawData=[];var r=e.children.values();try{for(var i=a(r),o=i.next();!o.done;o=i.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)e.rawData.push(c[s])}}catch(h){t={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}return e.aggData(this.aggFunc,this.measures),e},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.tree2Table=function(e){var t=e.dimensions,n=(e.measures,e.cube),o=(n.aggFunc,[]);return function e(n,u,s){var c,f,h;if(0!==n.children.size)try{for(var l=i(n.children.entries()),v=l.next();!v.done;v=l.next()){var d=a(v.value,2),p=d[0];e(d[1],r(r({},u),((h={})[t[s]]=p,h)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(f=l.return)&&f.call(l)}finally{if(c)throw c.error}}else{var m=n._aggData;o.push(r(r({},u),m))}}(n.tree,{},0),o}},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(z){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,a=Object.create(i.prototype),o=new O(r||[]);return a._invoke=function(e,t,n){var r=h;return function(i,a){if(r===v)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw a;return N()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===p)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var s=f(e,t,n);if("normal"===s.type){if(r=n.done?d:l,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(z){return{type:"throw",arg:z}}}e.wrap=c;var h="suspendedStart",l="suspendedYield",v="executing",d="completed",p={};function m(){}function g(){}function y(){}var b={};b[a]=function(){return this};var w=Object.getPrototypeOf,M=w&&w(w(T([])));M&&M!==n&&r.call(M,a)&&(b=M);var S=y.prototype=m.prototype=Object.create(b);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,o,u){var s=f(e[i],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"===typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function a(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(a,a):a()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a \'throw\' method")}return p}var i=f(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,p):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function T(e){if(e){var n=e[a];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:N}}function N(){return{value:t,done:!0}}return g.prototype=S.constructor=y,y.constructor=g,g.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},E(k.prototype),k.prototype[o]=function(){return this},e.AsyncIterator=k,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new k(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},E(S),s(S,u,"Generator"),S[a]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),D(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;D(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),p}},e}(e.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"kruskal",(function(){return R})),n.d(r,"kruskalWithFullMST",(function(){return A}));var i={};n.r(i),n.d(i,"getDimCorrelationMatrix",(function(){return Q})),n.d(i,"getMeaCorrelationMatrix",(function(){return Z})),n.d(i,"getDimClusterGroups",(function(){return ee})),n.d(i,"getDimSetsBasedOnClusterGroups",(function(){return te})),n.d(i,"getMeaSetsBasedOnClusterGroups",(function(){return ne})),n.d(i,"subspaceSearching",(function(){return re})),n.d(i,"getRelatedVertices",(function(){return ie}));var a={};n.r(a),n.d(a,"insightExtraction",(function(){return ce})),n.d(a,"subspaceSearching",(function(){return se})),n.d(a,"getVisSpaces",(function(){return _e})),n.d(a,"IntentionWorkerCollection",(function(){return Ee})),n.d(a,"DefaultIWorker",(function(){return ye})),n.d(a,"getIntentionSpaces",(function(){return ke})),n.d(a,"Subspace",(function(){return i})),n.d(a,"VIEngine",(function(){return He}));n(4);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){i=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(i)throw a}}return n}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n={},r={},i={};t.forEach((function(e){n[e]=-1/0,r[e]=1/0,i[e]=0})),e.forEach((function(e){t.forEach((function(t){n[t]=Math.max(e[t],n[t]),r[t]=Math.min(e[t],r[t])}))}));var a=[];return e.forEach((function(e){var n=l({},e);t.forEach((function(e){i[e]+=Math.abs(n[e])})),a.push(n)})),a.forEach((function(e){t.forEach((function(t){e[t]/=i[t]}))})),{normalizedData:a,maxMeasures:n,minMeasures:r,totalMeasures:i}}function d(e,t,n,r){var i,a=v(e,r),o=a.normalizedData,u=(a.maxMeasures,a.minMeasures,a.totalMeasures),f=1/0,h="",l=c(t);try{for(l.s();!(i=l.n()).done;){var d,p=s(i.value,2),m=p[0],g=p[1],y=0,b=c(o);try{var w=function(){var e=d.value,t=g.find((function(t){return n.every((function(n){return e[n]===t[n]}))}));t?r.forEach((function(n){var r="number"!==typeof t[n]||isNaN(t[n])?0:t[n];r/=u[n],y+=Math.abs(e[n]-r)})):r.forEach((function(t){y+=Math.abs(e[t])}))};for(b.s();!(d=b.n()).done;)w()}catch(M){b.e(M)}finally{b.f()}y<f&&(f=y,h=m)}}catch(M){l.e(M)}finally{l.f()}return{majorKey:h,majorSum:f/=2*r.length}}function p(e,t,n,r){var i,a=v(e,r),o=a.normalizedData,u=(a.maxMeasures,a.minMeasures,a.totalMeasures,-1/0),f="",h=c(t);try{for(h.s();!(i=h.n()).done;){var l,d=s(i.value,2),p=d[0],m=v(d[1],r).normalizedData,g=0,y=c(o);try{var b=function(){var e=l.value,t=m.find((function(t){return n.every((function(n){return e[n]===t[n]}))}));t?r.forEach((function(n){var r="number"!==typeof t[n]||isNaN(t[n])?0:t[n];g+=Math.abs(e[n]-r)})):r.forEach((function(t){g+=Math.abs(e[t])}))};for(y.s();!(l=y.n()).done;)b()}catch(w){y.e(w)}finally{y.f()}g>u&&(u=g,f=p)}}catch(w){h.e(w)}finally{h.f()}return{outlierKey:f,outlierSum:u/=2*r.length}}function m(e,t){return e.filter((function(e){return t.every((function(t){return"continuous"===t.type?e[t.key]>=t.range[0]&&e[t.key]<=t.range[1]:t.range.has(e[t.key])}))}))}function g(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}var M=function(e,t,n){for(var r=new Set,i=new Set,a=new Map,o=e.length,u=0;u<o;u++){var f=e[u];r.add(f[t]),i.add(f[n]),a.has(f[t])||a.set(f[t],new Map);var h=a.get(f[t]);h.has(f[n])||h.set(f[n],0),h.set(f[n],h.get(f[n])+1)}var l=function(e,t,n){if("undefined"===typeof e||"undefined"===typeof t||"undefined"===typeof n)return 0;var r,i=new Map,a=new Map,o=0,u=c(t);try{for(u.s();!(r=u.n()).done;){var f=r.value;i.set(f,0)}}catch(C){u.e(C)}finally{u.f()}var h,l=c(n);try{for(l.s();!(h=l.n()).done;){var v=h.value;a.set(v,0)}}catch(C){l.e(C)}finally{l.f()}var d,p=c(e);try{for(p.s();!(d=p.n()).done;){var m,g=s(d.value,2),y=g[0],b=c(g[1]);try{for(b.s();!(m=b.n()).done;){var w=s(m.value,2),M=w[0],S=w[1];i.set(y,i.get(y)+S),a.set(M,a.get(M)+S),o+=S}}catch(C){b.e(C)}finally{b.f()}}}catch(C){p.e(C)}finally{p.f()}var E,k=0,x=c(e);try{for(x.s();!(E=x.n()).done;){var _,D=s(E.value,2),O=D[0],T=c(D[1]);try{for(T.s();!(_=T.n()).done;){var N=s(_.value,2),z=N[0],I=N[1],j=i.get(O)*a.get(z)/o;k+=Math.pow(I-j,2)/j}}catch(C){T.e(C)}finally{T.f()}}}catch(C){x.e(C)}finally{x.f()}return k}(a,r,i);return Math.sqrt(l/(e.length*Math.min(r.size-1,i.size-1)))},S=function(e,t,n){var r=E(e.map((function(e){return e[t]})))/e.length,i=E(e.map((function(e){return e[n]})))/e.length;return E(e.map((function(e){return(e[t]-r)*(e[n]-i)})))/Math.sqrt(E(e.map((function(e){return Math.pow(e[t]-r,2)})))*E(e.map((function(e){return Math.pow(e[n]-i,2)}))))};function E(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t}function k(e){var t=Math.min.apply(Math,g(e));return e.map((function(e){return e-t+1}))}function x(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=[],i=function t(n,i,a){i.length!==a?n>=e.length||(t(n+1,[].concat(g(i),[e[n]]),a),t(n+1,i,a)):r.push(g(i))},a=t;a<=n;a++)i(0,[],a);return r}function _(e){var t,n=0,r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i}}catch(a){r.e(a)}finally{r.f()}return e.map((function(e){return e/n}))}var D=function(e){var t,n=0,r=c(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i*Math.log2(i)}}catch(a){r.e(a)}finally{r.f()}return-n},O=function(){function e(t,n,r){y(this,e),this.dataSource=t,this.X=n,this.Y=r,this.normalizedDataSource=t}return w(e,[{key:"normalizeDimensions",value:function(e){var t=this;return this.normalizedDataSource=[],this.valueSets=[],e.forEach((function(){t.valueSets.push(new Map)})),this.dataSource.forEach((function(n){e.forEach((function(e,r){var i=(n[e]||"others").toString();t.valueSets[r].has(i)||t.valueSets[r].set(i,t.valueSets[r].size)}))})),this.dataSource.forEach((function(n){var r=t.normalizeRecord(n,e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e,t){var n=this,r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),t.forEach((function(t,i){var a=(e[t]||"others").toString();r[t]=n.valueSets[i].get(a)})),r}},{key:"mean",value:function(){var e=this,t=0,n=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(r,i){t+=r[e.X],n+=r[e.Y]})),t/=this.normalizedDataSource.length,n/=this.normalizedDataSource.length),[t,n]}},{key:"getRegressionEquation",value:function(){var e=this;if(0===this.normalizedDataSource.length)return[0,0];var t,n=s(this.mean(),2),r=n[0],i=n[1],a=0,o=0;return this.normalizedDataSource.forEach((function(t){a+=(t[e.X]-r)*(t[e.Y]-i),o+=Math.pow(t[e.X]-r,2)})),[i-r*(t=a/o),t]}},{key:"r_squared",value:function(){var e=this,t=s(this.mean(),2)[1],n=s(this.getRegressionEquation(),2),r=n[0],i=n[1],a=0,o=0;return this.normalizedDataSource.forEach((function(n){var u=n[e.X],s=n[e.Y],c=u*i+r;a+=Math.pow(c-t,2),o+=Math.pow(s-t,2)})),a/o}},{key:"cumulativeLogisticDistribution",value:function(e){return 1/(1+Math.pow(Math.E,-(e-.2)/2))}},{key:"pValue",value:function(){var e=s(this.getRegressionEquation(),2)[1],t=this.cumulativeLogisticDistribution(Math.abs(e));return t>.5?2*(1-t):2*t}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),e}(),T=n(2),N="_join_",z={sum:T.sum,max:T.max,mean:T.mean,min:T.min,count:function(e){return e.length}};function I(e){return z[e]||T.sum}var j=.3,C=.5;function F(e){for(var t=[],n=0;n<e.length;n++)for(var r=n+1;r<e[n].length;r++)t.push([[n,r],Math.abs(e[n][r])]);return t}function P(e,t){return e[t]===t?t:e[t]=P(e,e[t])}function q(e,t,n){var r=P(e,t),i=P(e,n);e[r]=i,P(e,t),P(e,n)}function L(e,t,n){return e[n]===n?n:(e[n]=L(e,t,e[n]),t[n]=t[e[n]],e[n])}function G(e,t,n,r){var i=L(e,t,n),a=L(e,t,r),o=t[i],u=t[a];e[i]=a,t[i]=t[a]=o+u,L(e,t,n),L(e,t,r)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=F(e);r.sort((function(e,t){return t[1]-e[1]}));var i,a=[],o=e.map((function(e,t){return t})),u=g(o),s=!1,f=c(r);try{for(f.s();!(i=f.n()).done;){var h=i.value;P(o,h[0][0])!==P(o,h[0][1])&&(q(o,h[0][0],h[0][1]),a.push([h[0],h[1],s]));for(var l=0;l<o.length;l++)o[l]=P(o,l);var v=new Set(o);if(v.size<=t||h[1]<n?s=!0:u=g(o),1===v.size)break}}catch(d){f.e(d)}finally{f.f()}return{edgesInMST:a,groups:u}}var R=function(e){var t,n=e.matrix,r=e.measures,i=(e.method,e.groupMaxSize),a=void 0===i?4:i,o=e.limitSize,u=void 0!==o&&o,s=e.threshold,f=void 0===s?0:s;t=u?function(e,t){var n=F(e);n.sort((function(e,t){return t[1]-e[1]}));var r,i=e.map((function(e,t){return t})),a=e.map((function(){return 1})),o=c(n);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(L(i,a,u[0][0])!==L(i,a,u[0][1])){if(a[u[0][0]]+a[u[0][1]]>t)continue;G(i,a,u[0][0],u[0][1])}for(var s=0;s<i.length;s++)i[s]=L(i,a,s);if(1===new Set(i).size)break}}catch(l){o.e(l)}finally{o.f()}for(var f=new Map,h=0;h<i.length;h++)f.has(i[h])||f.set(i[h],[]),f.get(i[h]).push(h);return f}(n,a):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=F(e);r.sort((function(e,t){return t[1]-e[1]}));var i,a=e.map((function(e,t){return t})),o=c(r);try{for(o.s();!(i=o.n()).done;){var u=i.value;P(a,u[0][0])!==P(a,u[0][1])&&q(a,u[0][0],u[0][1]);for(var s=0;s<a.length;s++)a[s]=P(a,s);if(new Set(a).size<=t||u[1]<n)break}}catch(l){o.e(l)}finally{o.f()}for(var f=new Map,h=0;h<a.length;h++)f.has(a[h])||f.set(a[h],[]),f.get(a[h]).push(h);return f}(n,a,f);var h,l=[],v=c(t.values());try{for(v.s();!(h=v.n()).done;){var d=h.value;l.push(d.map((function(e){return r[e]})))}}catch(p){v.e(p)}finally{v.f()}return l};function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e){return(U="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return e}(e):t}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var i=H(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return W(this,n)}}var B=function(e){K(n,e);var t=X(n);function n(e){var r;y(this,n),r=t.call(this,e);var i=e.K;return r.K=i,r.normalize(),r}return w(n,[{key:"getNeighbors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length!==t.length&&t.forEach((function(e){n.push(1)}));for(var r=[],i=[],a=[],o=[],u=new Set(this.dimensions),s=0;s<t.length;s++)u.has(t[s])?(r.push(t[s]),a.push(n[s])):(i.push(t[s]),o.push(n[s]));var c=[];this.normalizedDataSource.forEach((function(t,n){var u=0;i.forEach((function(n,r){u+=Math.pow((t[n]-e[n])*o[r],2)})),r.forEach((function(n,r){t[n]!==e[n]&&(u+=Math.pow(a[r],2))})),c.push({dis:u,index:n})})),c.sort((function(e,t){return e.dis-t.dis}));for(var f=[],h=Math.min(this.K,c.length),l=0;l<h;l++)f.push(this.normalizedDataSource[c[l].index]);return f}},{key:"getTargetValue",value:function(e,t){var n=this,r=[];return e.forEach((function(e){var i=new Map;t.forEach((function(t){i.has(t[e])||i.set(t[e],0),i.set(t[e],i.get(t[e])+1)}));var a,o=0,u=0,s=c(i);try{for(s.s();!(a=s.n()).done;){var f=a.value;f[1]>o&&(o=f[1],u=f[0])}}catch(l){s.e(l)}finally{s.f()}var h=n.dimensions.indexOf(e);h>-1?r.push(n.valueParser[h][u]):r.push(u)})),r}}]),n}(function(){function e(t){y(this,e);var n=t.dataSource,r=t.dimensions,i=t.measures;this.dataSource=n,this.dimensions=r,this.measures=i}return w(e,[{key:"normalize",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(t){e.valueSets.push(new Map),e.valueParser.push([])})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var i=(t[n]||"others").toString();e.valueSets[r].has(i)||(e.valueSets[r].set(i,e.valueSets[r].size),e.valueParser[r].push(i))})),e.measures.forEach((function(n,r){var i=t[n];"number"===typeof i&&(e.ranges[r][0]=Math.min(e.ranges[r][0],i),e.ranges[r][1]=Math.max(e.ranges[r][1],i))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e){var t=this,n={};return this.measures.forEach((function(r,i){n[r]=(e[r]-t.ranges[i][0])/(t.ranges[i][1]-t.ranges[i][0])})),this.dimensions.forEach((function(r,i){var a=(e[r]||"others").toString();n[r]=t.valueSets[i].get(a)})),n}}]),e}());function Y(e,t){for(var n=function(e,t){if(0===e)return[];for(var n=2147483647,r=[t],i=1;i<e;i++)r.push((1103515245*r[i-1]+12345)%n);return r.map((function(e){return e/n}))}(t,2147483647*Math.random()),r=[],i=0;i<t;i++){var a=Math.floor(n[i]*t)%t;r.push(e[a])}return r}var $=8,J={IsolationForest:function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;y(this,e),this.dimensions=t,this.measures=n,this.dataSource=r,r.length<a?(this.treeNumber=Math.max(1,Math.ceil(a/50)),this.sampleSize=Math.max(2,Math.floor(r.length/2))):(this.treeNumber=i,this.sampleSize=a),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return w(e,[{key:"normalizeDimensions",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){e.valueSets.push(new Map)})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var i=(t[n]||"others").toString();e.valueSets[r].has(i)||e.valueSets[r].set(i,e.valueSets[r].size)})),e.measures.forEach((function(n,r){var i=t[n];"number"===typeof i&&(e.ranges[r][0]=Math.min(e.ranges[r][0],i),e.ranges[r][1]=Math.max(e.ranges[r][1],i))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e){var t=this,n={};return this.measures.forEach((function(t){n[t]=e[t]})),this.dimensions.forEach((function(r,i){var a=(e[r]||"others").toString();n[r]=t.valueSets[i].get(a)})),n}},{key:"buildIsolationTree",value:function(e,t){if(t>=this.limitHeight||e.length<=1)return null;var n=Math.random(),r=this.measures[0]||this.dimensions[0],i=this.dimensions.length,a=this.measures.length,o=0;if(n>=i/(i+a)){var u=Math.floor(Math.random()*a)%a;r=this.measures[u],o=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*i)%i;r=this.dimensions[s],o=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var f,h=[],l=[],v=c(e);try{for(v.s();!(f=v.n()).done;){var d=f.value;d[r]<o?h.push(d):l.push(d)}}catch(m){v.e(m)}finally{v.f()}var p={field:r,value:o,size:e.length};return p.left=this.buildIsolationTree(h,t+1),p.right=this.buildIsolationTree(l,t+1),p}},{key:"AFS",value:function(e){return e>2?2*(Math.log(e-1)+.5772156649)-2*(e-1)/e:2===e?1:0}},{key:"getPathLength",value:function(e,t,n,r){return null===t?n+this.AFS(r):e[t.field]<t.value?this.getPathLength(e,t.left,n+1,t.size):this.getPathLength(e,t.right,n+1,t.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var e=0;e<this.treeNumber;e++){var t=Y(this.normalizedDataSource,this.sampleSize),n=this.buildIsolationTree(t,0);this.iForest.push(n)}return this.iForest}},{key:"estimateOutierScore",value:function(){var e=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(t){var n,r=0;e.iForest.forEach((function(n){r+=e.getPathLength(t,n,0,e.sampleSize)})),r/=e.iForest.length,n=Math.pow(2,-r/e.AFS(e.sampleSize)),e.recordScoreList.push(n)})),this.recordScoreList}}]),e}()};function Q(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++)n[r][i]=n[i][r]=M(e,t[r],t[i])}return n}function Z(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++){var a=S(e,t[r],t[i]);n[i][r]=n[r][i]=a}}return n}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:j,i=arguments.length>3?arguments[3]:void 0,a=4,o=Q(e,t),u=r.kruskal({matrix:o,measures:t,groupMaxSize:i||Math.round(t.length/a),threshold:n});return u}function te(e,t,n,r){var i,a=[],o=c(ee(e,t,n));try{for(o.s();!(i=o.n()).done;){var u=x(i.value,1,r||$);a.push.apply(a,g(u))}}catch(s){o.e(s)}finally{o.f()}return a}function ne(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=3,o=Z(e,t),u=r.kruskal({matrix:o,measures:t,groupMaxSize:i||Math.round(t.length/a),threshold:n||C});return u}function re(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?te(e,t):x(t)}function ie(e,t,n,r){for(var i=t.map((function(e){return n.includes(e)})),a=[],o=[],u=0;u<e.length;u++)if(i[u])for(var s=0;s<e[u].length;s++)i[s]||a.push([e[u][s],[u,s]]);a.sort((function(e,t){return t[0]-e[0]}));for(var c=0;c<a.length;c++){var f=a[c][1][1];i[f]||(i[f]=!0,o.push({field:t[f],corValue:a[c][0]}))}return o.slice(0,r||o.length)}var ae=n(1),oe=n.n(ae);function ue(e,t){var n,i=[],a=function(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var i=r+1;i<t.length;i++)n[r][i]=n[i][r]=M(e,t[r],t[i])}return n}(e,t),o=c(r.kruskal({matrix:a,measures:t,groupMaxSize:Math.round(t.length/4),threshold:j}));try{for(o.s();!(n=o.n()).done;){var u=x(n.value,1,$);i.push.apply(i,g(u))}}catch(s){o.e(s)}finally{o.f()}return i}function se(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?ue(e,t):x(t)}function ce(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum",a=[],o=se(e,t,!0),u=c(o);try{for(u.s();!(r=u.n()).done;){var s,f=r.value,h={},l=oe()({dataSource:e,dimensions:f,measures:n,asFields:n,operator:i||"sum"}),v=c(n);try{var d=function(){var e=s.value,t=_(k(l.map((function(t){return t[e]})))),n=D(t);h[e]=n};for(v.s();!(s=v.n()).done;)d()}catch(b){v.e(b)}finally{v.f()}for(var p=n.map((function(e){return n.map((function(e){return 0}))})),m=0;m<n.length;m++){p[m][m]=1;for(var g=m+1;g<n.length;g++){var y=S(l,n[m],n[g]);p[g][m]=p[m][g]=y}}a.push([f,h,p])}}catch(b){u.e(b)}finally{u.f()}return a}var fe=n(0),he=n.n(fe);function le(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function ve(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){le(a,r,i,o,u,"next",e)}function u(e){le(a,r,i,o,u,"throw",e)}o(void 0)}))}}var de=function(e){K(n,e);var t=X(n);function n(){return y(this,n),t.apply(this,arguments)}return w(n,[{key:"getTargetValuePercent",value:function(e,t,n){var r=[];return e.forEach((function(e,i){var a=0;n.forEach((function(n){n[e]===t[e]&&a++})),r.push(a/n.length)})),r}},{key:"getSignificance",value:function(e,t){var n=this,r=0;return this.normalizedDataSource.forEach((function(i){var a=n.getNeighbors(i,e),o=n.getTargetValuePercent(t,i,a),u=0;o.forEach((function(e){u+=e})),u/=o.length,r+=u})),r/=this.normalizedDataSource.length}}]),n}(B),pe="=;=";function me(e,t){var n,r=[],i=c(e);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=c(t);try{for(u.s();!(a=u.n()).done;){var s=a.value;r.push({dimensions:o,measures:s})}}catch(f){u.e(f)}finally{u.f()}}}catch(f){i.e(f)}finally{i.f()}return r}function ge(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$,r=[],i=c(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=x(a,1,n);r.push.apply(r,g(o))}}catch(u){i.e(u)}finally{i.f()}return r}var ye,be=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0,a=0,o=c(r);try{for(s=function(){var e=u.value,n=t.map((function(t){return t[e]})),r=_(k(n)),o=D(r);i+=o,a+=o/Math.log2(n.length)},o.s();!(u=o.n()).done;)s()}catch(f){o.e(f)}finally{o.f()}return i/=r.length,a=1-(a/=r.length),e.abrupt("return",{dimensions:n,measures:r,type:"default_general",score:i,impurity:i,significance:a,order:"asc"});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),we=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=new J.IsolationForest([],r,t)).buildIsolationForest(),a=i.estimateOutierScore(),o=0,u=0,s=0;s<a.length;s++)a[s]>u&&(u=a[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt("return",{dimensions:n,measures:r,score:u,significance:u,order:"desc",description:c});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Me=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt("return",null);case 2:(i=g(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:e[n[0]]<t[n[0]]?-1:void 0})),a=0,o=c(r);try{for(o.s();!(u=o.n()).done;)s=u.value,(f=new O(i,n[0],s)).normalizeDimensions(n),a+=f.significance()}catch(h){o.e(h)}finally{o.f()}return a/=r.length,e.abrupt("return",{dimensions:n,measures:r,score:a,significance:a,order:"desc"});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Se=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<2)){e.next=2;break}return e.abrupt("return",null);case 2:return 0,a=new de({dataSource:t,dimensions:n,measures:r,K:8}),i=a.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),e.abrupt("return",{dimensions:n,measures:r,score:i,significance:i,order:"desc"});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier="default_outlier",e.cluster="default_group",e.trend="default_trend"}(ye||(ye={}));var Ee=function(){function e(){y(this,e),this.workers=new Map}return w(e,[{key:"register",value:function(e,t){if(this.workers.has(e))throw new Error("There has been a worker named: ".concat(e," already."));this.workers.set(e,[!0,t])}},{key:"enable",value:function(e,t){if(!this.workers.has(e))throw new Error(\'Intention Worker "\'.concat(e,\'" does not exist.\'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:"each",value:function(e){var t,n=c(this.workers);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1];a[0]&&e(a[1],i)}}catch(o){n.e(o)}finally{n.f()}}}],[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;for(var i in e.colletion||(e.colletion=new e,r&&(e.colletion.register(ye.outlier,we),e.colletion.register(ye.cluster,Se),e.colletion.register(ye.trend,Me))),ye)e.colletion.enable(ye[i],r);return e.colletion}}]),e}();function ke(e,t,n){return xe.apply(this,arguments)}function xe(){return(xe=ve(he.a.mark((function e(t,n,r){var i,a,o,u;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=[],a=c(n),e.prev=2,u=he.a.mark((function e(){var n,a,u,s,c,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.value,a=n.dimensions,u=n.measures,s=a.join(pe),!t.has(s)){e.next=9;break}return c=t.get(s),e.next=7,be(c,a,u);case 7:f=e.sent,r.each(function(){var e=ve(he.a.mark((function e(t,n){var r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(c,a,u);case 3:null!==(r=e.sent)&&(r.type=n,r.impurity=f.impurity,i.push(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("worker failed",{dimensions:a,measures:u,aggData:c},e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})),a.s();case 5:if((o=a.n()).done){e.next=9;break}return e.delegateYield(u(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),a.e(e.t1);case 14:return e.prev=14,a.f(),e.finish(14);case 17:return e.abrupt("return",i);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}function _e(e){return De.apply(this,arguments)}function De(){return(De=ve(he.a.mark((function e(t){var n,r,i,a,o,u,s,f,h,l,v,d,p,m,g,y,b,w,M,S,E,k,x,_,D,O,T;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dataSource,r=t.dimensions,i=t.measures,a=t.collection,o=t.dimension_correlation_threshold,u=void 0===o?j:o,s=t.measure_correlation_threshold,f=void 0===s?C:s,h=t.max_dimension_num_in_view,l=void 0===h?3:h,v=t.max_measure_num_in_view,d=void 0===v?3:v,p=ee(n,r,u),m=ge(p,l),g=ne(n,i,f),y=ge(g,d),b=me(m,y),w=new Map,M=(new Date).getTime(),S=c(m);try{for(S.s();!(E=S.n()).done;)k=E.value,x=k.join(pe),_=oe()({dataSource:n,dimensions:k,measures:i,asFields:i,operator:"sum"}),w.set(x,_)}catch(N){S.e(N)}finally{S.f()}return D=(new Date).getTime(),console.log("cube cost",D-M),w.set("*",n),O=a||Ee.init(),e.next=18,ke(w,b,O);case 18:return T=e.sent,e.abrupt("return",T);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t){return function(e,t){return e.every((function(e){return Number(e[t])>=1800&&Number(e[t])<=2200||!isNaN(Date.parse(e[t]))&&"string"===typeof e[t]&&/^[0-9]{0,4}[-/][0-9]{0,2}([-/][0-9]{0,2}$)?/.test(e[t])||"undefined"===typeof e[t]||null===e[t]}))}(e,t)?"temporal":function(e,t){return e.every((function(e){return"number"===typeof e[t]||"undefined"===typeof e[t]||null===e[t]}))}(e,t)?"quantitative":(function(e,t){e.every((function(e){return"string"===typeof e[t]||"undefined"===typeof e[t]||null===e[t]}))}(e,t),"nominal")}var Te={boolean:function(e){return"true"===e||"false"===e||!0===e||!1===e},integer:function(e){return Te.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)},date:function(e){return!isNaN(Date.parse(e))}};function Ne(e,t){var n,r=[],i=new Map,a=c(e);try{var o=function(){var e=n.value,a=new Map;t.forEach((function(t){a.has(t[e])||a.set(t[e],0),a.set(t[e],a.get(t[e])+1)}));var o=function(e){var t,n,r=["boolean","integer","number","date"],i=c(e);try{for(i.s();!(t=i.n()).done;){for(var a=t.value,o=0;o<r.length;++o)null==(n=a)||n!==n||Te[r[o]](a)||(r.splice(o,1),o-=1);if(0===r.length)return"string"}}catch(u){i.e(u)}finally{i.f()}return r[0]}(g(a.keys())),u=Oe(t,e),s="dimension";"integer"!==o&&"number"!==o||(s="measure");var f={key:e,analyticType:s,semanticType:u,dataType:o,domain:a};r.push(f),i.set(f.key,f)};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return{fields:r,dictonary:i}}var ze,Ie=function(){function e(t,n,r){y(this,e),this.DIMENSION_CORRELATION_THRESHOLD=j,this.MEASURE_CORRELATION_THRESHOLD=C,this.dimensions=n,this.measures=r,this.computeDGraph(t),this.computeMGraph(t)}return w(e,[{key:"computeGraph",value:function(e,t,n){for(var r=t.map((function(e){return t.map((function(){return 0}))})),i=0;i<t.length;i++){r[i][i]=1;for(var a=i+1;a<t.length;a++)r[i][a]=r[a][i]=n(e,t[i],t[a])}return r}},{key:"computeDGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:M;return this.DG=this.computeGraph(e,this.dimensions,t),this.DG}},{key:"computeMGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;return this.MG=this.computeGraph(e,this.measures,t),this.MG}},{key:"clusterDGraph",value:function(e,t){var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=ee(e,n,t||r),this.DClusters}},{key:"clusterMGraph",value:function(e,t){var n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=ne(e,n,t||r),this.MClusters}}]),e}(),je=["max","min","sum","mean","count"],Ce=function(){function e(t){y(this,e);var n=t.dimensions,r=t.measures,i=t.ops,a=void 0===i?je:i;this.dimensions=n,this.measures=r,this.ops=a,this.state=[]}return w(e,[{key:"setData",value:function(e){return this.state=function(e){var t,n=e.dataSource,r=e.dimensions,i=e.measures,a=e.ops,o=new Map,u=c(n);try{var f=function(){var e=t.value,n=r.map((function(t){return e[t]})).join(N);o.has(n)||o.set(n,[]),o.get(n).push(e)};for(u.s();!(t=u.n()).done;)f()}catch(p){u.e(p)}finally{u.f()}var h,l=[],v=c(o);try{var d=function(){var e=s(h.value,2),t=e[0],n=e[1],o={};i.forEach((function(e,t){o[e]={},a.forEach((function(t){var r=I(t);o[e][t]=r(n.map((function(t){return t[e]})))}))}));var u=t.split(N);r.forEach((function(e,t){o[e]=u[t]})),l.push(o)};for(v.s();!(h=v.n()).done;)d()}catch(p){v.e(p)}finally{v.f()}return l}({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:e}),this.state}},{key:"computeFromCuboid",value:function(e){var t=this.ops,n=this.measures,r=this.dimensions;return this.state=function(e){var t,n=e.dataSource,r=e.dimensions,i=e.measures,a=e.ops,o=new Map,u=c(n);try{var f=function(){var e=t.value,n=r.map((function(t){return e[t]})).join(N);o.has(n)||o.set(n,[]),o.get(n).push(e)};for(u.s();!(t=u.n()).done;)f()}catch(p){u.e(p)}finally{u.f()}var h,l=[],v=c(o);try{var d=function(){var e=s(h.value,2),t=e[0],n=e[1],o={};i.forEach((function(e,t){o[e]={},a.filter((function(e){return!["sum","count","mean"].includes(e)})).forEach((function(t){var r=I(t);o[e][t]=r(n.map((function(n){return n[e][t]})))})),o[e].sum=I("sum")(n.map((function(t){return t[e].sum}))),o[e].count=I("sum")(n.map((function(t){return t[e].count}))),o[e].mean=o[e].sum/o[e].count}));var u=t.split(N);r.forEach((function(e,t){o[e]=u[t]})),l.push(o)};for(v.s();!(h=v.n()).done;)d()}catch(p){v.e(p)}finally{v.f()}return l}({dimensions:r,measures:n,ops:t,dataSource:e.getRawState()}),this.state}},{key:"getState",value:function(e,t){var n,r=[],i=this.state,a=this.dimensions,o=c(i);try{for(o.s();!(n=o.n()).done;){var u,s=n.value,f={},h=c(a);try{for(h.s();!(u=h.n()).done;){var l=u.value;f[l]=s[l]}}catch(m){h.e(m)}finally{h.f()}for(var v=0;v<e.length;v++){var d=e[v],p=t[v];f[d]=s[d][p]}r.push(f)}}catch(m){o.e(m)}finally{o.f()}return r}},{key:"getRawState",value:function(){return this.state}},{key:"size",get:function(){return this.state.length}}]),e}(),Fe="_join_",Pe=["max","min","sum","mean","count"],qe=function(){function e(t){var n=this;y(this,e);var r=t.dimensions,i=t.measures,a=t.dataSource,o=t.ops,u=void 0===o?Pe:o;this.dimensions=r,this.measures=i,this.dataSource=a,this.ops=u,this.dimOrder=new Map,r.forEach((function(e,t){n.dimOrder.set(e,t)})),this.cuboids=new Map}return w(e,[{key:"sortDimension",value:function(e){var t=this,n=g(e);return n.sort((function(e,n){return t.dimOrder.get(e)-t.dimOrder.get(n)})),n}},{key:"getCuboid",value:function(e){var t=this.sortDimension(e),n=t.join(Fe);if(this.cuboids.has(n))return this.cuboids.get(n);var r,i=new Set(e),a=[],o=[],u=c(this.dimensions);try{for(u.s();!(r=u.n()).done;){var s=r.value;if(!i.has(s)){var f=this.sortDimension([].concat(g(t),[s])).join(Fe);this.cuboids.has(f)?a.push(f):o.push(f)}}}catch(w){u.e(w)}finally{u.f()}var h=1/0,l=this.dimensions.join(Fe);if(a.length>0){var v,d=c(a);try{for(d.s();!(v=d.n()).done;){var p=v.value,m=this.cuboids.get(p);m.size<h&&(h=m.size,l=p)}}catch(w){d.e(w)}finally{d.f()}}else o.length>0&&(l=o[0]);var y=this.getCuboid(l.split(Fe)),b=new Ce({dimensions:e,measures:this.measures,ops:this.ops});return b.computeFromCuboid(y),this.cuboids.set(n,b),b}},{key:"buildBaseCuboid",value:function(){var e=new Ce({dimensions:this.dimensions,measures:this.measures,ops:this.ops});return e.setData(this.dataSource),this.cuboids.set(this.dimensions.join(Fe),e),e}},{key:"baseCuboid",get:function(){var e=this.dimensions.join(Fe);return this.cuboids.has(e)?this.cuboids.get(e):this.buildBaseCuboid()}}]),e}(),Le=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((i=new J.IsolationForest([],r,t)).buildIsolationForest(),a=i.estimateOutierScore(),o=0,u=0,s=0;s<a.length;s++)a[s]>u&&(u=a[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt("return",{dimensions:n,measures:r,significance:u,description:c});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ge=function(){var e=ve(he.a.mark((function e(t,n,r){var i,a,o,u,s,f;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt("return",null);case 2:(i=g(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:-1})),a=0,o=c(r);try{for(o.s();!(u=o.n()).done;)s=u.value,(f=new O(i,n[0],s)).normalizeDimensions(n),a+=f.significance()}catch(h){o.e(h)}finally{o.f()}return a/=r.length,e.abrupt("return",{dimensions:n,measures:r,significance:a});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier="default_outlier",e.trend="default_trend"}(ze||(ze={}));var Ae=function(){function e(){y(this,e),this.workers=new Map}return w(e,[{key:"register",value:function(e,t){if(this.workers.has(e))throw new Error("There has been a worker named: ".concat(e," already."));this.workers.set(e,[!0,t])}},{key:"enable",value:function(e,t){if(!this.workers.has(e))throw new Error(\'Intention Worker "\'.concat(e,\'" does not exist.\'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:"each",value:function(e){var t,n=c(this.workers);try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1];a[0]&&e(a[1],i)}}catch(o){n.e(o)}finally{n.f()}}}],[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;return e.colletion||(e.colletion=new e,r&&(e.colletion.register(ze.outlier,Le),e.colletion.register(ze.trend,Ge))),Object.values(ze).forEach((function(t){e.colletion.enable(t,r)})),e.colletion}}]),e}(),Re={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function Ve(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].semanticType===e&&!t[n].choosen)return t[n];return!1}function Ke(e,t){var n=function(e){for(var t={},n={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},r=e.map((function(e){return l(l({},e),{},{choosen:!1})})),i=[["quantitative",["position","size","color","highFacets","opacity","page","filter"]],["temporal",["position","page","filter"]],["ordinal",["position","color","opacity","facets","size","page","filter","highFacets"]],["nominal",["position","color","facets","shape","page","filter","hightFacets"]]],a=r.length,o=0;o<i.length&&a>0;o++)for(var u=i[o][0],s=i[o][1],c=0;c<s.length&&a>0;c++)for(var f=s[c],h=void 0;n[f]>0&&(h=Ve(u,r));)"undefined"===typeof t[f]&&(t[f]=[]),t[f].push(h.key),n[f]--,a--,h.choosen=!0;return t}(e.sort((function(e,t){return e.impurity-t.impurity}))),r=new Set(e.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key}))),i=new Set(e.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key})));if(n.position&&2===n.position.length)if(r.has(n.position[0])&&i.has(n.position[1])||r.has(n.position[1])&&i.has(n.position[0])){var a=r.has(n.position[0])?0:1,o=n.position[a],u=n.position[(a+1)%2];n.position=[o,u];var s=e.find((function(e){return e.key===o})),c=s?s.domain.size:0;n.geomType=["interval","line","area"].filter((function(e){return c>=Re[e][0]&&c<=Re[e][1]})),"nominal"===s.semanticType&&(n.geomType=["interval"])}else n.geomType=["point","density"].filter((function(e){return t.length>=Re[e][0]&&t.length<=Re[e][1]}));return{schema:n,dataView:t}}var He=function(){function e(){y(this,e),this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count"],this.workerCollection=Ae.init()}return w(e,[{key:"setDataSource",value:function(e){return this.dataSource=e,this}},{key:"setDimensions",value:function(e){return this._dimensions=e,this._fields.forEach((function(t){"dimension"!==t.analyticType&&e.includes(t.key)&&(t.analyticType="dimension")})),this}},{key:"setMeasures",value:function(e){return this._measures=e,this._fields.forEach((function(t){"measure"!==t.analyticType&&e.includes(t.key)&&(t.analyticType="measure")})),this}},{key:"setFieldKeys",value:function(e){return this._fieldKeys=e,this}},{key:"buildfieldsSummary",value:function(){var e=this,t=Ne(this._fieldKeys,this.dataSource),n=t.fields,r=t.dictonary;return this.dimensions&&this.measures&&n.forEach((function(t){e.dimensions.includes(t.key)?t.analyticType="dimension":t.analyticType="measure"})),this.fields=n,this.fieldDictonary=r,this}},{key:"buildGraph",value:function(){return this.dataGraph=new Ie(this.dataSource,this.dimensions,this.measures),this}},{key:"buildCube",value:function(){var e=this.measures,t=this.dataSource,n=this.dataGraph,r=this.dimensions,i=this.aggregators,a=new qe({dimensions:r,measures:e,dataSource:t,ops:i});return a.buildBaseCuboid(),n.DClusters.forEach((function(e){a.getCuboid(e)})),this.cube=a,this}},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:"buildSubspaces",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,i=this.dataGraph.DClusters,a=this.dataGraph.MClusters,o=e.getCombinationFromClusterGroups(a,r),u=[],s=c(i);try{for(s.s();!(t=s.n()).done;){var f,h=t.value,l=x(h,n.MIN,n.MAX),v=c(l);try{for(v.s();!(f=v.n()).done;){var d,p=f.value,m=c(o);try{for(m.s();!(d=m.n()).done;){var g=d.value;u.push({dimensions:p,measures:g})}}catch(y){m.e(y)}finally{m.f()}}}catch(y){v.e(y)}finally{v.f()}}}catch(y){s.e(y)}finally{s.f()}return this.subSpaces=u,this}},{key:"insightExtraction",value:function(){var t=ve(he.a.mark((function t(){var n,r,i,a,o,u,s=this,f=arguments;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=f.length>0&&void 0!==f[0]?f[0]:this.subSpaces,r=this,i=[],a=c(n),t.prev=4,u=he.a.mark((function t(){var n,a,u,c,f,h,l,v;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=o.value,a=n.dimensions,u=n.measures,c=r.cube,f=c.getCuboid(a),h=f.getState(u,u.map((function(){return"sum"}))),l=e.getSpaceImpurity(h,a,u),v=[],s.workerCollection.each((function(e,t){var n=function(){var e=ve(he.a.mark((function e(t,n){var o;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(h,a,u,r.fieldDictonary,r);case 3:null!==(o=e.sent)&&(o.type=n,o.impurity=l,i.push(o)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("worker failed",{dimensions:a,measures:u,aggData:h},e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();v.push(n(e,t))})),t.next=10,Promise.all(v);case 10:case"end":return t.stop()}}),t)})),a.s();case 7:if((o=a.n()).done){t.next=11;break}return t.delegateYield(u(),"t0",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),a.e(t.t1);case 16:return t.prev=16,a.f(),t.finish(16);case 19:return r.insightSpaces=i,t.abrupt("return",i);case 21:case"end":return t.stop()}}),t,this,[[4,13,16,19]])})));return function(){return t.apply(this,arguments)}}()},{key:"setInsightScores",value:function(){return this.insightSpaces.forEach((function(e){e.score=e.impurity/e.significance})),this}},{key:"getFieldInfoInVis",value:function(e){var t=[],n=this.cube,r=this.fieldDictonary,i=e.dimensions,a=e.measures;i.forEach((function(e){var i=n.getCuboid([e]).getState(a,a.map((function(){return"sum"}))),o=0;a.forEach((function(e){var t=_(k(i.map((function(t){return t[e]})))),n=D(t);o+=n})),t.push(l(l({},r.get(e)),{},{impurity:o}))}));var o=n.getCuboid(i).getState(a,a.map((function(){return"sum"})));return a.forEach((function(e){var n=_(k(o.map((function(t){return t[e]})))),i=D(n);t.push(l(l({},r.get(e)),{},{impurity:i}))})),t}},{key:"specification",value:function(e){var t=e.dimensions,n=e.measures;return Ke(this.getFieldInfoInVis(e),this.cube.getCuboid(t).getState(n,n.map((function(){return"sum"}))))}},{key:"fields",get:function(){return this._fields},set:function(e){this._fields=e,this._dimensions=e.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key})),this._measures=e.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key}))}},{key:"dimensions",get:function(){return this._dimensions}},{key:"measures",get:function(){return this._measures}}],[{key:"getCombinationFromClusterGroups",value:function(e,t){var n,r=[],i=c(e);try{for(i.s();!(n=i.n()).done;){var a=x(n.value,t.MIN,t.MAX);r.push.apply(r,g(a))}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"getSpaceImpurity",value:function(e,t,n){var r,i=0,a=c(n);try{var o=function(){var t=r.value,n=_(k(e.map((function(e){return e[t]})))),a=D(n);i+=a};for(a.s();!(r=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}return i/=n.length}}]),e}();function Ue(e,t,n,r){var i={},a={};n.forEach((function(e){i[e]=0,a[e]=0})),t.forEach((function(e){n.forEach((function(t){i[t]+=Math.abs(e[t])}))})),e.forEach((function(e){n.forEach((function(t){a[t]+=Math.abs(e[t])}))}));var o=[];t.forEach((function(e){var t=l({},e);n.forEach((function(e){t[e]/=i[e]})),o.push(t)}));var u=[];return e.forEach((function(e){var t=l({},e);n.forEach((function(e){t[e]/=r?i[e]:a[e]})),u.push(t)})),{normalizedData:u,normalizedParentData:o}}function We(e,t,n,r){var i,a=0,o=t.map((function(){return!1})),u=c(e);try{var s=function(){var e=i.value,u=t.findIndex((function(t,r){return!o[r]&&n.every((function(n){return t[n]===e[n]}))}));if(u>-1){o[u]=!0;var s,f=t[u],h=c(r);try{for(h.s();!(s=h.n()).done;){var l=s.value;a=Math.max(a,Math.max(f[l],e[l])/Math.min(f[l],e[l])),console.log("score",a)}}catch(m){h.e(m)}finally{h.f()}}else{var v,d=c(r);try{for(d.s();!(v=d.n()).done;){var p=v.value;a=Math.max(a,e[p])}}catch(m){d.e(m)}finally{d.f()}}};for(u.s();!(i=u.n()).done;)s()}catch(d){u.e(d)}finally{u.f()}for(var f=0;f<t.length;f++)if(!o[f]){o[f]=!0;var h,l=c(r);try{for(l.s();!(h=l.n()).done;){var v=h.value;a=Math.max(a,t[f][v])}}catch(d){l.e(d)}finally{l.f()}}return a}function Xe(e,t){var n=new Map;t.forEach((function(e){n.set(e,0)})),e.forEach((function(e){t.forEach((function(t){n.set(t,n.get(t)+Math.abs(e[t]))}))}));var r=[];return e.forEach((function(e){var i=l({},e);t.forEach((function(e){i[e]/=n.get(e)})),r.push(i)})),r}function Be(e,t,n,r){var i,a=0,o=c(e);try{for(o.s();!(i=o.n()).done;){var u=i.value;0!==u[n]&&0!==u[r]&&(a+=Math.max(u[n],u[r])/Math.min(u[n],u[r]))}}catch(s){o.e(s)}finally{o.f()}return a}var Ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];y(this,e),this.dataSource=void 0,this.dimensions=void 0,this.measures=void 0,this.engine=void 0,this.defaultAggs=["min","max","sum","count","mean"],this.engine=new a.VIEngine,this.dataSource=t,this.dimensions=[],this.measures=[];var n=[];t.length>0&&(n=Object.keys(t[0])),this.engine.setDataSource(t).setFieldKeys(n).buildfieldsSummary()}return w(e,[{key:"setDimensions",value:function(e){return this.dimensions=e,this.engine.setDimensions(e),this}},{key:"setMeasures",value:function(e){return this.measures=e,this.engine.setMeasures(e),this}},{key:"preAnalysis",value:function(){return console.log("start"),this.engine.buildGraph(),this.engine.dataGraph.DIMENSION_CORRELATION_THRESHOLD=.6,this.engine.dataGraph.MEASURE_CORRELATION_THRESHOLD=.8,console.log("graph finish"),this.engine.clusterFields(),console.log("cluster finish"),this.engine.buildSubspaces({MAX:2,MIN:1},{MAX:2,MIN:1}),console.log("subspaces finsh. start build-cube"),this.engine.buildCube(),console.log("cube finish"),this}},{key:"explain",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.3;this.explainConditionalValue(e,t,n);var i=0===t.length||0===e.length;console.log({selectAll:i});var a=i?[]:this.explainBySelection(e,t,n,10),o=i?[]:this.explainByCorMeasures(e,t,n,10),u=this.explainByChildren([],t,n,10),s=[];return a.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:"selection_dim_distribution",description:r,predicates:e})})),o.forEach((function(r){s.push({dimensions:t,extendDs:[],extendMs:r.measures,measures:n,score:r.score,type:"selection_mea_distribution",description:r,predicates:e})})),u.majorList.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:"children_major_factor",description:r,predicates:e})})),u.outlierList.forEach((function(r){s.push({dimensions:t,extendDs:r.dimensions,measures:n,extendMs:[],score:r.score,type:"children_outlier",description:r,predicates:e})})),s.filter((function(e){return e.score>=r}))}},{key:"explainConditionalValue",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=this.getGeneralizeKNN("dimension",t,i,0),o=c(a);try{for(o.s();!(r=o.n()).done;){var u=r.value,s=this.explainValue(e,[].concat(g(t),[u]),n);console.log(u,n,s)}}catch(f){o.e(f)}finally{o.f()}}},{key:"explainValue",value:function(e,t,n){var r,i=n.map((function(e){return e.key})),a=n.map((function(e){return e.op})),o=this.engine.cube.getCuboid(t).getState(i,a),u=m(o,e),s=[],f=c(i);try{var h=function(){var e=r.value,t=o.map((function(t){return t[e]}));t.sort((function(e,t){return e-t}));var n=u.map((function(t){return t[e]})),i=t[Math.floor(.15*t.length)],a=t[Math.min(Math.ceil(.85*t.length),t.length-1)];n.some((function(e){return e>=a}))?s.push(1):n.some((function(e){return e<=i}))?s.push(-1):s.push(0)};for(f.s();!(r=f.n()).done;)h()}catch(l){f.e(l)}finally{f.f()}return s}},{key:"explainByChildren",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=this.engine.cube.getCuboid(t),a=n.map((function(e){return e.key})),o=n.map((function(e){return e.op})),u=m(i.getState(a,o),e),s=this.getGeneralizeKNN("dimension",t,r,0);console.log("knn",s);var f,h=[],l=[],v=c(s);try{for(v.s();!(f=v.n()).done;){var y,b=f.value,w=this.engine.cube.getCuboid([].concat(g(t),[b])),M=m(w.getState(a,o),e),S=new Map,E=c(M);try{for(E.s();!(y=E.n()).done;){var k,x=y.value;S.has(x[b])||S.set(x[b],[]),null===(k=S.get(x[b]))||void 0===k||k.push(x)}}catch(I){E.e(I)}finally{E.f()}var _=d(u,S,t,a),D=_.majorKey,O=_.majorSum;h.push({key:D,score:O,dimensions:[b],measures:n});var T=p(u,S,t,a),N=T.outlierKey,z=T.outlierSum;l.push({key:N,score:z,dimensions:[b],measures:n})}}catch(I){v.e(I)}finally{v.f()}return h.sort((function(e,t){return e.score-t.score})),l.sort((function(e,t){return t.score-e.score})),{majorList:h,outlierList:l}}},{key:"explainBySelection",value:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=n.map((function(e){return e.key})),o=n.map((function(e){return e.op})),u=this.getGeneralizeKNN("dimension",t,i,0),s=[],f=c(u);try{for(f.s();!(r=f.n()).done;){var h=r.value,l=this.engine.cube.getCuboid([h]),v=this.engine.cube.getCuboid([].concat(g(t),[h])),d=l.getState(a,o),p=m(v.getState(a,o),e),y=Ue(p,d,a,!1),b=We(y.normalizedData,y.normalizedParentData,[h],a);s.push({dimensions:[h],measures:n,score:b})}}catch(w){f.e(w)}finally{f.f()}return s.sort((function(e,t){return t.score-e.score})),s}},{key:"explainByCorMeasures",value:function(e,t,n){var r,i=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=n.map((function(e){return e.key})),u=n.map((function(e){return e.op})),s=this.getGeneralizeKNN("measure",o,a),h=[].concat(g(o),g(s)),v=[],d=this.engine.cube.getCuboid(t),p=c(this.defaultAggs);try{var m=function(){var a,o=r.value,p=s.map((function(){return o})),m=Xe(d.getState(h,[].concat(g(u),g(p))),h),y=c(h);try{var b=function(){var r=a.value,u=n.find((function(e){return e.key===r}));if(u&&u.op===o)return"continue";for(var s=i.explainValue(e,t,[{key:r,op:o}]),h=[],p=0;p<s.length;p++)0!==s[p]&&h.push({key:r,op:o,score:s[p]});if(0===h.length)return"continue";if(u){var g,y=Xe(d.getState([r],[o]),[r]),b=m.map((function(e,t){return l(l({},e),{},f({},"__".concat(r),y[t][r]))})),w=0,M=1,S=c(n);try{for(S.s();!(g=S.n()).done;){var E=Be(b,0,g.value.key,"__".concat(r))/2;w=Math.max(w,E),M=Math.min(M,E)}}catch(N){S.e(N)}finally{S.f()}v.push({dimensions:t,score:Math.max(1-M,w),measures:[{key:r,op:o}],max:w,min:M,intMeasures:h})}else{var k,x=0,_=1,D=c(n);try{for(D.s();!(k=D.n()).done;){var O=k.value,T=Be(m,0,O.key,r)/2;x=Math.max(x,T),_=Math.min(_,T)}}catch(N){D.e(N)}finally{D.f()}v.push({dimensions:t,score:Math.max(1-_,x),measures:[{key:r,op:o}],max:x,min:_,intMeasures:h})}};for(y.s();!(a=y.n()).done;)b()}catch(w){y.e(w)}finally{y.f()}};for(p.s();!(r=p.n()).done;)m()}catch(y){p.e(y)}finally{p.f()}return v.sort((function(e,t){return t.score-e.score})),v}},{key:"getGeneralizeKNN",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return 0===t.length?this.getCenterFields(e,n):this.getKNN(e,t,n,r)}},{key:"getKNN",value:function(e,t){var n,r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o="dimension"===e?this.engine.dataGraph.DG:this.engine.dataGraph.MG,u="dimension"===e?this.engine.dataGraph.dimensions:this.engine.dataGraph.measures,s=t.map((function(e){return u.indexOf(e)})),f=[],h=c(s);try{for(h.s();!(n=h.n()).done;)for(var l=n.value,v=0;v<o[l].length;v++)s.includes(v)||function(){var e=Math.abs(o[l][v]),t=u[v],n=r.engine.fields.find((function(e){return e.key===t}));e>=a&&f.push({dis:e,index:v,imp:(null===n||void 0===n?void 0:n.domain.size)||1/0})}()}catch(d){h.e(d)}finally{h.f()}return f.sort((function(e,t){return t.dis/t.imp-e.dis/e.imp})),f.slice(0,i).map((function(e){return u[e.index]}))}},{key:"getCenterFields",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n="dimension"===e?this.engine.dataGraph.DG:this.engine.dataGraph.MG,r="dimension"===e?this.engine.dataGraph.dimensions:this.engine.dataGraph.measures,i=n.map((function(e,t){return{field:r[t],score:e.reduce((function(e,t){return e+Math.abs(t)}),0)}}));return i.sort((function(e,t){return t.score-e.score})),i.map((function(e){return e.field})).slice(0,t)}},{key:"getVisSpec",value:function(e){var t=this.engine;return e.map((function(e){var n,r=e.measures.map((function(e){return e.key})),i=e.extendMs.map((function(e){return e.key}));n="children_major_factor"===e.type||"children_outlier"===e.type?{dimensions:[].concat(g(e.extendDs),g(e.dimensions)),measures:i.length>0?i:r,significance:e.score,score:e.score,description:e.description}:{dimensions:e.extendDs.length>0?e.extendDs:e.dimensions,measures:i.length>0?i:r,significance:e.score,score:e.score,description:e.description};var a=[].concat(g(e.measures),g(e.extendMs));return{schema:t.specification(n).schema,dataView:t.cube.getCuboid([].concat(g(e.dimensions),g(e.extendDs))).getState(a.map((function(e){return e.key})),a.map((function(e){return e.op})))}}))}}]),e}();const $e={de:null};function Je(e){const{filters:t={},currentSpace:n}=e,r=function(e,t,n){var r=[];return t.forEach((function(t){r.push({type:"discrete",range:new Set(e[t]),key:t})})),r}(t,n.dimensions),i=$e.de,a=i.explain(r,n.dimensions,n.measures),o=i.getVisSpec(a),u=i.explainValue(r,n.dimensions,n.measures),s=[];for(let c=0;c<u.length;c++)0!==u[c]&&s.push({...n.measures[c],score:u[c]});return{explainations:a,visSpaces:o,valueExp:s,fieldsWithSemanticType:i.engine.fields.map((e=>({key:e.key,type:e.semanticType})))}}self.addEventListener("message",(function(e){const{type:t,data:n}=e.data;console.log(t,n);let r=!1;try{switch(t){case"getExplaination":r=Je(n);break;case"preAnalysis":r=function(e){const{dimensions:t,measures:n,dataSource:r}=e,i=new Ye(r);return i.setDimensions(t).setMeasures(n).preAnalysis(),$e.de=i,!0}(n);break;default:throw new Error(`type ${t} is not supported.`)}self.postMessage(r)}catch(i){console.log(i),self.postMessage(!1)}}),!1)}]);\n//# sourceMappingURL=explainer.worker.4818409b.worker.js.map',"Worker",void 0,r.p+"static/js/explainer.worker.4818409b.worker.js")}var Ze={worker:null};function $e(t,e){return new Promise((function(r,n){t.postMessage(e),t.onmessage=function(t){r(t.data)},t.onerror=function(t){n({success:!1,message:t})}}))}function tr(){return(tr=Object(m.a)(p.a.mark((function t(e){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(r=Ze.worker)){t.next=3;break}throw new Error("init worker first.");case 3:return n={explainations:[],valueExp:[],visSpaces:[],fieldsWithSemanticType:[]},t.prev=4,t.next=7,$e(r,{type:"getExplaination",data:e});case 7:return n=t.sent,t.abrupt("return",n);case 11:t.prev=11,t.t0=t.catch(4),console.error(t.t0);case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,null,[[4,11]])})))).apply(this,arguments)}function er(){return(er=Object(m.a)(p.a.mark((function t(e){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null!==Ze.worker&&Ze.worker.terminate(),t.prev=1,Ze.worker=new Je,t.next=5,$e(Ze.worker,{type:"preAnalysis",data:e});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})))).apply(this,arguments)}function rr(){var t=Object(Rt.a)(["\n    .option {\n        padding: 1em;\n        margin: 4px;\n        border: 1px solid #f0f0f0;\n        background-color: #f0f0f0;\n        cursor: pointer;\n    }\n    .choosen.option {\n        background-color: #fff;\n    }\n"]);return rr=function(){return t},t}var nr=Kt.c.div(rr()),ar=function(t){var e=t.options,r=t.onChange,n=t.choosenIndex;return i.a.createElement(nr,null,e.map((function(t,e){return i.a.createElement("div",{key:e,className:"".concat(n===e?"choosen":""," option"),onClick:function(){r&&r(t.value,e)}},t.label)})))};var or=r(241),ir=r.n(or),ur=Tt.c.IntentionWorkerCollection.init(),sr={selection_dim_distribution:"\u9009\u62e9\u96c6+\u65b0\u7ef4\u5ea6",selection_mea_distribution:"\u9009\u62e9\u96c6+\u65b0\u5ea6\u91cf",children_major_factor:"\u5b50\u8282\u70b9\u4e3b\u56e0",children_outlier:"\u5b50\u8282\u70b9\u5f02\u5e38"};ur.enable(Tt.c.DefaultIWorker.cluster,!1);var cr=function(t){var e=t.dataSource,r=t.fields,n=t.viewDs,a=t.viewMs,u=t.filters,s=Object(o.useState)([]),l=Object(c.a)(s,2),f=l[0],d=l[1],v=Object(o.useState)([]),p=Object(c.a)(v,2),m=p[0],g=p[1],y=Object(o.useState)(0),b=Object(c.a)(y,2),w=b[0],M=b[1],E=Object(o.useState)(!1),x=Object(c.a)(E,2),S=x[0],k=x[1],O=Object(o.useState)([]),j=Object(c.a)(O,2),_=j[0],D=j[1],T=Object(o.useRef)(null),N=Object(o.useMemo)((function(){var t=r.filter((function(t){return"D"===t.type})).map((function(t){return t.id})).filter((function(t){return!Tt.f.isFieldUnique(e,t)}));return Tt.e.getAllFieldTypes(e,t)}),[r,e]),A=Object(o.useMemo)((function(){return r.filter((function(t){return"M"===t.type})).map((function(t){return t.id})).map((function(t){return{name:t,type:"quantitative"}}))}),[r]);Object(o.useEffect)((function(){if(N.length>0&&A.length>0&&e.length>0){var t=r.filter((function(t){return"M"===t.type})).map((function(t){return t.id})),o=N.map((function(t){return t.name})),i={dimensions:n.map((function(t){return t.id})),measures:a.map((function(t){return{key:t.id,op:t.aggName}}))};k(!0),function(t){return tr.apply(this,arguments)}({dimensions:o,measures:t,dataSource:e,currentSpace:i,filters:u}).then((function(t){var e=t.visSpaces,r=t.explainations,n=t.valueExp;d(r),g(e),D(n),k(!1)}))}}),[r,n,a,A,u,N,A,e]);var C=Object(o.useMemo)((function(){return[].concat(Object(h.a)(N),Object(h.a)(A))}),[N,A]);Object(o.useEffect)((function(){var t=f[w],r=m[w];if(T.current&&t&&r){var n="selection_dim_distribution"===t.type||"selection_mea_distribution"===t.type,a=function(t,e){var r,n=new Set,a=[],o=Object(Et.a)(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;n.add(i.key),a.push(i)}}catch(l){o.e(l)}finally{o.f()}var u,s=Object(Et.a)(e);try{var c=function(){var t=u.value;if(n.has(t.key)){var e=a.findIndex((function(e){return e.key===t.key}));e>-1&&(a[e]=t)}else n.add(t.key),a.push(t)};for(s.s();!(u=s.n()).done;)c()}catch(l){s.e(l)}finally{s.f()}return a}(t.measures,t.extendMs),o=We(r.schema,r.schema.geomType&&"point"===r.schema.geomType[0]?e:r.dataView,[].concat(Object(h.a)(t.dimensions),Object(h.a)(t.extendDs)),[].concat(Object(h.a)(t.measures),Object(h.a)(t.extendMs)).map((function(t){return t.key})),n?t.predicates:null,a.map((function(t){return{op:t.op,field:t.key,as:t.key}})),C,t.type,!0,!0);T.current&&(console.log(o),Object(Mt.a)(T.current,o))}}),[w,f,m,C,e]);var q=Object(o.useMemo)((function(){if(u){var t=Object.keys(u).filter((function(t){return u[t].length>0})).map((function(t){return"".concat(t,"=").concat(u[t])}));return"\u9009\u4e2d\u5bf9\u8c61".concat(t.join(", "),"\u7684\u6570\u636e")}return""}),[u]),P=Object(o.useMemo)((function(){return _.map((function(t){return"".concat(t.key,"(").concat(t.op,")\u7684\u53d6\u503c").concat(1===t.score?"\u5927\u4e8e":"\u5c0f\u4e8e","\u9884\u671f")})).join(", ")}),[_]);return i.a.createElement("div",{style:{maxHeight:"720px",minHeight:"200px",overflowY:"auto",maxWidth:"880px"}},i.a.createElement("p",null,q,", ",P),S&&i.a.createElement("div",{"aria-busy":!0,style:{display:"inline-block"}},i.a.createElement(Oe.Spinner,null)),i.a.createElement("div",{style:{display:"flex"}},i.a.createElement("div",{style:{flexBasis:"200px",flexShrink:0}},i.a.createElement(ar,{choosenIndex:w,options:f.map((function(t,e){return{value:t.type||""+e,label:"".concat(t.type?sr[t.type]:"\u672a\u8bc6\u522b",": ").concat(Math.round(100*t.score),"%")}})),onChange:function(t,e){M(e)}})),i.a.createElement("div",null,i.a.createElement("div",{ref:T}),f[w]&&i.a.createElement("div",null,"\u7ef4\u5ea6\u662f",f[w].dimensions.join(", "),"\u3002",i.a.createElement("br",null),"\u5ea6\u91cf\u662f",f[w].measures.map((function(t){return t.key})).join(", "),"\u3002",i.a.createElement("br",null),"\u6b64\u65f6\u5177\u6709",f[w].type?sr[f[w].type]:"\u672a\u8bc6\u522b"," ","\uff0c\u663e\u8457\u6027\u4e3a",Math.round(100*f[w].score),"%\u3002",i.a.createElement("br",null),f[w].description&&f[w].description.intMeasures&&q+f[w].description.intMeasures.map((function(t){return"".concat(t.key,"(").concat(t.op,")}\u7684\u53d6\u503c").concat(1===t.score?"\u5927\u4e8e":"\u5c0f\u4e8e","\u9884\u671f")})).join(", "),i.a.createElement("br",null),i.a.createElement(ir.a,{src:f[w].description})))))};function lr(){var t=Object(Rt.a)(["\n  width: 880px;\n  max-height: 800px;\n  overflow: auto;\n  > div.header {\n    background-color: #f0f0f0;\n    display: flex;\n    padding: 8px;\n    align-items: center;\n  }\n  > div.container {\n    padding: 1em;\n  }\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  background-color: #fff;\n  box-shadow: 0px 0px 12px 3px rgba(0, 0, 0, 0.19);\n  border-radius: 4px;\n  z-index: 999;\n"]);return lr=function(){return t},t}var fr=Kt.c.div(lr()),hr=function(t){var e=t.onClose,r=t.title;return i.a.createElement(fr,null,i.a.createElement("div",{className:"header"},r,i.a.createElement(ot.a,{iconProps:{iconName:"Cancel"},title:"Upload",ariaLabel:"upload data",onClick:e})),i.a.createElement("div",{className:"container"},t.children))},dr=r(106);function vr(){var t=Object(Rt.a)(["\n    overflow-x: auto;\n    table {\n        box-sizing: content-box;\n        font-family: Lato, 'Helvetica Neue', Arial, Helvetica, sans-serif;\n        border-collapse: collapse;\n        font-size: 12px;\n        thead {\n            th {\n                text-align: left;\n                border: 1px solid #f5f5f5;\n                padding: 8px;\n                margin: 2px;\n            }\n            th.number {\n                border-top: 3px solid #5cdbd3;\n            }\n            th.text {\n                border-top: 3px solid #69c0ff;\n            }\n        }\n        tbody {\n            td {\n                border: 1px solid #f5f5f5;\n                padding: 0px 8px;\n            }\n            td.number {\n                text-align: right;\n            }\n            td.text {\n                text-align: left;\n            }\n        }\n    }\n"]);return vr=function(){return t},t}var pr=Kt.c.div(vr()),mr=[{value:"dimension",label:"\u7ef4\u5ea6"},{value:"measure",label:"\u5ea6\u91cf"}];function gr(t){return"number"===t.type||"integer"===t.type?"number":"text"}function yr(t){return"dimension"===t.analyticType?"text":"number"}var br=function(t){var e=t.fields,r=t.dataSource,n=t.size,a=void 0===n?10:n,o=t.onFieldsUpdate;return i.a.createElement(pr,null,i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,e.map((function(t,r){return i.a.createElement("th",{key:t.key,className:yr(t)},i.a.createElement("b",null,t.key),"(",t.type,")",i.a.createElement("div",null,i.a.createElement(Oe.DropdownSelect,{kind:"line",value:t.analyticType,onChange:function(t){var n=Object(d.a)(e,(function(e){e[r].analyticType=t.target.value}));o(n)}},mr.map((function(t){return i.a.createElement("option",{key:t.value,value:t.value},t.label)})))))})))),i.a.createElement("tbody",null,r.slice(0,a).map((function(t,r){return i.a.createElement("tr",{key:r},e.map((function(e){return i.a.createElement("td",{key:e.key+r,className:gr(e)},t[e.key])})))})))))};Object(d.b)(!1);var wr={dataBase:[],currentDBIndex:0},Mr=i.a.createContext(null);function Er(){return Object(o.useContext)(Mr)}var xr=function(t){var e=Object(o.useState)(wr),r=Object(c.a)(e,2),n=r[0],a=r[1],u=Object(o.useCallback)((function(t){var e=Object(d.a)(n,t);a(e)}),[n]);return i.a.createElement(Mr.Provider,{value:[n,u]},t.children)};function Sr(){var t=Object(Rt.a)(["\n    overflow-x: auto;\n    table {\n        box-sizing: content-box;\n        font-family: Lato, 'Helvetica Neue', Arial, Helvetica, sans-serif;\n        border-collapse: collapse;\n        thead {\n            td {\n                text-align: left;\n            }\n        }\n        tbody {\n            td.number {\n                text-align: right;\n            }\n            td.text {\n                text-align: left;\n            }\n        }\n    }\n"]);return Sr=function(){return t},t}var kr=Kt.c.div(Sr());var Or=function(t){var e=t.dbIndex,r=t.onSubmit,n=Object(o.useRef)(null),a=Object(o.useState)([]),u=Object(c.a)(a,2),s=u[0],l=u[1],f=Object(o.useState)([]),h=Object(c.a)(f,2),d=h[0],v=h[1],p=Er(),m=Object(c.a)(p,2),g=(m[0],m[1]),y=Object(o.useState)("\u65b0\u6570\u636e\u96c6"),b=Object(c.a)(y,2),w=b[0],M=b[1],E=Object(o.useCallback)((function(t){v(t)}),[]),x=Object(o.useCallback)((function(){g((function(t){t.dataBase[e]={id:"test"+e,name:w,fields:d,dataSource:s}})),r&&r()}),[e,d,s,w]);return i.a.createElement(kr,null,i.a.createElement("input",{style:{display:"none"},type:"file",ref:n,onChange:function(t){var e=t.target.files;if(null!==e){var r=e[0];dr.a.csvReader({file:r,config:{type:"reservoirSampling",size:1/0},onLoading:function(){}}).then((function(t){var e=function(t){if(0===t.length)return{dataSource:[],fields:[]};var e=[],r=Object.keys(t[0]),n=new Tt.c.VIEngine;n.setDataSource(t).setFieldKeys(r).buildfieldsSummary();var a,o=n.fields,i=Object(Et.a)(t);try{for(i.s();!(a=i.n()).done;){var u,s=a.value,c={},l=Object(Et.a)(o);try{for(l.s();!(u=l.n()).done;){var f=u.value;"number"===f.dataType||"integer"===f.dataType?c[f.key]=Number(s[f.key]):c[f.key]=s[f.key]}}catch(h){l.e(h)}finally{l.f()}e.push(c)}}catch(h){i.e(h)}finally{i.f()}return{dataSource:e,fields:o.map((function(t){return{key:t.key,type:t.dataType,analyticType:t.analyticType}}))}}(t);console.log(e),l(e.dataSource.slice(0,-1)),v(e.fields)}))}}}),i.a.createElement("div",{style:{margin:"1em 0em"}},i.a.createElement(Oe.Button,{style:{marginRight:12},onClick:function(){n.current&&n.current.click()}},"\u4e0a\u4f20\u6570\u636e"),i.a.createElement(Oe.Button,{kind:"primary",disabled:0===s.length,onClick:function(){x()}},"\u786e\u8ba4")),i.a.createElement("div",{style:{margin:"1em 0em"}},i.a.createElement(Oe.TextField,{label:"\u6570\u636e\u96c6\u540d\u79f0",value:w,onChange:function(t){M(t.target.value)}})),i.a.createElement(br,{dataSource:s,fields:d,onFieldsUpdate:E}))},jr={fields:[],rows:[],columns:[],color:[],opacity:[],size:[]},_r=function(t){var e=t.dataSource,r=t.dimensions,n=t.measures,a=Er(),u=Object(c.a)(a,2),s=u[0],l=u[1],f=Object(o.useState)([]),d=Object(c.a)(f,2),v=d[0],p=d[1],m=Object(o.useState)(jr),g=Object(c.a)(m,2),y=g[0],b=g[1],w=Object(o.useState)(Ge[0].value),M=Object(c.a)(w,2),E=M[0],x=M[1],S=Object(o.useState)(!0),k=Object(c.a)(S,2),O=k[0],j=k[1],_=Object(o.useState)([0,0]),D=Object(c.a)(_,2),T=D[0],N=D[1],A=Object(o.useState)(!1),C=Object(c.a)(A,2),q=C[0],P=C[1],F=Object(o.useState)(!1),I=Object(c.a)(F,2),z=I[0],L=I[1],R=Object(o.useState)({}),B=Object(c.a)(R,2),G=B[0],U=B[1],K=Object(o.useState)(!1),V=Object(c.a)(K,2),Q=V[0],Y=V[1],H=Object(o.useState)(!1),X=Object(c.a)(H,2),W=X[0],J=X[1],Z=Object(o.useState)(0),$=Object(c.a)(Z,2),tt=$[0],et=$[1];Object(o.useEffect)((function(){var t=[];r.forEach((function(e){t.push({key:e,type:"D",analyticType:"dimension"})})),n.forEach((function(e){t.push({key:e,type:"D",analyticType:"measure"})})),l((function(r){r.dataBase=[{id:"default",name:"context dataset",dataSource:e,fields:t}]}))}),[e,r,n]),Object(o.useEffect)((function(){var t=[],e=s.dataBase[s.currentDBIndex];e&&(e.fields.forEach((function(e){t.push({id:e.key,name:e.key,type:"dimension"===e.analyticType?"D":"M",aggName:"measure"===e.analyticType?"sum":void 0})})),p(t))}),[s.currentDBIndex,s.dataBase]);var rt=Object(o.useMemo)((function(){return[].concat(Object(h.a)(y.rows),Object(h.a)(y.columns),Object(h.a)(y.color),Object(h.a)(y.opacity),Object(h.a)(y.size)).filter((function(t){return"D"===t.type}))}),[y]),nt=Object(o.useMemo)((function(){return[].concat(Object(h.a)(y.rows),Object(h.a)(y.columns),Object(h.a)(y.color),Object(h.a)(y.opacity),Object(h.a)(y.size)).filter((function(t){return"M"===t.type}))}),[y]);Object(o.useEffect)((function(){var t=s.dataBase[s.currentDBIndex];return t&&(J(!1),function(t){return er.apply(this,arguments)}({dataSource:t.dataSource,dimensions:t.fields.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key})),measures:t.fields.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))}).then((function(){J(!0)}))),function(){Ze.worker&&(Ze.worker.terminate(),Ze.worker=null)}}),[s.currentDBIndex,s.dataBase]);var ot=Object(o.useCallback)((function(){l((function(t){var e=t.dataBase.length;t.dataBase.push({id:"ds_"+e,name:"\u65b0\u6570\u636e\u6e90"+e,dataSource:[],fields:[]}),et(e)}))}),[]);return i.a.createElement("div",{className:"App"},i.a.createElement(ke,null,!W&&i.a.createElement(at.a,{description:"analyzing"}),i.a.createElement("label",{style:{fontSize:"12px",marginRight:"4px"}},"\u5f53\u524d\u6570\u636e\u96c6"),i.a.createElement(Oe.DropdownSelect,{value:s.dataBase[s.currentDBIndex]?s.dataBase[s.currentDBIndex].id:"empty",onChange:function(t){l((function(e){var r=e.dataBase.findIndex((function(e){return e.id===t.target.value}));e.currentDBIndex=r}))}},s.dataBase.map((function(t){return i.a.createElement("option",{value:t.id,key:t.id},t.name)}))),i.a.createElement(Oe.Button,{style:{marginLeft:"8px"},onClick:function(){ot(),Y(!0)}},"\u521b\u5efa\u6570\u636e\u96c6"),Q&&i.a.createElement(hr,{title:"\u521b\u5efa\u6570\u636e\u6e90",onClose:function(){Y(!1)}},i.a.createElement(Or,{dbIndex:tt,onSubmit:function(){Y(!1)}})),W&&i.a.createElement("span",{style:{margin:"1em"}},"iready")),i.a.createElement(ke,null,i.a.createElement(Ne,{onStateChange:function(t){b(t)},fields:v})),i.a.createElement(ke,null,i.a.createElement(Ke,{style:{display:"flex",flexWrap:"wrap",alignItems:"center"}},i.a.createElement("div",{className:"item"},i.a.createElement(Oe.Checkbox,{checked:O,onChange:function(t){j(t.target.checked)}},"\u805a\u5408\u5ea6\u91cf")),i.a.createElement("div",{className:"item"},i.a.createElement("label",null,"\u6807\u8bb0\u7c7b\u578b"),i.a.createElement(Oe.DropdownSelect,{onChange:function(t){x(t.target.value)}},Ge.map((function(t){return i.a.createElement("option",{key:t.value,value:t.value},t.label)})))))),s.dataBase[s.currentDBIndex]&&i.a.createElement(ke,null,z&&i.a.createElement(hr,{onClose:function(){L(!1)}},i.a.createElement(cr,{dataSource:s.dataBase[s.currentDBIndex].dataSource,fields:v,viewDs:rt,viewMs:nt,filters:G})),q&&i.a.createElement(Ye,{x:T[0],y:T[1]},i.a.createElement("div",{onClick:function(){P(!1),L(!0)}},"\u6df1\u5ea6\u89e3\u8bfb")),i.a.createElement(Be,{geomType:E,defaultAggregate:O,dataSource:s.dataBase[s.currentDBIndex].dataSource,rows:y.rows,columns:y.columns,color:y.color[0],opacity:y.opacity[0],size:y.size[0],onGeomClick:function(t,e){U(t),N([e.pageX,e.pageY]),P(!0)}})))},Dr=function(t){return i.a.createElement(xr,null,i.a.createElement(_r,t))},Tr=function(t){var e=Object(o.useRef)(null),r=t.x,n=t.y,a=t.dataSource,u=t.fieldType;return Object(o.useEffect)((function(){if(e.current){var t=[],o=!1;t="ordinal"===u&&a.some((function(t){return/(\[|\()-?([0-9.]+|Infinity),\s*([0-9.]+|Infinity)(\]|\))/.test(t.memberName)}))?a.map((function(t){o=!0;var e=Object(re.a)(/(\[|\()(\x2D?([\.0-9]+|Infinity)),[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*([\.0-9]+|Infinity)(\]|\))/,{left:2}).exec(t.memberName);return Object(g.a)(Object(g.a)({},t),{},{index:null===e?t.name:Number(e.groups.left)})})):a;var i=void 0;"nominal"===u?i="-y":"ordinal"===u&&o&&(i={field:"index"}),Object(Mt.a)(e.current,{background:"rgba(0,0,0,0)",data:{values:t},view:{stroke:null,fill:null},height:80,width:180,mark:["quantitative","temporal"].includes(u)?"line":"bar",encoding:{x:{field:r,title:null,axis:null,type:u,sort:i},y:{field:n,type:"quantitative",aggregate:"sum",title:null,axis:null}}},{actions:!1})}}),[r,n,a,u]),i.a.createElement("div",{ref:e})};function Nr(){var t=Object(Rt.a)(["\n    .bottom-bar {\n        position: absolute;\n        height: 4px;\n        border-radius: 0px 0px 2px 2px;\n        left: 0px;\n        right: 0px;\n        top: 0px;\n        margin: 0px 1px;\n    }\n    .dim {\n        background-color: #1890ff;\n    }\n    .mea {\n        background-color: #13c2c2;\n    }\n    .header{\n        margin-top: 0px;\n        margin-bottom: 0px;\n    }\n"]);return Nr=function(){return t},t}var Ar=Kt.c.div(Nr()),Cr=[{key:"nominal",text:"nominal"},{key:"ordinal",text:"ordinal"},{key:"quantitative",text:"quantitative"},{key:"temporal",text:"temporal"}];var qr=function(t){var e=t.name,r=t.code,n=t.type,a=t.summary,u=t.onChangeBIType,s=function(){var t=f.a.get("meta.dimension"),e=f.a.get("meta.measure");return Object(o.useMemo)((function(){return[{key:"dimension",text:t},{key:"measure",text:e}]}),[t,e])}();return i.a.createElement(Ar,null,i.a.createElement("h3",{className:"header"},e),a&&i.a.createElement(Oe.DropdownSelect,{"aria-readonly":!0,kind:"text",disabled:!0,defaultValue:a.type},Cr.map((function(t){return i.a.createElement("option",{key:t.key,value:t.key},t.text)}))),i.a.createElement(Oe.DropdownSelect,{kind:"text",value:n,onChange:function(t){u&&u(t.target.value,r)}},s.map((function(t){return i.a.createElement("option",{key:t.key,value:t.key},t.text)}))),a&&i.a.createElement(Tr,{dataSource:a.distribution,x:"memberName",y:"count",fieldType:a.type}),i.a.createElement("div",{className:"bottom-bar ".concat("dimension"===n?"dim":"mea")}))};function Pr(){var t=Object(Rt.a)(["\n    --header-bgcolor: #fafafa;\n    --bgcolor: rgba(0, 0, 0, 0);\n    ."," {\n        position: relative;\n    }\n"]);return Pr=function(){return t},t}var Fr=Object(Kt.c)(ae.a)(Pr(),ae.b.tableHeaderCell),Ir={height:600,overflow:"auto"},zr=function(t){var e=t.dataSource,r=t.fields,n=t.onChangeBIType,a=Object(o.useState)([]),u=Object(c.a)(a,2),s=u[0],l=u[1];Object(o.useEffect)((function(){_(e,r.map((function(t){return t.name}))).then((function(t){l(t)}))}),[e,r]);var h=f.a.get("meta.dimension"),d=Object(o.useMemo)((function(){return r.map((function(t){var e=s.find((function(e){return e.fieldName===t.name}))||null;return{name:t.name,code:t.name,width:220,title:i.a.createElement(qr,{name:t.name,code:t.name,type:t.type,summary:e,onChangeBIType:n})}}))}),[r,s,n,h]),v=Object(o.useCallback)((function(t){return{style:{backgroundColor:r.some((function(e){return null===t[e.name]||void 0===t[e.name]||""===t[e.name]}))?"#ffd8bf":"rgba(0,0,0,0)"}}}),[r]);return i.a.createElement("div",null,i.a.createElement(Fr,{useVirtual:!0,getRowProps:v,style:Ir,dataSource:e,columns:d}))},Lr=function(t){var e=t.show,r=void 0!==e&&e,n=t.onUpdateConfig,a=t.onClose,u=Object(o.useState)([]),s=Object(c.a)(u,2),l=s[0],h=s[1];Object(o.useEffect)((function(){h(t.fields)}),[t.fields]);return i.a.createElement(ft.a,{isOpen:r,type:ht.a.smallFixedFar,onDismiss:a,headerText:f.a.get("meta.title"),closeButtonAriaLabel:"Close",onRenderFooterContent:function(){return i.a.createElement("div",null,i.a.createElement(lt.a,{onClick:function(){n(l),a()}},f.a.get("meta.save")))}},i.a.createElement("div",null,l.map((function(t){return i.a.createElement(ve.a,{key:t.name,checked:"dimension"===t.type,label:t.name,onText:f.a.get("meta.dimension"),offText:f.a.get("meta.measure"),onChange:function(e,r){!function(t,e){h((function(r){return r.map((function(r){return t.name===r.name?{name:t.name,type:e}:r}))}))}(t,r?"dimension":"measure")}})}))))},Rr=Tt.a.dropNull,Br=Tt.a.simpleClean,Gr=Tt.a.useMode;function Ur(t,e,r,n){switch(n){case"dropNull":return Rr(t,e,r);case"useMode":return Gr(t,e.concat(r));case"simpleClean":return Br(t,e,r);case"none":default:return function(t){return Object(h.a)(t)}(t)}}var Kr=[{key:"dropNull",text:"drop null records"},{key:"useMode",text:"replace null with mode"},{key:"simpleClean",text:"simple cleaning"},{key:"none",text:"none"}];function Vr(t,e,r){var n=Object(o.useMemo)((function(){return e.filter((function(t){return"dimension"===t.type})).map((function(t){return t.name}))}),[e]),i=Object(o.useMemo)((function(){return e.filter((function(t){return"measure"===t.type})).map((function(t){return t.name}))}),[e]),u=Object(o.useMemo)((function(){return t.map((function(t){var r={};return e.forEach((function(e){r[e.name]="dimension"===e.type?t[e.name]:a.transNumber(t[e.name])})),r}))}),[t,e]),s=Object(o.useMemo)((function(){return Ur(function(t){return JSON.parse(JSON.stringify(t))}(u),n,i,r)}),[n,i,u,r]);return[u,s]}var Qr,Yr=r(498),Hr=r(494),Xr=r(489);!function(t){t.FILE="file",t.RESTFUL="restful",t.MYSQL="mysql",t.DEMO="demo"}(Qr||(Qr={}));var Wr,Jr={CARS:"https://chspace.oss-cn-hongkong.aliyuncs.com/api/cars-service.json",STUDENTS:"https://chspace.oss-cn-hongkong.aliyuncs.com/api/students-service.json"},Zr="__rath_index_col_key__";!function(t){t.none="none",t.reservoir="reservoir"}(Wr||(Wr={}));function $r(t){return t.forEach((function(t,e){t.__rath_index_col_key__=e})),t}function tn(t,e){var r=t.map((function(t,e){var r,n=Object(g.a)({},t);return r=n.name,/^[\x00-\x7F]*$/.test(r)||(n.name="".concat(t.name,"-cid-").concat(e)),n})),n=e.map((function(e){for(var n={},a=0;a<r.length;a++)n[r[a].name]=e[t[a].name];return n}));return{fields:r,dataSource:n}}var en=function(t){console.log("data loading",Math.round(100*t)+"%")};function rn(t,e){return nn.apply(this,arguments)}function nn(){return(nn=Object(m.a)(p.a.mark((function t(e,r){var a,o,i,u,s,c=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=c.length>2&&void 0!==c[2]?c[2]:500,o=[],i=[],"text/csv"!==e.type&&"application/vnd.ms-excel"!==e.type){t.next=18;break}return t.next=6,n.csvLoader(e);case 6:if(i=t.sent,r!==Wr.reservoir){t.next=13;break}return t.next=10,dr.a.csvReader({file:e,config:{type:"reservoirSampling",size:a},onLoading:en});case 10:i=t.sent,t.next=16;break;case 13:return t.next=15,dr.a.csvReader({file:e,onLoading:en});case 15:i=t.sent;case 16:t.next=26;break;case 18:if("application/json"!==e.type){t.next=25;break}return t.next=21,n.jsonLoader(e);case 21:i=t.sent,r===Wr.reservoir&&(i=Tt.d.reservoirSampling(i,a)),t.next=26;break;case 25:throw new Error("unsupported file type=".concat(e.type," "));case 26:return i=$r(i=Tt.a.dropNullColumn(i,Object.keys(i[0])).dataSource),u=Object.keys(i[0]),o=u.map((function(t,e){return t===Zr?{name:t,type:"dimension"}:{name:t,type:i.every((function(e){return!isNaN(e[t])||void 0===e[t]}))?"measure":"dimension"}})),s=tn(o,i),t.abrupt("return",s);case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var an="https://1423108296428281.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/Rath/dataSourceLogger/";function on(t){return un.apply(this,arguments)}function un(){return(un=Object(m.a)(p.a.mark((function t(e){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,fetch(an,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,console.log(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.error(t.t0);case 14:t.next=17;break;case 16:console.log("Current Env: ".concat("production","."),e);case 17:case"end":return t.stop()}}),t,null,[[1,11]])})))).apply(this,arguments)}var sn=function(t){var e=t.onClose,r=t.onDataLoaded,n=function(){var t=f.a.get("dataSource.sampling.".concat(Wr.none)),e=f.a.get("dataSource.sampling.".concat(Wr.reservoir));return Object(o.useMemo)((function(){return[{key:Wr.none,text:t},{key:Wr.reservoir,text:e}]}),[t,e])}(),a=Object(Xr.a)("labelElement"),u=Object(o.useState)(Wr.none),s=Object(c.a)(u,2),l=s[0],h=s[1],d=Object(o.useState)(500),v=Object(c.a)(d,2),g=v[0],y=v[1],b=Object(o.useRef)(null);function w(){return(w=Object(m.a)(p.a.mark((function t(){var n,a,o,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===b.current||null===b.current.files){t.next=10;break}return n=b.current.files[0],t.next=4,rn(n,l,g);case 4:a=t.sent,o=a.fields,i=a.dataSource,on({dataType:"File",fields:o,dataSource:i.slice(0,10),size:i.length}),r(o,i),e();case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return i.a.createElement("div",null,i.a.createElement("div",{className:"vi-callout-content"},i.a.createElement("p",{className:"vi-callout-subTex"},f.a.get("dataSource.upload.fileTypes"))),i.a.createElement("div",null,i.a.createElement(dt.a,{id:a,required:!0},f.a.get("dataSource.upload.sampling")),i.a.createElement(Hr.a,{defaultSelectedKey:"B",options:n,selectedKey:l,onChange:function(t,e){e&&h(e.key)},ariaLabelledBy:a}),l===Wr.reservoir&&i.a.createElement(it.a,{label:f.a.get("dataSource.upload.percentSize"),min:0,step:1,value:g.toString(),onValidate:function(t){y(Number(t))},onIncrement:function(){y((function(t){return t+1}))},onDecrement:function(){y((function(t){return Math.max(t-1,0)}))}})),i.a.createElement("div",{className:"vi-callout-actions"},i.a.createElement("input",{type:"file",ref:b,multiple:!0,accept:"*",style:{display:"none"},onChange:function(){return w.apply(this,arguments)}}),i.a.createElement(st.a,{text:f.a.get("dataSource.upload.upload"),iconProps:{iconName:"Upload"},onClick:function(){b.current&&b.current.click()}})))};function cn(){return(cn=Object(m.a)(p.a.mark((function t(){var e,r,n,a,o,i,u=arguments;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:"CARS",r=Jr[e],t.prev=2,t.next=5,fetch(r);case 5:return n=t.sent,t.next=8,n.json();case 8:return a=t.sent,o=a.dataSource,i=a.fields,t.abrupt("return",{dataSource:o,fields:i});case 14:return t.prev=14,t.t0=t.catch(2),console.error(t.t0),t.abrupt("return",{dataSource:[],fields:[]});case 18:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}var ln=function(t){var e=t.onDataLoaded,r=t.onClose,n=Object(o.useMemo)((function(){return[{key:"CARS",text:"Cars"},{key:"STUDENTS",text:"students"}]}),[]),a=Object(o.useState)("CARS"),u=Object(c.a)(a,2),s=u[0],l=u[1],h=Object(o.useCallback)((function(){(function(){return cn.apply(this,arguments)})(s).then((function(t){var r=t.dataSource,n=t.fields;e(n,r),on({dataType:"Demo",name:s,fields:n,dataSource:[],size:r.length})})),r()}),[s,e,r]),d=Object(Xr.a)("demo-ds");return i.a.createElement("div",null,i.a.createElement(dt.a,{id:d},f.a.get("dataSource.importData.demo.available")),i.a.createElement(Hr.a,{options:n,selectedKey:s,onChange:function(t,e){e&&l(e.key)}}),i.a.createElement("div",{className:"vi-callout-actions"},i.a.createElement(st.a,{text:"load",onClick:h})))},fn=function(t){var e=t.show,r=t.onClose,n=t.onDataLoaded,a=Object(o.useState)(Qr.FILE),u=Object(c.a)(a,2),s=u[0],l=u[1],h=function(){var t=f.a.get("dataSource.importData.type.".concat(Qr.FILE)),e=f.a.get("dataSource.importData.type.".concat(Qr.RESTFUL)),r=f.a.get("dataSource.importData.type.".concat(Qr.MYSQL)),n=f.a.get("dataSource.importData.type.".concat(Qr.DEMO));return Object(o.useMemo)((function(){return[{key:Qr.FILE,text:t,iconProps:{iconName:"ExcelDocument"}},{key:Qr.DEMO,text:n,iconProps:{iconName:"FileTemplate"}},{key:Qr.RESTFUL,text:e,iconProps:{iconName:"Cloud"},disabled:!0},{key:Qr.MYSQL,text:r,iconProps:{iconName:"LinkedDatabase"},disabled:!0}]}),[t,e,r,n])}(),d=Object(Xr.a)("dataSourceType");return i.a.createElement(Yr.a,{containerClassName:"vi-callout",onDismiss:r,isOpen:e},i.a.createElement("div",{className:"vi-callout-header"},i.a.createElement("span",{className:"vi-callout-title"},f.a.get("dataSource.upload.title")),i.a.createElement(ot.a,{className:"vi-callout-close-icon",iconProps:{iconName:"Cancel"},onClick:r})),i.a.createElement("div",{className:"vi-callout-inner"},i.a.createElement(Hr.a,{options:h,selectedKey:s,onChange:function(t,e){e&&l(e.key)},ariaLabelledBy:d}),s===Qr.FILE&&i.a.createElement(sn,{onClose:r,onDataLoaded:n}),s===Qr.DEMO&&i.a.createElement(ln,{onClose:r,onDataLoaded:n})))},hn=function(t){var e=H(),r=Object(c.a)(e,3),n=r[0],a=r[1],u=r[2],s=rt({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1}}),l=Object(c.a)(s,2),h=l[0],d=l[1],v=Object(o.useState)("dropNull"),p=Object(c.a)(v,2),m=p[0],g=p[1],y=Object(o.useRef)(null),b=Vr(n.rawData,n.fields,m),w=Object(c.a)(b,2),M=w[0],E=w[1],x=Object(o.useMemo)((function(){return Kr.map((function(t){return{key:t.key,text:f.a.get("dataSource.methods.".concat(t.key))}}))}),[n.lang]),S=Object(o.useCallback)((function(t,e){var r=0===e.length?lt.a:st.a;return i.a.createElement(r,{style:{marginLeft:"10px"},iconProps:{iconName:"ExcelDocument"},text:t,onClick:function(){d((function(t){t.show.dataConfig=!0}))}})}),[]),k=Object(o.useCallback)((function(t,e){a((function(r){var n=r.fields.find((function(t){return t.name===e}));n&&(n.type=t)}))}),[]);return Object(o.useEffect)((function(){M&&0===M.length&&d((function(t){t.show.dataConfig=!0}))}),[]),i.a.createElement("div",{className:"content-container"},i.a.createElement(Lr,{fields:n.fields,show:h.show.fieldConfig,onUpdateConfig:function(t){a((function(e){e.fields=t}))},onClose:function(){d((function(t){t.show.fieldConfig=!1}))}}),i.a.createElement("div",{className:"card"},i.a.createElement(ut.a,{horizontal:!0},i.a.createElement(lt.a,{disabled:0===M.length,iconProps:{iconName:"Financial"},text:f.a.get("dataSource.extractInsight"),onClick:function(){u("extractInsights",{dataSource:E,fields:n.fields}),t.onExtractInsights()}}),S(f.a.get("dataSource.importData.buttonName"),M),i.a.createElement("div",{ref:y},i.a.createElement(ot.a,{iconProps:{iconName:"ExcelDocument"},title:"Upload",ariaLabel:"upload data",onClick:function(){d((function(t){t.show.dataConfig=!0}))}})),i.a.createElement(fn,{show:h.show.dataConfig,onClose:function(){d((function(t){t.show.dataConfig=!1}))},onDataLoaded:function(t,e){a((function(r){r.fields=t,r.rawData=e}))}}),i.a.createElement(ot.a,{iconProps:{iconName:"Settings"},title:"Field Setting",ariaLabel:"field setting",onClick:function(){d((function(t){t.show.fieldConfig=!0}))}})),i.a.createElement("div",{style:{margin:"20px 0px"}},i.a.createElement(vt.a,{styles:{root:{maxWidth:"180px"}},selectedKey:m,label:f.a.get("dataSource.cleanMethod"),allowFreeform:!0,autoComplete:"on",options:x,onChange:function(t,e){e&&g(e.key)}})),i.a.createElement("p",{style:{fontSize:12,fontWeight:400,color:"#595959"}},f.a.get("dataSource.tip")),i.a.createElement("i",{style:{fontSize:12,fontWeight:300,color:"#595959"}},f.a.get("dataSource.recordCount",{count:E.length})),i.a.createElement(zr,{fields:n.fields,dataSource:E,onChangeBIType:k})))},dn=r(510),vn=r(242),pn=r.n(vn);function mn(){var t=Object(Rt.a)(["\n  display: inline-block;\n  padding: 1rem;\n  border: 1px solid #f5f5f5;\n  margin: 1rem;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB',\n  'Microsoft YaHei', 'Helvetica Neue', Helvetica, Arial, sans-serif, 'Apple Color Emoji',\n  'Segoe UI Emoji', 'Segoe UI Symbol';\n  .indicator-card.header {\n    color: #8c8c8c;\n    margin-top: 0px;\n    margin-bottom: 0px;\n    font-size: 20px;\n    line-height: 28px;\n    font-weight: 400;\n  }\n  .indicator-card.content {\n    color: #0078d4;\n    font-size: 56px;\n    line-height: 64px;\n    font-weight: 400;\n    margin: 0px;\n  }\n"]);return mn=function(){return t},t}var gn=Kt.c.div(mn()),yn=function(t){var e=t.dataSource,r=void 0===e?[]:e,n=t.measures,a=void 0===n?[]:n,u=t.operator,s=void 0===u?"sum":u,c=Object(o.useMemo)((function(){if(0===a.length||0===r.length)return"-";var t=0;try{t=pn.a[s](r.map((function(t){return t[a[0]]})))}catch(e){console.log("operator does not exist or not in vega/datalib.")}return Math.abs(t-Math.round(t))>1e-5&&(t=Number(t.toFixed(2))),function(t){var e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}(t)}),[r,a,s]);return i.a.createElement(gn,null,i.a.createElement("h4",{className:"indicator-card header"},a[0]," ",s&&"(".concat(s,")")),i.a.createElement("h1",{className:"indicator-card content"},c))},bn=function(t){var e=t.spec,r=t.dataSource,n=t.signalHandler,a=void 0===n?{}:n,u=Object(o.useRef)(null),s=Object(o.useState)(),l=Object(c.a)(s,2),f=l[0],h=l[1];return Object(o.useEffect)((function(){u.current&&Object(Mt.a)(u.current,e).then((function(t){h(t.view)}))}),[e]),Object(o.useEffect)((function(){if(f&&a)for(var t in a)f.addSignalListener("sl",a[t]);return function(){if(f&&a)for(var t in a)f.removeSignalListener("sl",a[t])}}),[f,a]),Object(o.useEffect)((function(){f&&f.change("dataSource",Mt.b.changeset().remove((function(){return!0})).insert(r)),f&&f.resize(),f&&f.runAsync()}),[f,r]),i.a.createElement("div",{ref:u})},wn="indicator",Mn=function(t){var e=t.dashBoard,r=void 0===e?[]:e,n=t.dataSource,a=void 0===n?[]:n,u=t.dimScores,s=void 0===u?[]:u,l=rt({}),f=Object(c.a)(l,2),d=f[0],v=f[1],p=Object(o.useState)([]),m=Object(c.a)(p,2),g=m[0],y=m[1];Object(o.useEffect)((function(){y(r.map((function(){return!1})))}),[r]);var b=Object(o.useMemo)((function(){return r&&a&&s?r.map((function(t){var e=t.dimensions,r=t.measures,n=t.type,o=s.filter((function(t){return e.includes(t[0])||r.includes(t[0])})),i=Object(Tt.g)(o,a,e,r).schema;return i.position=i.position||[],i.color=i.color||[],i.opacity=i.opacity||[],i.size=i.size||[],i.shape=i.shape||[],i.geomType=i.geomType||[],i.highFacets=i.highFacets||[],i.facets=i.facets||[],{dimensions:e,measures:r,type:n,schema:i}})):[]}),[r,a,s]),w=Object(o.useMemo)((function(){return s.map((function(t){return t[3]}))}),[s]),M=Object(o.useMemo)((function(){return b.map((function(t,e){var r,n=t.dimensions,a=t.measures,o=t.schema,i=t.type,u=[],s=Object(Et.a)(n);try{var c=function(){var t=r.value,e=w.find((function(e){return e.name===t}));u.push({name:t,semanticType:e?e.type:"nominal",type:"dimension"})};for(s.s();!(r=s.n()).done;)c()}catch(v){s.e(v)}finally{s.f()}var l,f=Object(Et.a)(a);try{var h=function(){var t=l.value,e=w.find((function(e){return e.name===t}));u.push({name:t,semanticType:e?e.type:"nominal",type:"measure"})};for(f.s();!(l=f.n()).done;)h()}catch(v){f.e(v)}finally{f.f()}if("target"===i&&1===a.length)return{specIndex:e,type:wn,measures:a,operator:"sum"};var d={};return"target"===i&&(d=Ot(o,u)),"feature"===i&&(d=kt(o,u)),d.specIndex=e,d}))}),[b,w]),E=Object(o.useMemo)((function(){return r.map((function(t,e){return{sl:function(t,r){g[e]&&v((function(t){if(0===Object.keys(r).length)for(var e in t)t[e]=[];else for(var n in r)t[n]=r[n]}))}}}))}),[r,g,v]),x=Object(o.useMemo)((function(){for(var t=[],e=Object.keys(d).map((function(t){return{fieldName:t,filter:d[t],isRange:2===d[t].length&&"number"===typeof d[t][0]&&"number"===typeof d[t][1]&&d[t][0]<d[t][1]}})),n=a.filter((function(t){return e.every((function(e){return 0===e.filter.length||(e.isRange?t[e.fieldName]>=e.filter[0]&&t[e.fieldName]<=e.filter[1]:e.filter.includes(t[e.fieldName]))}))})),o=0;o<r.length;o++)g[o]?t.push(a):t.push(n);return t}),[r,d,a,g]);return i.a.createElement("div",null,i.a.createElement("div",null,M.filter((function(t){return t.type===wn})).map((function(t,e){return i.a.createElement(yn,{key:"ds-ind-chart-".concat(e),dataSource:x[t.specIndex],measures:t.measures})}))),i.a.createElement("div",null,M.filter((function(t){return t.type!==wn})).map((function(t,e){return i.a.createElement("div",{key:"ds-chart-".concat(e),style:{display:"inline-block",padding:"4px",margin:"2px",height:"380px",overflowY:"auto"}},i.a.createElement("div",{style:{float:"left",minWidth:"300px",minHeight:"300px"}},i.a.createElement(bn,{dataSource:x[t.specIndex],spec:t,signalHandler:g[t.specIndex]&&E[t.specIndex]})),i.a.createElement("div",{style:{float:"left"}},i.a.createElement(ot.a,{title:"use as filter",ariaLabel:"use as filter",iconProps:{iconName:g[t.specIndex]?"FilterSolid":"Filter"},onClick:function(){y((function(e){var r=Object(h.a)(e);return r[t.specIndex]=!r[t.specIndex],r[t.specIndex]||v((function(t){for(var e in t)t[e]=[]})),r}))}})))}))))},En=function(t){var e=H(),r=Object(c.a)(e,4),n=r[0],a=r[2],u=r[3],s=Object(o.useState)(0),l=Object(c.a)(s,2),h=l[0],d=l[1],v=n.subspaceList,p=n.cookedDataSource,m=n.cookedDimensions,g=n.cookedMeasures,y=n.dashBoardList,b=u.dimScores;return i.a.createElement("div",{className:"content-container"},i.a.createElement("div",{className:"card"},i.a.createElement(lt.a,{text:f.a.get("dashBoard.generateButton"),disabled:0===v.length,iconProps:{iconName:"AreaChart"},onClick:function(){a("getDashBoard",{dataSource:p,dimensions:m,measures:g})}}),n.loading.dashBoard&&i.a.createElement(at.a,{description:"generating dashboard"}),i.a.createElement(dn.a,null,f.a.get("dashBoard.pageNo",{current:h+1,total:y.length})),i.a.createElement(ut.a,{horizontal:!0,tokens:{childrenGap:20}},i.a.createElement(st.a,{text:f.a.get("dashBoard.last"),onClick:function(){d((function(t){return(t+y.length-1)%y.length}))},allowDisabledFocus:!0}),i.a.createElement(st.a,{text:f.a.get("dashBoard.next"),onClick:function(){d((function(t){return(t+1)%y.length}))},allowDisabledFocus:!0})),i.a.createElement("p",{className:"state-description"},f.a.get("dashBoard.desc")),i.a.createElement("div",{style:{overflowX:"auto",margin:"1rem",border:"1px solid #e8e8e8"}},y[h]&&y[h].length>0&&i.a.createElement(Mn,{dataSource:p,dashBoard:y[h],dimScores:b}))))},xn=r(56),Sn=function(t){var e=t.x,r=t.y,n=t.threshold,a=t.dataSource,u=void 0===a?[]:a,s=Object(o.useMemo)((function(){return{width:180,height:200,data:{name:"dataSource"},transform:[{calculate:n.toString(),as:"threshold"}],layer:[{mark:"point",encoding:{x:{field:e,type:"nominal"},y:{field:r,type:"quantitative",scale:{domain:[0,1]}}}},{mark:"rule",encoding:{y:{field:"threshold",type:"quantitative"},color:{value:"red"}}}]}}),[e,r,n]);return i.a.createElement("div",null,i.a.createElement(bn,{spec:s,dataSource:u}))},kn=r(53);Object(kn.scheme)("threshold",["#1890ff","#ffccc7"]);var On,jn=function(t){var e=t.keyField,r=t.valueField,n=t.dataSource,a=void 0===n?[]:n,u=t.threshold,s=Object(o.useRef)(null),c=Object(o.useMemo)((function(){var t=a.map((function(t){return{key:t[e],value:Math.round(1e3*t[r])/1e3,category:0}}));Object.values(xn.a).forEach((function(e){t.find((function(t){return t.key===e}))||t.push({key:e,value:0,category:0})}));var n=t.map((function(t){return{key:t.key,value:u,category:1}}));return t.concat(n)}),[e,r,a,u]);return Object(o.useEffect)((function(){s.current&&Object(Mt.a)(s.current,{width:280,height:280,padding:50,autosize:{type:"none",contains:"padding"},signals:[{name:"radius",update:"width / 2"}],data:[{name:"table",values:c},{name:"keys",source:"table",transform:[{type:"aggregate",groupby:["key"]}]}],scales:[{name:"angular",type:"point",range:{signal:"[-PI, PI]"},padding:.5,domain:{data:"table",field:"key"}},{name:"radial",type:"linear",range:{signal:"[0, radius]"},zero:!0,nice:!1,domain:[0,1],domainMin:0},{name:"color",type:"ordinal",domain:{data:"table",field:"category"},range:{scheme:"threshold"}}],encode:{enter:{x:{signal:"radius"},y:{signal:"radius"}}},marks:[{type:"group",name:"categories",zindex:1,from:{facet:{data:"table",name:"facet",groupby:["category"]}},marks:[{type:"line",name:"category-line",from:{data:"facet"},encode:{enter:{interpolate:{value:"linear-closed"},x:{signal:"scale('radial', datum.value) * cos(scale('angular', datum.key))"},y:{signal:"scale('radial', datum.value) * sin(scale('angular', datum.key))"},stroke:{scale:"color",field:"category"},strokeWidth:{value:1},fill:{scale:"color",field:"category"},fillOpacity:{value:.1}}}},{type:"text",name:"value-text",from:{data:"category-line"},encode:{enter:{x:{signal:"datum.x"},y:{signal:"datum.y"},text:{signal:"datum.datum.value"},align:{value:"center"},baseline:{value:"middle"},fill:{value:"#262626"}}}}]},{type:"rule",name:"radial-grid",from:{data:"keys"},zindex:0,encode:{enter:{x:{value:0},y:{value:0},x2:{signal:"radius * cos(scale('angular', datum.key))"},y2:{signal:"radius * sin(scale('angular', datum.key))"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}},{type:"text",name:"key-label",from:{data:"keys"},zindex:1,encode:{enter:{x:{signal:"(radius + 5) * cos(scale('angular', datum.key))"},y:{signal:"(radius + 5) * sin(scale('angular', datum.key))"},text:{field:"key"},align:[{test:"abs(scale('angular', datum.key)) > PI / 2",value:"right"},{value:"left"}],baseline:[{test:"scale('angular', datum.key) > 0",value:"top"},{test:"scale('angular', datum.key) == 0",value:"middle"},{value:"bottom"}],fill:{value:"black"},fontWeight:{value:"bold"}}}},{type:"line",name:"outer-line",from:{data:"radial-grid"},encode:{enter:{interpolate:{value:"linear-closed"},x:{field:"x2"},y:{field:"y2"},stroke:{value:"lightgray"},strokeWidth:{value:1}}}}]},{actions:!1})}),[c]),i.a.createElement("div",{ref:s})};function _n(){var t=Object(Rt.a)(["\n  display: flex;\n  div.left{\n    flex-basis: 300px;\n    flex-grow: 1;\n    border-right: 1px solid #f0f0f0;\n  }\n  div.right{\n    margin-left: 1em;\n    flex-grow: 8;\n  }\n  padding: 1em 0em;\n"]);return _n=function(){return t},t}function Dn(){var t=Object(Rt.a)(["\n  display: inline-block;\n  padding: 0.1em 0.3em;\n  margin: 0.2em;\n  border-radius: 3px;\n  color: #fff;\n  font-size: 12px;\n  background-color: ",";\n"]);return Dn=function(){return t},t}var Tn=Kt.c.div(Dn(),(function(t){return t.color})),Nn=Kt.c.div(_n()),An=(On={},Object(me.a)(On,xn.a.outlier,"#cf1322"),Object(me.a)(On,xn.a.trend,"#7cb305"),Object(me.a)(On,"general","#08979c"),Object(me.a)(On,xn.a.cluster,"#c41d7f"),On);function Cn(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var qn=function(t){var e=Object(o.useState)([]),r=Object(c.a)(e,2),n=r[0],a=r[1],u=Object(o.useState)(.6),s=Object(c.a)(u,2),l=s[0],h=s[1],d=Object(o.useState)(!1),v=Object(c.a)(d,2),p=v[0],m=v[1],y=Object(o.useState)({aggregator:"sum",defaultAggregated:!0,defaultStack:!0}),b=Object(c.a)(y,2),w=b[0],M=b[1],E=rt({show:{configPanel:!1}}),x=Object(c.a)(E,2),S=x[0],k=x[1],O=H(),j=Object(c.a)(O,4),_=j[0],D=(j[2],j[3]),T=Object(o.useState)(0),N=Object(c.a)(T,2),A=N[0],C=N[1],q=_.cookedDataSource,P=_.cookedDimensions,F=_.cookedMeasures,I=_.topK,L=D.dimScores,R=Object(o.useMemo)((function(){return n.filter((function(t){return t.significance>=l}))}),[n,l]),B=Object(o.useMemo)((function(){if(0===R.length)return null;var t=R[A],e=t.dimensions,r=t.measures,n=L.filter((function(t){return e.includes(t[0])||r.includes(t[0])}));return{schema:Object(Tt.g)(n,q,e,r).schema,fieldFeatures:n.map((function(t){return t[3]})),dimensions:e,measures:r}}),[R,A,q]),G=Object(o.useMemo)((function(){if(null!==B){var t=B.dimensions,e=B.measures;return n.filter((function(r){return!(!Cn(t,r.dimensions)||!Cn(e,r.measures))}))}return[]}),[n,B]);return Object(o.useEffect)((function(){if(null!==B){var t=B.schema;t.geomType&&(t.geomType.includes("point")||t.geomType.includes("density"))?M((function(t){return Object(g.a)(Object(g.a)({},t),{},{defaultAggregated:!1})})):M((function(t){return Object(g.a)(Object(g.a)({},t),{},{defaultAggregated:!0})}))}}),[B]),i.a.createElement("div",{className:"content-container"},i.a.createElement(yt,{show:S.show.configPanel,config:w,onUpdateConfig:function(t){M(t),k((function(t){t.show.configPanel=!1}))},onClose:function(){k((function(t){t.show.configPanel=!1}))}}),q.length>0&&i.a.createElement("div",{className:"card"},i.a.createElement(lt.a,{text:f.a.get("explainer.insightButton"),onClick:function(){m(!0),function(t,e,r){return z.apply(this,arguments)}(q,P.slice(0,P.length*I.dimensionSize),F).then((function(t){a(t),m(!1)}))}}),p&&i.a.createElement(at.a,{description:"generating dashboard"}),i.a.createElement(Nn,null,i.a.createElement("div",{className:"left"},i.a.createElement(Sn,{x:"type",y:"significance",dataSource:n,threshold:l}),i.a.createElement(de.a,{label:f.a.get("explainer.sigThreshold"),max:100,value:100*l,valueFormat:function(t){return"".concat(t,"%")},showValue:!0,onChange:function(t){h(t/100),C(0)}}),i.a.createElement("p",{className:"state-description"},f.a.get("explainer.desc",{num:R.length,threshold:(100*l).toFixed(2)}))),i.a.createElement("div",{className:"right"},i.a.createElement("div",{style:{width:"280px"}},i.a.createElement(it.a,{label:f.a.get("explainer.currentIndex"),value:(A+1).toString(),min:0,max:R.length,step:1,iconProps:{iconName:"Search"},labelPosition:ct.a.start,onValidate:function(t){C((Number(t)-1)%R.length)},onIncrement:function(){C((A+1)%R.length)},onDecrement:function(){C((A-1+R.length)%R.length)},incrementButtonAriaLabel:"Increase value by 1",decrementButtonAriaLabel:"Decrease value by 1"})),i.a.createElement("div",{style:{display:"flex",padding:"1em"}},i.a.createElement(jn,{dataSource:G,threshold:l,keyField:"type",valueField:"significance"}),i.a.createElement("div",null,G.length>0&&G.filter((function(t){return t.significance>=l})).map((function(t,e){return i.a.createElement(Tn,{key:e,color:An[t.type]},f.a.get("explainer.insightTypes.".concat(t.type)))})),R[A]&&i.a.createElement("p",{className:"state-description"},f.a.get("explainer.explainTemp.viewDesc",{dimensions:R[A].dimensions.join(", "),measures:R[A].measures.join(", ")}),i.a.createElement("br",null),f.a.get("explainer.explainTemp.sig",{sig:(100*R[A].significance).toFixed(2),itype:R[A].type})))),i.a.createElement("div",null))),R.length>0&&null!==B&&i.a.createElement("div",null,i.a.createElement(Dt,{aggregator:w.aggregator,defaultAggregated:w.defaultAggregated,defaultStack:w.defaultStack,dimensions:B.dimensions,measures:B.measures,dataSource:q,schema:B.schema,fieldFeatures:B.fieldFeatures}))),0===q.length&&i.a.createElement("div",{className:"card"},i.a.createElement("p",null,f.a.get("explainer.notReadyTip"))))},Pn=function(t){return i.a.createElement("div",{className:"content-container"},i.a.createElement("div",{className:"card"},i.a.createElement("iframe",{title:"help",src:f.a.get("support.link"),style:{width:"100%",height:"800px"},frameBorder:"0"})))},Fn=r(247),In=r(244);function zn(){var t=Object(Rt.a)(["\n  display: flex;\n  align-items: center;\n"]);return zn=function(){return t},t}var Ln=K.map((function(t){return{key:t.value,text:t.name}})),Rn=Kt.c.div(zn()),Bn=function(t){var e,r=Object(o.useRef)(null),n=Object(o.useState)(!1),a=Object(c.a)(n,2),u=a[0],s=a[1],l=H(),h=Object(c.a)(l,2),d=h[0],v=h[1],p=(e=function(t){v((function(e){e.lang=t}))},Object(o.useCallback)((function(t){fetch("locales/".concat(t,".json"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(e){return f.a.init({currentLocale:t,locales:Object(me.a)({},t,e)})})).then((function(){e(t)}))}),[e]));return Object(o.useEffect)((function(){var t=f.a.determineLocale({urlLocaleKey:"lang",cookieLocaleKey:"lang"});K.find((function(e){return e.value===t}))||(t=Ln[0].key),p(t)}),[]),i.a.createElement(Rn,null,i.a.createElement(Oe.DropdownSelect,{value:d.lang,onChange:function(t){p(t.target.value)}},Ln.map((function(t){return i.a.createElement("option",{key:t.key,value:t.key},t.text)}))),i.a.createElement("div",{ref:r},i.a.createElement(Fn.a,{text:f.a.get("preference.title"),iconProps:{iconName:"PlayerSettings"},onClick:function(){s(!0)}})),u&&i.a.createElement(In.a,{target:r.current,directionalHint:qt.a.bottomLeftEdge,onDismiss:function(){s(!1)}},i.a.createElement("div",{style:{padding:"1rem"}},i.a.createElement(ve.a,{label:"Be Cool",checked:d.beCool,onText:"On",offText:"Off",onChange:function(t,e){v((function(t){t.beCool=e||!1}))}}),i.a.createElement(ve.a,{label:"Use Server",disabled:!0,checked:d.useServer,onText:"On",offText:"Off",onChange:function(t,e){v((function(t){t.useServer=e||!1}))}}))))};r(429),r(430);function Gn(){var t,e=H(),r=Object(c.a)(e,1)[0],n=Object(o.useMemo)((function(){return[f.a.get("menu.dataSource"),f.a.get("menu.noteBook"),f.a.get("menu.explore"),f.a.get("menu.dashBoard"),f.a.get("menu.explainer"),f.a.get("menu.editor"),f.a.get("menu.support")].map((function(t,e){return{title:t,itemKey:"pivot-"+(e+1)}}))}),[r.lang]),a=rt({show:{insightBoard:!1,fieldConfig:!1,configPanel:!1,dataConfig:!1},current:{pivotKey:n[0].itemKey}}),u=Object(c.a)(a,2),s=u[0],l=u[1];return i.a.createElement("div",null,i.a.createElement("div",{className:"header-bar"},i.a.createElement("div",{className:"ms-Grid-row",dir:"ltr"},i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md4 ms-lg1"},i.a.createElement("a",{href:"https://github.com/ObservedObserver/visual-insights",className:"logo"},i.a.createElement("img",{style:r.beCool?void 0:{width:"48px",marginTop:"4px"},src:(t=r.beCool,t?nt:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAADXCAYAAAAa/OR7AAAS80lEQVR4nO2dPWtdzRHHR+FpBMFEamKUMsUDj0AJxI0/QJp0EfgLSLjVF1AhRFCqkMKtkNoUBn2DPE7nxpWIAyGkVQwBCdSoCSjF9cqrvfsy+3pmd/8/MNa9uvecc6/O/HdmdnaWCAAAAAAAAAAAAAAAAAAAc7Hh+sXj42PL6wAD8/nVy8f9h23r7/75+R/P7sGb6+O1G29n72xD/73+GITZ2PB/Xd81ug4wAd/v/uAYOewC4H/PiqvNW6JLwohUEXgCIJuQIZfgavOWti4P156HVxAm5AlABEAyLYzfhk0QIAZuIAKgOEsZv4kuBhABNxABUBQpAqDz4S+/JyIIgQuIACiCROPXgVfgBiIAspBu/DoQAjshEfhJo+sAHdKTABAR7T9s093BBRHZ6w2AHYgAsNKbACh0IQA8IAJgjV4FQKGqE+EN8IAIgGf0LgAK3RuAGPiBCAAwOVg7AJ5o6QVcbd4+/bz/sG197Fp0xGH/YZs+ELwADvAEABG1E4CrzdtnBq+eM8kRAMXdwQWdnt9nH2d0IAKgCTbj9722BPsP23T08X2RY40MioVAdS/AZdTmIiA9mcfxBMwQwve63U9fpi0eQsUgYFFDCHwjum1ZMFG8EHAxm5fMBCoGQRBOY48Ydz6EEgAVr+txuy4O+vn0a0i5jlGmPmsAEQBeOEk8F66R/PT8nk7P7+nk7Qvr87bzmcdKEYPvd394hBisg3AAeEfJGpn7q81bevf6zdPjk7cvnhm/SubZzlPqemYKD5ATAF5iBYCoTKyujq2LARHR337869q5IQZ5QASAl6VEwHYeddzcQqFYRhcCJAZBEqWSgBz2H7YXEwAiJA0hAhMj7ebPEYBc0ZL2XbQE4cDEuG58n0G1HqVbM2JogM1HgJWUka9WLqDmOUAYeAKTwvUCahulqw7A91ru62POP/I+BvAEAJuWyUBFjDGnGD7nM21dHtLO3tnGrPscQgQmQb/BZ0iCcY2f6NuoP6MAEEEEpsI30i3hBZQg5brRlvw5EIHJGMELyDF8Ihi/CeoEJkC12HK14u7NC4jNDUAA/MATmITUXvxLVPCF4IrWyBn/ksATGBzlBWxdHiYZszQB4OJqWgLWgQhMwiihAAcIQBwQgUG5uT5+1Ntt9zqip4BtyOJATmAQUvrr9+QFhEqMe/os0oAnMAGpI6Mk70Fdi+uaJF1rb8ATGAQz8527845Eo9KvKbRL0d3BBXIDTOAJDMjoW2+FvAIiJAdjgAgMhk0AJI7qpTFzAkgO8oEIDM4sxjCD0NUCIjAwdwcXzQqEJGTnzeueRQBzQWKwY3yxf6oAxGDbmMSctvNN47muL6VUWb1H3+YceQEeEIEBaSEARPTM4BQ5OxalvN68Ft/nnrVpSAiEAx2iqgFtN3QrAVCknqvEtmKhYyIc4AERGIjWAqDQ9w3g4ttctORngBCEQaPRjiidA6ixw1DKaM5x5XO42ryduqcAtiEbCJcI5HgANTv42lhqp6GZhQDbkA3Gzt7ZhvpHVE4ASsKp718ibEFoYAeeQGfo3kCqALTaaFQiukcwizcAT2BQSgvALOjf2ehrLLhABDpCbxiamo13MYMXoEBY8ByIQCfkCACR38hnEgATeAOoGOyK3DqAmY1dZ/9hmz4sfRGCgCfQATfXx49LFQKNCkKCb0AEBKPKgyEAdZk9JIAICGZn72wDApDH7LMhHCACgvn86uUjBCAPX+ESQoIVEAGhQADqAyFYAREQCgQAtAIiIJARtg/vBYgtREAcEID66MlC9fPMMwQQAUFAANqhl1HPspDIBVYRCgEC0A7btOHupy/DCgFWEXbA51cvIQANMfMAIwsAB3gCC4OpwGWwtSUfNSyAJyAYCACQAERgQSAAfmqV/KKU+DkQgYVAIjCM3pQU1AMisAAQAB4lNiTxYW5TNmutAESgMRAAHvregqVboSMMew5EoCGYCuSDUKAdEIFGYCYgjdJiAFFZByLQCAhAOqV3K/IJwYx5AYgAEItKDNYSUPQSWAERaACSgfGUTuLZRn9zdmBWIAKVgQDEgyx+W7DvQEVWswG4kWMpbfxIBvqBJ1ARjGSgByAClUBNAOgFiEAFUBMQh8tdL+HGIxQIg5xABSAAadgMNidJCAHgAU8ALErMdukxRg0B4ANPoDCYEiyHXigUUzQEAYgDngAQQchwIQD1gAgUBF4AD91QOcZdy7BRNrwC4QBojm74rsSfeh55gPrAEygEvIB0chOAKR2I1LoBeAMQAbAgpuEuMZJjERH2HSgCvIB8UhKDuaLhEoDR9h8I7TuAnABYHK4xl/AUzDDg7uBiig1IfCAcyAReQB6xAlCq8SjCgG9ABMBipI7sJXMHEAOIQBbwAtKRIABgBUQANEeqIc+YDyCCCCQDLyCO2rsJuYC7HwYikAAEIA7d+FsKgRIACIEfiACoilTX32TWUIAIdQLRwAvgNfqQZvzwBtxABCKYoXuwa4Wfvp4/NE8vQQBg9HwQDjCZoW+gvhOw+bz6P2TgEgQAxAERYDK6ABCtb/7pMnoJC39AORAOgCdsxsyN+yUIAUKANOAJMJg1Gcj1flQIob++teeUIwAzzwwQwRMIMkIyMGWUdhmxbSFPTNKwBvAA8oAIBIi9qWtupR1LqJefSxxsicH9h23260PHlhA6gG+gqYiH2BkBSQLgwjbHH5r3N43WJRK+9/iO73o9h1wvYIZQAE1FMogVAOn4jJ0rAOZzNTr+cEEYUAaIgIOUXIB0L8B1febUoPnYB3e6UPp3MzOYHXAwmhcQore5f3gB5YAIWIjdVnyJUc4s5Eltva3e63ucehxF6e+nlADMkA/ggHDAQiiBFRNTl8ScijONfomtumzXEYt0r2N0IAIGvlzAUjcrpzJvqUU9sXkDfYoQ04UygAho+KYEl7hZuefsYVWfjZTrQihQHtQJaNjKg5fIdqcU2kgSr1qUTAbOJAKhOgEkBr8SIwCpr0s9FqfX/uhTc5gNqAdEwIGv4s00rJh5dd/5XO83Y2pzwU6oBwB4zkxeAAfkBGjdC+AKgKtcNmX09QlJqCpvZEOHB1AfiAADTs176vZYnEx5aoKwd3GAALRh+nAg1CvAZ9gpy2e53Xp857SFIxAAHggF1oEnYJBSfBNzTN9zLnQvIbSiL/bYEjB3CoYH0JapRUD3AjjG5XptbfQ8g02kejN6na3Lw7XtwWsBL8DOtOGAWh8QKnl11dXb1uOH3puD7Tpzy3WlgJ2ClmVaEeAU3piZfl9GfgRjbI1p9CocqAG8ADfTioALs7adKH3ERW28G9eoX8MbgAD4mVIEXDMCymi5xt8qb5A6/dgTtfICEIAwU64d+H73h0dbItCVgNNfo9NilB8h+WfSKvaHAKxAj0EDlxfgi/eXnIaD8acBAeAzVTigzwjYMGN4lxs+kmG2pGbiD6QzjQhw2odzCoUgAOkgDJDJNCKg4Bixa/RfQgBGTwiWBgIQz3Q5AR8SXf+lz98TEIA0phABFQq4ZgTUzwoYXnlQDSiXKaYI9RbiiPXbg3UByzL1FKEyfkmLgUB5IAB5DCsCsbMBoA4IA+Qz5OwABGAe4AXkM5wI1BaAGer4U8Go3ydDJQZbCECpY41EaEkwWoUtyzSJwVoCgFHfj9kZqJUAgHIMIwIuSo78pY47CmZHoFZrA+ABlGWInIDNCyhR5tuibdjIoD9AH3TtCdjqAHQDVa5qDjD4NCAA/dCtCJgCYBo/qIvvO8b33xddioBeBuwy/tPzezp5+6LthU2C/j2bbcFKCwBG//p0N0WoC4DCd+O5woER23a1Qk8EYvpPPkNPEaob0Lxhbq6PH4kgALUZUQDUvTOTCHUnArufvmyoP1QKEIB4ZugNqN9TdwcXdEcXRV3h3U9fxIpKVyKg/6HUzXJzffx4c338aN48Ni9AQuGPGU9LZwYBMGld97A03eUEfJhqbrK0F2AzKIk3WuvsvgTj93mXnL8Ro6R8l4h+S0Qvdj99+cPnVy+/2/305X/xVxpPKCcwjAgob+Dm+vhRigDEGlNrQZAwlSdBABQhIXC1n8tpS9ciTJhGBIhWf0RfMrC1B5BiZK2EQIIAEMkSAaLVPWSbXtb/LtwBxdzQRkd/b20hmEIEJIYBJYxM/yyh4/nEQ4rBm0gTAKL8sMAGp39lTSGYSgSkTAkuYXSuzy5VABTShEAXgdPz+6fnlWdQ01OrJQQhERhiAZGPljMCW5eHixmded4lryUGZXRqlmfp6wmJUg/faSxdTRH6kBIGLEmvN6gE44+hxMI0SXQfDrhCgRlCgBmQUDxko4YIIBxIIJQLaEEvbrdE9JjbRQsvIeUctr95zr2wdXnoDYnU72qETV17AktPCZp/cNdNjdWMeZT2BlxGpJ+Ha2g1FlG51sLYXmerljUZcnZAwpSguWyZaGXsEILyxIqAuQiot5xDKq7vaTgRCAkAUVsR4Li0LqQJQ4keDPoxXMeLOU+KFzCL0XPY2TvbGHopsY9aAmDzAFIJvb+1SOjnSxUE3Rtqef0wfDtfvxevCnQrAiEvoAYlYz/T4GzkGFPMe0/P7+no43siInr3+g0dfXxPR0REb9M+ry8s8l2TKTwhLwCGX4auwoHQIiGieqFASQ+gFCEDt1W86c8rY1UC4OLd6zdr5yo12pvfpbQQaQR+8as/juMJcOPDkgLQ6/Rfykiso4vp0cf3dPdx9bz6PkKjPReORwTq0pUIEPmnBUtjmwKUNFKFDN02Wpvf3ZHj/Wr1m+lZ3R1c0LvXbzKu2o+077gj/kVEPxLRv4no10T0OyL6GeeNXYUDCluz0dJwawAk4DOaXMH0NctQYpBqtGa4skRCcRD+Q0R/3tk7+5Ptl9PODuQgMf73YRoTtxMOJ2xyrYevCbyBaP7rEgAO3YlAbS+gNwEwXX0Vu4eIyZvoQmDmCnrNmQzGT3Pe3PXagdKYN/SSo5E6t+0aTt6+ePp3d3Dx9I+InsXxXMz3cI6hfl8qP9OD4EplZ+/slznv7y4nUMsTsI1oEm9Mn7ufMj1qi/lDnXDM8+R4A2aFIRE5H/dOrTLmqdYOtBIAacZvdrXxNbzkCoDttfpzMUJQKiSQngvQjdhmeKZxc15jO3bKNfmACASQKgC2aT3TMGPcfpvBm8/HeBIlvQGp1OplwFn5xxED7vVBBDwsKQBqSkz/X12D7vIz+tl7Ddr13hKVlbrnMIoISOt5SGQXhJjrHEYEagsAUX0RCLm6oSSbz0VPEYJYfLsn2UqLpSLR0H1wwgwfw4iATq4gSBGA2Mx6yCtIbaSiFg2FCG2hJsUbUOtL9MdLXk8pOGGEDRQLGdS6UW0LbFz19bnbWuXuemOi5vtjRMn2+iUSey6j4Hbd6Ylan2UaT8Bn/KUXwpjH5FbxEfmXQnONPLcbrv7+2E1PaocFIxl1K4ZrNFpaAEpzen7/JABHH9+vVuBFGuTV5u2TwZv/c6/Bhrnwx/e9mE0zl2rmurN3tqEMHwJQh67CgRoCEOMFcJbPxoz6Nky333yOgyu+P3n7wllWbH5PqQ00a3kBEIB6dOcJLIU+laff6PpjvXzXR0ppr4uty0N69/oN22A5o/vp+b11RyPzNaXRR331uPhJwBrdeAJLegGu3nuxo36N1Xh3BxdEr9+sOgRZfu/6Dnx5A85o/uQVMWcWXNgM3czug7p0kRhcOgxQ5Lr6ROlFOiqetxnc1uXhWpFRqzyILorc0leM8G3BFGECtthfb7HFxbY/fcr6fD2hZ87pqxFdNQZtPVdvCoANGL1sxItAy9kAZfz66FayM09Mok//DCf0fMTVxaj1yM8Fht8PosOB1MrAnFCghMufg+3aVabevC6u4bveZ/YLzMnsw+jl0nXZcC0vwCYCKcbPie+5JbkK3UBdvytBieq+EavyRqRbEWjtBXANNaU+P1YITFKMv2YJL4y/L6YSAY4ALO3uh1Buv7QYXwHD748uRaCGFyDJ8G0FO7WMPuQR6KM6Z8tu0B/diUBJAZBk+CZLjvQco4a7Pw7T1AlIMXhfUQ8AEhHlCbTYWUgCS3kBGNnnZBpPQDK56/tTcO1IDICJmFWEo3oBatRvvTbft3kJADoiRKAnAUjdkXeJnIUuACr7j9V5wAThQCSuxhwul982RVc7J4DYH8SweGKwBy/A1nMvZX6/dhEQZ0MLCMR8iK4T6EEAVONMnwHbfldzH70UQx6xBTfgIXJ2QKrxW7vsfjXmUFNOnVCVXk7mPseA0bEH2GjmCUg1fIVt9V6s624af6mVelkHANOzuCcg1fh1o9eN3beU14VrZSKm50APFBcBqUYfw+n5PZ04XHzTlS/ddVd32eEFgBYUCQckGb5r7b6rWMfl8uuJPZfhlx7pYfSgBtVmByQZvk6ssStiknk6KUIAYwctKZ4TkGj8pZYRmyN8DQ8AAgCk4bwh//6bn4szdhu+uXvfa/WR32bcrj6EuUAEQGtCnsD/AR33HawxpMZqAAAAAElFTkSuQmCC"),alt:"rath"}))),i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg8"},i.a.createElement(X.a,{selectedKey:s.current.pivotKey,onLinkClick:function(t){t&&t.props.itemKey&&l((function(e){e.current.pivotKey=t.props.itemKey}))},headersOnly:!0},n.map((function(t){return i.a.createElement(W.a,{key:t.itemKey,headerText:t.title,itemKey:t.itemKey})})))),i.a.createElement("div",{className:"ms-Grid-col ms-sm6 ms-md8 ms-lg3"},i.a.createElement("div",{className:"header-toolbar"},i.a.createElement(Bn,null))))),"pivot-3"===s.current.pivotKey&&i.a.createElement(Jt,{subspaceList:r.subspaceList,dataSource:r.cookedDataSource,summary:r.summary}),"pivot-1"===s.current.pivotKey&&i.a.createElement(hn,{onExtractInsights:function(){l((function(t){t.current.pivotKey="pivot-3",t.show.insightBoard=!0}))}}),"pivot-2"===s.current.pivotKey&&i.a.createElement("div",{className:"content-container"},i.a.createElement("div",{className:"card"},i.a.createElement(pe,{summary:r.summary,subspaceList:r.subspaceList,dataSource:r.cookedDataSource}))),"pivot-4"===s.current.pivotKey&&i.a.createElement(En,null),"pivot-5"===s.current.pivotKey&&i.a.createElement(qn,null),"pivot-6"===s.current.pivotKey&&i.a.createElement(Dr,{dataSource:r.cookedDataSource,dimensions:r.cookedDimensions,measures:r.cookedMeasures}),"pivot-7"===s.current.pivotKey&&i.a.createElement(Pn,null))}function Un(){return i.a.createElement(Y,null,i.a.createElement(Gn,null))}var Kn=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,516)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,i=e.getTTFB;r(t),n(t),a(t),o(t),i(t)}))},Vn=r(243);Object(Vn.a)(),s.a.render(i.a.createElement(Un,null),document.getElementById("root")),Kn(console.log),document.write(unescape("%3Cspan id='cnzz_stat_icon_1279593444'%3E%3C/span%3E%3Cscript src='https://s9.cnzz.com/z_stat.php%3Fid%3D1279593444%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"))}},[[431,1,2]]]);
//# sourceMappingURL=main.d8f72fb3.chunk.js.map