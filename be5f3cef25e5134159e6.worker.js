/*! For license information please see be5f3cef25e5134159e6.worker.js.LICENSE.txt */
!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./",r(r.s=93)}([function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(41),e),o(r(18),e),o(r(42),e),o(r(43),e),o(r(44),e)},function(t,e,r){"use strict";var n,o=r(21),i=Object.prototype.toString,a=(n=Object.create(null),function(t){var e=i.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())});function u(t){return t=t.toLowerCase(),function(e){return a(e)===t}}function s(t){return Array.isArray(t)}function c(t){return"undefined"===typeof t}var l=u("ArrayBuffer");function f(t){return null!==t&&"object"===typeof t}function h(t){if("object"!==a(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=u("Date"),p=u("File"),y=u("Blob"),v=u("FileList");function m(t){return"[object Function]"===i.call(t)}var g=u("URLSearchParams");function b(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),s(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var w,_=(w="undefined"!==typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return w&&t instanceof w});t.exports={isArray:s,isArrayBuffer:l,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"===typeof FormData&&t instanceof FormData||i.call(t)===e||m(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&l(t.buffer)},isString:function(t){return"string"===typeof t},isNumber:function(t){return"number"===typeof t},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:y,isFunction:m,isStream:function(t){return f(t)&&m(t.pipe)},isURLSearchParams:g,isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:b,merge:function t(){var e={};function r(r,n){h(e[n])&&h(r)?e[n]=t(e[n],r):h(r)?e[n]=t({},r):s(r)?e[n]=r.slice():e[n]=r}for(var n=0,o=arguments.length;n<o;n++)b(arguments[n],r);return e},extend:function(t,e,r){return b(e,(function(e,n){t[n]=r&&"function"===typeof e?o(e,r):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)},toFlatObject:function(t,e,r){var n,o,i,a={};e=e||{};do{for(o=(n=Object.getOwnPropertyNames(t)).length;o-- >0;)a[i=n[o]]||(e[i]=t[i],a[i]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:u,endsWith:function(t,e,r){t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r},isTypedArray:_,isFileList:v}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=e.BIN_NUM_FOR_ANALYTIC=e.DEFAULT_BIN_NUM=e.DOMMAIN_SIZE_THRESHOLD_MAYBE_DROP=e.PERCENT_THRESHOLD_AS_UNIQUE_INDEX=e.EULER=e.CHANNEL=void 0,e.CHANNEL={maxDimensionNumber:8,maxMeasureNumber:6},e.EULER=.5772156649,e.PERCENT_THRESHOLD_AS_UNIQUE_INDEX=.95,e.DOMMAIN_SIZE_THRESHOLD_MAYBE_DROP=20,e.DEFAULT_BIN_NUM=8,e.BIN_NUM_FOR_ANALYTIC=2*e.DEFAULT_BIN_NUM,e.VERSION="0.8.8"},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(38),e)},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Classification=e.Outier=e.Cluster=void 0;var a=i(r(46));e.Cluster=a;var u=r(19),s={IsolationForest:r(48).IsolationForest};e.Outier=s;var c={KNN:u.KNN};e.Classification=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PearsonCorrelation=e.CramersVThreshold=e.TopKPercentField=e.VisualLimit=e.Depth=e.TopKView=e.TopKSingleField=void 0,e.TopKSingleField=6,e.TopKView=15,e.Depth=4,e.VisualLimit=8,e.TopKPercentField=.8,e.CramersVThreshold=.3,e.PearsonCorrelation={strong:.5,weak:.3}},function(t,e,r){"use strict";var n=r(1);function o(t,e,r,n,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}n.inherits(o,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=o.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){a[t]={value:t}})),Object.defineProperties(o,a),Object.defineProperty(i,"isAxiosError",{value:!0}),o.from=function(t,e,r,a,u,s){var c=Object.create(i);return n.toFlatObject(t,c,(function(t){return t!==Error.prototype})),o.call(c,t.message,e,r,a,u),c.name=t.name,s&&Object.assign(c,s),c},t.exports=o},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},u=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Computation=e.Classification=e.Outier=e.Cluster=e.Cleaner=e.specification=e.Distribution=e.UnivariateSummary=e.Statistics=e.Utils=e.Sampling=e.DashBoard=e.InsightFlow=e.Viz=void 0;var s=i(r(3));e.Utils=s;var c=u(r(39));e.specification=c.default;var l=i(r(16));e.Distribution=l;var f=i(r(40));e.Cleaner=f;var h=i(r(17));e.UnivariateSummary=h;var d=i(r(45));e.DashBoard=d;var p=i(r(20));e.Sampling=p;var y=i(r(0));e.Statistics=y;var v=i(r(49));e.Computation=v;var m=r(4);Object.defineProperty(e,"Cluster",{enumerable:!0,get:function(){return m.Cluster}}),Object.defineProperty(e,"Outier",{enumerable:!0,get:function(){return m.Outier}}),Object.defineProperty(e,"Classification",{enumerable:!0,get:function(){return m.Classification}}),a(r(8),e),a(r(31),e),e.Viz=i(r(81)),e.InsightFlow=i(r(83))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultIWorker=e.ICubeStorageManageMode=e.IStorageMode=void 0,function(t){t.LocalCache="local_cahce",t.LocalDisk="local_disk"}(e.IStorageMode||(e.IStorageMode={})),function(t){t.LocalCache="local_cache",t.LocalDisk="local_disk",t.LocalMix="local_mix"}(e.ICubeStorageManageMode||(e.ICubeStorageManageMode={})),function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(e.DefaultIWorker||(e.DefaultIWorker={}))},function(t,e,r){(function(e){t.exports=function t(e,r,n){function o(a,u){if(!r[a]){if(!e[a]){if(i)return i(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=r[a]={exports:{}};e[a][0].call(c.exports,(function(t){var r=e[a][1][t];return o(r||t)}),c,c.exports,t,e,r,n)}return r[a].exports}for(var i=!1,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(t,r,n){(function(t){"use strict";var e,n,o=t.MutationObserver||t.WebKitMutationObserver;if(o){var i=0,a=new o(l),u=t.document.createTextNode("");a.observe(u,{characterData:!0}),e=function(){u.data=i=++i%2}}else if(t.setImmediate||"undefined"===typeof t.MessageChannel)e="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){l(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(l,0)};else{var s=new t.MessageChannel;s.port1.onmessage=l,e=function(){s.port2.postMessage(0)}}var c=[];function l(){var t,e;n=!0;for(var r=c.length;r;){for(e=c,c=[],t=-1;++t<r;)e[t]();r=c.length}n=!1}function f(t){1!==c.push(t)||n||e()}r.exports=f}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(t,e,r){"use strict";var n=t(1);function o(){}var i={},a=["REJECTED"],u=["FULFILLED"],s=["PENDING"];function c(t){if("function"!==typeof t)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,t!==o&&d(this,t)}function l(t,e,r){this.promise=t,"function"===typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"===typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function f(t,e,r){n((function(){var n;try{n=e(r)}catch(o){return i.reject(t,o)}n===t?i.reject(t,new TypeError("Cannot resolve promise with itself")):i.resolve(t,n)}))}function h(t){var e=t&&t.then;if(t&&("object"===typeof t||"function"===typeof t)&&"function"===typeof e)return function(){e.apply(t,arguments)}}function d(t,e){var r=!1;function n(e){r||(r=!0,i.reject(t,e))}function o(e){r||(r=!0,i.resolve(t,e))}function a(){e(o,n)}var u=p(a);"error"===u.status&&n(u.value)}function p(t,e){var r={};try{r.value=t(e),r.status="success"}catch(n){r.status="error",r.value=n}return r}function y(t){return t instanceof this?t:i.resolve(new this(o),t)}function v(t){var e=new this(o);return i.reject(e,t)}function m(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=new Array(r),u=0,s=-1,c=new this(o);++s<r;)l(t[s],s);return c;function l(t,o){function s(t){a[o]=t,++u!==r||n||(n=!0,i.resolve(c,a))}e.resolve(t).then(s,(function(t){n||(n=!0,i.reject(c,t))}))}}function g(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var r=t.length,n=!1;if(!r)return this.resolve([]);for(var a=-1,u=new this(o);++a<r;)s(t[a]);return u;function s(t){e.resolve(t).then((function(t){n||(n=!0,i.resolve(u,t))}),(function(t){n||(n=!0,i.reject(u,t))}))}}e.exports=c,c.prototype.catch=function(t){return this.then(null,t)},c.prototype.then=function(t,e){if("function"!==typeof t&&this.state===u||"function"!==typeof e&&this.state===a)return this;var r=new this.constructor(o);return this.state!==s?f(r,this.state===u?t:e,this.outcome):this.queue.push(new l(r,t,e)),r},l.prototype.callFulfilled=function(t){i.resolve(this.promise,t)},l.prototype.otherCallFulfilled=function(t){f(this.promise,this.onFulfilled,t)},l.prototype.callRejected=function(t){i.reject(this.promise,t)},l.prototype.otherCallRejected=function(t){f(this.promise,this.onRejected,t)},i.resolve=function(t,e){var r=p(h,e);if("error"===r.status)return i.reject(t,r.value);var n=r.value;if(n)d(t,n);else{t.state=u,t.outcome=e;for(var o=-1,a=t.queue.length;++o<a;)t.queue[o].callFulfilled(e)}return t},i.reject=function(t,e){t.state=a,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].callRejected(e);return t},c.resolve=y,c.reject=v,c.all=m,c.race=g},{1:1}],3:[function(t,r,n){(function(e){"use strict";"function"!==typeof e.Promise&&(e.Promise=t(2))}).call(this,"undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(t,e,r){"use strict";var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(t){return}}var a=i();function u(){try{if(!a||!a.open)return!1;var t="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),e="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!t||e)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(r){return!1}}function s(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var r=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),n=0;n<t.length;n+=1)r.append(t[n]);return r.getBlob(e.type)}}"undefined"===typeof Promise&&t(3);var c=Promise;function l(t,e){e&&t.then((function(t){e(null,t)}),(function(t){e(t)}))}function f(t,e,r){"function"===typeof e&&t.then(e),"function"===typeof r&&t.catch(r)}function h(t){return"string"!==typeof t&&(console.warn(t+" used as a key, but it is not a string."),t=String(t)),t}function d(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",y=void 0,v={},m=Object.prototype.toString,g="readonly",b="readwrite";function w(t){for(var e=t.length,r=new ArrayBuffer(e),n=new Uint8Array(r),o=0;o<e;o++)n[o]=t.charCodeAt(o);return r}function _(t){return new c((function(e){var r=t.transaction(p,b),n=s([""]);r.objectStore(p).put(n,"key"),r.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)},r.oncomplete=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),r=navigator.userAgent.match(/Edge\//);e(r||!t||parseInt(t[1],10)>=43)}})).catch((function(){return!1}))}function S(t){return"boolean"===typeof y?c.resolve(y):_(t).then((function(t){return y=t}))}function M(t){var e=v[t.name],r={};r.promise=new c((function(t,e){r.resolve=t,r.reject=e})),e.deferredOperations.push(r),e.dbReady?e.dbReady=e.dbReady.then((function(){return r.promise})):e.dbReady=r.promise}function x(t){var e=v[t.name].deferredOperations.pop();if(e)return e.resolve(),e.promise}function E(t,e){var r=v[t.name].deferredOperations.pop();if(r)return r.reject(e),r.promise}function O(t,e){return new c((function(r,n){if(v[t.name]=v[t.name]||k(),t.db){if(!e)return r(t.db);M(t),t.db.close()}var o=[t.name];e&&o.push(t.version);var i=a.open.apply(a,o);e&&(i.onupgradeneeded=function(e){var r=i.result;try{r.createObjectStore(t.storeName),e.oldVersion<=1&&r.createObjectStore(p)}catch(n){if("ConstraintError"!==n.name)throw n;console.warn('The database "'+t.name+'" has been upgraded from version '+e.oldVersion+" to version "+e.newVersion+', but the storage "'+t.storeName+'" already exists.')}}),i.onerror=function(t){t.preventDefault(),n(i.error)},i.onsuccess=function(){var e=i.result;e.onversionchange=function(t){t.target.close()},r(e),x(t)}}))}function T(t){return O(t,!1)}function D(t){return O(t,!0)}function I(t,e){if(!t.db)return!0;var r=!t.db.objectStoreNames.contains(t.storeName),n=t.version<t.db.version,o=t.version>t.db.version;if(n&&(t.version!==e&&console.warn('The database "'+t.name+"\" can't be downgraded from version "+t.db.version+" to version "+t.version+"."),t.version=t.db.version),o||r){if(r){var i=t.db.version+1;i>t.version&&(t.version=i)}return!0}return!1}function A(t){return new c((function(e,r){var n=new FileReader;n.onerror=r,n.onloadend=function(r){var n=btoa(r.target.result||"");e({__local_forage_encoded_blob:!0,data:n,type:t.type})},n.readAsBinaryString(t)}))}function C(t){return s([w(atob(t.data))],{type:t.type})}function N(t){return t&&t.__local_forage_encoded_blob}function R(t){var e=this,r=e._initReady().then((function(){var t=v[e._dbInfo.name];if(t&&t.dbReady)return t.dbReady}));return f(r,t,t),r}function j(t){M(t);for(var e=v[t.name],r=e.forages,n=0;n<r.length;n++){var o=r[n];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return t.db=null,T(t).then((function(e){return t.db=e,I(t)?D(t):e})).then((function(n){t.db=e.db=n;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=n})).catch((function(e){throw E(t,e),e}))}function P(t,e,r,n){void 0===n&&(n=1);try{var o=t.db.transaction(t.storeName,e);r(null,o)}catch(i){if(n>0&&(!t.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!t.db||"NotFoundError"===i.name&&!t.db.objectStoreNames.contains(t.storeName)&&t.version<=t.db.version)return t.db&&(t.version=t.db.version+1),D(t)})).then((function(){return j(t).then((function(){P(t,e,r,n-1)}))})).catch(r);r(i)}}function k(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(t){var e=this,r={db:null};if(t)for(var n in t)r[n]=t[n];var o=v[r.name];o||(o=k(),v[r.name]=o),o.forages.push(e),e._initReady||(e._initReady=e.ready,e.ready=R);var i=[];function a(){return c.resolve()}for(var u=0;u<o.forages.length;u++){var s=o.forages[u];s!==e&&i.push(s._initReady().catch(a))}var l=o.forages.slice(0);return c.all(i).then((function(){return r.db=o.db,T(r)})).then((function(t){return r.db=t,I(r,e._defaultConfig.version)?D(r):t})).then((function(t){r.db=o.db=t,e._dbInfo=r;for(var n=0;n<l.length;n++){var i=l[n];i!==e&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}}))}function L(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){P(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).get(t);a.onsuccess=function(){var t=a.result;void 0===t&&(t=null),N(t)&&(t=C(t)),e(t)},a.onerror=function(){n(a.error)}}catch(u){n(u)}}))})).catch(n)}));return l(n,e),n}function B(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){P(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).openCursor(),u=1;a.onsuccess=function(){var r=a.result;if(r){var n=r.value;N(n)&&(n=C(n));var o=t(n,r.key,u++);void 0!==o?e(o):r.continue()}else e()},a.onerror=function(){n(a.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,e),n}function U(t,e,r){var n=this;t=h(t);var o=new c((function(r,o){var i;n.ready().then((function(){return i=n._dbInfo,"[object Blob]"===m.call(e)?S(i.db).then((function(t){return t?e:A(e)})):e})).then((function(e){P(n._dbInfo,b,(function(i,a){if(i)return o(i);try{var u=a.objectStore(n._dbInfo.storeName);null===e&&(e=void 0);var s=u.put(e,t);a.oncomplete=function(){void 0===e&&(e=null),r(e)},a.onabort=a.onerror=function(){var t=s.error?s.error:s.transaction.error;o(t)}}catch(c){o(c)}}))})).catch(o)}));return l(o,r),o}function z(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){P(r._dbInfo,b,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName).delete(t);i.oncomplete=function(){e()},i.onerror=function(){n(a.error)},i.onabort=function(){var t=a.error?a.error:a.transaction.error;n(t)}}catch(u){n(u)}}))})).catch(n)}));return l(n,e),n}function q(t){var e=this,r=new c((function(t,r){e.ready().then((function(){P(e._dbInfo,b,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).clear();o.oncomplete=function(){t()},o.onabort=o.onerror=function(){var t=i.error?i.error:i.transaction.error;r(t)}}catch(a){r(a)}}))})).catch(r)}));return l(r,t),r}function Y(t){var e=this,r=new c((function(t,r){e.ready().then((function(){P(e._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).count();i.onsuccess=function(){t(i.result)},i.onerror=function(){r(i.error)}}catch(a){r(a)}}))})).catch(r)}));return l(r,t),r}function G(t,e){var r=this,n=new c((function(e,n){t<0?e(null):r.ready().then((function(){P(r._dbInfo,g,(function(o,i){if(o)return n(o);try{var a=i.objectStore(r._dbInfo.storeName),u=!1,s=a.openKeyCursor();s.onsuccess=function(){var r=s.result;r?0===t||u?e(r.key):(u=!0,r.advance(t)):e(null)},s.onerror=function(){n(s.error)}}catch(c){n(c)}}))})).catch(n)}));return l(n,e),n}function V(t){var e=this,r=new c((function(t,r){e.ready().then((function(){P(e._dbInfo,g,(function(n,o){if(n)return r(n);try{var i=o.objectStore(e._dbInfo.storeName).openKeyCursor(),a=[];i.onsuccess=function(){var e=i.result;e?(a.push(e.key),e.continue()):t(a)},i.onerror=function(){r(i.error)}}catch(u){r(u)}}))})).catch(r)}));return l(r,t),r}function $(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!==typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,o=this;if(t.name){var i=t.name===r.name&&o._dbInfo.db?c.resolve(o._dbInfo.db):T(t).then((function(e){var r=v[t.name],n=r.forages;r.db=e;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=e;return e}));n=t.storeName?i.then((function(e){if(e.objectStoreNames.contains(t.storeName)){var r=e.version+1;M(t);var n=v[t.name],o=n.forages;e.close();for(var i=0;i<o.length;i++){var u=o[i];u._dbInfo.db=null,u._dbInfo.version=r}return new c((function(e,n){var o=a.open(t.name,r);o.onerror=function(t){o.result.close(),n(t)},o.onupgradeneeded=function(){o.result.deleteObjectStore(t.storeName)},o.onsuccess=function(){var t=o.result;t.close(),e(t)}})).then((function(t){n.db=t;for(var e=0;e<o.length;e++){var r=o[e];r._dbInfo.db=t,x(r._dbInfo)}})).catch((function(e){throw(E(t,e)||c.resolve()).catch((function(){})),e}))}})):i.then((function(e){M(t);var r=v[t.name],n=r.forages;e.close();for(var o=0;o<n.length;o++)n[o]._dbInfo.db=null;return new c((function(e,r){var n=a.deleteDatabase(t.name);n.onerror=function(){var t=n.result;t&&t.close(),r(n.error)},n.onblocked=function(){console.warn('dropInstance blocked for database "'+t.name+'" until all open connections are closed')},n.onsuccess=function(){var t=n.result;t&&t.close(),e(t)}})).then((function(t){r.db=t;for(var e=0;e<n.length;e++)x(n[e]._dbInfo)})).catch((function(e){throw(E(t,e)||c.resolve()).catch((function(){})),e}))}))}else n=c.reject("Invalid arguments");return l(n,e),n}var H={_driver:"asyncStorage",_initStorage:F,_support:u(),iterate:B,getItem:L,setItem:U,removeItem:z,clear:q,length:Y,key:G,keys:V,dropInstance:$};function W(){return"function"===typeof openDatabase}var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",X="~~local_forage_type~",J=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",Q=Z.length,tt="arbf",et="blob",rt="si08",nt="ui08",ot="uic8",it="si16",at="si32",ut="ur16",st="ui32",ct="fl32",lt="fl64",ft=Q+tt.length,ht=Object.prototype.toString;function dt(t){var e,r,n,o,i,a=.75*t.length,u=t.length,s=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var c=new ArrayBuffer(a),l=new Uint8Array(c);for(e=0;e<u;e+=4)r=K.indexOf(t[e]),n=K.indexOf(t[e+1]),o=K.indexOf(t[e+2]),i=K.indexOf(t[e+3]),l[s++]=r<<2|n>>4,l[s++]=(15&n)<<4|o>>2,l[s++]=(3&o)<<6|63&i;return c}function pt(t){var e,r=new Uint8Array(t),n="";for(e=0;e<r.length;e+=3)n+=K[r[e]>>2],n+=K[(3&r[e])<<4|r[e+1]>>4],n+=K[(15&r[e+1])<<2|r[e+2]>>6],n+=K[63&r[e+2]];return r.length%3===2?n=n.substring(0,n.length-1)+"=":r.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}function yt(t,e){var r="";if(t&&(r=ht.call(t)),t&&("[object ArrayBuffer]"===r||t.buffer&&"[object ArrayBuffer]"===ht.call(t.buffer))){var n,o=Z;t instanceof ArrayBuffer?(n=t,o+=tt):(n=t.buffer,"[object Int8Array]"===r?o+=rt:"[object Uint8Array]"===r?o+=nt:"[object Uint8ClampedArray]"===r?o+=ot:"[object Int16Array]"===r?o+=it:"[object Uint16Array]"===r?o+=ut:"[object Int32Array]"===r?o+=at:"[object Uint32Array]"===r?o+=st:"[object Float32Array]"===r?o+=ct:"[object Float64Array]"===r?o+=lt:e(new Error("Failed to get type for BinaryArray"))),e(o+pt(n))}else if("[object Blob]"===r){var i=new FileReader;i.onload=function(){var r=X+t.type+"~"+pt(this.result);e(Z+et+r)},i.readAsArrayBuffer(t)}else try{e(JSON.stringify(t))}catch(a){console.error("Couldn't convert value into a JSON string: ",t),e(null,a)}}function vt(t){if(t.substring(0,Q)!==Z)return JSON.parse(t);var e,r=t.substring(ft),n=t.substring(Q,ft);if(n===et&&J.test(r)){var o=r.match(J);e=o[1],r=r.substring(o[0].length)}var i=dt(r);switch(n){case tt:return i;case et:return s([i],{type:e});case rt:return new Int8Array(i);case nt:return new Uint8Array(i);case ot:return new Uint8ClampedArray(i);case it:return new Int16Array(i);case ut:return new Uint16Array(i);case at:return new Int32Array(i);case st:return new Uint32Array(i);case ct:return new Float32Array(i);case lt:return new Float64Array(i);default:throw new Error("Unkown type: "+n)}}var mt={serialize:yt,deserialize:vt,stringToBuffer:dt,bufferToString:pt};function gt(t,e,r,n){t.executeSql("CREATE TABLE IF NOT EXISTS "+e.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],r,n)}function bt(t){var e=this,r={db:null};if(t)for(var n in t)r[n]="string"!==typeof t[n]?t[n].toString():t[n];var o=new c((function(t,n){try{r.db=openDatabase(r.name,String(r.version),r.description,r.size)}catch(o){return n(o)}r.db.transaction((function(o){gt(o,r,(function(){e._dbInfo=r,t()}),(function(t,e){n(e)}))}),n)}));return r.serializer=mt,o}function wt(t,e,r,n,o,i){t.executeSql(r,n,o,(function(t,a){a.code===a.SYNTAX_ERR?t.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[e.storeName],(function(t,u){u.rows.length?i(t,a):gt(t,e,(function(){t.executeSql(r,n,o,i)}),i)}),i):i(t,a)}),i)}function _t(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){wt(r,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[t],(function(t,r){var n=r.rows.length?r.rows.item(0).value:null;n&&(n=o.serializer.deserialize(n)),e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function St(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){wt(r,o,"SELECT * FROM "+o.storeName,[],(function(r,n){for(var i=n.rows,a=i.length,u=0;u<a;u++){var s=i.item(u),c=s.value;if(c&&(c=o.serializer.deserialize(c)),void 0!==(c=t(c,s.key,u+1)))return void e(c)}e()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function Mt(t,e,r,n){var o=this;t=h(t);var i=new c((function(i,a){o.ready().then((function(){void 0===e&&(e=null);var u=e,s=o._dbInfo;s.serializer.serialize(e,(function(e,c){c?a(c):s.db.transaction((function(r){wt(r,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[t,e],(function(){i(u)}),(function(t,e){a(e)}))}),(function(e){if(e.code===e.QUOTA_ERR){if(n>0)return void i(Mt.apply(o,[t,u,r,n-1]));a(e)}}))}))})).catch(a)}));return l(i,r),i}function xt(t,e,r){return Mt.apply(this,[t,e,r,1])}function Et(t,e){var r=this;t=h(t);var n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){wt(r,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[t],(function(){e()}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function Ot(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){wt(e,n,"DELETE FROM "+n.storeName,[],(function(){t()}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function Tt(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){wt(e,n,"SELECT COUNT(key) as c FROM "+n.storeName,[],(function(e,r){var n=r.rows.item(0).c;t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function Dt(t,e){var r=this,n=new c((function(e,n){r.ready().then((function(){var o=r._dbInfo;o.db.transaction((function(r){wt(r,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[t+1],(function(t,r){var n=r.rows.length?r.rows.item(0).key:null;e(n)}),(function(t,e){n(e)}))}))})).catch(n)}));return l(n,e),n}function It(t){var e=this,r=new c((function(t,r){e.ready().then((function(){var n=e._dbInfo;n.db.transaction((function(e){wt(e,n,"SELECT key FROM "+n.storeName,[],(function(e,r){for(var n=[],o=0;o<r.rows.length;o++)n.push(r.rows.item(o).key);t(n)}),(function(t,e){r(e)}))}))})).catch(r)}));return l(r,t),r}function At(t){return new c((function(e,r){t.transaction((function(n){n.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(r,n){for(var o=[],i=0;i<n.rows.length;i++)o.push(n.rows.item(i).name);e({db:t,storeNames:o})}),(function(t,e){r(e)}))}),(function(t){r(t)}))}))}function Ct(t,e){e=d.apply(this,arguments);var r=this.config();(t="function"!==typeof t&&t||{}).name||(t.name=t.name||r.name,t.storeName=t.storeName||r.storeName);var n,o=this;return l(n=t.name?new c((function(e){var n;n=t.name===r.name?o._dbInfo.db:openDatabase(t.name,"","",0),t.storeName?e({db:n,storeNames:[t.storeName]}):e(At(n))})).then((function(t){return new c((function(e,r){t.db.transaction((function(n){function o(t){return new c((function(e,r){n.executeSql("DROP TABLE IF EXISTS "+t,[],(function(){e()}),(function(t,e){r(e)}))}))}for(var i=[],a=0,u=t.storeNames.length;a<u;a++)i.push(o(t.storeNames[a]));c.all(i).then((function(){e()})).catch((function(t){r(t)}))}),(function(t){r(t)}))}))})):c.reject("Invalid arguments"),e),n}var Nt={_driver:"webSQLStorage",_initStorage:bt,_support:W(),iterate:St,getItem:_t,setItem:xt,removeItem:Et,clear:Ot,length:Tt,key:Dt,keys:It,dropInstance:Ct};function Rt(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(t){return!1}}function jt(t,e){var r=t.name+"/";return t.storeName!==e.storeName&&(r+=t.storeName+"/"),r}function Pt(){var t="_localforage_support_test";try{return localStorage.setItem(t,!0),localStorage.removeItem(t),!1}catch(e){return!0}}function kt(){return!Pt()||localStorage.length>0}function Ft(t){var e=this,r={};if(t)for(var n in t)r[n]=t[n];return r.keyPrefix=jt(t,e._defaultConfig),kt()?(e._dbInfo=r,r.serializer=mt,c.resolve()):c.reject()}function Lt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo.keyPrefix,r=localStorage.length-1;r>=0;r--){var n=localStorage.key(r);0===n.indexOf(t)&&localStorage.removeItem(n)}}));return l(r,t),r}function Bt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo,n=localStorage.getItem(e.keyPrefix+t);return n&&(n=e.serializer.deserialize(n)),n}));return l(n,e),n}function Ut(t,e){var r=this,n=r.ready().then((function(){for(var e=r._dbInfo,n=e.keyPrefix,o=n.length,i=localStorage.length,a=1,u=0;u<i;u++){var s=localStorage.key(u);if(0===s.indexOf(n)){var c=localStorage.getItem(s);if(c&&(c=e.serializer.deserialize(c)),void 0!==(c=t(c,s.substring(o),a++)))return c}}}));return l(n,e),n}function zt(t,e){var r=this,n=r.ready().then((function(){var e,n=r._dbInfo;try{e=localStorage.key(t)}catch(o){e=null}return e&&(e=e.substring(n.keyPrefix.length)),e}));return l(n,e),n}function qt(t){var e=this,r=e.ready().then((function(){for(var t=e._dbInfo,r=localStorage.length,n=[],o=0;o<r;o++){var i=localStorage.key(o);0===i.indexOf(t.keyPrefix)&&n.push(i.substring(t.keyPrefix.length))}return n}));return l(r,t),r}function Yt(t){var e=this.keys().then((function(t){return t.length}));return l(e,t),e}function Gt(t,e){var r=this;t=h(t);var n=r.ready().then((function(){var e=r._dbInfo;localStorage.removeItem(e.keyPrefix+t)}));return l(n,e),n}function Vt(t,e,r){var n=this;t=h(t);var o=n.ready().then((function(){void 0===e&&(e=null);var r=e;return new c((function(o,i){var a=n._dbInfo;a.serializer.serialize(e,(function(e,n){if(n)i(n);else try{localStorage.setItem(a.keyPrefix+t,e),o(r)}catch(u){"QuotaExceededError"!==u.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==u.name||i(u),i(u)}}))}))}));return l(o,r),o}function $t(t,e){if(e=d.apply(this,arguments),!(t="function"!==typeof t&&t||{}).name){var r=this.config();t.name=t.name||r.name,t.storeName=t.storeName||r.storeName}var n,o=this;return l(n=t.name?new c((function(e){t.storeName?e(jt(t,o._defaultConfig)):e(t.name+"/")})).then((function(t){for(var e=localStorage.length-1;e>=0;e--){var r=localStorage.key(e);0===r.indexOf(t)&&localStorage.removeItem(r)}})):c.reject("Invalid arguments"),e),n}var Ht={_driver:"localStorageWrapper",_initStorage:Ft,_support:Rt(),iterate:Ut,getItem:Bt,setItem:Vt,removeItem:Gt,clear:Lt,length:Yt,key:zt,keys:qt,dropInstance:$t},Wt=function(t,e){return t===e||"number"===typeof t&&"number"===typeof e&&isNaN(t)&&isNaN(e)},Kt=function(t,e){for(var r=t.length,n=0;n<r;){if(Wt(t[n],e))return!0;n++}return!1},Xt=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},Jt={},Zt={},Qt={INDEXEDDB:H,WEBSQL:Nt,LOCALSTORAGE:Ht},te=[Qt.INDEXEDDB._driver,Qt.WEBSQL._driver,Qt.LOCALSTORAGE._driver],ee=["dropInstance"],re=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(ee),ne={description:"",driver:te.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function oe(t,e){t[e]=function(){var r=arguments;return t.ready().then((function(){return t[e].apply(t,r)}))}}function ie(){for(var t=1;t<arguments.length;t++){var e=arguments[t];if(e)for(var r in e)e.hasOwnProperty(r)&&(Xt(e[r])?arguments[0][r]=e[r].slice():arguments[0][r]=e[r])}return arguments[0]}var ae=new(function(){function t(e){for(var r in o(this,t),Qt)if(Qt.hasOwnProperty(r)){var n=Qt[r],i=n._driver;this[r]=i,Jt[i]||this.defineDriver(n)}this._defaultConfig=ie({},ne),this._config=ie({},this._defaultConfig,e),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return t.prototype.config=function(t){if("object"===("undefined"===typeof t?"undefined":n(t))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var e in t){if("storeName"===e&&(t[e]=t[e].replace(/\W/g,"_")),"version"===e&&"number"!==typeof t[e])return new Error("Database version must be a number.");this._config[e]=t[e]}return!("driver"in t)||!t.driver||this.setDriver(this._config.driver)}return"string"===typeof t?this._config[t]:this._config},t.prototype.defineDriver=function(t,e,r){var n=new c((function(e,r){try{var n=t._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!t._driver)return void r(o);for(var i=re.concat("_initStorage"),a=0,u=i.length;a<u;a++){var s=i[a];if((!Kt(ee,s)||t[s])&&"function"!==typeof t[s])return void r(o)}!function(){for(var e=function(t){return function(){var e=new Error("Method "+t+" is not implemented by the current driver"),r=c.reject(e);return l(r,arguments[arguments.length-1]),r}},r=0,n=ee.length;r<n;r++){var o=ee[r];t[o]||(t[o]=e(o))}}();var f=function(r){Jt[n]&&console.info("Redefining LocalForage driver: "+n),Jt[n]=t,Zt[n]=r,e()};"_support"in t?t._support&&"function"===typeof t._support?t._support().then(f,r):f(!!t._support):f(!0)}catch(h){r(h)}}));return f(n,e,r),n},t.prototype.driver=function(){return this._driver||null},t.prototype.getDriver=function(t,e,r){var n=Jt[t]?c.resolve(Jt[t]):c.reject(new Error("Driver not found."));return f(n,e,r),n},t.prototype.getSerializer=function(t){var e=c.resolve(mt);return f(e,t),e},t.prototype.ready=function(t){var e=this,r=e._driverSet.then((function(){return null===e._ready&&(e._ready=e._initDriver()),e._ready}));return f(r,t,t),r},t.prototype.setDriver=function(t,e,r){var n=this;Xt(t)||(t=[t]);var o=this._getSupportedDrivers(t);function i(){n._config.driver=n.driver()}function a(t){return n._extend(t),i(),n._ready=n._initStorage(n._config),n._ready}function u(t){return function(){var e=0;function r(){for(;e<t.length;){var o=t[e];return e++,n._dbInfo=null,n._ready=null,n.getDriver(o).then(a).catch(r)}i();var u=new Error("No available storage method found.");return n._driverSet=c.reject(u),n._driverSet}return r()}}var s=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=s.then((function(){var t=o[0];return n._dbInfo=null,n._ready=null,n.getDriver(t).then((function(t){n._driver=t._driver,i(),n._wrapLibraryMethodsWithReady(),n._initDriver=u(o)}))})).catch((function(){i();var t=new Error("No available storage method found.");return n._driverSet=c.reject(t),n._driverSet})),f(this._driverSet,e,r),this._driverSet},t.prototype.supports=function(t){return!!Zt[t]},t.prototype._extend=function(t){ie(this,t)},t.prototype._getSupportedDrivers=function(t){for(var e=[],r=0,n=t.length;r<n;r++){var o=t[r];this.supports(o)&&e.push(o)}return e},t.prototype._wrapLibraryMethodsWithReady=function(){for(var t=0,e=re.length;t<e;t++)oe(this,re[t])},t.prototype.createInstance=function(e){return new t(e)},t}());e.exports=ae},{3:3}]},{},[4])(4)}).call(this,r(25))},function(t,e,r){"use strict";var n=r(6);function o(t){n.call(this,null==t?"canceled":t,n.ERR_CANCELED),this.name="CanceledError"}r(1).inherits(o,n,{__CANCEL__:!0}),t.exports=o},function(t,e,r){t.exports=function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",o="second",i="minute",a="hour",u="day",s="week",c="month",l="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:m,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),o=r%60;return(e<=0?"+":"-")+m(n,2,"0")+":"+m(o,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),o=e.clone().add(n,c),i=r-o<0,a=e.clone().add(n+(i?-1:1),c);return+(-(n+(r-o)/(i?o-a:a-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:c,y:f,w:s,d:u,D:h,h:a,m:i,s:o,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",w={};w[b]=v;var _=function(t){return t instanceof E},S=function(t,e,r){var n;if(!t)return b;if("string"==typeof t)w[t]&&(n=t),e&&(w[t]=e,n=t);else{var o=t.name;w[o]=t,n=o}return!r&&n&&(b=n),n||!r&&b},M=function(t,e){if(_(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new E(r)},x=g;x.l=S,x.i=_,x.w=function(t,e){return M(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function v(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=v.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var o=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],o,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return x},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(t,e){var r=M(t);return this.startOf(e)<=r&&r<=this.endOf(e)},m.isAfter=function(t,e){return M(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<M(t)},m.$g=function(t,e,r){return x.u(t)?this[e]:this.set(r,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var r=this,n=!!x.u(e)||e,l=x.p(t),d=function(t,e){var o=x.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?o:o.endOf(u)},p=function(t,e){return x.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},y=this.$W,v=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case f:return n?d(1,0):d(31,11);case c:return n?d(1,v):d(0,v+1);case s:var b=this.$locale().weekStart||0,w=(y<b?y+7:y)-b;return d(n?m-w:m+(6-w),v);case u:case h:return p(g+"Hours",0);case a:return p(g+"Minutes",1);case i:return p(g+"Seconds",2);case o:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var r,s=x.p(t),l="set"+(this.$u?"UTC":""),d=(r={},r[u]=l+"Date",r[h]=l+"Date",r[c]=l+"Month",r[f]=l+"FullYear",r[a]=l+"Hours",r[i]=l+"Minutes",r[o]=l+"Seconds",r[n]=l+"Milliseconds",r)[s],p=s===u?this.$D+(e-this.$W):e;if(s===c||s===f){var y=this.clone().set(h,1);y.$d[d](p),y.init(),this.$d=y.set(h,Math.min(this.$D,y.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[x.p(t)]()},m.add=function(n,l){var h,d=this;n=Number(n);var p=x.p(l),y=function(t){var e=M(d);return x.w(e.date(e.date()+Math.round(t*n)),d)};if(p===c)return this.set(c,this.$M+n);if(p===f)return this.set(f,this.$y+n);if(p===u)return y(1);if(p===s)return y(7);var v=(h={},h[i]=e,h[a]=r,h[o]=t,h)[p]||1,m=this.$d.getTime()+n*v;return x.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var n=t||"YYYY-MM-DDTHH:mm:ssZ",o=x.z(this),i=this.$H,a=this.$m,u=this.$M,s=r.weekdays,c=r.months,l=function(t,r,o,i){return t&&(t[r]||t(e,n))||o[r].substr(0,i)},f=function(t){return x.s(i%12||12,t,"0")},h=r.meridiem||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:x.s(u+1,2,"0"),MMM:l(r.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,s,2),ddd:l(r.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(i),HH:x.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,a,!0),A:h(i,a,!1),m:String(a),mm:x.s(a,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:o};return n.replace(y,(function(t,e){return e||p[t]||o.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,h,d){var p,y=x.p(h),v=M(n),m=(v.utcOffset()-this.utcOffset())*e,g=this-v,b=x.m(this,v);return b=(p={},p[f]=b/12,p[c]=b,p[l]=b/3,p[s]=(g-m)/6048e5,p[u]=(g-m)/864e5,p[a]=g/r,p[i]=g/e,p[o]=g/t,p)[y]||g,d?b:x.a(b)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return w[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=S(t,e,!0);return n&&(r.$L=n),r},m.clone=function(){return x.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},v}(),O=E.prototype;return M.prototype=O,[["$ms",n],["$s",o],["$m",i],["$H",a],["$W",u],["$M",c],["$y",f],["$D",h]].forEach((function(t){O[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),M.extend=function(t,e){return t.$i||(t(e,E,M),t.$i=!0),M},M.locale=S,M.isDayjs=_,M.unix=function(t){return M(1e3*t)},M.en=w[b],M.Ls=w,M.p={},M}()},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.min=e.max=e.mean=e.sum=e.distMergeBy=e.dist=e.sumByCol=void 0;var o=r(2);e.sumByCol=function(t,e,r){for(var n=0,o=0;o<t.length;o++)n+=t[o].stat[e][r];return n};function i(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e}e.dist=function(t,e){var r,i,a=function(t){return t[0]===t[1]?[t[0],t[1]+.1]:t}(e),u=(a[1]-a[0])/o.DEFAULT_BIN_NUM,s=new Array(o.DEFAULT_BIN_NUM+1).fill(0);try{for(var c=n(t),l=c.next();!l.done;l=c.next()){var f=l.value;s[Math.floor((f-a[0])/u)]++}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return s[o.DEFAULT_BIN_NUM-1]+=s[o.DEFAULT_BIN_NUM],s.slice(0,-1)},e.distMergeBy=function(t,e,r){for(var n=new Array(o.DEFAULT_BIN_NUM).fill(0),i=0;i<t.length;i++)for(var a=t[i].stat[e][r],u=0;u<n.length;u++)n[u]+=a[u];return n},e.sum=i,e.mean=function(t){return i(t)/t.length},e.max=function(t){for(var e=-1/0,r=0;r<t.length;r++)t[r]>e&&(e=t[r]);return e},e.min=function(t){for(var e=1/0,r=0;r<t.length;r++)t[r]<e&&(e=t[r]);return e}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function o(t,e){for(var r=e.length-1;r>=0;r--)if(e[r].semanticType===t&&!e[r].choosen)return e[r];return!1}function i(t){for(var e={},r={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},i=t.map((function(t){return n(n({},t),{choosen:!1})})),a=[["quantitative",["x","y","size","color","opacity","rows","columns","filter"]],["temporal",["x","y","size","opacity","filter"]],["ordinal",["x","y","color","opacity","rows","columns","size","filter","highFacets"]],["nominal",["x","y","color","rows","columns","shape","filter","hightFacets"]]],u=i.length,s=0;s<a.length&&u>0;s++)for(var c=a[s][0],l=a[s][1],f=0;f<l.length&&u>0;f++)for(var h=l[f],d=void 0;r[h]>0&&(d=o(c,i));)"highFacets"===h?("undefined"===typeof e[h]&&(e[h]=[]),e[h].push(d.key)):e[h]=d.key,r[h]--,u--,d.choosen=!0;return e}Object.defineProperty(e,"__esModule",{value:!0}),e.specification=e.encoding=e.geomTypes=void 0,e.geomTypes={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]},e.encoding=i,e.specification=function(t,r){var n=i(t.sort((function(t,e){return t.impurity-e.impurity}))),o=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),a=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(n.position&&2===n.position.length)if(o.has(n.position[0])&&a.has(n.position[1])||o.has(n.position[1])&&a.has(n.position[0])){var u=o.has(n.position[0])?0:1,s=n.position[u],c=n.position[(u+1)%2];n.position=[s,c];var l=t.find((function(t){return t.key===s})),f=l?l.features.unique:0;n.geomType=["interval","line","area"].filter((function(t){return f>=e.geomTypes[t][0]&&f<=e.geomTypes[t][1]})),"nominal"===l.semanticType&&(n.geomType=["interval"])}else n.geomType=["point","density"].filter((function(t){return r.length>=e.geomTypes[t][0]&&r.length<=e.geomTypes[t][1]}));else n.geomType=["point"];return{schema:n,dataView:r}}},function(t,e,r){"use strict";(function(e){var n=r(1),o=r(63),i=r(6),a=r(23),u=r(24),s={"Content-Type":"application/x-www-form-urlencoded"};function c(t,e){!n.isUndefined(t)&&n.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var l={transitional:a,adapter:function(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=r(26)),t}(),transformRequest:[function(t,e){if(o(e,"Accept"),o(e,"Content-Type"),n.isFormData(t)||n.isArrayBuffer(t)||n.isBuffer(t)||n.isStream(t)||n.isFile(t)||n.isBlob(t))return t;if(n.isArrayBufferView(t))return t.buffer;if(n.isURLSearchParams(t))return c(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r,i=n.isObject(t),a=e&&e["Content-Type"];if((r=n.isFileList(t))||i&&"multipart/form-data"===a){var s=this.env&&this.env.FormData;return u(r?{"files[]":t}:t,s&&new s)}return i||"application/json"===a?(c(e,"application/json"),function(t,e,r){if(n.isString(t))try{return(e||JSON.parse)(t),n.trim(t)}catch(o){if("SyntaxError"!==o.name)throw o}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||l.transitional,r=e&&e.silentJSONParsing,o=e&&e.forcedJSONParsing,a=!r&&"json"===this.responseType;if(a||o&&n.isString(t)&&t.length)try{return JSON.parse(t)}catch(u){if(a){if("SyntaxError"===u.name)throw i.from(u,i.ERR_BAD_RESPONSE,this,null,this.response);throw u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:r(75)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),n.forEach(["post","put","patch"],(function(t){l.headers[t]=n.merge(s)})),t.exports=l}).call(this,r(62))},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.getRelatedVertices=e.subspaceSearching=e.getMeaSetsBasedOnClusterGroups=e.getDimSetsBasedOnClusterGroups=e.getDimClusterGroups=e.getMeaCorrelationMatrix=e.getDimCorrelationMatrix=void 0;var a=r(0),u=r(5),s=r(4),c=r(2);function l(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var o=n+1;o<e.length;o++)r[n][o]=r[o][n]=(0,a.cramersV)(t,e[n],e[o])}return r}function f(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var o=n+1;o<e.length;o++){var i=(0,a.pearsonCC)(t,e[n],e[o]);r[o][n]=r[n][o]=i}}return r}function h(t,e,r,n){void 0===r&&(r=u.CramersVThreshold);var o=l(t,e);return s.Cluster.kruskal({matrix:o,measures:e,groupMaxSize:n||Math.round(e.length/4),threshold:r})}function d(t,e,r,u){var s,l,f=[],d=h(t,e,r);try{for(var p=n(d),y=p.next();!y.done;y=p.next()){var v=y.value,m=(0,a.getCombination)(v,1,u||c.CHANNEL.maxDimensionNumber);f.push.apply(f,i([],o(m),!1))}}catch(g){s={error:g}}finally{try{y&&!y.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}return f}e.getDimCorrelationMatrix=l,e.getMeaCorrelationMatrix=f,e.getDimClusterGroups=h,e.getDimSetsBasedOnClusterGroups=d,e.getMeaSetsBasedOnClusterGroups=function(t,e,r,n){void 0===n&&(n=3);var o=f(t,e);return s.Cluster.kruskal({matrix:o,measures:e,groupMaxSize:n||Math.round(e.length/3),threshold:r||u.PearsonCorrelation.strong})},e.subspaceSearching=function(t,e,r){return void 0===r&&(r=!0),r?d(t,e):(0,a.getCombination)(e)},e.getRelatedVertices=function(t,e,r,n){for(var o=e.map((function(t){return r.includes(t)})),i=[],a=[],u=0;u<t.length;u++)if(o[u])for(var s=0;s<t[u].length;s++)o[s]||i.push([t[u][s],[u,s]]);for(i.sort((function(t,e){return e[0]-t[0]})),u=0;u<i.length;u++){var c=i[u][1][1];o[c]||(o[c]=!0,a.push({field:e[c],corValue:i[u][0]}))}return a.slice(0,n||a.length)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUniformDistribution=void 0;var n=r(3);e.isUniformDistribution=function(t,e){return(0,n.memberCount)(t,e).every((function(t){return 1===t[1]}))}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.groupFields=e.getAllFieldsEntropy=e.getFloatFieldEntropy=e.getFieldEntropy=e.getAllFieldsDistribution=e.getFieldDistribution=e.getAllFieldTypes=e.getFieldType=void 0;var o=r(3),i=r(0),a=r(16),u=r(2),s=u.BIN_NUM_FOR_ANALYTIC;function c(t,e){return(0,o.isFieldTime)(t,e)?"temporal":(0,o.isFieldContinous)(t,e)?(0,o.memberCount)(t,e).length>s?"quantitative":"ordinal":((0,o.isFieldCategory)(t,e),"nominal")}function l(t,e){return(0,o.memberCount)(t,e).map((function(t){return{memberName:t[0],count:t[1]}}))}function f(t,e){var r=(0,o.memberCount)(t,e),n=r.map((function(t){return t[1]})),a=(0,i.normalize)(n);return{fieldName:e,entropy:(0,i.entropy)(a),maxEntropy:Math.log2(r.length)}}e.getFieldType=c,e.getAllFieldTypes=function(t,e){var r,o,i=[];try{for(var a=n(e),u=a.next();!u.done;u=a.next()){var s=u.value;i.push({name:s,type:c(t,s)})}}catch(l){r={error:l}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},e.getFieldDistribution=l,e.getAllFieldsDistribution=function(t,e){var r,o,i=[];try{for(var a=n(e),u=a.next();!u.done;u=a.next()){var s=u.value;i.push({fieldName:s,distribution:l(t,s)})}}catch(c){r={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},e.getFieldEntropy=f,e.getFloatFieldEntropy=function(t,e){for(var r=-1/0,n=1/0,o=0;o<t.length;o++)r=Math.max(r,t[o][e]),n=Math.min(n,t[o][e]);var a=(r-n)/u.BIN_NUM_FOR_ANALYTIC,s=new Array(u.BIN_NUM_FOR_ANALYTIC+1).fill(0);for(o=0;o<t.length;o++){var c=t[o][e];s[Math.floor((c-n)/a)]++}s[u.BIN_NUM_FOR_ANALYTIC-1]+=s[u.BIN_NUM_FOR_ANALYTIC];var l=(0,i.normalize)(s.slice(0,u.BIN_NUM_FOR_ANALYTIC));return{fieldName:e,entropy:(0,i.entropy)(l),maxEntropy:Math.log2(u.BIN_NUM_FOR_ANALYTIC)}},e.getAllFieldsEntropy=function(t,e){var r,o,i=[];try{for(var a=n(e),u=a.next();!u.done;u=a.next()){var s=u.value;i.push(f(t,s))}}catch(c){r={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}return i},e.groupFields=function(t,e){var r,i,u=(0,o.deepcopy)(t),c=[];try{for(var l=n(e),f=l.next();!f.done;f=l.next()){var h=f.value,d="".concat(h.name,"(group)");"quantitative"===h.type&&(0,o.memberCount)(t,h.name).length>2*s?(0,a.isUniformDistribution)(t,h.name)||(u=(0,o.groupContinousField)({dataSource:u,field:h.name,newField:d,groupNumber:8}),c.push({name:d,type:"ordinal"})):("ordinal"===h.type||"nominal"===h.type)&&(0,o.memberCount)(t,h.name).length>s&&((0,a.isUniformDistribution)(t,h.name)||(u=(0,o.groupCategoryField)({dataSource:u,field:h.name,newField:d,groupNumber:8}),c.push({name:d,type:h.type})))}}catch(p){r={error:p}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return{groupedData:u,fields:e,newFields:c}}},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeBy=e.gini=e.entropy=e.normalize=e.getCombination=e.mapPositive=e.linearMapPositive=void 0,e.linearMapPositive=function(t){var e=Math.min.apply(Math,o([],n(t),!1));return t.map((function(t){return t-e+1}))},e.mapPositive=function(t){return t.map((function(t){return Math.abs(t)})).filter((function(t){return 0!==t}))},e.getCombination=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=t.length);for(var i=[],a=function e(r,a,u){a.length!==u?r>=t.length||(e(r+1,o(o([],n(a),!1),[t[r]],!1),u),e(r+1,a,u)):i.push(o([],n(a),!1))},u=e;u<=r;u++)a(0,[],u);return i},e.normalize=function(t){var e,r,n=0;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var u=a.value;n+=u}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return t.map((function(t){return t/n}))};e.entropy=function(t){var e,r,n=0;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var u=a.value;n+=u*Math.log2(u)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return-n};e.gini=function(t){var e,r,n=0;try{for(var o=i(t),a=o.next();!a.done;a=o.next()){var u=a.value;n+=u*(1-u)}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},e.getRangeBy=function(t,e){var r,n,o=-1/0,a=1/0;try{for(var u=i(t),s=u.next();!s.done;s=u.next()){var c=s.value;o=Math.max(c[e],o),a=Math.min(c[e],a)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return[a,o]}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),o=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.KNN=void 0;var i=function(t){function e(e){var r=t.call(this,e)||this,n=e.K;return r.K=n,r.normalize(),r}return n(e,t),e.prototype.getNeighbors=function(t,e,r){void 0===r&&(r=[]),r.length!==e.length&&e.forEach((function(t){r.push(1)}));for(var n=[],o=[],i=[],a=[],u=new Set(this.dimensions),s=0;s<e.length;s++)u.has(e[s])?(n.push(e[s]),i.push(r[s])):(o.push(e[s]),a.push(r[s]));var c=[];this.normalizedDataSource.forEach((function(e,r){var u=0;o.forEach((function(r,n){u+=Math.pow((e[r]-t[r])*a[n],2)})),n.forEach((function(r,n){e[r]!==t[r]&&(u+=Math.pow(i[n],2))})),c.push({dis:u,index:r})})),c.sort((function(t,e){return t.dis-e.dis}));var l=[],f=Math.min(this.K,c.length);for(s=0;s<f;s++)l.push(this.normalizedDataSource[c[s].index]);return l},e.prototype.getTargetValue=function(t,e){var r=this,n=[];return t.forEach((function(t){var i,a,u=new Map;e.forEach((function(e){u.has(e[t])||u.set(e[t],0),u.set(e[t],u.get(e[t])+1)}));var s=0,c=0;try{for(var l=o(u),f=l.next();!f.done;f=l.next()){var h=f.value;h[1]>s&&(s=h[1],c=h[0])}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}var d=r.dimensions.indexOf(t);d>-1?n.push(r.valueParser[d][c]):n.push(c)})),n},e}(function(){function t(t){var e=t.dataSource,r=t.dimensions,n=t.measures;this.dataSource=e,this.dimensions=r,this.measures=n}return t.prototype.normalize=function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var o=(e[r]||"others").toString();t.valueSets[n].has(o)||(t.valueSets[n].set(o,t.valueSets[n].size),t.valueParser[n].push(o))})),t.measures.forEach((function(r,n){var o=e[r];"number"===typeof o&&(t.ranges[n][0]=Math.min(t.ranges[n][0],o),t.ranges[n][1]=Math.max(t.ranges[n][1],o))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource},t.prototype.normalizeRecord=function(t){var e=this,r={};return this.measures.forEach((function(n,o){r[n]=(t[n]-e.ranges[o][0])/(e.ranges[o][1]-e.ranges[o][0])})),this.dimensions.forEach((function(n,o){var i=(t[n]||"others").toString();r[n]=e.valueSets[o].get(i)})),r},t}());e.KNN=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniformSampling=e.reservoirSampling=void 0,e.reservoirSampling=function(t,e){if(void 0===e&&(e=500),t.length<=e)return t;for(var r=t.slice(0,e),n=t.length,o=e+1;o<n;o++){var i=Math.round(Math.random()*o);i<e&&(r[i]=t[o])}return r},e.uniformSampling=function(t,e){for(var r=function(t,e){if(0===t)return[];for(var r=2147483647,n=[e],o=1;o<t;o++)n.push((1103515245*n[o-1]+12345)%r);return n.map((function(t){return t/r}))}(e,2147483647*Math.random()),n=[],o=0;o<e;o++){var i=Math.floor(r[o]*e)%e;n.push(t[i])}return n}},function(t,e,r){"use strict";t.exports=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}}},function(t,e,r){"use strict";var n=r(1);function o(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,r){if(!e)return t;var i;if(r)i=r(e);else if(n.isURLSearchParams(e))i=e.toString();else{var a=[];n.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(o(e)+"="+o(t))})))})),i=a.join("&")}if(i){var u=t.indexOf("#");-1!==u&&(t=t.slice(0,u)),t+=(-1===t.indexOf("?")?"?":"&")+i}return t}},function(t,e,r){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},function(t,e,r){"use strict";(function(e){var n=r(1);t.exports=function(t,r){r=r||new FormData;var o=[];function i(t){return null===t?"":n.isDate(t)?t.toISOString():n.isArrayBuffer(t)||n.isTypedArray(t)?"function"===typeof Blob?new Blob([t]):e.from(t):t}return function t(e,a){if(n.isPlainObject(e)||n.isArray(e)){if(-1!==o.indexOf(e))throw Error("Circular reference detected in "+a);o.push(e),n.forEach(e,(function(e,o){if(!n.isUndefined(e)){var u,s=a?a+"."+o:o;if(e&&!a&&"object"===typeof e)if(n.endsWith(o,"{}"))e=JSON.stringify(e);else if(n.endsWith(o,"[]")&&(u=n.toArray(e)))return void u.forEach((function(t){!n.isUndefined(t)&&r.append(s,i(t))}));t(e,s)}})),o.pop()}else r.append(a,i(e))}(t),r}}).call(this,r(64).Buffer)},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(n){"object"===typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";var n=r(1),o=r(68),i=r(69),a=r(22),u=r(27),s=r(72),c=r(73),l=r(23),f=r(6),h=r(10),d=r(74);t.exports=function(t){return new Promise((function(e,r){var p,y=t.data,v=t.headers,m=t.responseType;function g(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}n.isFormData(y)&&n.isStandardBrowserEnv()&&delete v["Content-Type"];var b=new XMLHttpRequest;if(t.auth){var w=t.auth.username||"",_=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";v.Authorization="Basic "+btoa(w+":"+_)}var S=u(t.baseURL,t.url);function M(){if(b){var n="getAllResponseHeaders"in b?s(b.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:n,config:t,request:b};o((function(t){e(t),g()}),(function(t){r(t),g()}),i),b=null}}if(b.open(t.method.toUpperCase(),a(S,t.params,t.paramsSerializer),!0),b.timeout=t.timeout,"onloadend"in b?b.onloadend=M:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(M)},b.onabort=function(){b&&(r(new f("Request aborted",f.ECONNABORTED,t,b)),b=null)},b.onerror=function(){r(new f("Network Error",f.ERR_NETWORK,t,b,b)),b=null},b.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",n=t.transitional||l;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new f(e,n.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,t,b)),b=null},n.isStandardBrowserEnv()){var x=(t.withCredentials||c(S))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;x&&(v[t.xsrfHeaderName]=x)}"setRequestHeader"in b&&n.forEach(v,(function(t,e){"undefined"===typeof y&&"content-type"===e.toLowerCase()?delete v[e]:b.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),m&&"json"!==m&&(b.responseType=t.responseType),"function"===typeof t.onDownloadProgress&&b.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){b&&(r(!t||t&&t.type?new h:t),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),y||(y=null);var E=d(S);E&&-1===["http","https","file"].indexOf(E)?r(new f("Unsupported protocol "+E+":",f.ERR_BAD_REQUEST,t)):b.send(y)}))}},function(t,e,r){"use strict";var n=r(70),o=r(71);t.exports=function(t,e){return t&&!n(e)?o(t,e):e}},function(t,e,r){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e){e=e||{};var r={};function o(t,e){return n.isPlainObject(t)&&n.isPlainObject(e)?n.merge(t,e):n.isPlainObject(e)?n.merge({},e):n.isArray(e)?e.slice():e}function i(r){return n.isUndefined(e[r])?n.isUndefined(t[r])?void 0:o(void 0,t[r]):o(t[r],e[r])}function a(t){if(!n.isUndefined(e[t]))return o(void 0,e[t])}function u(r){return n.isUndefined(e[r])?n.isUndefined(t[r])?void 0:o(void 0,t[r]):o(void 0,e[r])}function s(r){return r in e?o(t[r],e[r]):r in t?o(void 0,t[r]):void 0}var c={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return n.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||i,o=e(t);n.isUndefined(o)&&e!==s||(r[t]=o)})),r}},function(t,e){t.exports={version:"0.27.2"}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},u=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Cube=void 0;var s=r(8),c=r(0),l=r(80),f=r(94),h="_join_",d=["max","min","sum","mean","count","dist"],p="_cuboids",y=function(){function t(t){var e=this;this.storageName=p,this.storageManageMode=s.ICubeStorageManageMode.LocalCache,this.cuboidInMemorySizeLimit=1e4,this.recordPerformace=!0,this.cuboidOrderLimit=4;var r=t.dimensions,n=t.measures,o=t.dataSource,i=t.ops,a=void 0===i?d:i,u=t.storageName,c=void 0===u?p:u,l=t.cubeStorageManageMode,h=void 0===l?s.ICubeStorageManageMode.LocalCache:l,y=t.cuboidOrderLimit,v=void 0===y?4:y;this.dimensions=r,this.measures=n,this.dataSource=o,this.ops=a,this.cuboidOrderLimit=v,this.dimOrder=new Map,this._performance=new Map,r.forEach((function(t,r){e.dimOrder.set(t,r)})),this.cuboids=new Map,this.ranges=new Map,this.storageName=c,this.storageManageMode=h,"undefined"===typeof t.storage?(this.storage=new f.VIStorage(c),this.storage.init()):this.storage=t.storage}return t.prototype.sortDimension=function(t){var e=this,r=a([],i(t),!1);return r.sort((function(t,r){return e.dimOrder.get(t)-e.dimOrder.get(r)})),r},t.prototype.getCuboidKey=function(t){return this.sortDimension(t).join(h)},t.prototype.getCuboid=function(t){return n(this,void 0,void 0,(function(){var e,r,n,i,a;return o(this,(function(o){switch(o.label){case 0:return this.recordPerformace?(e=performance.now(),[4,this._getCuboid(t)]):[3,2];case 1:return r=o.sent(),n=performance.now(),i=this.sortDimension(t),a=i.join(h),this._performance.has(a)||this._performance.set(a,[]),this._performance.get(a).push(n-e),[2,r];case 2:return[2,this._getCuboid(t)]}}))}))},t.prototype.showPerformance=function(){return a([],i(this._performance.entries()),!1)},t.prototype._getCuboid=function(t){return n(this,void 0,void 0,(function(){var e,r,n,s,c,f,d,p,y,v,m,g,b,w,_,S,M,x,E,O,T,D,I;return o(this,(function(o){switch(o.label){case 0:if(e=this.sortDimension(t),r=e.join(h),this.cuboids.has(r))return[2,this.cuboids.get(r)];n=new Set(t),s=[],c=[];try{for(f=u(this.dimensions),d=f.next();!d.done;d=f.next())p=d.value,n.has(p)||(y=this.sortDimension(a(a([],i(e),!1),[p],!1)),v=y.join(h),this.cuboids.has(v)?s.push(v):c.push(v))}catch(A){O={error:A}}finally{try{d&&!d.done&&(T=f.return)&&T.call(f)}finally{if(O)throw O.error}}if(m=1/0,g=this.dimensions.join(h),s.length>0)try{for(b=u(s),w=b.next();!w.done;w=b.next())_=w.value,(S=this.cuboids.get(_)).size<m&&(m=S.size,g=_)}catch(C){D={error:C}}finally{try{w&&!w.done&&(I=b.return)&&I.call(b)}finally{if(D)throw D.error}}else c.length>0&&(g=c[0]);return[4,this.getCuboid(g.split(h))];case 1:return M=o.sent(),x=this.getCuboidStorageMode(M.size),[4,(E=new l.Cuboid({dimensions:t,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:x})).computeFromCuboid(M)];case 2:return o.sent(),this.cuboids.set(r,E),[2,E]}}))}))},t.prototype.getNearstExistParent=function(t){return n(this,void 0,void 0,(function(){var e,r,n,s,c,l,f,h,d;return o(this,(function(o){e=new Set(t),r=null,n=[];try{for(s=u(this.dimensions),c=s.next();!c.done;c=s.next())if(l=c.value,!e.has(l)&&(n=a(a([],i(t),!1),[l],!1),f=this.getCuboidKey(n),this.cuboids.has(f))){r=n;break}}catch(p){h={error:p}}finally{try{c&&!c.done&&(d=s.return)&&d.call(s)}finally{if(h)throw h.error}}return null!==r?[2,this.getCuboid(r)]:0!==n.length?[2,this.getNearstExistParent(n)]:[2,this.getBaseCuboid()]}))}))},t.prototype.computeRanges=function(){var t,e,r=this.measures,n=this.dataSource;try{for(var o=u(r),i=o.next();!i.done;i=o.next()){var a=i.value;this.ranges.set(a,(0,c.getRangeBy)(n,a))}}catch(s){t={error:s}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.buildCuboidOnCluster=function(t){return n(this,void 0,void 0,(function(){var e,r,n,i;return o(this,(function(o){switch(o.label){case 0:return e=this.sortDimension(this.dimensions).join(h),r=this.cuboids.get(e),n=this.getCuboidStorageMode(r.statSize),[4,(i=new l.Cuboid({dimensions:t,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:n})).computeFromCuboid(r)];case 1:return o.sent(),this.cuboids.set(t.join(h),i),[2]}}))}))},t.prototype.getCuboidStorageMode=function(t){return this.storageManageMode===s.ICubeStorageManageMode.LocalCache?s.IStorageMode.LocalCache:this.storageManageMode===s.ICubeStorageManageMode.LocalDisk?s.IStorageMode.LocalDisk:t<=this.cuboidInMemorySizeLimit?s.IStorageMode.LocalCache:s.IStorageMode.LocalDisk},t.prototype.buildBaseCuboid=function(){return n(this,void 0,void 0,(function(){var t,e;return o(this,(function(r){switch(r.label){case 0:return t=this.getCuboidStorageMode(this.dataSource.length),this.computeRanges(),[4,(e=new l.Cuboid({dimensions:this.dimensions,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:t})).setData(this.dataSource)];case 1:return r.sent(),this.cuboids.set(this.dimensions.join(h),e),[2,e]}}))}))},t.prototype.loadCuboid=function(t,e){return n(this,void 0,void 0,(function(){var r;return o(this,(function(n){switch(n.label){case 0:return[4,(r=new l.Cuboid({dimensions:t.split(h),measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage})).setState(e)];case 1:return n.sent(),this.cuboids.set(t,r),[2]}}))}))},t.prototype.exportCuboids=function(){return{}},t.prototype.getBaseCuboid=function(){return n(this,void 0,void 0,(function(){var t;return o(this,(function(e){return t=this.dimensions.join(h),this.cuboids.has(t)?[2,this.cuboids.get(t)]:[2,this.buildBaseCuboid()]}))}))},Object.defineProperty(t.prototype,"cuboidSize",{get:function(){return this.cuboids.size},enumerable:!1,configurable:!0}),t}();e.Cube=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataGraph=void 0;var n=r(0),o=r(15),i=r(5),a=r(3),u=function(){function t(t,e){this.DIMENSION_CORRELATION_THRESHOLD=i.CramersVThreshold,this.MEASURE_CORRELATION_THRESHOLD=i.PearsonCorrelation.strong,this.dimensions=t,this.measures=e}return t.prototype.computeGraph=function(t,e,r){for(var n=e.map((function(t){return e.map((function(){return 0}))})),o=0;o<e.length;o++){n[o][o]=1;for(var i=o+1;i<e.length;i++)n[o][i]=n[i][o]=r(t,e[o],e[i])}return n},t.prototype.computeDGraph=function(t,e){return void 0===e&&(e=n.cramersV),this.DG=this.computeGraph(t,this.dimensions,e),this.DG},t.prototype.computeMGraph=function(t,e){return void 0===e&&(e=n.pearsonCC),this.MG=this.computeGraph(t,this.measures,e),this.MG},t.prototype.clusterDGraph=function(t,e){for(var r=this.dimensions,n=this.DIMENSION_CORRELATION_THRESHOLD,o=e||n,i=this.DG,u=[],s=0;s<r.length;s++){for(var c=[],l=0;l<r.length;l++)i[s][l]>=o&&c.push(r[l]);u.push(c)}var f=[],h=function(t){for(var e=[],r=!0,n=0;n<f.length;n++)(0,a.subset2theOther)(u[t],f[n])&&(u[t].length>f[n].length?e.push(n):r=!1);e.length>0&&(f=f.filter((function(t,r){return!e.includes(r)}))),r&&f.push(u[t])};for(s=0;s<u.length;s++)h(s);return this.DClusters=f,f},t.prototype.clusterMGraph=function(t,e){var r=this.measures,n=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=(0,o.getMeaSetsBasedOnClusterGroups)(t,r,e||n),this.MClusters},t}();e.DataGraph=u},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.InsightWorkerCollection=void 0;var i=r(34),a=r(35),u=r(8),s=r(84),c=function(){function t(){this.workers=new Map}return t.prototype.register=function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])},t.prototype.enable=function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)},t.prototype.each=function(t){var e,r;try{for(var i=n(this.workers),a=i.next();!a.done;a=i.next()){var u=o(a.value,2),s=u[0],c=u[1];c[0]&&t(c[1],s)}}catch(l){e={error:l}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.init=function(e){void 0===e&&(e={withDefaultIWorkers:!0});var r=e.withDefaultIWorkers,n=void 0===r||r;return t.colletion||(t.colletion=new t,n&&(t.colletion.register(u.DefaultIWorker.outlier,i.IForestOutlierWorker),t.colletion.register(u.DefaultIWorker.cluster,s.KNNClusterWorker),t.colletion.register(u.DefaultIWorker.trend,a.LRTrendWorker))),Object.values(u.DefaultIWorker).forEach((function(e){t.colletion.enable(e,n)})),t.colletion},t}();e.InsightWorkerCollection=c},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.IForestOutlierWorker=void 0;var i=r(4);e.IForestOutlierWorker=function(t,e,r){return n(void 0,void 0,void 0,(function(){var n,a,u,s,c,l;return o(this,(function(o){for((n=new i.Outier.IsolationForest([],r,t)).buildIsolationForest(),a=n.estimateOutierScore(),u=0,s=0,c=0;c<a.length;c++)a[c]>s&&(s=a[c],u=c);return l={},e.concat(r).forEach((function(e){l[e]=t[u][e]})),[2,{dimensions:e,measures:r,significance:s,description:l}]}))}))}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},u=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.LRTrendWorker=void 0;var s=r(0);e.LRTrendWorker=function(t,e,r){return n(void 0,void 0,void 0,(function(){var n,c,l,f,h,d,p,y;return o(this,(function(o){if(1!==e.length)return[2,null];(n=a([],i(t),!1)).sort((function(t,r){return t[e[0]]>r[e[0]]?1:t[e[0]]===r[e[0]]?0:-1})),c=0;try{for(l=u(r),f=l.next();!f.done;f=l.next())h=f.value,(d=new s.oneDLinearRegression(n,e[0],h)).normalizeDimensions(e),c+=d.significance()}catch(v){p={error:v}}finally{try{f&&!f.done&&(y=l.return)&&y.call(l)}finally{if(p)throw p.error}}return c/=r.length,[2,{dimensions:e,measures:r,significance:c}]}))}))}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.GroupIntention=void 0;var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getTargetValuePercent=function(t,e,r){var n=[];return t.forEach((function(t,o){var i=0;r.forEach((function(r){r[t]===e[t]&&i++})),n.push(i/r.length)})),n},e.prototype.getSignificance=function(t,e){var r=this,n=0;return this.normalizedDataSource.forEach((function(o){var i=r.getNeighbors(o,t),a=r.getTargetValuePercent(e,o,i),u=0;a.forEach((function(t){u+=t})),u/=a.length,n+=u})),n/=this.normalizedDataSource.length},e}(r(19).KNN);e.GroupIntention=o},function(t,e,r){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,r=/\d\d/,n=/\d\d?/,o=/\d*[^\s\d-_:/()]+/,i={},a=function(t){return(t=+t)+(t>68?1900:2e3)},u=function(t){return function(e){this[t]=+e}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),r=60*e[1]+(+e[2]||0);return 0===r?0:"+"===e[0]?-r:r}(t)}],c=function(t){var e=i[t];return e&&(e.indexOf?e:e.s.concat(e.f))},l=function(t,e){var r,n=i.meridiem;if(n){for(var o=1;o<=24;o+=1)if(t.indexOf(n(o,0,e))>-1){r=o>12;break}}else r=t===(e?"pm":"PM");return r},f={A:[o,function(t){this.afternoon=l(t,!1)}],a:[o,function(t){this.afternoon=l(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[r,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[n,u("seconds")],ss:[n,u("seconds")],m:[n,u("minutes")],mm:[n,u("minutes")],H:[n,u("hours")],h:[n,u("hours")],HH:[n,u("hours")],hh:[n,u("hours")],D:[n,u("day")],DD:[r,u("day")],Do:[o,function(t){var e=i.ordinal,r=t.match(/\d+/);if(this.day=r[0],e)for(var n=1;n<=31;n+=1)e(n).replace(/\[|\]/g,"")===t&&(this.day=n)}],M:[n,u("month")],MM:[r,u("month")],MMM:[o,function(t){var e=c("months"),r=(c("monthsShort")||e.map((function(t){return t.substr(0,3)}))).indexOf(t)+1;if(r<1)throw new Error;this.month=r%12||r}],MMMM:[o,function(t){var e=c("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,u("year")],YY:[r,function(t){this.year=a(t)}],YYYY:[/\d{4}/,u("year")],Z:s,ZZ:s};function h(r){var n,o;n=r,o=i&&i.formats;for(var a=(r=n.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,r,n){var i=n&&n.toUpperCase();return r||o[n]||t[n]||o[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,r){return e||r.slice(1)}))}))).match(e),u=a.length,s=0;s<u;s+=1){var c=a[s],l=f[c],h=l&&l[0],d=l&&l[1];a[s]=d?{regex:h,parser:d}:c.replace(/^\[|\]$/g,"")}return function(t){for(var e={},r=0,n=0;r<u;r+=1){var o=a[r];if("string"==typeof o)n+=o.length;else{var i=o.regex,s=o.parser,c=t.substr(n),l=i.exec(c)[0];s.call(e,l),t=t.replace(l,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var r=t.hours;e?r<12&&(t.hours+=12):12===r&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,r){r.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var n=e.prototype,o=n.parse;n.parse=function(t){var e=t.date,n=t.utc,a=t.args;this.$u=n;var u=a[1];if("string"==typeof u){var s=!0===a[2],c=!0===a[3],l=s||c,f=a[2];c&&(f=a[2]),i=this.$locale(),!s&&f&&(i=r.Ls[f]),this.$d=function(t,e,r){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var n=h(e)(t),o=n.year,i=n.month,a=n.day,u=n.hours,s=n.minutes,c=n.seconds,l=n.milliseconds,f=n.zone,d=new Date,p=a||(o||i?1:d.getDate()),y=o||d.getFullYear(),v=0;o&&!i||(v=i>0?i-1:d.getMonth());var m=u||0,g=s||0,b=c||0,w=l||0;return f?new Date(Date.UTC(y,v,p,m,g,b,w+60*f.offset*1e3)):r?new Date(Date.UTC(y,v,p,m,g,b,w)):new Date(y,v,p,m,g,b,w)}catch(t){return new Date("")}}(e,u,n),this.init(),f&&!0!==f&&(this.$L=this.locale(f).$L),l&&e!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var d=u.length,p=1;p<=d;p+=1){a[1]=u[p-1];var y=r.apply(this,a);if(y.isValid()){this.$d=y.$d,this.$L=y.$L,this.init();break}p===d&&(this.$d=new Date(""))}else o.call(this,t)}}}()},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.isFieldUnique=e.DKL=e.JOIN_SYMBOL=e.isFieldNumeric=e.isFieldTime=e.isFieldContinous=e.isFieldCategory=e.aggregate=e.groupContinousField=e.groupCategoryField=e.memberCount=e.copyData=e.deepcopy=e.subset2theOther=void 0;e.JOIN_SYMBOL="_";e.deepcopy=function(t){return JSON.parse(JSON.stringify(t))},e.copyData=function(t){return t.map((function(t){return n({},t)}))},e.isFieldCategory=function(t,e){return t.every((function(t){return"string"===typeof t[e]||"undefined"===typeof t[e]||null===t[e]}))},e.isFieldContinous=function(t,e){return t.every((function(t){return!isNaN(+t[e])||"undefined"===typeof t[e]||null===t[e]}))},e.isFieldNumeric=function(t,e){return t.every((function(t){return!isNaN(t[e])||"undefined"===typeof t[e]||null===t[e]}))};var u=[/^[0-9]{2,4}[-/][0-9]{1,2}([-/][0-9]{1,2})?$/,/^[0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4}$/,/^[1-2][0-9]{3}[0-9]{2}[0-9]{2}$/,/^[0-9]{2,4}[-/][0-9]{1,2}[-/][0-9]{1,2} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/];function s(t,e){var r,n,u=new Map;try{for(var s=o(t),c=s.next();!c.done;c=s.next()){var l=c.value[e];u.has(l)||u.set(l,0),u.set(l,u.get(l)+1)}}catch(f){r={error:f}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return a([],i(u.entries()),!1)}e.isFieldTime=function(t,e){return t.every((function(t){return!isNaN(Number(t[e]))&&Number(t[e])>=1800&&Number(t[e])<=2200||("string"===typeof t[e]&&u.some((function(r){return r.test(t[e])}))||"undefined"===typeof t[e]||null===t[e])}))},e.aggregate=function(t){var e,r,u,s,c,l,f,h,d,p=t.dataSource,y=t.fields,v=t.bys,m=(t.method,[]);try{for(var g=o(v),b=g.next();!b.done;b=g.next()){var w=b.value,_=new Map,S=function(t){var e=JSON.stringify(y.map((function(e){return t[e]})));_.has(e)||_.set(e,0),_.set(e,_.get(e)+t[w])};try{for(var M=(u=void 0,o(p)),x=M.next();!x.done;x=M.next()){S(k=x.value)}}catch(F){u={error:F}}finally{try{x&&!x.done&&(s=M.return)&&s.call(M)}finally{if(u)throw u.error}}try{for(var E=(c=void 0,o(_)),O=E.next();!O.done;O=E.next()){for(var T=i(O.value,2),D=T[0],I=T[1],A=((f={index:D})[w]=I,f),C=JSON.parse(D),N=0;N<y.length;N++)A[y[N]]=C[N];m.push(A)}}catch(L){c={error:L}}finally{try{O&&!O.done&&(l=E.return)&&l.call(E)}finally{if(c)throw c.error}}}}catch(B){e={error:B}}finally{try{b&&!b.done&&(r=g.return)&&r.call(g)}finally{if(e)throw e.error}}var R=new Map;try{for(var j=o(m),P=j.next();!P.done;P=j.next()){var k=P.value;R.has(k.index)||R.set(k.index,{}),R.set(k.index,n(n({},R.get(k.index)),k))}}catch(U){h={error:U}}finally{try{P&&!P.done&&(d=j.return)&&d.call(j)}finally{if(h)throw h.error}}return a([],i(R.values()),!1)},e.memberCount=s,e.groupContinousField=function(t){for(var e=t.dataSource,r=t.field,n=t.newField,o=void 0===n?"".concat(r,"(con-group)"):n,u=t.groupNumber,s=e.map((function(t){return t[r]})),c=Math.max.apply(Math,a([],i(s),!1)),l=Math.min.apply(Math,a([],i(s),!1)),f=(c-l)/u,h=[],d=0;d<u;d++){var p=l+d*f,y=l+(d+1)*f;h.push([p,y])}h[0][0]=-1/0,h[h.length-1][1]=1/0;var v=Math.max(1,Math.log10(Math.abs(l))-Math.log10(f))+1,m=function(t){var n=e[t],i=h.findIndex((function(t){return t[0]<=n[r]&&n[r]<t[1]})),a=h[i];n[o]="undefined"!==typeof a?"".concat(i+1,":[").concat(Number(a[0].toPrecision(v)),", ").concat(Number(a[1].toPrecision(v)),")"):"null"};for(d=0;d<e.length;d++)m(d);return e},e.groupCategoryField=function(t){var e,r,i=t.dataSource,a=t.field,u=t.newField,c=void 0===u?"".concat(a,"(cat-group)"):u,l=t.groupNumber,f=s(i,a);f.sort((function(t,e){return e[1]-t[1]}));var h=f.map((function(t){return t[1]}));l=f.length;for(var d=h.length-2;d>=0;d--)h[d]=h[d+1]+h[d];for(d=0;d<f.length-2;d++)if(5*f[d][1]>=h[d+1]&&f[d+1][1]/5<h[d+2]){l=d+2;break}if(l===f.length)return i.map((function(t){var e;return n(n({},t),((e={})[c]=t[a],e))}));var p=new Set;for(d=l-1;d<f.length;d++)p.add(f[d][0]);try{for(var y=o(i),v=y.next();!v.done;v=y.next()){var m=v.value;p.has(m[a])?m[c]="others":m[c]=m[a]}}catch(g){e={error:g}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}return i},e.DKL=function(t,e){for(var r=0,n=Math.max(t.length,e.length),o=0;o<n;o++){var i=t[o]||0,a=e[o]||0;r+=i*Math.log2(i/a)}return r},e.isFieldUnique=function(t,e){for(var r=new Set,n=0,o=t.length,i=0;i<o;i++)void 0!==t[i][e]&&null!==t[i][e]&&""!==t[i][e]&&(n++,r.add(t[i][e]));return r.size===n},e.subset2theOther=function(t,e){var r,n,i=t.length>e.length?e:t,a=t.length>e.length?new Set(t):new Set(e);try{for(var u=o(i),s=u.next();!s.done;s=u.next()){var c=s.value;if(!a.has(c))return!1}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!0}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=r(3);var i={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function a(t,e){for(var r=e.length-1;r>=0;r--)if(e[r].type===t&&!e[r].choosen)return e[r];return!1}e.default=function(t,e,r,u){var s=function(t){for(var e={},r={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},o=t.map((function(t){return n(n({},t),{choosen:!1})})),i=[["quantitative",["position","size","color","highFacets","opacity","page","filter"]],["temporal",["position","page","filter"]],["ordinal",["position","color","opacity","facets","size","page","filter","highFacets"]],["nominal",["position","color","facets","shape","page","filter","hightFacets"]]],u=o.length,s=0;s<i.length&&u>0;s++)for(var c=i[s][0],l=i[s][1],f=0;f<l.length&&u>0;f++)for(var h=l[f],d=void 0;r[h]>0&&(d=a(c,o));)"undefined"===typeof e[h]&&(e[h]=[]),e[h].push(d.name),r[h]--,u--,d.choosen=!0;return e}(t.sort((function(t,e){return t[1]-e[1]})).map((function(t){return t[3]})));if(s.position&&2===s.position.length)if(r.includes(s.position[0])&&u.includes(s.position[1])||r.includes(s.position[1])&&u.includes(s.position[0])){var c=r.includes(s.position[0])?0:1,l=s.position[c],f=s.position[(c+1)%2];s.position=[l,f];var h=(0,o.memberCount)(e,l);s.geomType=["interval","line","area"].filter((function(t){return h.length>=i[t][0]&&h.length<=i[t][1]}));var d=t.find((function(t){return t[0]===s.position[0]}))[3],p=t.find((function(t){return t[0]===s.position[1]}))[3];"nominal"!==d.type&&"nominal"!==p.type||(s.geomType=["interval"])}else s.geomType=["point","density"].filter((function(t){return e.length>=i[t][0]&&e.length<=i[t][1]}));return{schema:s,aggData:e}}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.dropNullColumn=e.useMode=e.dropNull=e.simpleClean=void 0;var a=r(3);function u(t){return["",null,void 0].includes(t)}e.dropNullColumn=function(t,e){var r,o,i=e.map((function(){return!1}));try{for(var a=n(t),u=a.next();!u.done;u=a.next())for(var s=u.value,c=0;c<e.length;c++){var l=e[c];"undefined"!==typeof s[l]&&""!==s[l]&&null!==s[l]&&(i[c]=!0)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}var f=e.filter((function(t,e){return i[e]}));return{fields:f,dataSource:t.map((function(t){var e,r,o={};try{for(var i=n(f),a=i.next();!a.done;a=i.next()){var u=a.value;o[u]=t[u]}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return o}))}},e.dropNull=function(t,e,r){var o,i,a,u,s,c,l=[];try{for(var f=n(t),h=f.next();!h.done;h=f.next()){var d=h.value,p=!0;try{for(var y=(a=void 0,n(e)),v=y.next();!v.done;v=y.next()){var m=v.value;"undefined"!==typeof d[m]&&""!==d[m]&&null!==d[m]||(p=!1)}}catch(w){a={error:w}}finally{try{v&&!v.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}try{for(var g=(s=void 0,n(r)),b=g.next();!b.done;b=g.next()){"number"!==typeof d[b.value]&&(p=!1)}}catch(_){s={error:_}}finally{try{b&&!b.done&&(c=g.return)&&c.call(g)}finally{if(s)throw s.error}}p&&l.push(d)}}catch(S){o={error:S}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return l},e.useMode=function(t,e){var r,s,c,l,f,h,d,p,y,v,m,g,b=new Map,w=new Map;try{for(var _=n(e),S=_.next();!S.done;S=_.next()){var M=S.value;b.set(M,new Map),w.set(M,0)}}catch(Y){r={error:Y}}finally{try{S&&!S.done&&(s=_.return)&&s.call(_)}finally{if(r)throw r.error}}try{for(var x=n(t),E=x.next();!E.done;E=x.next()){var O=E.value;try{for(var T=(f=void 0,n(e)),D=T.next();!D.done;D=T.next()){M=D.value;var I=b.get(M);u(O[M])||(I.has(O[M])||I.set(O[M],0),I.set(O[M],I.get(O[M])+1))}}catch(G){f={error:G}}finally{try{D&&!D.done&&(h=T.return)&&h.call(T)}finally{if(f)throw f.error}}}}catch(V){c={error:V}}finally{try{E&&!E.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}try{for(var A=n(b.keys()),C=A.next();!C.done;C=A.next()){for(var N=C.value,R=(I=b.get(N),i([],o(I.entries()),!1)),j=0,P=0,k=0;k<R.length;k++){var F=R[k];F[1]>j&&(j=F[1],P=k)}w.set(N,R[P][0])}}catch($){d={error:$}}finally{try{C&&!C.done&&(p=A.return)&&p.call(A)}finally{if(d)throw d.error}}var L=(0,a.deepcopy)(t);try{for(var B=n(L),U=B.next();!U.done;U=B.next()){O=U.value;try{for(var z=(m=void 0,n(e)),q=z.next();!q.done;q=z.next()){u(O[M=q.value])&&(O[M]=w.get(M))}}catch(H){m={error:H}}finally{try{q&&!q.done&&(g=z.return)&&g.call(z)}finally{if(m)throw m.error}}}}catch(W){y={error:W}}finally{try{U&&!U.done&&(v=B.return)&&v.call(B)}finally{if(y)throw y.error}}return L},e.simpleClean=function(t,e,r){var o,i,s,c,l,f,h=(0,a.deepcopy)(t);try{for(var d=n(t),p=d.next();!p.done;p=d.next()){var y=p.value;try{for(var v=(s=void 0,n(e)),m=v.next();!m.done;m=v.next()){var g=m.value;u(y[g])&&(y[g]="null")}}catch(S){s={error:S}}finally{try{m&&!m.done&&(c=v.return)&&c.call(v)}finally{if(s)throw s.error}}try{for(var b=(l=void 0,n(r)),w=b.next();!w.done;w=b.next()){var _=w.value;u(y[_])&&(y[_]=0)}}catch(M){l={error:M}}finally{try{w&&!w.done&&(f=b.return)&&f.call(b)}finally{if(l)throw l.error}}}}catch(x){o={error:x}}finally{try{p&&!p.done&&(i=d.return)&&i.call(d)}finally{if(o)throw o.error}}return h}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};function i(t,e,r){var i,a,u,s,c,l,f,h,d,p,y,v;if("undefined"===typeof t||"undefined"===typeof e||"undefined"===typeof r)return 0;var m=new Map,g=new Map,b=0;try{for(var w=n(e),_=w.next();!_.done;_=w.next()){var S=_.value;m.set(S,0)}}catch(Y){i={error:Y}}finally{try{_&&!_.done&&(a=w.return)&&a.call(w)}finally{if(i)throw i.error}}try{for(var M=n(r),x=M.next();!x.done;x=M.next()){var E=x.value;g.set(E,0)}}catch(G){u={error:G}}finally{try{x&&!x.done&&(s=M.return)&&s.call(M)}finally{if(u)throw u.error}}try{for(var O=n(t),T=O.next();!T.done;T=O.next()){var D=o(T.value,2),I=(S=D[0],D[1]);try{for(var A=(f=void 0,n(I)),C=A.next();!C.done;C=A.next()){var N=o(C.value,2),R=(E=N[0],N[1]);m.set(S,m.get(S)+R),g.set(E,g.get(E)+R),b+=R}}catch(V){f={error:V}}finally{try{C&&!C.done&&(h=A.return)&&h.call(A)}finally{if(f)throw f.error}}}}catch($){c={error:$}}finally{try{T&&!T.done&&(l=O.return)&&l.call(O)}finally{if(c)throw c.error}}var j=0;try{for(var P=n(t),k=P.next();!k.done;k=P.next()){var F=o(k.value,2);S=F[0],I=F[1];try{for(var L=(y=void 0,n(I)),B=L.next();!B.done;B=L.next()){var U=o(B.value,2),z=(E=U[0],U[1]),q=m.get(S)*g.get(E)/b;j+=Math.pow(z-q,2)/q}}catch(H){y={error:H}}finally{try{B&&!B.done&&(v=L.return)&&v.call(L)}finally{if(y)throw y.error}}}}catch(W){d={error:W}}finally{try{k&&!k.done&&(p=P.return)&&p.call(P)}finally{if(d)throw d.error}}return j}Object.defineProperty(e,"__esModule",{value:!0}),e.pearsonCC=e.chiSquaredFromDataSource=e.cramersV=e.chiSquared=void 0,e.chiSquared=i;e.cramersV=function(t,e,r){for(var n=new Set,o=new Set,a=new Map,u=t.length,s=0;s<u;s++){var c=t[s];n.add(c[e]),o.add(c[r]),a.has(c[e])||a.set(c[e],new Map);var l=a.get(c[e]);l.has(c[r])||l.set(c[r],0),l.set(c[r],l.get(c[r])+1)}var f=i(a,n,o);return Math.sqrt(f/(t.length*Math.min(n.size-1,o.size-1)))},e.chiSquaredFromDataSource=function(t,e,r){for(var n=new Set,o=new Set,a=new Map,u=t.length,s=0;s<u;s++){var c=t[s];n.add(c[e]),o.add(c[r]),a.has(c[e])||a.set(c[e],new Map);var l=a.get(c[e]);l.has(c[r])||l.set(c[r],0),l.set(c[r],l.get(c[r])+1)}return i(a,n,o)};function a(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e}e.pearsonCC=function(t,e,r){var n=a(t.map((function(t){return t[e]})))/t.length,o=a(t.map((function(t){return t[r]})))/t.length;return a(t.map((function(t){return(t[e]-n)*(t[r]-o)})))/Math.sqrt(a(t.map((function(t){return Math.pow(t[e]-n,2)})))*a(t.map((function(t){return Math.pow(t[r]-o,2)}))))}},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.oneDLinearRegression=void 0;var o=function(){function t(t,e,r){this.dataSource=t,this.X=e,this.Y=r,this.normalizedDataSource=t}return t.prototype.normalizeDimensions=function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(r){t.forEach((function(t,n){var o=(r[t]||"others").toString();e.valueSets[n].has(o)||e.valueSets[n].set(o,e.valueSets[n].size)}))})),this.dataSource.forEach((function(r){var n=e.normalizeRecord(r,t);e.normalizedDataSource.push(n)})),this.normalizedDataSource},t.prototype.normalizeRecord=function(t,e){var r=this,n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),e.forEach((function(e,o){var i=(t[e]||"others").toString();n[e]=r.valueSets[o].get(i)})),n},t.prototype.mean=function(){var t=this,e=0,r=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(n,o){e+=n[t.X],r+=n[t.Y]})),e/=this.normalizedDataSource.length,r/=this.normalizedDataSource.length),[e,r]},t.prototype.getRegressionEquation=function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,r=n(this.mean(),2),o=r[0],i=r[1],a=0,u=0;return this.normalizedDataSource.forEach((function(e){a+=(e[t.X]-o)*(e[t.Y]-i),u+=Math.pow(e[t.X]-o,2)})),[i-o*(e=a/u),e]},t.prototype.r_squared=function(){var t=this,e=n(this.mean(),2)[1],r=n(this.getRegressionEquation(),2),o=r[0],i=r[1],a=0,u=0;return this.normalizedDataSource.forEach((function(r){var n=r[t.X],s=r[t.Y],c=n*i+o;a+=Math.pow(c-e,2),u+=Math.pow(s-e,2)})),a/u},t.prototype.cumulativeLogisticDistribution=function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))},t.prototype.pValue=function(){var t=n(this.getRegressionEquation(),2)[1],e=this.cumulativeLogisticDistribution(Math.abs(t));return e>.5?2*(1-e):2*e},t.prototype.significance=function(){return this.r_squared()*(1-this.pValue())},t}();e.oneDLinearRegression=o},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.stdAggregateFromCuboid=e.getAggHashKey=e.stdAggregate=e.simpleAggregate=e.fastGroupBy=e.groupByDev=e.encodeRowsByValueMap=e.getValueMapList=e.groupBy=e.getAggregator=e.SFMapper=void 0;var u=r(12),s=r(12),c="_@_";function l(t){return e.SFMapper[t]||u.sum}function f(t,e){var r,n,i=new Map,a=function(t){var r=e.map((function(e){return t[e]})).join(c);i.has(r)||i.set(r,[]),i.get(r).push(t)};try{for(var u=o(t),s=u.next();!s.done;s=u.next()){a(s.value)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return i}e.SFMapper={sum:u.sum,max:u.max,mean:u.mean,min:u.min,count:function(t){return t.length}},e.getAggregator=l,e.groupBy=f,e.getValueMapList=function(t,e){for(var r=[],n=[],o=0;o<e.length;o++){for(var i=new Map,a=[],u=0,s=0;s<t.length;s++)i.has(t[s][e[o]])||(a.push(t[s][e[o]]),i.set(t[s][e[o]],u),u++);n.push(a),r.push(i)}return r},e.encodeRowsByValueMap=function(t,e,r){return t.map((function(t){var o=n({},t);return e.forEach((function(e,n){o[e]=r[n].get(t[e])})),o}))},e.groupByDev=function(t,e,r){var n,i,a=new Map,u=function(t){var n=e.map((function(e,n){return r[n].get(t[e])})).join(c);a.has(n)||a.set(n,[]),a.get(n).push(t)};try{for(var s=o(t),l=s.next();!l.done;l=s.next()){u(l.value)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a},e.fastGroupBy=function(t,e){var r,n,u,s,c,l,f=[a([],i(t),!1)];try{for(var h=o(e),d=h.next();!d.done;d=h.next()){var p=d.value,y=f.splice(0,f.length),v=new Map;try{for(var m=(u=void 0,o(y)),g=m.next();!g.done;g=m.next()){var b=g.value;try{for(var w=(c=void 0,o(b)),_=w.next();!_.done;_=w.next()){var S=_.value,M=v.get(S[p]);void 0===M&&(f.push([]),M=f.length-1,v.set(S[p],M)),f[M].push(S)}}catch(x){c={error:x}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}v.clear()}}catch(E){u={error:E}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(u)throw u.error}}}}catch(O){r={error:O}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}return f},e.simpleAggregate=function(t){var e,r,n=t.dataSource,a=t.dimensions,u=t.measures,s=t.ops,h=f(n,a),d=[],p=function(t,e){var r={};u.forEach((function(t,n){var o=l(s[n]);r[t]=o(e.map((function(e){return e[t]})))}));var n=t.split(c);a.forEach((function(t,e){r[t]=n[e]})),d.push(r)};try{for(var y=o(h),v=y.next();!v.done;v=y.next()){var m=i(v.value,2);p(m[0],m[1])}}catch(g){e={error:g}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}return d},e.stdAggregate=function(t){var e,r,n=t.dataSource,a=t.dimensions,u=t.measures,s=t.ops,h=f(n,a),d=[],p=function(t,e){var r={groupDict:{},stat:{}};u.forEach((function(t,n){r.stat[t]={},s.forEach((function(n){var o=l(n);r.stat[t][n]=o(e.map((function(e){return e[t]})))}))}));var n=t.split(c);a.forEach((function(t,e){r.groupDict[t]=n[e]})),d.push(r)};try{for(var y=o(h),v=y.next();!v.done;v=y.next()){var m=i(v.value,2);p(m[0],m[1])}}catch(g){e={error:g}}finally{try{v&&!v.done&&(r=y.return)&&r.call(y)}finally{if(e)throw e.error}}return d},e.getAggHashKey=function(t){return t.join(c)},e.stdAggregateFromCuboid=function(t){var e,r,n=t.cuboidState,a=t.dimensions,u=t.measures,f=t.ops,h=function(t,e){var r,n,i=new Map,a=function(t){var r=e.map((function(e){return t.groupDict[e]})).join(c);i.has(r)||i.set(r,[]),i.get(r).push(t)};try{for(var u=o(t),s=u.next();!s.done;s=u.next())a(s.value)}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return i}(n,a),d=[],p=f.filter((function(t){return!["sum","count","mean","dist"].includes(t)})),y=p.map((function(t){return l(t)})),v=function(t,e){for(var r={groupDict:{},stat:{}},n=function(t){var n=u[t];r.stat[n]={},y.forEach((function(t,o){var i=p[o];r.stat[n][i]=t(e.map((function(t){return t.stat[n][i]})))})),r.stat[n].sum=(0,s.sumByCol)(e,n,"sum"),r.stat[n].count=(0,s.sumByCol)(e,n,"count"),r.stat[n].mean=r.stat[n].sum/r.stat[n].count,r.stat[n].dist=(0,s.distMergeBy)(e,n,"dist")},o=0;o<u.length;o++)n(o);for(var i=t.split(c),l=0;l<a.length;l++)r.groupDict[a[l]]=i[l];d.push(r)};try{for(var m=o(h),g=m.next();!g.done;g=m.next()){var b=i(g.value,2);v(b[0],b[1])}}catch(w){e={error:w}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(e)throw e.error}}return d}},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.generalMatMic=e.matrixBinShareRange=e.initRanges=e.incSim=e.normalizeScatter=e.pureGeneralConditionH=e.pureGeneralMic=e.generalMic=e.mic=e.rangeNormilize=e.binMapShareRange=e.binMap=e.binShareRange=e.bin=e.w2dis=e.l2Dis2=e.l1Dis2=e.l1Dis=e.firstWDis=void 0;var a=r(18);function u(t,e){for(var r=0,n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)r+=Math.pow(t[n][o]-e[n][o],2);return r/2}e.firstWDis=function(t,e){},e.l1Dis=function(t,e){for(var r=0,n=Math.min(t.length,e.length),o=0;o<n;o++)r+=Math.abs(t[o]-e[o]);return r/2},e.l1Dis2=function(t,e){for(var r=0,n=0;n<t.length;n++)for(var o=0;o<t[n].length;o++)r+=Math.abs(t[n][o]-e[n][o]);return r/2},e.l2Dis2=u,e.w2dis=function(){};var s=16;function c(t,e,r){for(var n=(r-e)/s,o=new Array(17).fill(0),i=0;i<t.length;i++){o[Math.floor((t[i]-e)/n)%17]++}return o[15]+=o[16],o.slice(0,s)}function l(t){for(var e=0,r=[],n=0;n<t.length;n++)e+=t[n];for(n=0;n<t.length;n++)r.push(t[n]/e);return r}function f(t){for(var e=-1/0,r=-1/0,n=1/0,o=1/0,i=0;i<t.length;i++)e=Math.max(t[i][0],e),r=Math.max(t[i][1],r),n=Math.min(t[i][0],n),o=Math.min(t[i][1],o);var a=(e-n)/s,u=(r-o)/s,c=new Array(17).fill(0).map((function(){return new Array(17).fill(0)}));for(i=0;i<t.length;i++){var l=Math.floor((t[i][0]-n)/a),f=Math.floor((t[i][1]-o)/u);c[l][f]++}for(i=0;i<=s;i++)c[i][15]+=c[i][16],c[15][i]+=c[16][i];var h=new Array(s).fill(0).map((function(){return new Array(s).fill(0)}));for(i=0;i<s;i++)for(var d=0;d<s;d++)h[i][d]=c[i][d]/t.length;return h}function h(t,e){for(var r=[],i=function(e){r.push([Math.min.apply(Math,o([],n(t.map((function(t){return t[e]}))),!1)),Math.max.apply(Math,o([],n(t.map((function(t){return t[e]}))),!1))])},a=0;a<e;a++)i(a);return r}e.bin=function(t){for(var e=Math.max.apply(Math,o([],n(t),!1)),r=Math.min.apply(Math,o([],n(t),!1)),i=(e-r)/s,a=new Array(17).fill(0),u=0;u<t.length;u++){a[Math.floor((t[u]-r)/i)%17]++}return a[15]+=a[16],a.slice(0,s)},e.binShareRange=c,e.binMap=function(t){for(var e=Math.max.apply(Math,o([],n(t),!1)),r=Math.min.apply(Math,o([],n(t),!1)),i=(e-r)/s,a=[],u=0;u<t.length;u++){var c=Math.floor((t[u]-r)/i);c===s&&(c=15),a.push(c)}return a},e.binMapShareRange=function(t,e,r){for(var n=(r-e)/s,o=[],i=0;i<t.length;i++){var a=Math.floor((t[i]-e)/n);a===s&&(a=15),o.push(a)}return o},e.rangeNormilize=l,e.mic=function(t,e){for(var r=0,i=Math.min.apply(Math,o([],n(e),!1)),u=Math.max.apply(Math,o([],n(e),!1)),f=(0,a.entropy)(l(c(e,i,u).filter((function(t){return t>0})))),h=function(n){var o=e.filter((function(e,r){return t[r]===n})),s=c(o,i,u).filter((function(t){return t>0})),f=(0,a.entropy)(l(s)),h=o.length/e.length;r+=h*f},d=0;d<s;d++)h(d);return(f-r)/Math.log2(s)},e.generalMic=function(t,e){for(var r=0,i=Math.min.apply(Math,o([],n(e),!1)),u=Math.max.apply(Math,o([],n(e),!1)),f=(0,a.entropy)(l(c(e,i,u).filter((function(t){return t>0})))),h=new Set(t),d=o([],n(h),!1),p=[],y=function(r){var n=e.filter((function(e,n){return t[n]===d[r]})),o=c(n,i,u);p.push({freq:n.length,bins:o})},v=0;v<d.length;v++)y(v);p.sort((function(t,e){return e.freq-t.freq}));var m={freq:0,bins:new Array(s).fill(0)};for(v=0;v<p.length;v++){var g=p[v],b=g.bins,w=g.freq;if(v<15){var _=(0,a.entropy)(l(b.filter((function(t){return t>0}))));r+=w/e.length*_}else{m.freq+=w;for(var S=0;S<s;S++)m.bins[S]+=b[S]}}if(m.freq>0){b=m.bins,w=m.freq,_=(0,a.entropy)(l(b.filter((function(t){return t>0}))));r+=w/e.length*_}return(f-r)/Math.log2(Math.min(s,d.length))},e.pureGeneralMic=function(t,e){for(var r=0,i=Math.min.apply(Math,o([],n(e),!1)),u=Math.max.apply(Math,o([],n(e),!1)),s=(0,a.entropy)(l(c(e,i,u).filter((function(t){return t>0})))),f=new Set(t),h=o([],n(f),!1),d=[],p=function(r){var n=e.filter((function(e,n){return t[n]===h[r]})),o=c(n,i,u);d.push({freq:n.length,bins:o})},y=0;y<h.length;y++)p(y);for(y=0;y<d.length;y++){var v=d[y],m=v.bins,g=v.freq,b=(0,a.entropy)(l(m.filter((function(t){return t>0}))));r+=g/e.length*b}return s-r},e.pureGeneralConditionH=function(t,e){for(var r=0,i=Math.min.apply(Math,o([],n(e),!1)),u=Math.max.apply(Math,o([],n(e),!1)),f=((0,a.entropy)(l(c(e,i,u).filter((function(t){return t>0})))),new Set(t)),h=o([],n(f),!1),d=[],p=function(r){var n=e.filter((function(e,n){return t[n]===h[r]})),o=c(n,i,u);d.push({freq:n.length,bins:o})},y=0;y<h.length;y++)p(y);d.sort((function(t,e){return e.freq-t.freq}));var v={freq:0,bins:new Array(s).fill(0)};for(y=0;y<d.length;y++){var m=d[y],g=m.bins,b=m.freq;if(y<15){var w=(0,a.entropy)(l(g.filter((function(t){return t>0}))));r+=b/e.length*w}else{v.freq+=b;for(var _=0;_<s;_++)v.bins[_]+=g[_]}}if(v.freq>0){g=v.bins,b=v.freq,w=(0,a.entropy)(l(g.filter((function(t){return t>0}))));r+=b/e.length*w}return r},e.normalizeScatter=f,e.incSim=function(t,e,r){for(var o,a,c,l,h=u(f(e),f(r)),d=new Map,p=0;p<t.length;p++){if(!d.has(t[p])){var y={X:[],Y:[]};d.set(t[p],y)}null===(c=d.get(t[p]))||void 0===c||c.X.push(e[p]),null===(l=d.get(t[p]))||void 0===l||l.Y.push(r[p])}var v=0;try{for(var m=i(d.entries()),g=m.next();!g.done;g=m.next()){var b=(y=n(g.value,2)[1]).X.length/e.length;0!==b&&(y.X.length<Math.pow(s,2)?v+=b:v+=b*u(f(y.X),f(y.Y)))}}catch(w){o={error:w}}finally{try{g&&!g.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}return h-v},e.initRanges=h;function d(t,e){for(var r=new Array(9).fill(0).map((function(){return new Array(9).fill(0)})),n=(e[0][1]-e[0][0])/8,o=(e[1][1]-e[1][0])/8,i=0;i<t.length;i++){var a=Math.floor((t[i][0]-e[0][0])/n);r[Math.floor((t[i][1]-e[1][0])/o)][a]++}for(i=0;i<9;i++)r[i][7]+=r[i][8];for(i=0;i<8;i++)r[7][i]+=r[8][i];return r.slice(0,8).map((function(t){return t.slice(0,8)}))}e.matrixBinShareRange=d,e.generalMatMic=function(t,e){for(var r=0,i=h(e,2),u=(0,a.entropy)(l(d(e,i).flatMap((function(t){return t})).filter((function(t){return t>0})))),s=new Set(t),c=o([],n(s),!1),f=[],p=function(r){var n=e.filter((function(e,n){return t[n]===c[r]})),o=d(n,i).flatMap((function(t){return t}));f.push({freq:n.length,bins:o})},y=0;y<c.length;y++)p(y);f.sort((function(t,e){return e.freq-t.freq}));var v={freq:0,bins:new Array(64).fill(0)};for(y=0;y<f.length;y++){var m=f[y],g=m.bins,b=m.freq;if(y<15){var w=(0,a.entropy)(l(g.filter((function(t){return t>0}))));r+=b/e.length*w}else{v.freq+=b;for(var _=0;_<64;_++)v.bins[_]+=g[_]}}if(v.freq>0){g=v.bins,b=v.freq,w=(0,a.entropy)(l(g.filter((function(t){return t>0}))));r+=b/e.length*w}return(u-r)/Math.log2(c.length)}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.cramersV=e.getDashBoardView=e.getDashBoardSubspace=e.getEntropyMatrix=void 0;var a=r(4),u=r(0),s=r(0);Object.defineProperty(e,"cramersV",{enumerable:!0,get:function(){return s.cramersV}});var c=r(5);function l(t,e,r,o){for(var i,a,c=[],l=0;l<t.length;l++){var f=t[l];c.push([]);var h=(0,u.stdAggregate)({dimensions:f,measures:e,dataSource:r,ops:e.map((function(t){return o||"sum"}))}),d=function(t){var e=h.map((function(e){return e[t]})),r=(0,u.normalize)((0,s.mapPositive)(e)),n=(0,u.entropy)(r);c[l].push(n)};try{for(var p=(i=void 0,n(e)),y=p.next();!y.done;y=p.next()){d(y.value)}}catch(v){i={error:v}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}}return c}function f(t){var e=0,r=t.length,n=1/0,o=-1;for(e=0;e<r;e++)t[e]<n&&(n=t[e],o=e);return o}e.getEntropyMatrix=l,e.getDashBoardSubspace=function(t,e,r,u){for(var f,h,d,p,y,v,m=r.map((function(t){return r.map((function(t){return 0}))})),g=0;g<r.length;g++){m[g][g]=1;for(var b=g+1;b<r.length;b++){var w=(0,s.pearsonCC)(t,r[g],r[b]);m[b][g]=m[g][b]=w}}var _=a.Cluster.kruskal({matrix:m,measures:r,groupMaxSize:Math.round(r.length/6),threshold:c.PearsonCorrelation.weak}),S=e.map((function(t){return e.map((function(t){return 0}))}));for(g=0;g<e.length;g++){S[g][g]=1;for(b=g+1;b<e.length;b++)S[g][b]=S[b][g]=(0,s.cramersV)(t,e[g],e[b])}var M=new Set;try{for(var x=n(u),E=x.next();!E.done;E=x.next()){var O=E.value;try{for(var T=(d=void 0,n(O[0])),D=T.next();!D.done;D=T.next()){var I=D.value;M.add(I)}}catch(P){d={error:P}}finally{try{D&&!D.done&&(p=T.return)&&p.call(T)}finally{if(d)throw d.error}}}}catch(k){f={error:k}}finally{try{E&&!E.done&&(h=x.return)&&h.call(x)}finally{if(f)throw f.error}}var A=i([],o(M),!1),C=[],N=function(n){for(var o=n.map((function(t){return n.map((function(t){return 0}))})),i=0;i<n.length;i++)for(var a=r.indexOf(n[i]),u=0;u<n.length;u++){var s=r.indexOf(n[u]);o[i][u]=m[a][s]}var c=A.map((function(t){return A.map((function(t){return 0}))}));for(i=0;i<A.length;i++){var f=e.indexOf(A[i]);for(u=0;u<A.length;u++){var h=e.indexOf(A[u]);c[i][u]=S[f][h]}}C.push({dimensions:A,measures:n,correlationMatrix:o,dimensionCorrelationMatrix:c,entropyMatrix:l(A.map((function(t){return[t]})),n,t)})};try{for(var R=n(_),j=R.next();!j.done;j=R.next()){N(j.value)}}catch(F){y={error:F}}finally{try{j&&!j.done&&(v=R.return)&&v.call(R)}finally{if(y)throw y.error}}return C},e.getDashBoardView=function(t,e){var r,o,i=t.dimensions,u=t.measures,s=t.entropyMatrix,h=t.dimensionCorrelationMatrix,d=[],p=a.Cluster.kruskal({matrix:t.correlationMatrix,measures:u,groupMaxSize:Math.round(u.length/3),threshold:c.PearsonCorrelation.strong}),y=function(t){var e=t.map((function(t){return u.indexOf(t)})),r=i.map((function(t,r){var o,i,a=0;try{for(var u=(o=void 0,n(e)),c=u.next();!c.done;c=u.next()){var l=c.value;a+=s[r][l]}}catch(f){o={error:f}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return a})),o=i[f(r)];d.push({type:"target",dimensions:[o],measures:t})};try{for(var v=n(p),m=v.next();!m.done;m=v.next()){y(m.value)}}catch(S){r={error:S}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(r)throw r.error}}for(var g=a.Cluster.kruskal({matrix:h,measures:i,groupMaxSize:2,limitSize:!0,threshold:c.CramersVThreshold}),b=l(g,u,e),w=0;w<g.length;w++){var _=u[f(b[w])];d.push({type:"feature",dimensions:g[w],measures:[_]})}return d}},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.kruskalWithFullMST=e.kruskal=void 0;var a=i(r(47));e.kruskal=a.default,Object.defineProperty(e,"kruskalWithFullMST",{enumerable:!0,get:function(){return a.kruskalMST}})},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};function a(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t[r].length;n++)e.push([[r,n],Math.abs(t[r][n])]);return e}function u(t,e){return t[e]===e?e:t[e]=u(t,t[e])}function s(t,e,r){var n=u(t,e),o=u(t,r);t[n]=o,u(t,e),u(t,r)}function c(t,e,r){return t[r]===r?r:(t[r]=c(t,e,t[r]),e[r]=e[t[r]],t[r])}function l(t,e,r,n){var o=c(t,e,r),i=c(t,e,n),a=e[o],u=e[i];t[o]=i,e[o]=e[i]=a+u,c(t,e,r),c(t,e,n)}Object.defineProperty(e,"__esModule",{value:!0}),e.kruskalMST=e.kruskalMSTWithLimitSize=void 0,e.kruskalMSTWithLimitSize=function(t,e){var r,o;void 0===e&&(e=4);var i=a(t);i.sort((function(t,e){return e[1]-t[1]}));var f=[],h=t.map((function(t,e){return e})),d=t.map((function(t,e){return e})),p=t.map((function(){return 1}));try{for(var y=n(i),v=y.next();!v.done;v=y.next()){var m=v.value;if(c(h,p,m[0][0])!==c(h,p,m[0][1])){if(p[m[0][0]]+p[m[0][1]]>e){u(d,m[0][0])!==u(d,m[0][1])&&(f.push([m[0],m[1],!0]),s(d,m[0][0],m[0][1]));continue}l(h,p,m[0][0],m[0][1]),f.push([m[0],m[1],!1])}for(var g=0;g<h.length;g++)h[g]=c(h,p,g),d[g]=u(d,g);if(1===new Set(h).size)break}}catch(b){r={error:b}}finally{try{v&&!v.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}return{edgesInMST:f,groups:h}},e.kruskalMST=function(t,e,r){var c,l;void 0===e&&(e=4),void 0===r&&(r=0);var f=a(t);f.sort((function(t,e){return e[1]-t[1]}));var h=[],d=t.map((function(t,e){return e})),p=i([],o(d),!1),y=!1;try{for(var v=n(f),m=v.next();!m.done;m=v.next()){var g=m.value;u(d,g[0][0])!==u(d,g[0][1])&&(s(d,g[0][0],g[0][1]),h.push([g[0],g[1],y]));for(var b=0;b<d.length;b++)d[b]=u(d,b);var w=new Set(d);if(w.size<=e||g[1]<r?y=!0:p=i([],o(d),!1),1===w.size)break}}catch(_){c={error:_}}finally{try{m&&!m.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}return{edgesInMST:h,groups:p}},e.default=function(t){var e,r,o,i=t.matrix,f=t.measures,h=(t.method,t.groupMaxSize),d=void 0===h?4:h,p=t.limitSize,y=void 0!==p&&p,v=t.threshold,m=void 0===v?0:v;o=y?function(t,e){var r,o,i=a(t);i.sort((function(t,e){return e[1]-t[1]}));var u=t.map((function(t,e){return e})),s=t.map((function(){return 1}));try{for(var f=n(i),h=f.next();!h.done;h=f.next()){var d=h.value;if(c(u,s,d[0][0])!==c(u,s,d[0][1])){if(s[d[0][0]]+s[d[0][1]]>e)continue;l(u,s,d[0][0],d[0][1])}for(var p=0;p<u.length;p++)u[p]=c(u,s,p);if(1===new Set(u).size)break}}catch(v){r={error:v}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(r)throw r.error}}var y=new Map;for(p=0;p<u.length;p++)y.has(u[p])||y.set(u[p],[]),y.get(u[p]).push(p);return y}(i,d):function(t,e,r){var o,i;void 0===r&&(r=0);var c=a(t);c.sort((function(t,e){return e[1]-t[1]}));var l=t.map((function(t,e){return e}));try{for(var f=n(c),h=f.next();!h.done;h=f.next()){var d=h.value;u(l,d[0][0])!==u(l,d[0][1])&&s(l,d[0][0],d[0][1]);for(var p=0;p<l.length;p++)l[p]=u(l,p);if(new Set(l).size<=e||d[1]<r)break}}catch(v){o={error:v}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}var y=new Map;for(p=0;p<l.length;p++)y.has(l[p])||y.set(l[p],[]),y.get(l[p]).push(p);return y}(i,d,m);var g=[];try{for(var b=n(o.values()),w=b.next();!w.done;w=b.next()){var _=w.value;g.push(_.map((function(t){return f[t]})))}}catch(S){e={error:S}}finally{try{w&&!w.done&&(r=b.return)&&r.call(b)}finally{if(e)throw e.error}}return g}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.IsolationForest=void 0;var o=r(20),i=r(2),a=function(){function t(t,e,r,n,o){void 0===n&&(n=100),void 0===o&&(o=256),this.dimensions=t,this.measures=e,this.dataSource=r,r.length<o?(this.treeNumber=Math.max(1,Math.ceil(o/50)),this.sampleSize=Math.max(2,Math.floor(r.length/2))):(this.treeNumber=n,this.sampleSize=o),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return t.prototype.normalizeDimensions=function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var o=(e[r]||"others").toString();t.valueSets[n].has(o)||t.valueSets[n].set(o,t.valueSets[n].size)})),t.measures.forEach((function(r,n){var o=e[r];"number"===typeof o&&(t.ranges[n][0]=Math.min(t.ranges[n][0],o),t.ranges[n][1]=Math.max(t.ranges[n][1],o))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource},t.prototype.normalizeRecord=function(t){var e=this,r={};return this.measures.forEach((function(e){r[e]=t[e]})),this.dimensions.forEach((function(n,o){var i=(t[n]||"others").toString();r[n]=e.valueSets[o].get(i)})),r},t.prototype.buildIsolationTree=function(t,e){var r,o;if(e>=this.limitHeight||t.length<=1)return null;var i=Math.random(),a=this.measures[0]||this.dimensions[0],u=this.dimensions.length,s=this.measures.length,c=0;if(i>=u/(u+s)){var l=Math.floor(Math.random()*s)%s;a=this.measures[l],c=this.ranges[l][0]+(this.ranges[l][1]-this.ranges[l][0])*Math.random()}else{l=Math.floor(Math.random()*u)%u;a=this.dimensions[l],c=Math.floor(this.valueSets[l].size*Math.random())%this.valueSets[l].size}var f=[],h=[];try{for(var d=n(t),p=d.next();!p.done;p=d.next()){var y=p.value;y[a]<c?f.push(y):h.push(y)}}catch(m){r={error:m}}finally{try{p&&!p.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}var v={field:a,value:c,size:t.length};return v.left=this.buildIsolationTree(f,e+1),v.right=this.buildIsolationTree(h,e+1),v},t.prototype.AFS=function(t){return t>2?2*(Math.log(t-1)+i.EULER)-2*(t-1)/t:2===t?1:0},t.prototype.getPathLength=function(t,e,r,n){return null===e?r+this.AFS(n):t[e.field]<e.value?this.getPathLength(t,e.left,r+1,e.size):this.getPathLength(t,e.right,r+1,e.size)},t.prototype.buildIsolationForest=function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=(0,o.uniformSampling)(this.normalizedDataSource,this.sampleSize),r=this.buildIsolationTree(e,0);this.iForest.push(r)}return this.iForest},t.prototype.estimateOutierScore=function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var r,n=0;t.iForest.forEach((function(r){n+=t.getPathLength(e,r,0,t.sampleSize)})),n/=t.iForest.length,r=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(r)})),this.recordScoreList},t}();e.IsolationForest=a},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),o(r(50),e)},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ClickHouseEngine=void 0;var u=r(51),s=r(2),c=r(52),l=r(53),f=r(0),h=r(54),d=r(55),p="bin_";var y=function(){function t(){this.rawFields=[],this.fields=[],this.dataViewName=null,this.dataGraph=null,this.dataViewMetas=[],this.insightSpaces=[],this.dbMetas=[],this.features={size:0},this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.utils=new d.CHUtils,this.statistics=new l.CHStatistics(this.utils)}return Object.defineProperty(t.prototype,"dimensions",{get:function(){return this.fields.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"measures",{get:function(){return this.fields.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))},enumerable:!1,configurable:!0}),t.prototype.setRawFields=function(t){this.rawFields=t},t.prototype.query=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.utils.query(t)]}))}))},t.prototype.queryw=function(t){return o(this,void 0,void 0,(function(){return i(this,(function(e){return[2,this.utils.queryw(t)]}))}))},t.prototype.loadData=function(t){return o(this,void 0,void 0,(function(){var e,r;return i(this,(function(n){switch(n.label){case 0:return[4,this.query("SELECT * from ".concat(t,";"))];case 1:return e=n.sent(),[4,this.getFieldMetas(t)];case 2:return r=n.sent(),this.dbMetas=r,[2,(0,u.parseTable)(e,r)]}}))}))},t.prototype.getFieldMetas=function(t){return o(this,void 0,void 0,(function(){var e;return i(this,(function(r){switch(r.label){case 0:return[4,this.query("DESC ".concat(t))];case 1:return[2,(e=r.sent()).substr(0,e.length-1).split("\n").map((function(t){var e=t.split("\t");return{fid:e[0],dataType:e[1]}}))]}}))}))},t.prototype.buildFieldsSummary=function(t){return o(this,void 0,void 0,(function(){var e,r,n,o,a,s,c,l,f,h,d;return i(this,(function(i){switch(i.label){case 0:return[4,this.getFieldMetas(t)];case 1:return e=i.sent(),this.dbMetas=e,[4,this.query("SELECT ".concat(e.map((function(t){return"uniq(`".concat(t.fid,"`)")})).join(",")," FROM ").concat(t,";"))];case 2:return r=i.sent(),n=r.split("\t").map((function(t){return parseInt(t)})),a=parseInt,[4,this.query("SELECT COUNT(*) FROM ".concat(t,";"))];case 3:o=a.apply(void 0,[i.sent()]),this.features.size=o,s=[],c=0,i.label=4;case 4:return c<e.length?(l=Math.log2(n[c]),f=1/0,n[c]!==o?[3,5]:(f=l,[3,7])):[3,9];case 5:return[4,this.query("with frequency_list as (SELECT COUNT(*) as frequency FROM ".concat(t," GROUP BY `").concat(e[c].fid,"`),\n                total as (select sum(frequency) as total from frequency_list),\n                pb_list as (select (frequency_list.frequency / total.total) as pb from frequency_list, total) \n                SELECT SUM(-pb * log2(pb)) FROM pb_list"))];case 6:h=i.sent(),f=Number(h),i.label=7;case 7:d=(0,u.dbDataType2DataType)(e[c].dataType),s.push({key:e[c].fid,name:e[c].fid,analyticType:(0,u.inferAnalyticTypeFromDataType)(d),semanticType:(0,u.inferSemanticTypeFromDataType)(d),dataType:d,features:{entropy:f,maxEntropy:l,unique:n[c],size:o,max:0,min:0}}),i.label=8;case 8:return c++,[3,4];case 9:return[2,s]}}))}))},t.prototype.uvsView=function(t){return o(this,void 0,void 0,(function(){var e,r,o,a,u,s,c;return i(this,(function(i){switch(i.label){case 0:return e="test_view",0!==this.rawFields.length?[3,2]:(r=this,[4,this.buildFieldsSummary(t)]);case 1:r.rawFields=i.sent(),i.label=2;case 2:return[4,this.featureTransform(t,e)];case 3:for(o=i.sent(),a=[],u=function(t){var e=s.rawFields[t];if("dimension"===e.analyticType&&("quantitative"===e.semanticType&&e.features.unique>50))return(r=o.find((function(t){return t.key==="".concat(p)})))&&a.push(n(n({},r),{features:n({},r.features)})),"continue";if("quantitative"===e.semanticType){var r=o.find((function(t){return t.key==="".concat(p).concat(e.key)})),i=n(n({},e),{features:n({},e.features)});r&&(i.features.entropy=r.features.entropy,i.features.maxEntropy=r.features.maxEntropy),a.push(i)}else a.push(n(n({},e),{features:n({},e.features)}))},s=this,c=0;c<this.rawFields.length;c++)u(c);return this.fields=a,[2,a]}}))}))},t.prototype.getContinuousRanges=function(t){return o(this,void 0,void 0,(function(){var e,r,n,o,a,u;return i(this,(function(i){switch(i.label){case 0:return e=this.rawFields.filter((function(t){return"quantitative"===t.semanticType})),r=e.map((function(t){return"min(`".concat(t.key,"`),max(`").concat(t.key,"`)")})),[4,this.query("SELECT ".concat(r.join(",")," FROM ").concat(t,";"))];case 1:for(n=i.sent(),o=[],a=n.substring(0,n.length-1).split("\t").map((function(t){return Number(t)})),u=0;u<e.length;u++)o.push({fid:e[u].key,range:[a[2*u],a[2*u+1]]});return[2,o]}}))}))},t.prototype.binContinuousFields=function(t,e){return o(this,void 0,void 0,(function(){var r;return i(this,(function(n){switch(n.label){case 0:return[4,this.getContinuousRanges(t)];case 1:return r=n.sent(),[2,r.map((function(t){var r=function(t,e){for(var r=[],n=(t[1]-t[0])/e,o=0;o<e;o++)r.push([t[0]+o*n,t[0]+(o+1)*n]);return r}(t.range,e),n="case ";n+="when `".concat(t.fid,"` < ").concat(r[0][1]," then '(-Infinity, ").concat(r[0][1],")'\n");for(var o=1;o<r.length-1;o++)n+="when `".concat(t.fid,"` >= ").concat(r[o][0]," and `").concat(t.fid,"` < ").concat(r[o][1]," then '[").concat(r[o][0],", ").concat(r[o][1],")'\n");return n+="when `".concat(t.fid,"` >= ").concat(r[r.length-1][0]," then '[").concat(r[r.length-1][0],", Infinity)' end\n"),n+="as `".concat(p).concat(t.fid,"`")}))]}}))}))},t.prototype.featureTransform=function(t,e){return o(this,void 0,void 0,(function(){var r,n;return i(this,(function(o){switch(o.label){case 0:return[4,this.binContinuousFields(t,s.DEFAULT_BIN_NUM)];case 1:return r=o.sent(),[4,this.queryw("DROP VIEW IF EXISTS ".concat(e,";"))];case 2:return o.sent(),[4,this.queryw("CREATE VIEW IF NOT EXISTS ".concat(e," AS SELECT *, ").concat(r.join(",")," FROM ").concat(t,";"))];case 3:return o.sent(),[4,this.buildFieldsSummary(e)];case 4:return n=o.sent(),this.dataViewName=e,[2,n]}}))}))},t.prototype.buildDataGraph=function(){return o(this,void 0,void 0,(function(){var t,e,r,n,o;return i(this,(function(i){switch(i.label){case 0:return e=(t=this).dimensions,r=t.measures,n=t.dataViewName,o=t.statistics,this.dataGraph=new c.CHDataGraph(n,e,r),[4,this.dataGraph.computeDGraph(o.cramersV)];case 1:return i.sent(),[4,this.dataGraph.computeMGraph(o.pearsonCC)];case 2:return i.sent(),[2]}}))}))},t.prototype.clusterFields=function(){return this.dataGraph.clusterDGraph(),this.dataGraph.clusterMGraph(),this},t.prototype.buildSubspaces=function(t,e){var r,n,o,i,u,s;void 0===t&&(t=this.DIMENSION_NUM_IN_VIEW),void 0===e&&(e=this.MEASURE_NUM_IN_VIEW);var c=this.dataGraph.DClusters,h=this.dataGraph.MClusters,d=(0,l.getCombinationFromClusterGroups)(h,e),p=[];try{for(var y=a(c),v=y.next();!v.done;v=y.next()){var m=v.value,g=(0,f.getCombination)(m,t.MIN,t.MAX);try{for(var b=(o=void 0,a(g)),w=b.next();!w.done;w=b.next()){var _=w.value;try{for(var S=(u=void 0,a(d)),M=S.next();!M.done;M=S.next()){var x=M.value;p.push({dimensions:_,measures:x})}}catch(E){u={error:E}}finally{try{M&&!M.done&&(s=S.return)&&s.call(S)}finally{if(u)throw u.error}}}}catch(O){o={error:O}}finally{try{w&&!w.done&&(i=b.return)&&i.call(b)}finally{if(o)throw o.error}}}}catch(T){r={error:T}}finally{try{v&&!v.done&&(n=y.return)&&n.call(y)}finally{if(r)throw r.error}}return this.dataViewMetas=p,this},t.prototype.getSpaceImpurity=function(t,e,r){return o(this,void 0,void 0,(function(){var n,o,a,u;return i(this,(function(i){switch(i.label){case 0:return[4,this.query("with agg_view as (select count(*) as values_count, ".concat(r.map((function(t){return"sum(`".concat(t,"`) as `sum_").concat(t,"`")})).join(",")," from ").concat(t," group by ").concat(e.map((function(t){return"`".concat(t,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(r.map((function(t){return"sum(abs(`sum_".concat(t,"`)) as `abssum_sum_").concat(t,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(r.map((function(t){return"abs(`sum_".concat(t,"`) / `abssum_sum_").concat(t,"` as `pb_").concat(t,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(r.map((function(t){return"if(`pb_".concat(t,"` = 0, 0, -`pb_").concat(t,"` * log2(`pb_").concat(t,"`)) as `safe_").concat(t,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(r.map((function(t){return"sum(`safe_".concat(t,"`)")})).join(",")," from safe_value\n        "))];case 1:for(n=i.sent(),o=n.slice(0,-1).split("\t").map((function(t){return Number(t)})),a=0,u=1;u<o.length;u++)a+=o[u];return[2,a]}}))}))},t.prototype.fastInsightRecommand=function(t){return void 0===t&&(t=this.dataViewMetas),o(this,void 0,void 0,(function(){var e,r,n,o,u,s,c,l,f,h;return i(this,(function(i){switch(i.label){case 0:e=[],i.label=1;case 1:i.trys.push([1,6,7,8]),r=a(t),n=r.next(),i.label=2;case 2:return n.done?[3,5]:(o=n.value,u=o.dimensions,s=o.measures,[4,this.getSpaceImpurity(this.dataViewName,u,s)]);case 3:c=i.sent(),e.push({dimensions:u,measures:s,impurity:c,score:c,significance:1}),i.label=4;case 4:return n=r.next(),[3,2];case 5:return[3,8];case 6:return l=i.sent(),f={error:l},[3,8];case 7:try{n&&!n.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}return[7];case 8:return e.sort((function(t,e){return t.score-e.score})),this.insightSpaces=e,[2,e]}}))}))},t.prototype.getFieldInfoInVis=function(t){return o(this,void 0,void 0,(function(){var e,r,o,u,s,c,l,f,h,d,p,y,v,m,g,b,w,_,S;return i(this,(function(M){switch(M.label){case 0:e=[],r=t.dimensions,o=t.measures,u=function(t){var r,a;return i(this,(function(i){switch(i.label){case 0:return[4,s.statistics.getSpaceImpurity(s.dataViewName,[t],o)];case 1:return r=i.sent(),(a=s.fields.find((function(e){return e.key===t})))&&e.push(n(n({},a),{impurity:r})),[2]}}))},s=this,M.label=1;case 1:M.trys.push([1,6,7,8]),c=a(r),l=c.next(),M.label=2;case 2:return l.done?[3,5]:(f=l.value,[5,u(f)]);case 3:M.sent(),M.label=4;case 4:return l=c.next(),[3,2];case 5:return[3,8];case 6:return h=M.sent(),b={error:h},[3,8];case 7:try{l&&!l.done&&(w=c.return)&&w.call(c)}finally{if(b)throw b.error}return[7];case 8:d=function(t){var o,a;return i(this,(function(i){switch(i.label){case 0:return[4,p.statistics.getSpaceImpurity(p.dataViewName,r,[t])];case 1:return o=i.sent(),(a=p.fields.find((function(e){return e.key===t})))&&e.push(n(n({},a),{impurity:o})),[2]}}))},p=this,M.label=9;case 9:M.trys.push([9,14,15,16]),y=a(o),v=y.next(),M.label=10;case 10:return v.done?[3,13]:(m=v.value,[5,d(m)]);case 11:M.sent(),M.label=12;case 12:return v=y.next(),[3,10];case 13:return[3,16];case 14:return g=M.sent(),_={error:g},[3,16];case 15:try{v&&!v.done&&(S=y.return)&&S.call(y)}finally{if(_)throw _.error}return[7];case 16:return[2,e]}}))}))},t.prototype.queryAggDataView=function(t,e,r,n){return o(this,void 0,void 0,(function(){var o,a,s,c=this;return i(this,(function(i){switch(i.label){case 0:return o=t.concat(e).map((function(t){return c.dbMetas.find((function(e){return e.fid===t}))})).filter((function(t){return Boolean(t)})),a="select ".concat(t.map((function(t){return"`".concat(t,"`")})).join(","),", ").concat(e.map((function(t,e){return"".concat(r[e],"(`").concat(t,"`) as `").concat(t,"`")})).join(",")," from ").concat(this.dataViewName," group by ").concat(t.map((function(t){return"`".concat(t,"`")})).join(",")),"number"===typeof n&&(a+=" limit ".concat(n)),[4,this.query(a)];case 1:return s=i.sent(),[2,(0,u.parseTable)(s,o)]}}))}))},t.prototype.queryDataView=function(t,e,r){return o(this,void 0,void 0,(function(){var n,o,a,s=this;return i(this,(function(i){switch(i.label){case 0:return n=t.concat(e).map((function(t){return s.dbMetas.find((function(e){return e.fid===t}))})).filter((function(t){return Boolean(t)})),o="select ".concat(t.concat(e).map((function(t){return"`".concat(t,"`")})).join(",")," from ").concat(this.dataViewName),"number"===typeof r&&(o+=" limit ".concat(r)),[4,this.query(o)];case 1:return a=i.sent(),[2,(0,u.parseTable)(a,n)]}}))}))},t.prototype.specification=function(t){return o(this,void 0,void 0,(function(){var e,r,o,a,u;return i(this,(function(i){switch(i.label){case 0:return e=t.dimensions,r=t.measures,[4,this.getFieldInfoInVis(t)];case 1:return o=i.sent(),[4,this.queryAggDataView(e,r,r.map((function(){return"sum"})))];case 2:return a=i.sent(),u=(0,h.pureSpec)(o),[2,n(n({},u),{detailSize:this.features.size,dataView:a})]}}))}))},t.prototype.destroyView=function(){return o(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this.queryw("drop view if exists ".concat(this.dataViewName))];case 1:return t.sent(),[2]}}))}))},t}();e.ClickHouseEngine=y},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.parseTable=e.parseCell=e.inferAnalyticTypeFromDataType=e.inferSemanticTypeFromDataType=e.dbDataType2DataType=void 0;var o={Int8:"integer",Int16:"integer",Int32:"integer",Int64:"integer",UInt8:"integer",UInt16:"integer",UInt32:"number",UInt64:"number",Float32:"number",Float64:"number",BOOLEAN:"boolean",String:"string"},i={number:"quantitative",integer:"quantitative",boolean:"nominal",date:"temporal",string:"nominal"},a={number:"measure",integer:"measure",boolean:"dimension",date:"dimension",string:"dimension"};function u(t,e){switch(e){case"Int8":case"Int16":case"Int32":case"Int64":case"UInt8":case"UInt16":case"UInt32":case"UInt64":return parseInt(t);case"Float32":case"Float64":return Number(t);default:return t}}e.dbDataType2DataType=function(t){return o[t]||"string"},e.inferSemanticTypeFromDataType=function(t){return i[t]},e.inferAnalyticTypeFromDataType=function(t){return a[t]},e.parseCell=u,e.parseTable=function(t,e){var r,o,i=[],a=t.substring(0,t.length-1).split("\n");try{for(var s=n(a),c=s.next();!c.done;c=s.next()){for(var l=c.value,f={},h=l.split(/[\t]/),d=0;d<e.length;d++)f[e[d].fid]=u(h[d],e[d].dataType);i.push(f)}}catch(p){r={error:p}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return i}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.CHDataGraph=void 0;var i=r(5),a=r(4),u=function(){function t(t,e,r){this.DIMENSION_CORRELATION_THRESHOLD=i.CramersVThreshold,this.MEASURE_CORRELATION_THRESHOLD=i.PearsonCorrelation.strong,this.SOFT_MAX_DIM_IN_VIEW=4,this.SOFT_MAX_MEA_IN_VIEW=3,this.dimensions=[],this.measures=[],this.viewName=t,this.dimensions=e,this.measures=r}return t.prototype.computeGraph=function(t,e){return n(this,void 0,void 0,(function(){var r,n,i,a,u,s,c,l;return o(this,(function(o){switch(o.label){case 0:r=this.viewName,n=t.map((function(){return t.map((function(){return 0}))})),i=0,o.label=1;case 1:if(!(i<t.length))return[3,6];a=0,o.label=2;case 2:return a<t.length?(u=n[i],s=a,c=n[a],l=i,[4,e(r,t[i],t[a])]):[3,5];case 3:u[s]=c[l]=o.sent(),o.label=4;case 4:return a++,[3,2];case 5:return i++,[3,1];case 6:return[2,n]}}))}))},t.prototype.computeDGraph=function(t){return n(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e=this,[4,this.computeGraph(this.dimensions,t)];case 1:return e.DG=r.sent(),[2,this.DG]}}))}))},t.prototype.computeMGraph=function(t){return n(this,void 0,void 0,(function(){var e;return o(this,(function(r){switch(r.label){case 0:return e=this,[4,this.computeGraph(this.measures,t)];case 1:return e.MG=r.sent(),[2,this.MG]}}))}))},t.prototype.clusterDGraph=function(t){var e=this,r=e.DG,n=e.dimensions,o=e.SOFT_MAX_DIM_IN_VIEW,i=e.DIMENSION_CORRELATION_THRESHOLD,u="number"===typeof t?t:i;return this.DClusters=a.Cluster.kruskal({matrix:r,measures:n,groupMaxSize:Math.round(n.length/o),threshold:u}),this.DClusters},t.prototype.clusterMGraph=function(t){var e=this,r=e.MG,n=e.measures,o=e.MEASURE_CORRELATION_THRESHOLD,i=e.SOFT_MAX_MEA_IN_VIEW,u="number"===typeof t?t:o;return this.MClusters=a.Cluster.kruskal({matrix:r,measures:n,groupMaxSize:Math.round(n.length/i),threshold:u}),this.MClusters},t}();e.CHDataGraph=u},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.CHStatistics=e.getCombinationFromClusterGroups=void 0;var s=r(0);e.getCombinationFromClusterGroups=function(t,e){var r,n,o=[];try{for(var c=i(t),l=c.next();!l.done;l=c.next()){var f=l.value,h=(0,s.getCombination)(f,e.MIN,e.MAX);o.push.apply(o,u([],a(h),!1))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o};var c=function(){function t(t){var e=this;this.chiSquared=function(t,r,i){return n(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.utils.query("with col1Totals as (select `".concat(r,"` as col1, count(*) as values_count from ").concat(t," group by `").concat(r,"`),\n            col2Totals as (select `").concat(i,"` as col2, count(*) as values_count from ").concat(t," group by `").concat(i,"`),\n            total as (select count(*) as values_count from ").concat(t,"),\n            colPairs as (select `").concat(r,"` as col1, `").concat(i,"` as col2, count(*) as values_count from ").concat(t," group by `").concat(r,"`, `").concat(i,"`)\n            select sum(value) from (select pow(col1Totals.values_count * (col2Totals.values_count / total.values_count) - colPairs.values_count, 2) / (col1Totals.values_count * (col2Totals.values_count / total.values_count)) as value\n            from colPairs, total \n            inner join col1Totals on colPairs.col1 = col1Totals.col1\n            inner join col2Totals on colPairs.col2 = col2Totals.col2);\n        "))];case 1:return e=n.sent(),[2,Number(e)]}}))}))},this.cramersV=function(t,r,i){return n(e,void 0,void 0,(function(){var e,n,a;return o(this,(function(o){switch(o.label){case 0:return[4,this.chiSquared(t,r,i)];case 1:return e=o.sent(),[4,this.utils.query("select count(*), uniq(`".concat(r,"`), uniq(`").concat(i,"`) from ").concat(t))];case 2:return n=o.sent(),a=n.slice(0,-1).split("\t").map((function(t){return parseInt(t)})),[2,Math.sqrt(e/(a[0]*Math.min(a[1]-1,a[2]-1)))]}}))}))},this.pearsonCC=function(t,r,i){return n(e,void 0,void 0,(function(){var e;return o(this,(function(n){switch(n.label){case 0:return[4,this.utils.query("select corr(`".concat(r,"`, `").concat(i,"`) from ").concat(t))];case 1:return e=n.sent(),[2,Number(e)]}}))}))},this.getSpaceImpurity=function(t,r,i){return n(e,void 0,void 0,(function(){var e,n,a,u;return o(this,(function(o){switch(o.label){case 0:return[4,this.utils.query("with agg_view as (select count(*) as values_count, ".concat(i.map((function(t){return"sum(`".concat(t,"`) as `sum_").concat(t,"`")})).join(",")," from ").concat(t," group by ").concat(r.map((function(t){return"`".concat(t,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(i.map((function(t){return"sum(abs(`sum_".concat(t,"`)) as `abssum_sum_").concat(t,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(i.map((function(t){return"abs(`sum_".concat(t,"`) / `abssum_sum_").concat(t,"` as `pb_").concat(t,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(i.map((function(t){return"if(`pb_".concat(t,"` = 0, 0, -`pb_").concat(t,"` * log2(`pb_").concat(t,"`)) as `safe_").concat(t,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(i.map((function(t){return"sum(`safe_".concat(t,"`)")})).join(",")," from safe_value\n        "))];case 1:for(e=o.sent(),n=e.slice(0,-1).split("\t").map((function(t){return Number(t)})),a=0,u=1;u<n.length;u++)a+=n[u];return[2,a]}}))}))},this.utils=t}return t.prototype.getCombinationFromClusterGroups=function(t,e){var r,n,o=[];try{for(var c=i(t),l=c.next();!l.done;l=c.next()){var f=l.value,h=(0,s.getCombination)(f,e.MIN,e.MAX);o.push.apply(o,u([],a(h),!1))}}catch(d){r={error:d}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return o},t}();e.CHStatistics=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pureSpec=void 0;var n=r(13);e.pureSpec=function(t,e){void 0===e&&(e=10);var r=t.sort((function(t,e){return t.impurity-e.impurity})),o=(0,n.encoding)(r),i=new Set(t.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))),a=new Set(t.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key})));if(o.position&&2===o.position.length)if(i.has(o.position[0])&&a.has(o.position[1])||i.has(o.position[1])&&a.has(o.position[0])){var u=i.has(o.position[0])?0:1,s=o.position[u],c=o.position[(u+1)%2];o.position=[s,c];var l=t.find((function(t){return t.key===s})),f=l?l.features.unique:0;o.geomType=["interval","line","area"].filter((function(t){return f>=n.geomTypes[t][0]&&f<=n.geomTypes[t][1]})),"nominal"===l.semanticType&&(o.geomType=["interval"])}else o.geomType=["point","density"].filter((function(t){return e>=n.geomTypes[t][0]&&e<=n.geomTypes[t][1]}));return{schema:o}}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CHUtils=e.setCHConfig=e.getCHConfig=e.CLICKHOUSE_CONFIG=void 0;var a=i(r(56));e.CLICKHOUSE_CONFIG={protocol:"http",host:"localhost",port:8123,path:""},e.getCHConfig=function(){return e.CLICKHOUSE_CONFIG},e.setCHConfig=function(t){Object.keys(t).forEach((function(r){e.CLICKHOUSE_CONFIG[r]=t[r]}))};var u=function(){function t(t){this.config=t||{protocol:"http",host:"localhost",port:8123,path:""}}return t.prototype.getCHConfig=function(){return this.config},t.prototype.setCHConfig=function(t){var e=this;Object.keys(t).forEach((function(r){e.config[r]=t[r]}))},t.prototype.query=function(t){return n(this,void 0,void 0,(function(){var e,r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this.config,[4,(0,a.default)("".concat(e.protocol,"://").concat(e.host,":").concat(e.port).concat(e.path,"?query=").concat(t))];case 1:return[2,n.sent().data];case 2:throw r=n.sent(),new Error("[SQL Error] ".concat(t,".\n").concat(r.toString()));case 3:return[2]}}))}))},t.prototype.queryw=function(t){return n(this,void 0,void 0,(function(){var e,r;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this.config,[4,(0,a.default)({url:"".concat(e.protocol,"://").concat(e.host,":").concat(e.port).concat(e.path),method:"post",params:{query:t}})];case 1:return[2,n.sent().data];case 2:throw r=n.sent(),new Error("[SQL Error] ".concat(t,".\n").concat(r.toString()));case 3:return[2]}}))}))},t}();e.CHUtils=u},function(t,e,r){t.exports=r(57)},function(t,e,r){"use strict";var n=r(1),o=r(21),i=r(58),a=r(29);var u=function t(e){var r=new i(e),u=o(i.prototype.request,r);return n.extend(u,i.prototype,r),n.extend(u,r),u.create=function(r){return t(a(e,r))},u}(r(14));u.Axios=i,u.CanceledError=r(10),u.CancelToken=r(77),u.isCancel=r(28),u.VERSION=r(30).version,u.toFormData=r(24),u.AxiosError=r(6),u.Cancel=u.CanceledError,u.all=function(t){return Promise.all(t)},u.spread=r(78),u.isAxiosError=r(79),t.exports=u,t.exports.default=u},function(t,e,r){"use strict";var n=r(1),o=r(22),i=r(59),a=r(60),u=r(29),s=r(27),c=r(76),l=c.validators;function f(t){this.defaults=t,this.interceptors={request:new i,response:new i}}f.prototype.request=function(t,e){"string"===typeof t?(e=e||{}).url=t:e=t||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;void 0!==r&&c.assertOptions(r,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,s=[];if(this.interceptors.response.forEach((function(t){s.push(t.fulfilled,t.rejected)})),!o){var f=[a,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(s),i=Promise.resolve(e);f.length;)i=i.then(f.shift(),f.shift());return i}for(var h=e;n.length;){var d=n.shift(),p=n.shift();try{h=d(h)}catch(y){p(y);break}}try{i=a(h)}catch(y){return Promise.reject(y)}for(;s.length;)i=i.then(s.shift(),s.shift());return i},f.prototype.getUri=function(t){t=u(this.defaults,t);var e=s(t.baseURL,t.url);return o(e,t.params,t.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(t){f.prototype[t]=function(e,r){return this.request(u(r||{},{method:t,url:e,data:(r||{}).data}))}})),n.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,o){return this.request(u(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}f.prototype[t]=e(),f.prototype[t+"Form"]=e(!0)})),t.exports=f},function(t,e,r){"use strict";var n=r(1);function o(){this.handlers=[]}o.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},o.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},o.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=o},function(t,e,r){"use strict";var n=r(1),o=r(61),i=r(28),a=r(14),u=r(10);function s(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new u}t.exports=function(t){return s(t),t.headers=t.headers||{},t.data=o.call(t,t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return s(t),e.data=o.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(s(t),e&&e.response&&(e.response.data=o.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},function(t,e,r){"use strict";var n=r(1),o=r(14);t.exports=function(t,e,r){var i=this||o;return n.forEach(r,(function(r){t=r.call(i,t,e)})),t}},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"===typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var s,c=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?c=s.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=u(h);l=!0;for(var e=c.length;e;){for(s=c,c=[];++f<e;)s&&s[f].run();f=-1,e=c.length}s=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||u(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t,e){n.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))}},function(t,e,r){"use strict";(function(t){var n=r(65),o=r(66),i=r(67);function a(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=s.prototype:(null===t&&(t=new s(e)),t.length=e),t}function s(t,e,r){if(!s.TYPED_ARRAY_SUPPORT&&!(this instanceof s))return new s(t,e,r);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return c(this,t,e,r)}function c(t,e,r,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);s.TYPED_ARRAY_SUPPORT?(t=e).__proto__=s.prototype:t=h(t,e);return t}(t,e,r,n):"string"===typeof e?function(t,e,r){"string"===typeof r&&""!==r||(r="utf8");if(!s.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|p(e,r),o=(t=u(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(s.isBuffer(e)){var r=0|d(e.length);return 0===(t=u(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(n=e.length)!==n?u(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=u(t,e<0?0:0|d(e)),!s.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|d(e.length);t=u(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function d(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(s.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return q(t).length;default:if(n)return z(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return A(this,e,r);case"utf8":case"utf-8":return O(this,e,r);case"ascii":return D(this,e,r);case"latin1":case"binary":return I(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function m(t,e,r,n,o){if(0===t.length)return-1;if("string"===typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"===typeof e&&(e=s.from(e,n)),s.isBuffer(e))return 0===e.length?-1:g(t,e,r,n,o);if("number"===typeof e)return e&=255,s.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):g(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function g(t,e,r,n,o){var i,a=1,u=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,r/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=r;i<u;i++)if(c(t,i)===c(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===s)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+s>u&&(r=u-s),i=r;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(c(t,i+h)!==c(e,h)){f=!1;break}if(f)return i}return-1}function b(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length;if(i%2!==0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[r+a]=u}return a}function w(t,e,r,n){return Y(z(e,t.length-r),t,r,n)}function _(t,e,r,n){return Y(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function S(t,e,r,n){return _(t,e,r,n)}function M(t,e,r,n){return Y(q(e),t,r,n)}function x(t,e,r,n){return Y(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)n=(r=t.charCodeAt(a))>>8,o=r%256,i.push(o),i.push(n);return i}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){var i,a,u,s,c=t[o],l=null,f=c>239?4:c>223?3:c>191?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128===(192&(i=t[o+1]))&&(s=(31&c)<<6|63&i)>127&&(l=s);break;case 3:i=t[o+1],a=t[o+2],128===(192&i)&&128===(192&a)&&(s=(15&c)<<12|(63&i)<<6|63&a)>2047&&(s<55296||s>57343)&&(l=s);break;case 4:i=t[o+1],a=t[o+2],u=t[o+3],128===(192&i)&&128===(192&a)&&128===(192&u)&&(s=(15&c)<<18|(63&i)<<12|(63&a)<<6|63&u)>65535&&s<1114112&&(l=s)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}e.Buffer=s,e.SlowBuffer=function(t){+t!=t&&(t=0);return s.alloc(+t)},e.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),s.poolSize=8192,s._augment=function(t){return t.__proto__=s.prototype,t},s.from=function(t,e,r){return c(null,t,e,r)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?u(t,e):void 0!==r?"string"===typeof n?u(t,e).fill(r,n):u(t,e).fill(r):u(t,e)}(null,t,e,r)},s.allocUnsafe=function(t){return f(null,t)},s.allocUnsafeSlow=function(t){return f(null,t)},s.isBuffer=function(t){return!(null==t||!t._isBuffer)},s.compare=function(t,e){if(!s.isBuffer(t)||!s.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}return r<n?-1:n<r?1:0},s.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return s.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=s.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r];if(!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},s.byteLength=p,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},s.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},s.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},s.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},s.prototype.equals=function(t){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===s.compare(this,t)},s.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},s.prototype.compare=function(t,e,r,n,o){if(!s.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),u=Math.min(i,a),c=this.slice(n,o),l=t.slice(e,r),f=0;f<u;++f)if(c[f]!==l[f]){i=c[f],a=l[f];break}return i<a?-1:a<i?1:0},s.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},s.prototype.indexOf=function(t,e,r){return m(this,t,e,r,!0)},s.prototype.lastIndexOf=function(t,e,r){return m(this,t,e,r,!1)},s.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"===typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return b(this,t,e,r);case"utf8":case"utf-8":return w(this,t,e,r);case"ascii":return _(this,t,e,r);case"latin1":case"binary":return S(this,t,e,r);case"base64":return M(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function D(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function I(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function A(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=U(t[i]);return o}function C(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,r,n,o,i){if(!s.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function j(t,e,r,n){e<0&&(e=65535+e+1);for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function P(t,e,r,n){e<0&&(e=4294967295+e+1);for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function k(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function F(t,e,r,n,i){return i||k(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,i){return i||k(t,0,r,8),o.write(t,e,r,n,52,8),r+8}s.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),s.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=s.prototype;else{var o=e-t;r=new s(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},s.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},s.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},s.prototype.readUInt8=function(t,e){return e||N(t,1,this.length),this[t]},s.prototype.readUInt16LE=function(t,e){return e||N(t,2,this.length),this[t]|this[t+1]<<8},s.prototype.readUInt16BE=function(t,e){return e||N(t,2,this.length),this[t]<<8|this[t+1]},s.prototype.readUInt32LE=function(t,e){return e||N(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},s.prototype.readUInt32BE=function(t,e){return e||N(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},s.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},s.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||N(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},s.prototype.readInt8=function(t,e){return e||N(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},s.prototype.readInt16LE=function(t,e){e||N(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(t,e){e||N(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(t,e){return e||N(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},s.prototype.readInt32BE=function(t,e){return e||N(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},s.prototype.readFloatLE=function(t,e){return e||N(t,4,this.length),o.read(this,t,!0,23,4)},s.prototype.readFloatBE=function(t,e){return e||N(t,4,this.length),o.read(this,t,!1,23,4)},s.prototype.readDoubleLE=function(t,e){return e||N(t,8,this.length),o.read(this,t,!0,52,8)},s.prototype.readDoubleBE=function(t,e){return e||N(t,8,this.length),o.read(this,t,!1,52,8)},s.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||R(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},s.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||R(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},s.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,1,255,0),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},s.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},s.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},s.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):P(this,t,e,!0),e+4},s.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},s.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);R(this,t,e,r,o-1,-o)}var i=0,a=1,u=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===u&&0!==this[e+i-1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+r},s.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);R(this,t,e,r,o-1,-o)}var i=r-1,a=1,u=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===u&&0!==this[e+i+1]&&(u=1),this[e+i]=(t/a>>0)-u&255;return e+r},s.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,1,127,-128),s.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},s.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},s.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},s.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):P(this,t,e,!0),e+4},s.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),s.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):P(this,t,e,!1),e+4},s.prototype.writeFloatLE=function(t,e,r){return F(this,t,e,!0,r)},s.prototype.writeFloatBE=function(t,e,r){return F(this,t,e,!1,r)},s.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},s.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},s.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var o,i=n-r;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!s.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i},s.prototype.fill=function(t,e,r,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,r=this.length):"string"===typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"===typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=s.isBuffer(t)?t:z(new s(t,n).toString()),u=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%u]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function Y(t,e,r,n){for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(25))},function(t,e,r){"use strict";e.byteLength=function(t){var e=c(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=c(t),a=n[0],u=n[1],s=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,u)),l=0,f=u>0?a-4:a;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],s[l++]=e>>16&255,s[l++]=e>>8&255,s[l++]=255&e;2===u&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,s[l++]=255&e);1===u&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,s[l++]=e>>8&255,s[l++]=255&e);return s},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=16383,u=0,s=r-o;u<s;u+=a)i.push(l(t,u,u+a>s?s:u+a));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")};for(var n=[],o=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0,s=a.length;u<s;++u)n[u]=a[u],o[a.charCodeAt(u)]=u;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var o,i,a=[],u=e;u<r;u+=3)o=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var i,a,u=8*o-n-1,s=(1<<u)-1,c=s>>1,l=-7,f=r?o-1:0,h=r?-1:1,d=t[e+f];for(f+=h,i=d&(1<<-l)-1,d>>=-l,l+=u;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===s)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),i-=c}return(d?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,u,s,c=8*i-o-1,l=(1<<c)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),(e+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=l?(u=0,a=l):a+f>=1?(u=(e*s-1)*Math.pow(2,o),a+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+d]=255&u,d+=p,u/=256,o-=8);for(a=a<<o|u,c+=o;c>0;t[r+d]=255&a,d+=p,a/=256,c-=8);t[r+d-p]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";var n=r(6);t.exports=function(t,e,r){var o=r.config.validateStatus;r.status&&o&&!o(r.status)?e(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}},function(t,e,r){"use strict";var n=r(1);t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,o,i,a){var u=[];u.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&u.push("expires="+new Date(r).toGMTString()),n.isString(o)&&u.push("path="+o),n.isString(i)&&u.push("domain="+i),!0===a&&u.push("secure"),document.cookie=u.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(t,e,r){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}},function(t,e,r){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},function(t,e,r){"use strict";var n=r(1),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,r,i,a={};return t?(n.forEach(t.split("\n"),(function(t){if(i=t.indexOf(":"),e=n.trim(t.substr(0,i)).toLowerCase(),r=n.trim(t.substr(i+1)),e){if(a[e]&&o.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([r]):a[e]?a[e]+", "+r:r}})),a):a}},function(t,e,r){"use strict";var n=r(1);t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=o(window.location.href),function(e){var r=n.isString(e)?o(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}},function(t,e,r){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}},function(t,e){t.exports=null},function(t,e,r){"use strict";var n=r(30).version,o=r(6),i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var a={};i.transitional=function(t,e,r){function i(t,e){return"[Axios v"+n+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,n,u){if(!1===t)throw new o(i(n," has been removed"+(e?" in "+e:"")),o.ERR_DEPRECATED);return e&&!a[n]&&(a[n]=!0,console.warn(i(n," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,n,u)}},t.exports={assertOptions:function(t,e,r){if("object"!==typeof t)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),i=n.length;i-- >0;){var a=n[i],u=e[a];if(u){var s=t[a],c=void 0===s||u(s,a,t);if(!0!==c)throw new o("option "+a+" must be "+c,o.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new o("Unknown option "+a,o.ERR_BAD_OPTION)}},validators:i}},function(t,e,r){"use strict";var n=r(10);function o(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;this.promise.then((function(t){if(r._listeners){var e,n=r._listeners.length;for(e=0;e<n;e++)r._listeners[e](t);r._listeners=null}})),this.promise.then=function(t){var e,n=new Promise((function(t){r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},o.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},o.source=function(){var t;return{token:new o((function(e){t=e})),cancel:t}},t.exports=o},function(t,e,r){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},function(t,e,r){"use strict";var n=r(1);t.exports=function(t){return n.isObject(t)&&!0===t.isAxiosError}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Cuboid=void 0;var a=r(8),u=r(0),s=r(12),c=["max","min","sum","mean","count","dist"],l=function(){function t(t){this.cached=!1,this.statSize=0,this.storageMode=a.IStorageMode.LocalCache;var e=t.dimensions,r=t.measures,n=t.ops,o=void 0===n?c:n,i=t.ranges,u=t.storage,s=t.storageMode,l=void 0===s?a.IStorageMode.LocalDisk:s;this.dimensions=e,this.measures=r,this.ops=o,this._state=[],this.cached=!1,this.ranges=i,this.storageMode=l,this.sto=u}return t.prototype.cacheState=function(t){this.cached=!0,this._state=t},t.prototype.clearState=function(){this.storageMode===a.IStorageMode.LocalDisk&&(this.cached=!1,this._state=[])},t.prototype.getState=function(){return n(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=[],this.storageMode!==a.IStorageMode.LocalDisk?[3,2]:this.cached?[2,this._state]:[4,this.sto.getItem(this.dimensions.join("-"))];case 1:return t=e.sent()||[],[3,3];case 2:t=this._state,e.label=3;case 3:return this.statSize=t.length,[2,t]}}))}))},t.prototype.loadStateInCache=function(){return n(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return this.storageMode!==a.IStorageMode.LocalDisk?[3,2]:(t=this,[4,this.sto.getItem(this.dimensions.join("-"))]);case 1:t._state=e.sent()||[],e.label=2;case 2:return this.cached=!0,[2]}}))}))},t.prototype.setState=function(t){return n(this,void 0,void 0,(function(){return o(this,(function(e){switch(e.label){case 0:return this.statSize=t.length,this.storageMode!==a.IStorageMode.LocalDisk?[3,2]:[4,this.sto.setItem(this.dimensions.join("-"),t)];case 1:return e.sent(),[3,3];case 2:this._state=t,e.label=3;case 3:return[2]}}))}))},t.prototype.setData=function(t){return n(this,void 0,void 0,(function(){var e,r,n,a,c,l,f,h,d,p,y,v;return o(this,(function(o){switch(o.label){case 0:e=(0,u.stdAggregate)({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:t}),n=(r=this).dimensions,a=r.measures,c=r.ranges,l=(0,u.groupBy)(t,n),f=function(t){var e,r,o=(0,u.getAggHashKey)(n.map((function(e){return t.groupDict[e]}))),f=l.get(o),h=function(e){var r=c.get(e);t.stat[e].dist=(0,s.dist)(f.map((function(t){return t[e]})),r)};try{for(var d=(e=void 0,i(a)),p=d.next();!p.done;p=d.next()){h(p.value)}}catch(y){e={error:y}}finally{try{p&&!p.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}};try{for(h=i(e),d=h.next();!d.done;d=h.next())p=d.value,f(p)}catch(m){y={error:m}}finally{try{d&&!d.done&&(v=h.return)&&v.call(h)}finally{if(y)throw y.error}}return[4,this.setState(e)];case 1:return o.sent(),[2,e]}}))}))},t.prototype.computeFromCuboid=function(t){return n(this,void 0,void 0,(function(){var e,r,n,i,a,s;return o(this,(function(o){switch(o.label){case 0:return r=(e=this).ops,n=e.measures,i=e.dimensions,[4,t.getState()];case 1:return a=o.sent(),s=(0,u.stdAggregateFromCuboid)({dimensions:i,measures:n,ops:r,cuboidState:a}),[4,this.setState(s)];case 2:return o.sent(),[2,s]}}))}))},Object.defineProperty(t.prototype,"size",{get:function(){return this.statSize},enumerable:!1,configurable:!0}),t.prototype.getAggregatedRows=function(t,e){return n(this,void 0,void 0,(function(){var r,n,a,u,s,c,l,f,h,d,p,y,v,m,g,b,w;return o(this,(function(o){switch(o.label){case 0:return r=[],n=this.dimensions,[4,this.getState()];case 1:a=o.sent();try{for(u=i(a),s=u.next();!s.done;s=u.next()){c=s.value,l={};try{for(b=void 0,f=i(n),h=f.next();!h.done;h=f.next())d=h.value,l[d]=c.groupDict[d]}catch(_){b={error:_}}finally{try{h&&!h.done&&(w=f.return)&&w.call(f)}finally{if(b)throw b.error}}for(p=0;p<t.length;p++)y=t[p],v=e[p],l[y]=c.stat[y][v];r.push(l)}}catch(S){m={error:S}}finally{try{s&&!s.done&&(g=u.return)&&g.call(u)}finally{if(m)throw m.error}}return[2,r]}}))}))},t.prototype.getRawState=function(){return n(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.getState()]}))}))},t}();e.Cuboid=l},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.VegaLite=void 0,e.VegaLite=i(r(82))},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.labDistVis=e.geomTypeMap=void 0;var u=r(0),s=r(3);e.geomTypeMap={interval:"boxplot",line:"line",point:"point",density:"point"};var c={quantitative:["y","x","size","opacity","color"],ordinal:["y","x","opacity","color","size","shape"],nominal:["y","x","color","row","column","opacity","size","shape"],temporal:["y","x","size","color","opacity","shape"]},l={dimension:["row","column"],measure:["repeat"]};function f(t,e){var r,n,o=new Set(t),i=new Set(e);if(o.size!==i.size)return!1;try{for(var u=a(o),s=u.next();!s.done;s=u.next()){var c=s.value;if(!i.has(c))return!1}}catch(l){r={error:l}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return!0}e.labDistVis=function(t){for(var e=t.pattern,r=t.dataSource,a=(0,s.deepcopy)(e.fields),h=a.filter((function(t){return"measure"===t.analyticType})),d=a.filter((function(t){return"dimension"===t.analyticType})),p=function(t){var e=0,n=r.map((function(e){return e[h[t].fid]})),o=(0,u.binMap)(n);if(h.length>1){for(var i=function(n){if(n===t)return"continue";var i=r.map((function(t){return t[h[n].fid]}));e+=(0,u.mic)(o,i)},a=0;a<h.length;a++)i(a);e/=h.length-1}else e=Math.log2(16)-(0,u.entropy)((0,u.rangeNormilize)((0,u.bin)(n).filter((function(t){return t>0}))));h[t].features.entropy=e},y=0;y<h.length;y++)p(y);var v=function(t){for(var e=r.map((function(e){return e[d[t].fid]})),n=0,o=function(t){var o=r.map((function(e){return e[h[t].fid]})),i=(0,u.pureGeneralMic)(e,o);n+=i},i=0;i<h.length;i++)o(i);n/=h.length,d[t].features.originEntropy=d[t].features.entropy,d[t].features.entropy=n};for(y=0;y<d.length;y++)v(y);var m=new Set,g=function(t){var e=[],r=[],o=1===t.length,i=t.filter((function(t){return"measure"===t.analyticType})).filter((function(t){return"nominal"===t.semanticType||"ordinal"===t.semanticType})).length>0;if(o||i)e.push({fid:"__tmp_stat_id_unique",semanticType:"quantitative",analyticType:"measure",features:{entropy:1/0,maxEntropy:1/0,unique:1e3,min:0,max:0},distribution:[]}),r.push({aggregate:"count"}),t.filter((function(t){return"quantitative"===t.semanticType})).forEach((function(t){e.push(n({},t)),r.push({field:t.fid,title:t.name||t.fid,semanticType:t.semanticType,bin:!0})}));else{var a=t.filter((function(t){return"measure"===t.analyticType}));1===a.length&&(a.forEach((function(t){e.push(n({},t)),r.push({field:t.fid,semanticType:t.semanticType,title:"mean(".concat(t.name||t.fid,")"),aggregate:"mean"})})),t.filter((function(t){return"dimension"===t.analyticType&&"quantitative"===t.semanticType})).forEach((function(t){e.push(n({},t)),r.push({field:t.fid,title:t.name||t.fid,semanticType:t.semanticType,bin:!0})})))}var u=t.filter((function(t){return!e.find((function(e){return e.fid===t.fid}))}));return{statFields:e,distFields:u,statEncodes:r}}(a),b=g.statFields,w=g.distFields,_=g.statEncodes,S=function(t,e,r,n){void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===n&&(n=[]);var a=i(i([],o(e),!1),o(r),!1).sort((function(t,e){return e.features.entropy-t.features.entropy})).slice(0,2).map((function(t){return t.semanticType}));if(n.find((function(t){return"count"===t.aggregate})))return"bar";if(1===t.filter((function(t){return"measure"===t.analyticType})).length){if(f(a,["nominal","nominal"]))return"text";if(f(a,["nominal","quantitative"]))return"bar";if(f(a,["ordinal","quantitative"]))return"point";if(f(a,["nominal","ordinal"]))return"point";if(f(a,["nominal","temporal"]))return"point";if(f(a,["quantitative","quantitative"]))return"circle";if(f(a,["temporal","quantitative"]))return"line"}else{if(f(a,["nominal","nominal"]))return"square";if(f(a,["nominal","quantitative"]))return"tick";if(f(a,["ordinal","quantitative"]))return"point";if(f(a,["nominal","ordinal"]))return"tick";if(f(a,["quantitative","quantitative"]))return"circle";if(f(a,["nominal","temporal"]))return"point"}return"point"}(a,b,w,_);!function(t,e){"bar"===t&&(e.add("size"),e.add("shape"))}(S,m);var M=function(t){var e=t.fields,r=t.usedChannels,n=void 0===r?new Set:r,a=t.statFields,u=void 0===a?[]:a,s=t.statEncodes,f=void 0===s?[]:s,h=i([],o(e),!1),d={},p=null,y=0;h.sort((function(t,e){return e.features.entropy-t.features.entropy})),u.sort((function(t,e){return e.features.entropy-t.features.entropy}));for(var v=i(i([],o(u),!1),o(h),!1).sort((function(t,e){return e.features.entropy-t.features.entropy})),m=function(t){var e=c[v[t].semanticType],r=!1,o=u.findIndex((function(e){return e.fid===v[t].fid})),i=h.findIndex((function(e){return e.fid===v[t].fid}));if(o>-1){for(var a=0;a<e.length;a++)if(!n.has(e[a])){d[e[a]]=f[o],n.add(e[a]),r=!0;break}r||"dimension"===(p=u[o].analyticType)&&y<l[p].length&&(d[l[p][y]]=f[o],y++)}else{for(a=0;a<e.length;a++)if(!n.has(e[a])){d[e[a]]={field:h[i].fid,type:h[i].semanticType,title:h[i].name||h[i].fid},"temporal"===h[i].semanticType&&"color"===e[a]&&(d[e[a]].scale={scheme:"viridis"}),n.add(e[a]),r=!0;break}r||"dimension"===(p=h[i].analyticType)&&y<l[p].length&&(d[l[p][y]]={field:h[i].fid,type:h[i].semanticType},y++)}},g=0;g<v.length;g++)m(g);return d}({fields:w,usedChannels:m,statFields:b,statEncodes:_});return function(t){if(t.x&&"temporal"!==t.x.type&&t.y&&"temporal"===t.y.type){var e=t.x;t.x=t.y,t.y=e}}(M),{data:{name:"dataSource"},mark:{type:S,opacity:"circle"===S?.56:.88},encoding:M}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encoding=e.geomTypes=e.VISUAL_CHANNELS=e.VIEngine=e.InsightWorkerCollection=e.DataGraph=void 0;var n=r(32);Object.defineProperty(e,"DataGraph",{enumerable:!0,get:function(){return n.DataGraph}});var o=r(33);Object.defineProperty(e,"InsightWorkerCollection",{enumerable:!0,get:function(){return o.InsightWorkerCollection}});var i=r(88);Object.defineProperty(e,"VIEngine",{enumerable:!0,get:function(){return i.VIEngine}});var a=r(92);Object.defineProperty(e,"VISUAL_CHANNELS",{enumerable:!0,get:function(){return a.VISUAL_CHANNELS}});var u=r(13);Object.defineProperty(e,"geomTypes",{enumerable:!0,get:function(){return u.geomTypes}}),Object.defineProperty(e,"encoding",{enumerable:!0,get:function(){return u.encoding}})},function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return o(e,t),e},a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Subspace=e.subspaceSearching=e.insightExtraction=void 0;var u=i(r(15));e.Subspace=u;var s=r(85);Object.defineProperty(e,"insightExtraction",{enumerable:!0,get:function(){return s.insightExtraction}}),Object.defineProperty(e,"subspaceSearching",{enumerable:!0,get:function(){return s.subspaceSearching}}),a(r(86),e),a(r(34),e),a(r(35),e),a(r(87),e)},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.insightExtraction=e.subspaceSearching=e.getDimSetsBasedOnClusterGroups=void 0;var a=r(0),u=r(0),s=r(5),c=r(4),l=r(2);function f(t,e){var r,a,f=[],h=function(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var o=n+1;o<e.length;o++)r[n][o]=r[o][n]=(0,u.cramersV)(t,e[n],e[o])}return r}(t,e),d=c.Cluster.kruskal({matrix:h,measures:e,groupMaxSize:Math.round(e.length/4),threshold:s.CramersVThreshold});try{for(var p=n(d),y=p.next();!y.done;y=p.next()){var v=y.value,m=(0,u.getCombination)(v,1,l.CHANNEL.maxDimensionNumber);f.push.apply(f,i([],o(m),!1))}}catch(g){r={error:g}}finally{try{y&&!y.done&&(a=p.return)&&a.call(p)}finally{if(r)throw r.error}}return f}function h(t,e,r){return void 0===r&&(r=!0),r?f(t,e):(0,u.getCombination)(e)}e.getDimSetsBasedOnClusterGroups=f,e.subspaceSearching=h,e.insightExtraction=function(t,e,r,o){var i,s,c,l;void 0===o&&(o="sum");var f=[],d=h(t,e,!0);try{for(var p=n(d),y=p.next();!y.done;y=p.next()){var v=y.value,m={},g=(0,a.stdAggregate)({dimensions:e,measures:r,dataSource:t,ops:r.map((function(t){return o||"sum"}))}),b=function(t){var e=g.map((function(e){return e[t]})),r=(0,a.normalize)((0,u.mapPositive)(e)),n=(0,a.entropy)(r);m[t]=n};try{for(var w=(c=void 0,n(r)),_=w.next();!_.done;_=w.next()){b(_.value)}}catch(O){c={error:O}}finally{try{_&&!_.done&&(l=w.return)&&l.call(w)}finally{if(c)throw c.error}}for(var S=r.map((function(t){return r.map((function(t){return 0}))})),M=0;M<r.length;M++){S[M][M]=1;for(var x=M+1;x<r.length;x++){var E=(0,u.pearsonCC)(g,r[M],r[x]);S[x][M]=S[M][x]=E}}f.push([v,m,S])}}catch(T){i={error:T}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(i)throw i.error}}return f}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.getVisSpaces=e.getIntentionSpaces=e.IntentionWorkerCollection=e.getGroupIntentionSpace=e.getTrendIntentionSpace=e.getOutlierIntentionSpace=e.getGeneralIntentionSpace=void 0;var s=r(8),c=r(15),l=r(5),f=r(4),h=r(0),d=r(2),p=r(0),y=r(0),v=r(36);function m(t,e){var r,n;void 0===e&&(e=d.CHANNEL.maxDimensionNumber);var o=[];try{for(var s=i(t),c=s.next();!c.done;c=s.next()){var l=c.value,f=(0,h.getCombination)(l,1,e);o.push.apply(o,u([],a(f),!1))}}catch(p){r={error:p}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return o}e.getGeneralIntentionSpace=function(t,e,r){return n(this,void 0,void 0,(function(){var n,a,u,s,c,l,f,d;return o(this,(function(o){n=0,a=0,u=function(e){var r=t.map((function(t){return t[e]})),o=(0,p.normalize)((0,h.mapPositive)(r)),i=(0,p.entropy)(o);n+=i,a+=i/Math.log2(r.length)};try{for(s=i(r),c=s.next();!c.done;c=s.next())l=c.value,u(l)}catch(y){f={error:y}}finally{try{c&&!c.done&&(d=s.return)&&d.call(s)}finally{if(f)throw f.error}}return n/=r.length,a/=r.length,[2,{dimensions:e,measures:r,type:"default_general",score:n,impurity:n,significance:a=1-a,order:"asc"}]}))}))};e.getOutlierIntentionSpace=function(t,e,r){return n(this,void 0,void 0,(function(){var n,i,a,u,s,c;return o(this,(function(o){for((n=new f.Outier.IsolationForest([],r,t)).buildIsolationForest(),i=n.estimateOutierScore(),a=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],a=s);return c={},e.concat(r).forEach((function(e){c[e]=t[a][e]})),[2,{dimensions:e,measures:r,score:u,significance:u,order:"desc",description:c}]}))}))};e.getTrendIntentionSpace=function(t,e,r){return n(this,void 0,void 0,(function(){var n,s,c,l,f,h,d,p;return o(this,(function(o){if(1!==e.length)return[2,null];(n=u([],a(t),!1)).sort((function(t,r){return t[e[0]]>r[e[0]]?1:t[e[0]]===r[e[0]]?0:t[e[0]]<r[e[0]]?-1:void 0})),s=0;try{for(c=i(r),l=c.next();!l.done;l=c.next())f=l.value,(h=new y.oneDLinearRegression(n,e[0],f)).normalizeDimensions(e),s+=h.significance()}catch(v){d={error:v}}finally{try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(d)throw d.error}}return s/=r.length,[2,{dimensions:e,measures:r,score:s,significance:s,order:"desc"}]}))}))};e.getGroupIntentionSpace=function(t,e,r){return n(this,void 0,void 0,(function(){var n,i;return o(this,(function(o){return e.length<2?[2,null]:(0,i=new v.GroupIntention({dataSource:t,dimensions:e,measures:r,K:8}),n=i.getSignificance(r.concat(e.slice(0,-1)),e.slice(-1)),[2,{dimensions:e,measures:r,score:n,significance:n,order:"desc"}])}))}))};var g=function(){function t(){this.workers=new Map}return t.prototype.register=function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])},t.prototype.enable=function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)},t.prototype.each=function(t){var e,r;try{for(var n=i(this.workers),o=n.next();!o.done;o=n.next()){var u=a(o.value,2),s=u[0],c=u[1];c[0]&&t(c[1],s)}}catch(l){e={error:l}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.init=function(r){void 0===r&&(r={withDefaultIWorkers:!0});var n=r.withDefaultIWorkers,o=void 0===n||n;for(var i in t.colletion||(t.colletion=new t,o&&(t.colletion.register(s.DefaultIWorker.outlier,e.getOutlierIntentionSpace),t.colletion.register(s.DefaultIWorker.cluster,e.getGroupIntentionSpace),t.colletion.register(s.DefaultIWorker.trend,e.getTrendIntentionSpace))),s.DefaultIWorker)t.colletion.enable(s.DefaultIWorker[i],o);return t.colletion},t}();function b(t,r,a){return n(this,void 0,void 0,(function(){var u,s,c,l,f,h,d,p,y=this;return o(this,(function(v){switch(v.label){case 0:u=[],s=function(r){var i,s,c,l,f;return o(this,(function(h){switch(h.label){case 0:return i=r.dimensions,s=r.measures,c=i.join("=;="),t.has(c)?(l=t.get(c),[4,(0,e.getGeneralIntentionSpace)(l,i,s)]):[3,2];case 1:f=h.sent(),a.each((function(t,e){return n(y,void 0,void 0,(function(){var r,n;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,t(l,i,s)];case 1:return null!==(r=o.sent())&&(r.type=e,r.impurity=f.impurity,u.push(r)),[3,3];case 2:return n=o.sent(),console.error("worker failed",{dimensions:i,measures:s,aggData:l},n),[3,3];case 3:return[2]}}))}))})),h.label=2;case 2:return[2]}}))},v.label=1;case 1:v.trys.push([1,6,7,8]),c=i(r),l=c.next(),v.label=2;case 2:return l.done?[3,5]:(f=l.value,[5,s(f)]);case 3:v.sent(),v.label=4;case 4:return l=c.next(),[3,2];case 5:return[3,8];case 6:return h=v.sent(),d={error:h},[3,8];case 7:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(d)throw d.error}return[7];case 8:return[2,u]}}))}))}e.IntentionWorkerCollection=g,e.getIntentionSpaces=b,e.getVisSpaces=function(t){return n(this,void 0,void 0,(function(){var e,r,n,a,u,s,f,d,p,y,v,w,_,S,M,x,E,O,T,D,I,A,C,N,R,j,P,k,F;return o(this,(function(o){switch(o.label){case 0:e=t.dataSource,r=t.dimensions,n=t.measures,a=t.collection,u=t.dimension_correlation_threshold,s=void 0===u?l.CramersVThreshold:u,f=t.measure_correlation_threshold,d=void 0===f?l.PearsonCorrelation.strong:f,p=t.max_dimension_num_in_view,y=void 0===p?3:p,v=t.max_measure_num_in_view,w=void 0===v?3:v,_=r,S=(0,c.getDimClusterGroups)(e,_,s),M=m(S,y),x=(0,c.getMeaSetsBasedOnClusterGroups)(e,n,d),E=m(x,w),O=function(t,e){var r,n,o,a,u=[];try{for(var s=i(t),c=s.next();!c.done;c=s.next()){var l=c.value;try{for(var f=(o=void 0,i(e)),h=f.next();!h.done;h=f.next()){var d=h.value;u.push({dimensions:l,measures:d})}}catch(p){o={error:p}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}}}catch(y){r={error:y}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return u}(M,E),T=new Map,D=(new Date).getTime();try{for(I=i(M),A=I.next();!A.done;A=I.next())C=A.value,N=C.join("=;="),R=(0,h.stdAggregate)({dimensions:C,measures:n,dataSource:e,ops:n.map((function(t){return"sum"}))}),T.set(N,R)}catch(L){k={error:L}}finally{try{A&&!A.done&&(F=I.return)&&F.call(I)}finally{if(k)throw k.error}}return j=(new Date).getTime(),console.log("cube cost",j-D),T.set("*",e),P=a||g.init(),[4,b(T,O,P)];case 1:return[2,o.sent()]}}))}))}},function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KNNClusterWorker=void 0;var i=r(36);e.KNNClusterWorker=function(t,e,r){return n(void 0,void 0,void 0,(function(){var n,a;return o(this,(function(o){return e.length<2?[2,null]:(0,a=new i.GroupIntention({dataSource:t,dimensions:e,measures:r,K:8}),n=a.getSignificance(r.concat(e.slice(0,-1)),e.slice(-1)),[2,{dimensions:e,measures:r,significance:n}])}))}))}},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.VIEngine=void 0;var c=r(89),l=r(32),f=r(31),h=r(0),d=r(33),p=r(13),y=r(3),v=r(90),m=r(2),g=r(91),b=function(){function t(){this.env="browser",this._dimensions=[],this._measures=[],this.cubeStorageName="_cuboids",this.minDistEvalSampleSize=80,this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count","dist"],this.workerCollection=d.InsightWorkerCollection.init()}return t.prototype.serialize=function(){var t=this,e=t.fields,r=t.dataGraph,n=t.subSpaces,o=t.insightSpaces,i=t.dataSource,a=t.rawDataSource,u=t.cube;return{storage:{version:m.VERSION,fields:e,dataGraph:{MClusters:r.MClusters,DClusters:r.DClusters,DG:r.DG,MG:r.MG},subSpaces:n,insightSpaces:o},dataStorage:{version:m.VERSION,dataSource:{raw:a,view:i},cuboids:u.exportCuboids()}}},t.prototype.deSerialize=function(t,e){var r=this;this.fields=t.fields,"undefined"!==typeof this.fieldDictonary&&null!==this.fieldDictonary?this.fieldDictonary.clear():this.fieldDictonary=new Map,t.fields.forEach((function(t){r.fieldDictonary.set(t.key,t)}));var n=this.dimensions,o=this.measures;if(this.dataGraph=new l.DataGraph(n,o),this.dataGraph.DG=t.dataGraph.DG,this.dataGraph.MG=t.dataGraph.MG,this.dataGraph.DClusters=t.dataGraph.DClusters,this.dataGraph.MClusters=t.dataGraph.MClusters,this.subSpaces=t.subSpaces,this.insightSpaces=t.insightSpaces,e){var i=this.aggregators;this.rawDataSource=e.dataSource.raw,this.dataSource=e.dataSource.view,this.cube=new f.Cube({dataSource:e.dataSource.view,dimensions:n,measures:o,ops:i}),Object.keys(e.cuboids).forEach((function(t){r.cube.loadCuboid(t,e.cuboids[t])}))}},t.prototype.setFields=function(t){this._mutFields=t,this.dataSource=(0,y.copyData)(this.rawDataSource);var e=t.map((function(t){return t.key})),r=(0,c.getFieldsSummary)(e,this.dataSource),o=r.fields;r.dictonary;this.rawFields=o.map((function(e,r){var o=n({},e);return"?"!==t[r].dataType&&(o.dataType=t[r].dataType),"?"!==t[r].semanticType&&(o.semanticType=t[r].semanticType),"?"!==t[r].analyticType&&(o.analyticType=t[r].analyticType),o}))},t.prototype.setData=function(t){return this.rawDataSource=t,this.dataSource=(0,y.copyData)(t),this},Object.defineProperty(t.prototype,"dimensions",{get:function(){return this.fields.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.key}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"measures",{get:function(){return this.fields.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.key}))},enumerable:!1,configurable:!0}),t.prototype.buildfieldsSummary=function(){var t=this.fields.map((function(t){return t.key})),e=(0,c.getFieldsSummary)(t,this.dataSource),r=e.fields,n=e.dictonary;return this.fields=r,this.fieldDictonary=n,this},t.prototype.univarSelection=function(t,e){void 0===t&&(t="auto"),void 0===e&&(e=1);for(var r=this.rawFields,n=this.rawDataSource,o=[],i=[],a=0;a<r.length;a++){var u=r[a],s=u.key;if("dimension"===u.analyticType)if("quantitative"===u.semanticType&&u.features.unique>50);else if(("nominal"===u.semanticType||"ordinal"===u.semanticType)&&u.features.unique>m.DOMMAIN_SIZE_THRESHOLD_MAYBE_DROP&&n.length/u.features.unique<this.minDistEvalSampleSize)continue;i.push(a),o.push(s)}var l=(0,c.getFieldsSummary)(o,this.dataSource),f=l.fields,h=l.dictonary;if(f.forEach((function(t,e){var n=i[e];t.semanticType=r[n].semanticType,t.dataType=r[n].dataType,t.analyticType=r[n].analyticType})),this.fields="auto"===t?(0,v.autoFieldSelect)(f):(0,v.fieldSelectByPercent)(f,e),-1===this.fields.findIndex((function(t){return"dimension"===t.analyticType}))){var d=f.filter((function(t){return"dimension"===t.analyticType}));d.length>0&&(d.sort((function(t,e){return t.features.entropy-e.features.entropy})),this.fields.push(d[0]))}this.fieldDictonary=h},t.prototype.buildGraph=function(){return this.dataGraph=new l.DataGraph(this.dimensions,this.measures),this.dataGraph.computeDGraph(this.dataSource),this.dataGraph.computeMGraph(this.dataSource),this},t.prototype.buildCube=function(t){return o(this,void 0,void 0,(function(){var e,r,n,o,a,u,s;return i(this,(function(i){switch(i.label){case 0:return r=(e=this).measures,n=e.dataSource,o=e.dataGraph,a=e.dimensions,u=e.aggregators,[4,(s=t||new f.Cube({dimensions:a,measures:r,dataSource:n,ops:u})).buildBaseCuboid()];case 1:return i.sent(),[4,Promise.all(o.DClusters.map((function(t){return s.buildCuboidOnCluster(t)})))];case 2:return i.sent(),this.cube=s,[2,this]}}))}))},t.prototype.clusterFields=function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this},t.getCombinationFromClusterGroups=function(t,e){var r,n,o=[];try{for(var i=a(t),c=i.next();!c.done;c=i.next()){var l=c.value,f=(0,h.getCombination)(l,e.MIN,e.MAX);o.push.apply(o,s([],u(f),!1))}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},t.prototype.buildSubspaces=function(e,r){var n,o,i,u,s,c;void 0===e&&(e=this.DIMENSION_NUM_IN_VIEW),void 0===r&&(r=this.MEASURE_NUM_IN_VIEW);var l=this.dataGraph.DClusters,f=this.dataGraph.MClusters,d=t.getCombinationFromClusterGroups(f,r),p=[];try{for(var y=a(l),v=y.next();!v.done;v=y.next()){var m=v.value,g=(0,h.getCombination)(m,e.MIN,e.MAX);try{for(var b=(i=void 0,a(g)),w=b.next();!w.done;w=b.next()){var _=w.value;try{for(var S=(s=void 0,a(d)),M=S.next();!M.done;M=S.next()){var x=M.value;p.push({dimensions:_,measures:x})}}catch(E){s={error:E}}finally{try{M&&!M.done&&(c=S.return)&&c.call(S)}finally{if(s)throw s.error}}}}catch(O){i={error:O}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(i)throw i.error}}}}catch(T){n={error:T}}finally{try{v&&!v.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}return this.subSpaces=p,this},t.getSpaceImpurity=function(t,e,r){var n,o,i=0,u=function(e){var r=t.map((function(t){return t[e]})),n=(0,h.normalize)((0,h.mapPositive)(r)),o=(0,h.entropy)(n);i+=o};try{for(var s=a(r),c=s.next();!c.done;c=s.next()){u(c.value)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return i/=r.length},t.prototype.exploreViewsPOC=function(t){return void 0===t&&(t=this.subSpaces),o(this,void 0,void 0,(function(){var e,r,n,o,u,s,c,l,f,h;return i(this,(function(i){e=this,r=[];try{for(n=a(t),o=n.next();!o.done;o=n.next())u=o.value,s=u.dimensions,c=u.measures,l=(0,g.viewStrength)(e.dataSource,s,c),r.push({impurity:l,significance:1,dimensions:s,measures:c})}catch(d){f={error:d}}finally{try{o&&!o.done&&(h=n.return)&&h.call(n)}finally{if(f)throw f.error}}return r.sort((function(t,e){return(e.impurity||0)-(t.impurity||0)})),[2,r]}))}))},t.prototype.exploreViews=function(t){return void 0===t&&(t=this.subSpaces),o(this,void 0,void 0,(function(){var e,r,n,o,u,s,c,l,f,h,d,p;return i(this,(function(y){switch(y.label){case 0:return r=(e=this).measures,n=e.fieldDictonary,e.dataSource,o=[],[4,e.cube.getCuboid([])];case 1:return[4,y.sent().getAggregatedRows(r,r.map((function(){return"dist"})))];case 2:u=y.sent(),s=function(t){var r,s,c,l,f,h,d,p,y,v,b,w;return i(this,(function(i){switch(i.label){case 0:return r=t.dimensions,s=t.measures,[4,e.cube.getCuboid(r)];case 1:return[4,(c=i.sent()).loadStateInCache()];case 2:return i.sent(),[4,c.getAggregatedRows(s,s.map((function(){return"dist"})))];case 3:return l=i.sent(),[4,c.getAggregatedRows(s,s.map((function(){return"count"})))];case 4:f=i.sent(),c.clearState(),h=0,d=function(t){var e=0;u.length>0&&(e=(0,g.entropyAcc)(u[0][t].filter((function(t){return t>0}))));var r=0,o=n.get(t).features.size,i=l.map((function(e,r){return{freq:f[r][t],dist:e[t]}}));i.sort((function(t,e){return e.freq-t.freq}));for(var a=0;a<i.length&&!(a>=m.DEFAULT_BIN_NUM-1);a++){var s=(0,g.entropyAcc)(i[a].dist.filter((function(t){return t>0})));r+=i[a].freq/o*s}var c=new Array(m.DEFAULT_BIN_NUM).fill(0),d=0;for(a=m.DEFAULT_BIN_NUM-1;a<i.length;a++){for(var p=0;p<c.length;p++)c[p]+=i[a].dist[p];d+=i[a].freq}d>0&&(r+=d/o*(0,g.entropyAcc)(c.filter((function(t){return t>0})))),h+=(e-r)/Math.log2(Math.min(m.DEFAULT_BIN_NUM,i.length))};try{for(b=void 0,p=a(s),y=p.next();!y.done;y=p.next())v=y.value,d(v)}catch(_){b={error:_}}finally{try{y&&!y.done&&(w=p.return)&&w.call(p)}finally{if(b)throw b.error}}return h/=s.length,o.push({dimensions:r,measures:s,significance:1,score:h,impurity:h}),[2]}}))},y.label=3;case 3:y.trys.push([3,8,9,10]),c=a(t),l=c.next(),y.label=4;case 4:return l.done?[3,7]:(f=l.value,[5,s(f)]);case 5:y.sent(),y.label=6;case 6:return l=c.next(),[3,4];case 7:return[3,10];case 8:return h=y.sent(),d={error:h},[3,10];case 9:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(d)throw d.error}return[7];case 10:return o.sort((function(t,e){return Number(e.impurity)-Number(t.impurity)})),[2,o]}}))}))},t.prototype.searchPointInterests=function(t){},t.prototype.insightExtraction=function(e){return void 0===e&&(e=this.subSpaces),o(this,void 0,void 0,(function(){var r,n,u,s,c,l,f,h,d,p,y=this;return i(this,(function(v){switch(v.label){case 0:r=this,n=[],u=function(e){var a,u,c,l,f;return i(this,(function(h){switch(h.label){case 0:return a=e.dimensions,u=e.measures,[4,r.cube.getCuboid(a)];case 1:return[4,h.sent().getAggregatedRows(u,u.map((function(){return"sum"})))];case 2:return c=h.sent(),l=t.getSpaceImpurity(c,a,u),f=[],s.workerCollection.each((function(t,e){f.push(function(t,e){return o(y,void 0,void 0,(function(){var o,s;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,t(c,a,u,r.fieldDictonary,r)];case 1:return null!==(o=i.sent())&&(o.type=e,o.impurity=l,n.push(o)),[3,3];case 2:return s=i.sent(),console.error("worker failed",{dimensions:a,measures:u,aggData:c},s),[3,3];case 3:return[2]}}))}))}(t,"".concat(e)))})),[4,Promise.all(f)];case 3:return h.sent(),[2]}}))},s=this,v.label=1;case 1:v.trys.push([1,6,7,8]),c=a(e),l=c.next(),v.label=2;case 2:return l.done?[3,5]:(f=l.value,[5,u(f)]);case 3:v.sent(),v.label=4;case 4:return l=c.next(),[3,2];case 5:return[3,8];case 6:return h=v.sent(),d={error:h},[3,8];case 7:try{l&&!l.done&&(p=c.return)&&p.call(c)}finally{if(d)throw d.error}return[7];case 8:return r.insightSpaces=n,this.setInsightScores(),this.insightSpaces.sort((function(t,e){return(t.score||0)-(e.score||0)})),[2,this.insightSpaces]}}))}))},t.prototype.setInsightScores=function(){return this.insightSpaces.forEach((function(t){t.score=Number(t.impurity)/t.significance})),this},t.prototype.getFieldInfoInVis=function(t){return o(this,void 0,void 0,(function(){var e,r,o,u,s,c,l,f,d,p,y,v,m;return i(this,(function(g){switch(g.label){case 0:e=[],r=this.cube,o=this.fieldDictonary,u=t.dimensions,s=t.measures,c=function(t){var a,u;return i(this,(function(i){switch(i.label){case 0:return[4,r.getCuboid([t])];case 1:return[4,i.sent().getAggregatedRows(s,s.map((function(){return"sum"})))];case 2:return a=i.sent(),u=0,s.forEach((function(t){var e=a.map((function(e){return e[t]})),r=(0,h.normalize)((0,h.mapPositive)(e)),n=(0,h.entropy)(r);u+=n})),e.push(n(n({},o.get(t)),{impurity:u})),[2]}}))},g.label=1;case 1:g.trys.push([1,6,7,8]),l=a(u),f=l.next(),g.label=2;case 2:return f.done?[3,5]:(d=f.value,[5,c(d)]);case 3:g.sent(),g.label=4;case 4:return f=l.next(),[3,2];case 5:return[3,8];case 6:return p=g.sent(),v={error:p},[3,8];case 7:try{f&&!f.done&&(m=l.return)&&m.call(l)}finally{if(v)throw v.error}return[7];case 8:return[4,r.getCuboid(u)];case 9:return[4,g.sent().getAggregatedRows(s,s.map((function(){return"sum"})))];case 10:return y=g.sent(),s.forEach((function(t){var r=y.map((function(e){return e[t]})),i=(0,h.normalize)((0,h.mapPositive)(r)),a=(0,h.entropy)(i);e.push(n(n({},o.get(t)),{impurity:a}))})),[2,e]}}))}))},t.prototype.getFieldInfoInVisBeta=function(t){return o(this,void 0,void 0,(function(){var e,r,o,a,u,s,c,l;return i(this,(function(i){switch(i.label){case 0:return e=[],r=this.cube,o=this.fieldDictonary,a=t.dimensions,u=t.measures,a.forEach((function(t){var r=o.get(t);e.push(n(n({},r),{impurity:r.features.entropy}))})),[4,r.getCuboid(a)];case 1:return[4,(s=i.sent()).getAggregatedRows(u,u.map((function(){return"dist"})))];case 2:return c=i.sent(),[4,s.getAggregatedRows(u,u.map((function(){return"count"})))];case 3:return l=i.sent(),u.forEach((function(t){var r=0,i=o.get(t).features.size,a=c.map((function(e,r){return{freq:l[r][t],dist:e[t]}}));a.sort((function(t,e){return e.freq-t.freq}));for(var u=0;u<a.length&&!(u>=m.DEFAULT_BIN_NUM-1);u++){var s=(0,g.entropyAcc)(a[u].dist.filter((function(t){return t>0})));r+=a[u].freq/i*s}var f=new Array(m.DEFAULT_BIN_NUM).fill(0),h=0;for(u=m.DEFAULT_BIN_NUM-1;u<a.length;u++){for(var d=0;d<f.length;d++)f[d]+=a[u].dist[d];h+=a[u].freq}h>0&&(r+=h/i*(0,g.entropyAcc)(f.filter((function(t){return t>0}))));var p=o.get(t);e.push(n(n({},p),{impurity:r}))})),[2,e]}}))}))},t.prototype.specification=function(t){return o(this,void 0,void 0,(function(){var e,r,n,o;return i(this,(function(i){switch(i.label){case 0:return e=t.dimensions,r=t.measures,[4,this.getFieldInfoInVisBeta(t)];case 1:return n=i.sent(),[4,this.cube.getCuboid(e)];case 2:return[4,i.sent().getAggregatedRows(r,r.map((function(){return"sum"})))];case 3:return o=i.sent(),[2,(0,p.specification)(n,o)]}}))}))},t}();e.VIEngine=b},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.getFieldsSummary=e.inferDataType=void 0;var a=r(17),u=r(2),s=r(0),c={boolean:function(t){return"true"===t||"false"===t||!0===t||!1===t},integer:function(t){return c.number(t)&&(t=+t)===~~t},number:function(t){return!isNaN(+t)},date:function(t){return!isNaN(Date.parse(t))}};function l(t){var e,r,o,i=["boolean","integer","number","date"];try{for(var a=n(t),u=a.next();!u.done;u=a.next()){for(var s=u.value,l=0;l<i.length;++l)null==(o=s)||o!==o||c[i[l]](s)||(i.splice(l,1),l-=1);if(0===i.length)return"string"}}catch(f){e={error:f}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return i[0]}e.inferDataType=l,e.getFieldsSummary=function(t,e){var r,c,f=[],h=new Map,d=function(t){var r,n=new Map;e.forEach((function(e){n.has(e[t])||n.set(e[t],0),n.set(e[t],n.get(e[t])+1)}));var c,d=l(i([],o(n.keys()),!1)),p=(0,a.getFieldType)(e,t),y=Math.log2(n.size),v=y,m=-1/0,g=1/0,b="dimension",w=!1;"integer"!==d&&"number"!==d||"ordinal"===p||(b="measure",n.size>u.BIN_NUM_FOR_ANALYTIC&&(v=(c=(0,a.getFloatFieldEntropy)(e,t)).entropy,y=c.maxEntropy,w=!0,g=(r=o((0,s.getRangeBy)(e,t),2))[0],m=r[1]));w||(v=(c=(0,a.getFieldEntropy)(e,t)).entropy,y=c.maxEntropy);var _={key:t,analyticType:b,semanticType:p,dataType:d,features:{unique:n.size,size:e.length,entropy:v,maxEntropy:y,min:g,max:m}};f.push(_),h.set(_.key,_)};try{for(var p=n(t),y=p.next();!y.done;y=p.next()){d(y.value)}}catch(v){r={error:v}}finally{try{y&&!y.done&&(c=p.return)&&c.call(p)}finally{if(r)throw r.error}}return{fields:f,dictonary:h}}},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},o=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.fieldSelectByPercent=e.autoFieldSelect=void 0;var i=Math.round(Math.pow(75,2)/500);e.autoFieldSelect=function(t){var e=t.length,r=o([],n(t),!1);return r.sort((function(t,e){return t.features.entropy-e.features.entropy})),e<25?r:e<500?r.slice(0,Math.round(Math.sqrt(i*(e-25))+25)):r.slice(0,100)},e.fieldSelectByPercent=function(t,e){var r=t.length,i=o([],n(t),!1);return i.sort((function(t,e){return t.features.entropy-e.features.entropy})),i.slice(0,Math.round(r*e))}},function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=this&&this.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||(n||(n=Array.prototype.slice.call(e,0,o)),n[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.viewStrength=e.meaImp=e.entropyAcc=void 0;function a(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];var n=Math.log2(e),o=0;for(r=0;r<t.length;r++)o+=t[r]*(Math.log2(t[r])-n)/e;return-o}function u(t,e,r,o){var i,u,s=r,c=(o-s)/8,l=new Array(9).fill(0);try{for(var f=n(t),h=f.next();!h.done;h=f.next()){var d=h.value;l[Math.floor((d[e]-s)/c)]++}}catch(p){i={error:p}}finally{try{h&&!h.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}return l[7]+=l[8],a(l.slice(0,8).filter((function(t){return t>0})))}e.entropyAcc=a,e.meaImp=u,e.viewStrength=function(t,e,r){var a,s,c,l,f,h=new Map,d=function(t){var r=e.map((function(e){return t[e]})).join("_");h.has(r)||h.set(r,[]),null===(f=h.get(r))||void 0===f||f.push(t)};try{for(var p=n(t),y=p.next();!y.done;y=p.next()){d(y.value)}}catch(w){a={error:w}}finally{try{y&&!y.done&&(s=p.return)&&s.call(p)}finally{if(a)throw a.error}}var v=0,m=function(e){var r=Math.min.apply(Math,i([],o(t.map((function(t){return t[e]}))),!1)),n=Math.max.apply(Math,i([],o(t.map((function(t){return t[e]}))),!1)),a=u(t,e,r,n),s=0,c=[],l=i([],o(h.entries()),!1);l.sort((function(t,e){return e[1].length-t[1].length}));for(var f=0;f<l.length&&!(f>=7);f++){var d=l[f][1];s+=(p=d.length/t.length)*(y=u(d,e,r,n)),c.push([p,y])}var p,y,m=[];for(f=7;f<l.length;f++)m.push.apply(m,i([],o(l[f][1]),!1));m.length>0&&(s+=(p=m.length/t.length)*(y=u(m,e,r,n)));v+=m.length>0?(a-s)/Math.log2(8):(a-s)/Math.log2(h.size)};try{for(var g=n(r),b=g.next();!b.done;b=g.next()){m(b.value)}}catch(_){c={error:_}}finally{try{b&&!b.done&&(l=g.return)&&l.call(g)}finally{if(c)throw c.error}}return v/r.length}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VISUAL_CHANNELS=void 0,e.VISUAL_CHANNELS={x:{name:"x",exclusiveChannels:["angle","radius"]},y:{name:"y",exclusiveChannels:["angle","radius"]},angle:{name:"angle",exclusiveChannels:["x","y"]},color:{name:"color",exclusiveChannels:["shape","opacity"]},highFacets:{name:"highFacets",exclusiveChannels:[]},opacity:{name:"opacity",exclusiveChannels:["color"]}}},function(t,e,r){"use strict";r.r(e);var n={};function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){if(t){if("string"===typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}r.r(n),r.d(n,"transNumber",(function(){return f})),r.d(n,"fieldMeta2fieldSummary",(function(){return h})),r.d(n,"fieldSummary2fieldMeta",(function(){return d})),r.d(n,"meta2fieldScores",(function(){return p})),r.d(n,"formatTimeField",(function(){return m})),r.d(n,"transVegaSubset2Schema",(function(){return g}));var a=r(7);var u=r(11),s=r.n(u),c=r(37),l=r.n(c);function f(t){return isNaN(t)?null:Number(t)}function h(t){return t.map((function(t){return{fieldName:t.fid,entropy:t.features.entropy,maxEntropy:t.features.maxEntropy,type:t.semanticType,distribution:t.distribution,max:"number"===typeof t.features.max?t.features.max:0,min:"number"===typeof t.features.min?t.features.min:0}}))}function d(t){var e=t.summary,r=t.analyticTypes,n=t.semanticTypes,o=t.geoRoles;return"undefined"===typeof r&&console.warn("You are using analytic types infered from semantic type, it may not be safe."),e.map((function(t,e){var i=t.type;n&&"?"!==n[e]&&(i=n[e]);var a="none";return o&&o[e]&&(a=o[e]),{fid:t.fieldName,geoRole:a,features:{maxEntropy:t.maxEntropy,entropy:t.entropy,unique:t.distribution.length,max:t.max,min:t.min},semanticType:i,analyticType:r?r[e]:b(i),distribution:t.distribution,disable:!1}}))}function p(t){return t.map((function(t){return[t.fid,t.features.entropy,t.features.maxEntropy,{name:t.fid,type:t.semanticType}]}))}s.a.extend(l.a);var y={"DD-MM-YYYY":/^[0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4}$/,YYYYMMDD:/^[0-9]{4}[0-9]{2}[0-9]{2}$/};function v(t){if(y["DD-MM-YYYY"].test(t)){var e=s()(t,"DD-MM-YYYY");return e.isValid()?e.format("YYYY-MM-DD"):null}if(y.YYYYMMDD.test(t)){var r=s()(t,"DD-MM-YYYY");return r.isValid()?r.format("YYYYMMDD"):null}return t}function m(t,e){for(var r=0;r<t.length;r++)for(var n=t[r],o=0;o<e.length;o++)"string"===typeof n[e[o]]&&(n[e[o]]=v(n[e[o]]));return t}function g(t){var e={};return"string"===typeof t.mark?e.geomType=[t.mark]:e.geomType=[t.mark.type],e.position=[],t.encoding.x&&t.encoding.x.field&&e.position.push(t.encoding.x.field),t.encoding.y&&t.encoding.y.field&&e.position.push(t.encoding.y.field),e.facets=[],t.encoding.row&&t.encoding.row.field&&e.facets.push(t.encoding.row.field),t.encoding.column&&t.encoding.column.field&&e.facets.push(t.encoding.column.field),["color","opacity","shape","size"].forEach((function(r){t.encoding[r]&&t.encoding[r].field&&(e[r]=[t.encoding[r].field])})),e}function b(t){switch(t){case"quantitative":return"measure";default:return"dimension"}}function w(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _=a.Cleaner.dropNull,S=a.Cleaner.simpleClean,M=a.Cleaner.useMode;function x(t,e,r,n){switch(n){case"dropNull":return _(t,e,r);case"useMode":return M(t,e.concat(r));case"simpleClean":return S(t,e,r);case"none":default:return function(t){return w(t)}(t)}}function E(t,e,r){var o=e.filter((function(t){return"dimension"===t.analyticType})).map((function(t){return t.fid})),i=e.filter((function(t){return"measure"===t.analyticType})).map((function(t){return t.fid}));return x(function(t,e){return t.map((function(t){var r={};return e.forEach((function(e){var o;r[e.fid]=t[e.fid],"dimension"===e.analyticType&&("temporal"===e.semanticType&&"dateTimeExpand"!==(null===(o=e.extInfo)||void 0===o?void 0:o.extOpt)||"nominal"===e.semanticType)&&(r[e.fid]=String(t[e.fid])),"quantitative"===e.semanticType?r[e.fid]=n.transNumber(t[e.fid]):"ordinal"!==e.semanticType||isNaN(Number(t[e.fid]))||(r[e.fid]=n.transNumber(t[e.fid]))})),r}))}(t,e),o,i,r)}var O;self.addEventListener("message",(O=t=>{try{const{dataSource:e,method:r,fields:n}=t.data,o=E(e,n,r);self.postMessage({success:!0,data:o})}catch(e){self.postMessage({success:!1,message:`[clean data]${e}\n${e.stack}`})}},function(t){var e=(new Date).getTime();try{O(t)}finally{var r=(new Date).getTime()-e;console.log("Task [".concat(O.name,"] cost ").concat(r," ms."))}}),!1)},function(t,e,r){"use strict";r.r(e),r.d(e,"VIStorage",(function(){return u}));var n=r(9),o=r.n(n),i=function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{s(n.next(t))}catch(e){i(e)}}function u(t){try{s(n.throw(t))}catch(e){i(e)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,u)}s((n=n.apply(t,e||[])).next())}))},a=function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(u){i=[6,u],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},u=function(){function t(t){this.TMP_FILE_SAFE_TAIL="_.json",this.workSpaceName="visual-insights-work-space",this.storageName=t}return t.prototype.init=function(){o.a.createInstance({name:this.workSpaceName,storeName:this.storageName}).clear()},t.prototype.destroy=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,o.a.dropInstance({name:this.workSpaceName,storeName:this.storageName})]}))}))},t.prototype.getItem=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,o.a.createInstance({name:this.workSpaceName,storeName:this.storageName}).getItem(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.setItem=function(t,e){return i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,o.a.createInstance({name:this.workSpaceName,storeName:this.storageName}).setItem(t,e)];case 1:return r.sent(),[2]}}))}))},t}()}]);