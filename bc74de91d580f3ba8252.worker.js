!function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./",r(r.s=8)}([function(t,e,r){t.exports=r(3)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sum_unsafe=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=t[n][e]}))},a=0,o=t.length;a<o;a++)n(a);return r},e.sum=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,o=t.length;a<o;a++)n(a);return r},e.count=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=0,a=t.length;n<a;n++)e.forEach((function(t){r[t]++}));return r},e.mean=function(t,e){var r={};e.forEach((function(t){r[t]=0}));for(var n=function(n,a){e.forEach((function(e){r[e]+=Number(t[n][e])||0}))},a=0,o=t.length;a<o;a++)n(a);return e.forEach((function(e){r[e]/=t.length})),r}},function(t,e,r){"use strict";this&&this.__assign;Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),a=r(7),o=r(1),i={sum:o.sum_unsafe,mean:o.mean,count:o.count};function u(t){var e=t.type,r=t.aggFunc,a=void 0===r?o.count:r,i=t.factTable,u=void 0===i?[]:i,s=t.dimensions,c=void 0===s?[]:s,l=t.measures,f=void 0===l?[]:l;switch(e){case"period":return new n.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:f});case"moment":default:return new n.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:f})}}e.createCube=u,e.default=function(t){var e=t.dimensions,r=t.measures,n=t.asFields,s=t.operator,c=t.dataSource,l=u({type:"moment",aggFunc:i[s]||o.count,dimensions:e,measures:r,factTable:c}),f=a.tree2Table({dimensions:e,measures:r,cube:l});return f.forEach((function(t){n.forEach((function(e,n){t[e]=t[r[n]]}))})),f},function(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}(r(1))},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(t,e,r,n){var a=e&&e.prototype instanceof l?e:l,o=Object.create(a.prototype),i=new x(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return E()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var u=b(i,r);if(u){if(u===c)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,i),o}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var c={};function l(){}function f(){}function h(){}var v={};v[a]=function(){return this};var d=Object.getPrototypeOf,y=d&&d(d(_([])));y&&y!==e&&r.call(y,a)&&(v=y);var p=h.prototype=l.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t){var e;this._invoke=function(n,a){function o(){return new Promise((function(e,o){!function e(n,a,o,i){var u=s(t[n],t,a);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,i)}),(function(t){e("throw",t,o,i)})):Promise.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,i)}))}i(u.arg)}(n,a,e,o)}))}return e=e?e.then(o,o):o()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=p.constructor=h,h.constructor=f,h[i]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,i in t||(t[i]="GeneratorFunction")),t.prototype=Object.create(p),t},t.awrap=function(t){return{__await:t}},g(m.prototype),m.prototype[o]=function(){return this},t.AsyncIterator=m,t.async=function(e,r,n,a){var o=new m(u(e,r,n,a));return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(p),p[i]="Generator",p[a]=function(){return this},p.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var u=r.call(o,"catchLoc"),s=r.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,c):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;S(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=n}catch(a){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(5);e.periodCube=n.default;var a=r(6);e.momentCube=a.default},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},o=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){this.children=new Map,this._rawData=[],this.aggFunc=t,this.cache=!1}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this._rawData).push.apply(t,a(e))},t.prototype.aggData=function(t){return void 0===t&&(t=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,t),this.cache=!0),this._aggData},t.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(t.prototype,"rawData",{get:function(){var t,e;if(!this.cache){if(0!==this.children.size){var r=this.children.values(),n=[];try{for(var a=o(r),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=u.rawData,l=c.length;for(s=0;s<l;s++)n.push(c[s])}}catch(f){t={error:f}}finally{try{i&&!i.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}this._rawData=n}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),t.prototype.getNode=function(t){return function e(r,a){var i,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=o(s),l=c.next();!l.done;l=c.next()){var f=n(l.value,2),h=f[0],v=f[1];if(h===t[a])return e(v,a+1)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}(),u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures}return t.prototype.get=function(t){var e=this.tree,r=(this.aggFunc,this.measures);return function e(a,i){var u,s;if(i===t.length)return a.aggData(r);var c=a.children.entries();try{for(var l=o(c),f=l.next();!f.done;f=l.next()){var h=n(f.value,2),v=h[0],d=h[1];if(v===t[i])return e(d,i+1)}}catch(y){u={error:y}}finally{try{f&&!f.done&&(s=l.return)&&s.call(l)}finally{if(u)throw u.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.buildTree=function(){var t,e=new i(this.aggFunc),r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(e.push(t),e.cache=!1,r<this.dimensions.length){var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new i(this.aggFunc)),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t.prototype.aggNode=function(t){var e,r;void 0===t&&(t=this.tree);var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value;this.aggTree(u)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return t.aggData(this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(n(arguments[e]));return t},o=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.children=new Map,this.rawData=[]}return t.prototype.push=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];(t=this.rawData).push.apply(t,a(e))},t.prototype.aggData=function(t,e){return void 0===e&&(e=[]),this._aggData=t(this.rawData,e),this._aggData},t.prototype.getNode=function(t){return function e(r,a){var i,u;if(a===t.length)return r;var s=r.children.entries();try{for(var c=o(s),l=c.next();!l.done;l=c.next()){var f=n(l.value,2),h=f[0],v=f[1];if(h===t[a])return e(v,a+1)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(u=c.return)&&u.call(c)}finally{if(i)throw i.error}}return null}(this,0)},t}();e.Node=i;var u=function(){function t(t){this.aggFunc=t.aggFunc,this.factTable=t.factTable,this.dimensions=t.dimensions,this.measures=t.measures,this.buildTree(),this.aggTree()}return t.prototype.get=function(t){var e=this.tree,r=this.aggFunc,a=this.measures;return function e(i,u){var s,c;if(u===t.length)return i.aggData(r,a);var l=i.children.entries();try{for(var f=o(l),h=f.next();!h.done;h=f.next()){var v=n(h.value,2),d=v[0],y=v[1];if(d===t[u])return e(y,u+1)}}catch(p){s={error:p}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(s)throw s.error}}return!1}(e,0)},t.prototype.getNode=function(t){return this.tree.getNode(t)},t.prototype.setData=function(t){var e=t.aggFunc,r=void 0===e?this.aggFunc:e,n=t.factTable,a=void 0===n?this.factTable:n,o=t.dimensions,i=void 0===o?this.dimensions:o,u=t.measures,s=void 0===u?this.measures:u;i!==this.dimensions||a!==this.factTable?(this.dimensions=i,this.factTable=a,this.measures=s,this.aggFunc=r,this.buildTree(),this.aggTree()):s===this.measures&&r===this.aggFunc||(this.measures=s,this.aggFunc=r,this.aggTree())},t.prototype.buildTree=function(){var t,e=new i,r=this.factTable.length;for(t=0;t<r;t++)this.insertNode(this.factTable[t],e,0);return this.tree=e,e},t.prototype.insertNode=function(t,e,r){if(r===this.dimensions.length)e.push(t);else{var n=t[this.dimensions[r]];e.children.has(n)||e.children.set(n,new i),this.insertNode(t,e.children.get(n),r+1)}},t.prototype.aggTree=function(t){var e,r;if(void 0===t&&(t=this.tree),t.children.size>0){t.rawData=[];var n=t.children.values();try{for(var a=o(n),i=a.next();!i.done;i=a.next()){var u=i.value,s=void 0,c=this.aggTree(u).rawData,l=c.length;for(s=0;s<l;s++)t.rawData.push(c[s])}}catch(f){e={error:f}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}}return t.aggData(this.aggFunc,this.measures),t},t}();e.default=u},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var a in e=arguments[r])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t}).apply(this,arguments)},a=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var r="function"===typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,a,o=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(u){a={error:u}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(e,"__esModule",{value:!0}),e.tree2Table=function(t){var e=t.dimensions,r=(t.measures,t.cube),i=(r.aggFunc,[]);return function t(r,u,s){var c,l,f;if(0!==r.children.size)try{for(var h=a(r.children.entries()),v=h.next();!v.done;v=h.next()){var d=o(v.value,2),y=d[0];t(d[1],n(n({},u),((f={})[e[s]]=y,f)),s+1)}}catch(g){c={error:g}}finally{try{v&&!v.done&&(l=h.return)&&l.call(h)}finally{if(c)throw c.error}}else{var p=r._aggData;i.push(n(n({},u),p))}}(r.tree,{},0),i}},function(t,e,r){"use strict";r.r(e);var n={};function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}r.r(n),r.d(n,"kruskal",(function(){return k})),r.d(n,"kruskalWithFullMST",(function(){return M}));var s=r(0),c=r.n(s);function l(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(t,e,r){for(var n=new Set,o=new Set,i=new Map,u=t.length,s=0;s<u;s++){var c=t[s];n.add(c[e]),o.add(c[r]),i.has(c[e])||i.set(c[e],new Map);var l=i.get(c[e]);l.has(c[r])||l.set(c[r],0),l.set(c[r],l.get(c[r])+1)}var f=function(t,e,r){if("undefined"===typeof t||"undefined"===typeof e||"undefined"===typeof r)return 0;var n=new Map,o=new Map,i=0,u=!0,s=!1,c=void 0;try{for(var l,f=e[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;n.set(h,0)}}catch($){s=!0,c=$}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}var v=!0,d=!1,y=void 0;try{for(var p,g=r[Symbol.iterator]();!(v=(p=g.next()).done);v=!0){var m=p.value;o.set(m,0)}}catch($){d=!0,y=$}finally{try{v||null==g.return||g.return()}finally{if(d)throw y}}var b=!0,w=!1,S=void 0;try{for(var x,_=t[Symbol.iterator]();!(b=(x=_.next()).done);b=!0){var E=a(x.value,2),M=E[0],k=E[1],z=!0,D=!1,T=void 0;try{for(var O,j=k[Symbol.iterator]();!(z=(O=j.next()).done);z=!0){var F=a(O.value,2),L=F[0],P=F[1];n.set(M,n.get(M)+P),o.set(L,o.get(L)+P),i+=P}}catch($){D=!0,T=$}finally{try{z||null==j.return||j.return()}finally{if(D)throw T}}}}catch($){w=!0,S=$}finally{try{b||null==_.return||_.return()}finally{if(w)throw S}}var N=0,I=!0,A=!1,R=void 0;try{for(var G,q=t[Symbol.iterator]();!(I=(G=q.next()).done);I=!0){var C=a(G.value,2),Y=C[0],V=C[1],X=!0,K=!1,W=void 0;try{for(var H,B=V[Symbol.iterator]();!(X=(H=B.next()).done);X=!0){var J=a(H.value,2),Q=J[0],U=J[1],Z=n.get(Y)*o.get(Q)/i;N+=Math.pow(U-Z,2)/Z}}catch($){K=!0,W=$}finally{try{X||null==B.return||B.return()}finally{if(K)throw W}}}}catch($){A=!0,R=$}finally{try{I||null==q.return||q.return()}finally{if(A)throw R}}return N}(i,n,o);return Math.sqrt(f/(t.length*Math.min(n.size-1,o.size-1)))}function h(t,e,r){var n=v(t.map((function(t){return t[e]})))/t.length,a=v(t.map((function(t){return t[r]})))/t.length;return v(t.map((function(t){return(t[e]-n)*(t[r]-a)})))/Math.sqrt(v(t.map((function(t){return Math.pow(t[e]-n,2)})))*v(t.map((function(t){return Math.pow(t[r]-a,2)}))))}function v(t){for(var e=0,r=0,n=t.length;r<n;r++)e+=t[r];return e}function d(t){var e=Math.min.apply(Math,l(t));return t.map((function(t){return t-e+1}))}function y(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length,n=[],a=function e(r,a,o){a.length!==o?r>=t.length||(e(r+1,[].concat(l(a),[t[r]]),o),e(r+1,a,o)):n.push(l(a))},o=e;o<=r;o++)a(0,[],o);return n}function p(t){var e=0,r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;e+=u}}catch(s){n=!0,a=s}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return t.map((function(t){return t/e}))}var g=function(t){var e=0,r=!0,n=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var u=o.value;e+=u*Math.log2(u)}}catch(s){n=!0,a=s}finally{try{r||null==i.return||i.return()}finally{if(n)throw a}}return-e},m=function(){function t(e,r,n){o(this,t),this.dataSource=e,this.X=r,this.Y=n,this.normalizedDataSource=e}return u(t,[{key:"normalizeDimensions",value:function(t){var e=this;return this.normalizedDataSource=[],this.valueSets=[],t.forEach((function(){e.valueSets.push(new Map)})),this.dataSource.forEach((function(r){t.forEach((function(t,n){var a=(r[t]||"others").toString();e.valueSets[n].has(a)||e.valueSets[n].set(a,e.valueSets[n].size)}))})),this.dataSource.forEach((function(r){var n=e.normalizeRecord(r,t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t,e){var r=this,n={};return Object.keys(t).forEach((function(e){n[e]=t[e]})),e.forEach((function(e,a){var o=(t[e]||"others").toString();n[e]=r.valueSets[a].get(o)})),n}},{key:"mean",value:function(){var t=this,e=0,r=0;return 0===this.normalizedDataSource.length?[e,r]:(this.normalizedDataSource.forEach((function(n,a){e+=n[t.X],r+=n[t.Y]})),e/=this.normalizedDataSource.length,r/=this.normalizedDataSource.length,[e,r])}},{key:"getRegressionEquation",value:function(){var t=this;if(0===this.normalizedDataSource.length)return[0,0];var e,r=a(this.mean(),2),n=r[0],o=r[1],i=0,u=0;return this.normalizedDataSource.forEach((function(e){i+=(e[t.X]-n)*(e[t.Y]-o),u+=Math.pow(e[t.X]-n,2)})),[o-n*(e=i/u),e]}},{key:"r_squared",value:function(){var t=this,e=a(this.mean(),2)[1],r=a(this.getRegressionEquation(),2),n=r[0],o=r[1],i=0,u=0;return this.normalizedDataSource.forEach((function(r){var a=r[t.X],s=r[t.Y],c=a*o+n;i+=Math.pow(c-e,2),u+=Math.pow(s-e,2)})),i/u}},{key:"cumulativeLogisticDistribution",value:function(t){return 1/(1+Math.pow(Math.E,-(t-.2)/2))}},{key:"pValue",value:function(){var t=a(this.getRegressionEquation(),2)[1];return 2*(1-this.cumulativeLogisticDistribution(Math.abs(t)))}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),t}(),b=.5;function w(t){for(var e=[],r=0;r<t.length;r++)for(var n=r+1;n<t[r].length;n++)e.push([[r,n],Math.abs(t[r][n])]);return e}function S(t,e){return t[e]===e?e:t[e]=S(t,t[e])}function x(t,e,r){var n=S(t,e),a=S(t,r);t[n]=a,S(t,e),S(t,r)}function _(t,e,r){return t[r]===r?r:(t[r]=_(t,e,t[r]),e[r]=e[t[r]],t[r])}function E(t,e,r,n){var a=_(t,e,r),o=_(t,e,n),i=e[a],u=e[o];t[a]=o,e[a]=e[o]=i+u,_(t,e,r),_(t,e,n)}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=w(t);n.sort((function(t,e){return e[1]-t[1]}));var a=[],o=t.map((function(t,e){return e})),i=l(o),u=!1,s=!0,c=!1,f=void 0;try{for(var h,v=n[Symbol.iterator]();!(s=(h=v.next()).done);s=!0){var d=h.value;S(o,d[0][0])!==S(o,d[0][1])&&(x(o,d[0][0],d[0][1]),a.push([d[0],d[1],u]));for(var y=0;y<o.length;y++)o[y]=S(o,y);var p=new Set(o);if(p.size<=e||d[1]<r?u=!0:i=l(o),1===p.size)break}}catch(g){c=!0,f=g}finally{try{s||null==v.return||v.return()}finally{if(c)throw f}}return{edgesInMST:a,groups:i}}var k=function(t){var e,r=t.matrix,n=t.measures,a=(t.method,t.groupMaxSize),o=void 0===a?4:a,i=t.limitSize,u=void 0!==i&&i,s=t.threshold,c=void 0===s?0:s;e=u?function(t,e){var r=w(t);r.sort((function(t,e){return e[1]-t[1]}));var n=t.map((function(t,e){return e})),a=t.map((function(){return 1})),o=!0,i=!1,u=void 0;try{for(var s,c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;if(_(n,a,l[0][0])!==_(n,a,l[0][1])){if(a[l[0][0]]+a[l[0][1]]>e)continue;E(n,a,l[0][0],l[0][1])}for(var f=0;f<n.length;f++)n[f]=_(n,a,f);if(1===new Set(n).size)break}}catch(d){i=!0,u=d}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}for(var h=new Map,v=0;v<n.length;v++)h.has(n[v])||h.set(n[v],[]),h.get(n[v]).push(v);return h}(r,o):function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=w(t);n.sort((function(t,e){return e[1]-t[1]}));var a=t.map((function(t,e){return e})),o=!0,i=!1,u=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;S(a,l[0][0])!==S(a,l[0][1])&&x(a,l[0][0],l[0][1]);for(var f=0;f<a.length;f++)a[f]=S(a,f);var h=new Set(a);if(h.size<=e||l[1]<r)break}}catch(y){i=!0,u=y}finally{try{o||null==c.return||c.return()}finally{if(i)throw u}}for(var v=new Map,d=0;d<a.length;d++)v.has(a[d])||v.set(a[d],[]),v.get(a[d]).push(d);return v}(r,o,c);var l=[],f=!0,h=!1,v=void 0;try{for(var d,y=e.values()[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var p=d.value;l.push(p.map((function(t){return n[t]})))}}catch(g){h=!0,v=g}finally{try{f||null==y.return||y.return()}finally{if(h)throw v}}return l};function z(t){return(z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t){return(D="function"===typeof Symbol&&"symbol"===z(Symbol.iterator)?function(t){return z(t)}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":z(t)})(t)}function T(t,e){return!e||"object"!==D(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function O(t){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function j(t,e){return(j=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function F(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&j(t,e)}var L=function(t){function e(t){var r;o(this,e),r=T(this,O(e).call(this,t));var n=t.K;return r.K=n,r.normalize(),r}return F(e,t),u(e,[{key:"getNeighbors",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];r.length!==e.length&&e.forEach((function(t){r.push(1)}));for(var n=[],a=[],o=[],i=[],u=new Set(this.dimensions),s=0;s<e.length;s++)u.has(e[s])?(n.push(e[s]),o.push(r[s])):(a.push(e[s]),i.push(r[s]));var c=[];this.normalizedDataSource.forEach((function(e,r){var u=0;a.forEach((function(r,n){u+=Math.pow((e[r]-t[r])*i[n],2)})),n.forEach((function(r,n){e[r]!==t[r]&&(u+=Math.pow(o[n],2))})),c.push({dis:u,index:r})})),c.sort((function(t,e){return t.dis-e.dis}));for(var l=[],f=Math.min(this.K,c.length),h=0;h<f;h++)l.push(this.normalizedDataSource[c[h].index]);return l}},{key:"getTargetValue",value:function(t,e){var r=this,n=[];return t.forEach((function(t){var a=new Map;e.forEach((function(e){a.has(e[t])||a.set(e[t],0),a.set(e[t],a.get(e[t])+1)}));var o=0,i=0,u=!0,s=!1,c=void 0;try{for(var l,f=a[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var h=l.value;h[1]>o&&(o=h[1],i=h[0])}}catch(d){s=!0,c=d}finally{try{u||null==f.return||f.return()}finally{if(s)throw c}}var v=r.dimensions.indexOf(t);v>-1?n.push(r.valueParser[v][i]):n.push(i)})),n}}]),e}(function(){function t(e){o(this,t);var r=e.dataSource,n=e.dimensions,a=e.measures;this.dataSource=r,this.dimensions=n,this.measures=a}return u(t,[{key:"normalize",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(e){t.valueSets.push(new Map),t.valueParser.push([])})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||(t.valueSets[n].set(a,t.valueSets[n].size),t.valueParser[n].push(a))})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(n,a){r[n]=(t[n]-e.ranges[a][0])/(e.ranges[a][1]-e.ranges[a][0])})),this.dimensions.forEach((function(n,a){var o=(t[n]||"others").toString();r[n]=e.valueSets[a].get(o)})),r}}]),t}());function P(t,e){for(var r=function(t,e){if(0===t)return[];for(var r=2147483647,n=[e],a=1;a<t;a++)n.push((1103515245*n[a-1]+12345)%r);return n.map((function(t){return t/r}))}(e,2147483647*Math.random()),n=[],a=0;a<e;a++){var o=Math.floor(r[a]*e)%e;n.push(t[o])}return n}var N={IsolationForest:function(){function t(e,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;o(this,t),this.dimensions=e,this.measures=r,this.dataSource=n,n.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(n.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return u(t,[{key:"normalizeDimensions",value:function(){var t=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){t.valueSets.push(new Map)})),this.measures.forEach((function(){t.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(e){t.dimensions.forEach((function(r,n){var a=(e[r]||"others").toString();t.valueSets[n].has(a)||t.valueSets[n].set(a,t.valueSets[n].size)})),t.measures.forEach((function(r,n){var a=e[r];"number"===typeof a&&(t.ranges[n][0]=Math.min(t.ranges[n][0],a),t.ranges[n][1]=Math.max(t.ranges[n][1],a))}))})),this.dataSource.forEach((function(e){var r=t.normalizeRecord(e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(t){var e=this,r={};return this.measures.forEach((function(e){r[e]=t[e]})),this.dimensions.forEach((function(n,a){var o=(t[n]||"others").toString();r[n]=e.valueSets[a].get(o)})),r}},{key:"buildIsolationTree",value:function(t,e){if(e>=this.limitHeight||t.length<=1)return null;var r=Math.random(),n=this.measures[0]||this.dimensions[0],a=this.dimensions.length,o=this.measures.length,i=0;if(r>=a/(a+o)){var u=Math.floor(Math.random()*o)%o;n=this.measures[u],i=this.ranges[u][0]+(this.ranges[u][1]-this.ranges[u][0])*Math.random()}else{var s=Math.floor(Math.random()*a)%a;n=this.dimensions[s],i=Math.floor(this.valueSets[s].size*Math.random())%this.valueSets[s].size}var c=[],l=[],f=!0,h=!1,v=void 0;try{for(var d,y=t[Symbol.iterator]();!(f=(d=y.next()).done);f=!0){var p=d.value;p[n]<i?c.push(p):l.push(p)}}catch(m){h=!0,v=m}finally{try{f||null==y.return||y.return()}finally{if(h)throw v}}var g={field:n,value:i,size:t.length};return g.left=this.buildIsolationTree(c,e+1),g.right=this.buildIsolationTree(l,e+1),g}},{key:"AFS",value:function(t){return t>2?2*(Math.log(t-1)+Math.E)-2*(t-1)/t:2===t?1:0}},{key:"getPathLength",value:function(t,e,r,n){return null===e?r+this.AFS(n):t[e.field]<e.value?this.getPathLength(t,e.left,r+1,e.size):this.getPathLength(t,e.right,r+1,e.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var t=0;t<this.treeNumber;t++){var e=P(this.normalizedDataSource,this.sampleSize),r=this.buildIsolationTree(e,0);this.iForest.push(r)}return this.iForest}},{key:"estimateOutierScore",value:function(){var t=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(e){var r,n=0;t.iForest.forEach((function(r){n+=t.getPathLength(e,r,0,t.sampleSize)})),n/=t.iForest.length,r=Math.pow(2,-n/t.AFS(t.sampleSize)),t.recordScoreList.push(r)})),this.recordScoreList}}]),t}()},I=8;function A(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++)r[n][a]=r[a][n]=f(t,e[n],e[a])}return r}function R(t,e){for(var r=e.map((function(t){return e.map((function(t){return 0}))})),n=0;n<e.length;n++){r[n][n]=1;for(var a=n+1;a<e.length;a++){var o=h(t,e[n],e[a]);r[a][n]=r[n][a]=o}}return r}function G(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3,a=arguments.length>3?arguments[3]:void 0,o=4,i=A(t,e),u=n.kruskal({matrix:i,measures:e,groupMaxSize:a||Math.round(e.length/o),threshold:r});return u}function q(t,e,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,o=3,i=R(t,e),u=n.kruskal({matrix:i,measures:e,groupMaxSize:a||Math.round(e.length/o),threshold:r||b});return u}var C=r(2),Y=r.n(C),V=function(t){function e(){return o(this,e),T(this,O(e).apply(this,arguments))}return F(e,t),u(e,[{key:"getTargetValuePercent",value:function(t,e,r){var n=[];return t.forEach((function(t,a){var o=0;r.forEach((function(r){r[t]===e[t]&&o++})),n.push(o/r.length)})),n}},{key:"getSignificance",value:function(t,e){var r=this,n=0;return this.normalizedDataSource.forEach((function(a){var o=r.getNeighbors(a,t),i=r.getTargetValuePercent(e,a,o),u=0;i.forEach((function(t){u+=t})),u/=i.length,n+=u})),n/=this.normalizedDataSource.length}}]),e}(L);function X(t,e){var r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value,c=!0,l=!1,f=void 0;try{for(var h,v=e[Symbol.iterator]();!(c=(h=v.next()).done);c=!0){var d=h.value;r.push({dimensions:s,measures:d})}}catch(y){l=!0,f=y}finally{try{c||null==v.return||v.return()}finally{if(l)throw f}}}}catch(y){a=!0,o=y}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I,r=[],n=!0,a=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value,c=y(s,1,e);r.push.apply(r,l(c))}}catch(f){a=!0,o=f}finally{try{n||null==u.return||u.return()}finally{if(a)throw o}}return r}var W,H=function(t,e,r){var n,a,o,i,u,s,l,f;return c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for(n=0,a=0,o=!0,i=!1,u=void 0,c.prev=5,s=function(){var e=f.value,r=t.map((function(t){return t[e]})),o=p(d(r)),i=g(o);n+=i,a+=i/Math.log2(r.length)},l=r[Symbol.iterator]();!(o=(f=l.next()).done);o=!0)s();c.next=14;break;case 10:c.prev=10,c.t0=c.catch(5),i=!0,u=c.t0;case 14:c.prev=14,c.prev=15,o||null==l.return||l.return();case 17:if(c.prev=17,!i){c.next=20;break}throw u;case 20:return c.finish(17);case 21:return c.finish(14);case 22:return n/=r.length,a=1-(a/=r.length),c.abrupt("return",{dimensions:e,measures:r,type:"default_general",score:n,impurity:n,significance:a,order:"asc"});case 26:case"end":return c.stop()}}),null,null,[[5,10,14,22],[15,,17,21]])},B=function(t,e,r){var n,a,o,i,u,s;return c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:for((n=new N.IsolationForest([],r,t)).buildIsolationForest(),a=n.estimateOutierScore(),o=0,i=0,u=0;u<a.length;u++)a[u]>i&&(i=a[u],o=u);return s={},e.concat(r).forEach((function(e){s[e]=t[o][e]})),c.abrupt("return",{dimensions:e,measures:r,score:i,significance:i,order:"desc",description:s});case 9:case"end":return c.stop()}}))},J=function(t,e,r){var n,a,o,i,u,s,f,h,v;return c.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(1===e.length){c.next=2;break}return c.abrupt("return",null);case 2:for((n=l(t)).sort((function(t,r){return t[e[0]]>r[e[0]]?1:t[e[0]]===r[e[0]]?0:t[e[0]]<r[e[0]]?-1:void 0})),a=0,o=!0,i=!1,u=void 0,c.prev=8,s=r[Symbol.iterator]();!(o=(f=s.next()).done);o=!0)h=f.value,(v=new m(n,e[0],h)).normalizeDimensions(e),a+=v.significance();c.next=16;break;case 12:c.prev=12,c.t0=c.catch(8),i=!0,u=c.t0;case 16:c.prev=16,c.prev=17,o||null==s.return||s.return();case 19:if(c.prev=19,!i){c.next=22;break}throw u;case 22:return c.finish(19);case 23:return c.finish(16);case 24:return a/=r.length,c.abrupt("return",{dimensions:e,measures:r,score:a,significance:a,order:"desc"});case 26:case"end":return c.stop()}}),null,null,[[8,12,16,24],[17,,19,23]])},Q=function(t,e,r){var n,a;return c.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(e.length<2)){o.next=2;break}return o.abrupt("return",null);case 2:return 0,a=new V({dataSource:t,dimensions:e,measures:r,K:8}),n=a.getSignificance(r.concat(e.slice(0,-1)),e.slice(-1)),o.abrupt("return",{dimensions:e,measures:r,score:n,significance:n,order:"desc"});case 6:case"end":return o.stop()}}))};!function(t){t.outlier="default_outlier",t.cluster="default_group",t.trend="default_trend"}(W||(W={}));var U=function(){function t(){o(this,t),this.workers=new Map}return u(t,[{key:"register",value:function(t,e){if(this.workers.has(t))throw new Error("There has been a worker named: ".concat(t," already."));this.workers.set(t,[!0,e])}},{key:"enable",value:function(t,e){if(!this.workers.has(t))throw new Error('Intention Worker "'.concat(t,'" does not exist.'));var r=this.workers.get(t);r[0]=e,this.workers.set(t,r)}},{key:"each",value:function(t){var e=!0,r=!1,n=void 0;try{for(var o,i=this.workers[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var u=a(o.value,2),s=u[0],c=u[1];c[0]&&t(c[1],s)}}catch(l){r=!0,n=l}finally{try{e||null==i.return||i.return()}finally{if(r)throw n}}}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},r=e.withDefaultIWorkers,n=void 0===r||r;for(var a in t.colletion||(t.colletion=new t,n&&(t.colletion.register(W.outlier,B),t.colletion.register(W.cluster,Q),t.colletion.register(W.trend,J))),W)t.colletion.enable(W[a],n);return t.colletion}}]),t}();function Z(t,e,r){var n,a,o,i,u,s,l;return c.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:n=[],a=!0,o=!1,i=void 0,f.prev=4,u=function(){var e,a,o,i,u,s;return c.a.async((function(f){for(;;)switch(f.prev=f.next){case 0:if(e=l.value,a=e.dimensions,o=e.measures,i=a.join("=;="),!t.has(i)){f.next=9;break}return u=t.get(i),f.next=7,c.a.awrap(H(u,a,o));case 7:s=f.sent,r.each((function(t,e){var r;return c.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,c.a.awrap(t(u,a,o));case 2:null!==(r=i.sent)&&(r.type=e,r.impurity=s.impurity,n.push(r));case 4:case"end":return i.stop()}}))}));case 9:case"end":return f.stop()}}))},s=e[Symbol.iterator]();case 7:if(a=(l=s.next()).done){f.next=13;break}return f.next=10,c.a.awrap(u());case 10:a=!0,f.next=7;break;case 13:f.next=19;break;case 15:f.prev=15,f.t0=f.catch(4),o=!0,i=f.t0;case 19:f.prev=19,f.prev=20,a||null==s.return||s.return();case 22:if(f.prev=22,!o){f.next=25;break}throw i;case 25:return f.finish(22);case 26:return f.finish(19);case 27:return f.abrupt("return",n);case 28:case"end":return f.stop()}}),null,null,[[4,15,19,27],[20,,22,26]])}var $;self.addEventListener("message",($=async t=>{const{dataSource:e,dimensions:r,measures:n}=t.data;try{let t=await function(t){var e,r,n,a,o,i,u,s,l,f,h,v,d,y,p,g,m,w,S,x,_,E,M,k,z,D,T,O,j,F;return c.a.async((function(L){for(;;)switch(L.prev=L.next){case 0:for(e=t.dataSource,r=t.dimensions,n=t.measures,a=t.collection,o=t.dimension_correlation_threshold,i=void 0===o?.3:o,u=t.measure_correlation_threshold,s=void 0===u?b:u,l=t.max_dimension_num_in_view,f=void 0===l?3:l,h=t.max_measure_num_in_view,v=void 0===h?3:h,d=G(e,r,i),y=K(d,f),p=q(e,n,s),g=K(p,v),m=X(y,g),w=new Map,S=(new Date).getTime(),x=!0,_=!1,E=void 0,L.prev=12,M=y[Symbol.iterator]();!(x=(k=M.next()).done);x=!0)z=k.value,D=z.join("=;="),T=Y()({dataSource:e,dimensions:z,measures:n,asFields:n,operator:"sum"}),w.set(D,T);L.next=20;break;case 16:L.prev=16,L.t0=L.catch(12),_=!0,E=L.t0;case 20:L.prev=20,L.prev=21,x||null==M.return||M.return();case 23:if(L.prev=23,!_){L.next=26;break}throw E;case 26:return L.finish(23);case 27:return L.finish(20);case 28:return O=(new Date).getTime(),console.log("cube cost",O-S),w.set("*",e),j=a||U.init(),L.next=35,c.a.awrap(Z(w,m,j));case 35:return F=L.sent,L.abrupt("return",F);case 37:case"end":return L.stop()}}),null,null,[[12,16,20,28],[21,,23,27]])}({dataSource:e,dimensions:r,measures:n});t.sort((t,e)=>t.impurity/t.significance-e.impurity/e.significance),self.postMessage({success:!0,data:t})}catch(a){self.postMessage({success:!1,message:a})}},function(t){var e=(new Date).getTime();try{$(t)}finally{var r=(new Date).getTime()-e;console.log("Task [".concat($.name,"] cost ").concat(r," ms."))}}),!1)}]);
//# sourceMappingURL=bc74de91d580f3ba8252.worker.js.map