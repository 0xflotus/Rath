!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./",n(n.s=82)}([function(e,t,n){e.exports=n(59)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22);function a(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(r.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,i=function(){};return{s:i,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}},function(e,t,n){"use strict";function r(e,t,n,r,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var o=e.apply(t,n);function u(e){r(o,a,i,u,s,"next",e)}function s(e){r(o,a,i,u,s,"throw",e)}u(void 0)}))}}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"m",(function(){return u})),n.d(t,"i",(function(){return f})),n.d(t,"f",(function(){return l})),n.d(t,"k",(function(){return h})),n.d(t,"d",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"l",(function(){return g})),n.d(t,"h",(function(){return k})),n.d(t,"p",(function(){return x})),n.d(t,"e",(function(){return j})),n.d(t,"q",(function(){return M})),n.d(t,"a",(function(){return E})),n.d(t,"b",(function(){return I})),n.d(t,"o",(function(){return N})),n.d(t,"j",(function(){return T})),n.d(t,"n",(function(){return C}));var r=n(10),a=n(1);function i(e,t,n){if("undefined"===typeof e||"undefined"===typeof t||"undefined"===typeof n)return 0;var i,o=new Map,u=new Map,s=0,c=Object(a.a)(t);try{for(c.s();!(i=c.n()).done;){var f=i.value;o.set(f,0)}}catch(L){c.e(L)}finally{c.f()}var l,h=Object(a.a)(n);try{for(h.s();!(l=h.n()).done;){var p=l.value;u.set(p,0)}}catch(L){h.e(L)}finally{h.f()}var d,v=Object(a.a)(e);try{for(v.s();!(d=v.n()).done;){var m,g=Object(r.a)(d.value,2),b=g[0],y=g[1],w=Object(a.a)(y);try{for(w.s();!(m=w.n()).done;){var O=Object(r.a)(m.value,2),S=O[0],k=O[1];o.set(b,o.get(b)+k),u.set(S,u.get(S)+k),s+=k}}catch(L){w.e(L)}finally{w.f()}}}catch(L){v.e(L)}finally{v.f()}var x,j=0,M=Object(a.a)(e);try{for(M.s();!(x=M.n()).done;){var _,E=Object(r.a)(x.value,2),D=E[0],I=E[1],N=Object(a.a)(I);try{for(N.s();!(_=N.n()).done;){var T=Object(r.a)(_.value,2),C=T[0],A=T[1],R=o.get(D)*u.get(C)/s;j+=Math.pow(A-R,2)/R}}catch(L){N.e(L)}finally{N.f()}}}catch(L){M.e(L)}finally{M.f()}return j}var o=function(e,t,n){for(var r=new Set,a=new Set,o=new Map,u=e.length,s=0;s<u;s++){var c=e[s];r.add(c[t]),a.add(c[n]),o.has(c[t])||o.set(c[t],new Map);var f=o.get(c[t]);f.has(c[n])||f.set(c[n],0),f.set(c[n],f.get(c[n])+1)}var l=i(o,r,a);return Math.sqrt(l/(e.length*Math.min(r.size-1,a.size-1)))};var u=function(e,t,n){var r=s(e.map((function(e){return e[t]})))/e.length,a=s(e.map((function(e){return e[n]})))/e.length;return s(e.map((function(e){return(e[t]-r)*(e[n]-a)})))/Math.sqrt(s(e.map((function(e){return Math.pow(e[t]-r,2)})))*s(e.map((function(e){return Math.pow(e[n]-a,2)}))))};function s(e){for(var t=0,n=0,r=e.length;n<r;n++)t+=e[n];return t}var c=n(4);function f(e){return e.map((function(e){return Math.abs(e)})).filter((function(e){return 0!==e}))}function l(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r=[],a=function t(n,a,i){a.length!==i?n>=e.length||(t(n+1,[].concat(Object(c.a)(a),[e[n]]),i),t(n+1,a,i)):r.push(Object(c.a)(a))},i=t;i<=n;i++)a(0,[],i);return r}function h(e){var t,n=0,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i}}catch(o){r.e(o)}finally{r.f()}return e.map((function(e){return e/n}))}var p=function(e){var t,n=0,r=Object(a.a)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;n+=i*Math.log2(i)}}catch(o){r.e(o)}finally{r.f()}return-n};function d(e,t){var n,r=-1/0,i=1/0,o=Object(a.a)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value;r=Math.max(u[t],r),i=Math.min(u[t],i)}}catch(s){o.e(s)}finally{o.f()}return[i,r]}var v=n(7),m=n(8),g=function(){function e(t,n,r){Object(v.a)(this,e),this.dataSource=t,this.X=n,this.Y=r,this.normalizedDataSource=t}return Object(m.a)(e,[{key:"normalizeDimensions",value:function(e){var t=this;return this.normalizedDataSource=[],this.valueSets=[],e.forEach((function(){t.valueSets.push(new Map)})),this.dataSource.forEach((function(n){e.forEach((function(e,r){var a=(n[e]||"others").toString();t.valueSets[r].has(a)||t.valueSets[r].set(a,t.valueSets[r].size)}))})),this.dataSource.forEach((function(n){var r=t.normalizeRecord(n,e);t.normalizedDataSource.push(r)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e,t){var n=this,r={};return Object.keys(e).forEach((function(t){r[t]=e[t]})),t.forEach((function(t,a){var i=(e[t]||"others").toString();r[t]=n.valueSets[a].get(i)})),r}},{key:"mean",value:function(){var e=this,t=0,n=0;return 0===this.normalizedDataSource.length||(this.normalizedDataSource.forEach((function(r,a){t+=r[e.X],n+=r[e.Y]})),t/=this.normalizedDataSource.length,n/=this.normalizedDataSource.length),[t,n]}},{key:"getRegressionEquation",value:function(){var e=this;if(0===this.normalizedDataSource.length)return[0,0];var t,n=this.mean(),a=Object(r.a)(n,2),i=a[0],o=a[1],u=0,s=0;return this.normalizedDataSource.forEach((function(t){u+=(t[e.X]-i)*(t[e.Y]-o),s+=Math.pow(t[e.X]-i,2)})),[o-i*(t=u/s),t]}},{key:"r_squared",value:function(){var e=this,t=this.mean(),n=Object(r.a)(t,2)[1],a=this.getRegressionEquation(),i=Object(r.a)(a,2),o=i[0],u=i[1],s=0,c=0;return this.normalizedDataSource.forEach((function(t){var r=t[e.X],a=t[e.Y],i=r*u+o;s+=Math.pow(i-n,2),c+=Math.pow(a-n,2)})),s/c}},{key:"cumulativeLogisticDistribution",value:function(e){return 1/(1+Math.pow(Math.E,-(e-.2)/2))}},{key:"pValue",value:function(){var e=this.getRegressionEquation(),t=Object(r.a)(e,2)[1],n=this.cumulativeLogisticDistribution(Math.abs(t));return n>.5?2*(1-n):2*n}},{key:"significance",value:function(){return this.r_squared()*(1-this.pValue())}}]),e}(),b=(n(5),n(27)),y=n(26),w="_@_",O={sum:b.sum,max:b.max,mean:b.mean,min:b.min,count:function(e){return e.length}};function S(e){return O[e]||b.sum}function k(e,t){var n,r=new Map,i=Object(a.a)(e);try{var o=function(){var e=n.value,a=t.map((function(t){return e[t]})).join(w);r.has(a)||r.set(a,[]),r.get(a).push(e)};for(i.s();!(n=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return r}function x(e){var t,n=e.dataSource,i=e.dimensions,o=e.measures,u=e.ops,s=k(n,i),c=[],f=Object(a.a)(s);try{var l=function(){var e=Object(r.a)(t.value,2),n=e[0],a=e[1],s={groupDict:{},stat:{}};o.forEach((function(e,t){s.stat[e]={},u.forEach((function(t){var n=S(t);s.stat[e][t]=n(a.map((function(t){return t[e]})))}))}));var f=n.split(w);i.forEach((function(e,t){s.groupDict[e]=f[t]})),c.push(s)};for(f.s();!(t=f.n()).done;)l()}catch(h){f.e(h)}finally{f.f()}return c}function j(e){return e.join(w)}function M(e){var t,n=e.cuboidState,i=e.dimensions,o=e.measures,u=e.ops,s=function(e,t){var n,r=new Map,i=Object(a.a)(e);try{var o=function(){var e=n.value,a=t.map((function(t){return e.groupDict[t]})).join(w);r.has(a)||r.set(a,[]),r.get(a).push(e)};for(i.s();!(n=i.n()).done;)o()}catch(u){i.e(u)}finally{i.f()}return r}(n,i),c=[],f=u.filter((function(e){return!["sum","count","mean","dist"].includes(e)})),l=f.map((function(e){return S(e)})),h=Object(a.a)(s);try{var p=function(){for(var e=Object(r.a)(t.value,2),n=e[0],a=e[1],u={groupDict:{},stat:{}},s=function(e){var t=o[e];u.stat[t]={},l.forEach((function(e,n){var r=f[n];u.stat[t][r]=e(a.map((function(e){return e.stat[t][r]})))})),u.stat[t].sum=Object(y.c)(a,t,"sum"),u.stat[t].count=Object(y.c)(a,t,"count"),u.stat[t].mean=u.stat[t].sum/u.stat[t].count,u.stat[t].dist=Object(y.b)(a,t,"dist")},h=0;h<o.length;h++)s(h);for(var p=n.split(w),d=0;d<i.length;d++)u.groupDict[i[d]]=p[d];c.push(u)};for(h.s();!(t=h.n()).done;)p()}catch(d){h.e(d)}finally{h.f()}return c}var _=16;function E(e){for(var t=Math.max.apply(Math,Object(c.a)(e)),n=Math.min.apply(Math,Object(c.a)(e)),r=(t-n)/_,a=new Array(17).fill(0),i=0;i<e.length;i++){a[Math.floor((e[i]-n)/r)%17]++}return a[15]+=a[16],a.slice(0,_)}function D(e,t,n){for(var r=(n-t)/_,a=new Array(17).fill(0),i=0;i<e.length;i++){a[Math.floor((e[i]-t)/r)%17]++}return a[15]+=a[16],a.slice(0,_)}function I(e){for(var t=Math.max.apply(Math,Object(c.a)(e)),n=Math.min.apply(Math,Object(c.a)(e)),r=(t-n)/_,a=[],i=0;i<e.length;i++){var o=Math.floor((e[i]-n)/r);o===_&&(o=15),a.push(o)}return a}function N(e){for(var t=0,n=[],r=0;r<e.length;r++)t+=e[r];for(var a=0;a<e.length;a++)n.push(e[a]/t);return n}function T(e,t){for(var n=0,r=Math.min.apply(Math,Object(c.a)(t)),a=Math.max.apply(Math,Object(c.a)(t)),i=p(N(D(t,r,a).filter((function(e){return e>0})))),o=function(i){var o=t.filter((function(t,n){return e[n]===i})),u=D(o,r,a).filter((function(e){return e>0})),s=p(N(u)),c=o.length/t.length;n+=c*s},u=0;u<_;u++)o(u);return(i-n)/Math.log2(_)}function C(e,t){for(var n=0,r=Math.min.apply(Math,Object(c.a)(t)),a=Math.max.apply(Math,Object(c.a)(t)),i=p(N(D(t,r,a).filter((function(e){return e>0})))),o=new Set(e),u=Object(c.a)(o),s=[],f=function(n){var i=t.filter((function(t,r){return e[r]===u[n]})),o=D(i,r,a);s.push({freq:i.length,bins:o})},l=0;l<u.length;l++)f(l);for(var h=0;h<s.length;h++){var d=s[h],v=d.bins,m=d.freq,g=p(N(v.filter((function(e){return e>0}))));n+=m/t.length*g}return i-n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(29);var a=n(22);function i(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(a.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(30);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u})),n.d(t,"f",(function(){return s}));var r={maxDimensionNumber:8,maxMeasureNumber:6},a=.5772156649,i=20,o=8,u=2*o,s="0.8.8"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return p})),n.d(t,"c",(function(){return v})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h}));var r=n(30),a=(n(10),n(4)),i=n(1),o=n(5);function u(e){return JSON.parse(JSON.stringify(e))}function s(e){return e.map((function(e){return Object(o.a)({},e)}))}function c(e,t){return e.every((function(e){return"string"===typeof e[t]||"undefined"===typeof e[t]||null===e[t]}))}function f(e,t){return e.every((function(e){return!isNaN(+e[t])||"undefined"===typeof e[t]||null===e[t]}))}var l=[/^[0-9]{2,4}[-/][0-9]{1,2}([-/][0-9]{1,2})?$/,/^[0-9]{1,2}[-/][0-9]{1,2}[-/][0-9]{2,4}$/,/^[1-2][0-9]{3}[0-9]{2}[0-9]{2}$/,/^[0-9]{2,4}[-/][0-9]{1,2}[-/][0-9]{1,2} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,2}$/];function h(e,t){return e.every((function(e){return!isNaN(Number(e[t]))&&Number(e[t])>=1800&&Number(e[t])<=2200||("string"===typeof e[t]&&l.some((function(n){return n.test(e[t])}))||"undefined"===typeof e[t]||null===e[t])}))}function p(e,t){var n,r=new Map,o=Object(i.a)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value[t];r.has(u)||r.set(u,0),r.set(u,r.get(u)+1)}}catch(s){o.e(s)}finally{o.f()}return Object(a.a)(r.entries())}function d(e){for(var t=e.dataSource,n=e.field,r=e.newField,i=void 0===r?"".concat(n,"(con-group)"):r,o=e.groupNumber,u=t.map((function(e){return e[n]})),s=Math.max.apply(Math,Object(a.a)(u)),c=Math.min.apply(Math,Object(a.a)(u)),f=(s-c)/o,l=[],h=0;h<o;h++){var p=c+h*f,d=c+(h+1)*f;l.push([p,d])}l[0][0]=-1/0,l[l.length-1][1]=1/0;for(var v=Math.max(1,Math.log10(Math.abs(c))-Math.log10(f))+1,m=function(e){var r=t[e],a=l.findIndex((function(e){return e[0]<=r[n]&&r[n]<e[1]})),o=l[a];r[i]="undefined"!==typeof o?"".concat(a+1,":[").concat(Number(o[0].toPrecision(v)),", ").concat(Number(o[1].toPrecision(v)),")"):"null"},g=0;g<t.length;g++)m(g);return t}function v(e){var t=e.dataSource,n=e.field,a=e.newField,u=void 0===a?"".concat(n,"(cat-group)"):a,s=e.groupNumber,c=p(t,n);c.sort((function(e,t){return t[1]-e[1]}));var f=c.map((function(e){return e[1]}));s=c.length;for(var l=f.length-2;l>=0;l--)f[l]=f[l+1]+f[l];for(var h=0;h<c.length-2;h++)if(5*c[h][1]>=f[h+1]&&c[h+1][1]/5<f[h+2]){s=h+2;break}if(s===c.length)return t.map((function(e){return Object(o.a)(Object(o.a)({},e),{},Object(r.a)({},u,e[n]))}));for(var d=new Set,v=s-1;v<c.length;v++)d.add(c[v][0]);var m,g=Object(i.a)(t);try{for(g.s();!(m=g.n()).done;){var b=m.value;d.has(b[n])?b[u]="others":b[u]=b[n]}}catch(y){g.e(y)}finally{g.f()}return t}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(22);function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(s){a=!0,i=s}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return b}));var r={};n.r(r),n.d(r,"kruskal",(function(){return h})),n.d(r,"kruskalWithFullMST",(function(){return l}));var a=n(4),i=n(1);function o(e){for(var t=[],n=0;n<e.length;n++)for(var r=n+1;r<e[n].length;r++)t.push([[n,r],Math.abs(e[n][r])]);return t}function u(e,t){return e[t]===t?t:e[t]=u(e,e[t])}function s(e,t,n){var r=u(e,t),a=u(e,n);e[r]=a,u(e,t),u(e,n)}function c(e,t,n){return e[n]===n?n:(e[n]=c(e,t,e[n]),t[n]=t[e[n]],e[n])}function f(e,t,n,r){var a=c(e,t,n),i=c(e,t,r),o=t[a],u=t[i];e[a]=i,t[a]=t[i]=o+u,c(e,t,n),c(e,t,r)}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=o(e);r.sort((function(e,t){return t[1]-e[1]}));var c,f=[],l=e.map((function(e,t){return t})),h=Object(a.a)(l),p=!1,d=Object(i.a)(r);try{for(d.s();!(c=d.n()).done;){var v=c.value;u(l,v[0][0])!==u(l,v[0][1])&&(s(l,v[0][0],v[0][1]),f.push([v[0],v[1],p]));for(var m=0;m<l.length;m++)l[m]=u(l,m);var g=new Set(l);if(g.size<=t||v[1]<n?p=!0:h=Object(a.a)(l),1===g.size)break}}catch(b){d.e(b)}finally{d.f()}return{edgesInMST:f,groups:h}}var h=function(e){var t,n=e.matrix,r=e.measures,a=(e.method,e.groupMaxSize),l=void 0===a?4:a,h=e.limitSize,p=void 0!==h&&h,d=e.threshold,v=void 0===d?0:d;t=p?function(e,t){var n=o(e);n.sort((function(e,t){return t[1]-e[1]}));var r,a=e.map((function(e,t){return t})),u=e.map((function(){return 1})),s=Object(i.a)(n);try{for(s.s();!(r=s.n()).done;){var l=r.value;if(c(a,u,l[0][0])!==c(a,u,l[0][1])){if(u[l[0][0]]+u[l[0][1]]>t)continue;f(a,u,l[0][0],l[0][1])}for(var h=0;h<a.length;h++)a[h]=c(a,u,h);if(1===new Set(a).size)break}}catch(v){s.e(v)}finally{s.f()}for(var p=new Map,d=0;d<a.length;d++)p.has(a[d])||p.set(a[d],[]),p.get(a[d]).push(d);return p}(n,l):function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=o(e);r.sort((function(e,t){return t[1]-e[1]}));var a,c=e.map((function(e,t){return t})),f=Object(i.a)(r);try{for(f.s();!(a=f.n()).done;){var l=a.value;u(c,l[0][0])!==u(c,l[0][1])&&s(c,l[0][0],l[0][1]);for(var h=0;h<c.length;h++)c[h]=u(c,h);if(new Set(c).size<=t||l[1]<n)break}}catch(v){f.e(v)}finally{f.f()}for(var p=new Map,d=0;d<c.length;d++)p.has(c[d])||p.set(c[d],[]),p.get(c[d]).push(d);return p}(n,l,v);var m,g=[],b=Object(i.a)(t.values());try{for(b.s();!(m=b.n()).done;){var y=m.value;g.push(y.map((function(e){return r[e]})))}}catch(w){b.e(w)}finally{b.f()}return g},p=n(37),d=n(7),v=n(8),m=n(36),g=n(6),b={IsolationForest:function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:256;Object(d.a)(this,e),this.dimensions=t,this.measures=n,this.dataSource=r,r.length<i?(this.treeNumber=Math.max(1,Math.ceil(i/50)),this.sampleSize=Math.max(2,Math.floor(r.length/2))):(this.treeNumber=a,this.sampleSize=i),this.limitHeight=Math.ceil(Math.log2(this.sampleSize)),this.iForest=[],this.normalizeDimensions()}return Object(v.a)(e,[{key:"normalizeDimensions",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.ranges=[],this.dimensions.forEach((function(){e.valueSets.push(new Map)})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var a=(t[n]||"others").toString();e.valueSets[r].has(a)||e.valueSets[r].set(a,e.valueSets[r].size)})),e.measures.forEach((function(n,r){var a=t[n];"number"===typeof a&&(e.ranges[r][0]=Math.min(e.ranges[r][0],a),e.ranges[r][1]=Math.max(e.ranges[r][1],a))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e){var t=this,n={};return this.measures.forEach((function(t){n[t]=e[t]})),this.dimensions.forEach((function(r,a){var i=(e[r]||"others").toString();n[r]=t.valueSets[a].get(i)})),n}},{key:"buildIsolationTree",value:function(e,t){if(t>=this.limitHeight||e.length<=1)return null;var n=Math.random(),r=this.measures[0]||this.dimensions[0],a=this.dimensions.length,o=this.measures.length,u=0;if(n>=a/(a+o)){var s=Math.floor(Math.random()*o)%o;r=this.measures[s],u=this.ranges[s][0]+(this.ranges[s][1]-this.ranges[s][0])*Math.random()}else{var c=Math.floor(Math.random()*a)%a;r=this.dimensions[c],u=Math.floor(this.valueSets[c].size*Math.random())%this.valueSets[c].size}var f,l=[],h=[],p=Object(i.a)(e);try{for(p.s();!(f=p.n()).done;){var d=f.value;d[r]<u?l.push(d):h.push(d)}}catch(m){p.e(m)}finally{p.f()}var v={field:r,value:u,size:e.length};return v.left=this.buildIsolationTree(l,t+1),v.right=this.buildIsolationTree(h,t+1),v}},{key:"AFS",value:function(e){return e>2?2*(Math.log(e-1)+g.e)-2*(e-1)/e:2===e?1:0}},{key:"getPathLength",value:function(e,t,n,r){return null===t?n+this.AFS(r):e[t.field]<t.value?this.getPathLength(e,t.left,n+1,t.size):this.getPathLength(e,t.right,n+1,t.size)}},{key:"buildIsolationForest",value:function(){this.iForest=[];for(var e=0;e<this.treeNumber;e++){var t=Object(m.a)(this.normalizedDataSource,this.sampleSize),n=this.buildIsolationTree(t,0);this.iForest.push(n)}return this.iForest}},{key:"estimateOutierScore",value:function(){var e=this;return this.recordScoreList=[],this.normalizedDataSource.forEach((function(t){var n,r=0;e.iForest.forEach((function(n){r+=e.getPathLength(t,n,0,e.sampleSize)})),r/=e.iForest.length,n=Math.pow(2,-r/e.AFS(e.sampleSize)),e.recordScoreList.push(n)})),this.recordScoreList}}]),e}()};p.a},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=.3,a={strong:.5,weak:.3}},function(e,t,n){"use strict";var r,a;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),function(e){e.LocalCache="local_cahce",e.LocalDisk="local_disk"}(r||(r={})),function(e){e.LocalCache="local_cache",e.LocalDisk="local_disk",e.LocalMix="local_mix"}(a||(a={}))},function(e,t,n){"use strict";var r=n(46),a=Object.prototype.toString;function i(e){return"[object Array]"===a.call(e)}function o(e){return"undefined"===typeof e}function u(e){return null!==e&&"object"===typeof e}function s(e){if("[object Object]"!==a.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===a.call(e)}function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),i(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===a.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!==typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:s,isUndefined:o,isDate:function(e){return"[object Date]"===a.call(e)},isFile:function(e){return"[object File]"===a.call(e)},isBlob:function(e){return"[object Blob]"===a.call(e)},isFunction:c,isStream:function(e){return u(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!==typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){s(t[r])&&s(n)?t[r]=e(t[r],n):s(n)?t[r]=e({},n):i(n)?t[r]=n.slice():t[r]=n}for(var r=0,a=arguments.length;r<a;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,a){e[a]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return i(this,n)}}n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",(function(){return a}))},function(e,t,n){"use strict";n.r(t),n.d(t,"getDimCorrelationMatrix",(function(){return c})),n.d(t,"getMeaCorrelationMatrix",(function(){return f})),n.d(t,"getDimClusterGroups",(function(){return l})),n.d(t,"getDimSetsBasedOnClusterGroups",(function(){return h})),n.d(t,"getMeaSetsBasedOnClusterGroups",(function(){return p})),n.d(t,"subspaceSearching",(function(){return d})),n.d(t,"getRelatedVertices",(function(){return v}));var r=n(4),a=n(1),i=n(3),o=n(12),u=n(11),s=n(6);function c(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var a=r+1;a<t.length;a++)n[r][a]=n[a][r]=Object(i.c)(e,t[r],t[a])}return n}function f(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var a=r+1;a<t.length;a++){var o=Object(i.m)(e,t[r],t[a]);n[a][r]=n[r][a]=o}}return n}function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a,r=arguments.length>3?arguments[3]:void 0,a=4,i=c(e,t),s=u.a.kruskal({matrix:i,measures:t,groupMaxSize:r||Math.round(t.length/a),threshold:n});return s}function h(e,t,n,o){var u,c=[],f=l(e,t,n),h=Object(a.a)(f);try{for(h.s();!(u=h.n()).done;){var p=u.value,d=Object(i.f)(p,1,o||s.b.maxDimensionNumber);c.push.apply(c,Object(r.a)(d))}}catch(v){h.e(v)}finally{h.f()}return c}function p(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=3,i=f(e,t),s=u.a.kruskal({matrix:i,measures:t,groupMaxSize:r||Math.round(t.length/a),threshold:n||o.b.strong});return s}function d(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?h(e,t):Object(i.f)(t)}function v(e,t,n,r){for(var a=t.map((function(e){return n.includes(e)})),i=[],o=[],u=0;u<e.length;u++)if(a[u])for(var s=0;s<e[u].length;s++)a[s]||i.push([e[u][s],[u,s]]);i.sort((function(e,t){return t[0]-e[0]}));for(var c=0;c<i.length;c++){var f=i[c][1][1];a[f]||(a[f]=!0,o.push({field:t[f],corValue:i[c][0]}))}return o.slice(0,r||o.length)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(5),a={interval:[0,10],line:[11,1/0],area:[11,1/0],point:[0,1e3],path:[0,100],density:[1001,1/0]};function i(e,t){for(var n=t.length-1;n>=0;n--)if(t[n].semanticType===e&&!t[n].choosen)return t[n];return!1}function o(e){for(var t={},n={position:2,color:1,size:1,shape:1,opacity:1,facets:2,page:1,filter:1,highFacets:1e3},a=e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{choosen:!1})})),o=[["quantitative",["position","size","color","opacity","highFacets","filter"]],["temporal",["position","size","opacity","filter"]],["ordinal",["position","color","opacity","facets","size","filter","highFacets"]],["nominal",["position","color","facets","shape","filter","hightFacets"]]],u=a.length,s=0;s<o.length&&u>0;s++)for(var c=o[s][0],f=o[s][1],l=0;l<f.length&&u>0;l++)for(var h=f[l],p=void 0;n[h]>0&&(p=i(c,a));)"undefined"===typeof t[h]&&(t[h]=[]),t[h].push(p.key),n[h]--,u--,p.choosen=!0;return t}function u(e,t){var n=o(e.sort((function(e,t){return e.impurity-t.impurity}))),r=new Set(e.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key}))),i=new Set(e.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key})));if(n.position&&2===n.position.length)if(r.has(n.position[0])&&i.has(n.position[1])||r.has(n.position[1])&&i.has(n.position[0])){var u=r.has(n.position[0])?0:1,s=n.position[u],c=n.position[(u+1)%2];n.position=[s,c];var f=e.find((function(e){return e.key===s})),l=f?f.features.unique:0;n.geomType=["interval","line","area"].filter((function(e){return l>=a[e][0]&&l<=a[e][1]})),"nominal"===f.semanticType&&(n.geomType=["interval"])}else n.geomType=["point","density"].filter((function(e){return t.length>=a[e][0]&&t.length<=a[e][1]}));else n.geomType=["point"];return{schema:n,dataView:t}}},function(e,t,n){(function(t){e.exports=function e(t,n,r){function a(o,u){if(!n[o]){if(!t[o]){if(i)return i(o,!0);var s=new Error("Cannot find module '"+o+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[o]={exports:{}};t[o][0].call(c.exports,(function(e){var n=t[o][1][e];return a(n||e)}),c,c.exports,e,t,n,r)}return n[o].exports}for(var i=!1,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,n,r){(function(e){"use strict";var t,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var i=0,o=new a(f),u=e.document.createTextNode("");o.observe(u,{characterData:!0}),t=function(){u.data=i=++i%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){f(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(f,0)};else{var s=new e.MessageChannel;s.port1.onmessage=f,t=function(){s.port2.postMessage(0)}}var c=[];function f(){var e,t;r=!0;for(var n=c.length;n;){for(t=c,c=[],e=-1;++e<n;)t[e]();n=c.length}r=!1}function l(e){1!==c.push(e)||r||t()}n.exports=l}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function a(){}var i={},o=["REJECTED"],u=["FULFILLED"],s=["PENDING"];function c(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,e!==a&&p(this,e)}function f(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function l(e,t,n){r((function(){var r;try{r=t(n)}catch(a){return i.reject(e,a)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function h(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function a(t){n||(n=!0,i.resolve(e,t))}function o(){t(a,r)}var u=d(o);"error"===u.status&&r(u.value)}function d(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function v(e){return e instanceof this?e:i.resolve(new this(a),e)}function m(e){var t=new this(a);return i.reject(t,e)}function g(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),u=0,s=-1,c=new this(a);++s<n;)f(e[s],s);return c;function f(e,a){function s(e){o[a]=e,++u!==n||r||(r=!0,i.resolve(c,o))}t.resolve(e).then(s,(function(e){r||(r=!0,i.reject(c,e))}))}}function b(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=-1,u=new this(a);++o<n;)s(e[o]);return u;function s(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(u,e))}),(function(e){r||(r=!0,i.reject(u,e))}))}}t.exports=c,c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!==typeof e&&this.state===u||"function"!==typeof t&&this.state===o)return this;var n=new this.constructor(a);return this.state!==s?l(n,this.state===u?e:t,this.outcome):this.queue.push(new f(n,e,t)),n},f.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},f.prototype.otherCallFulfilled=function(e){l(this.promise,this.onFulfilled,e)},f.prototype.callRejected=function(e){i.reject(this.promise,e)},f.prototype.otherCallRejected=function(e){l(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=d(h,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=u,e.outcome=t;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(t)}return e},i.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},c.resolve=v,c.reject=m,c.all=g,c.race=b},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!==typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}var o=i();function u(){try{if(!o||!o.open)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(a){if("TypeError"!==a.name)throw a;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"===typeof Promise&&e(3);var c=Promise;function f(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function l(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}function h(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function p(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",v=void 0,m={},g=Object.prototype.toString,b="readonly",y="readwrite";function w(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),a=0;a<t;a++)r[a]=e.charCodeAt(a);return n}function O(e){return new c((function(t){var n=e.transaction(d,y),r=s([""]);n.objectStore(d).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function S(e){return"boolean"===typeof v?c.resolve(v):O(e).then((function(e){return v=e}))}function k(e){var t=m[e.name],n={};n.promise=new c((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function x(e){var t=m[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function j(e,t){var n=m[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function M(e,t){return new c((function(n,r){if(m[e.name]=m[e.name]||L(),e.db){if(!t)return n(e.db);k(e),e.db.close()}var a=[e.name];t&&a.push(e.version);var i=o.open.apply(o,a);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(d)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){var t=i.result;t.onversionchange=function(e){e.target.close()},n(t),x(e)}}))}function _(e){return M(e,!1)}function E(e){return M(e,!0)}function D(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,a=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),a||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function I(e){return new c((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function N(e){return s([w(atob(e.data))],{type:e.type})}function T(e){return e&&e.__local_forage_encoded_blob}function C(e){var t=this,n=t._initReady().then((function(){var e=m[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return l(n,e,e),n}function A(e){k(e);for(var t=m[e.name],n=t.forages,r=0;r<n.length;r++){var a=n[r];a._dbInfo.db&&(a._dbInfo.db.close(),a._dbInfo.db=null)}return e.db=null,_(e).then((function(t){return e.db=t,D(e)?E(e):t})).then((function(r){e.db=t.db=r;for(var a=0;a<n.length;a++)n[a]._dbInfo.db=r})).catch((function(t){throw j(e,t),t}))}function R(e,t,n,r){void 0===r&&(r=1);try{var a=e.db.transaction(e.storeName,t);n(null,a)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return c.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),E(e)})).then((function(){return A(e).then((function(){R(e,t,n,r-1)}))})).catch(n);n(i)}}function L(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function F(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var a=m[n.name];a||(a=L(),m[n.name]=a),a.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=C);var i=[];function o(){return c.resolve()}for(var u=0;u<a.forages.length;u++){var s=a.forages[u];s!==t&&i.push(s._initReady().catch(o))}var f=a.forages.slice(0);return c.all(i).then((function(){return n.db=a.db,_(n)})).then((function(e){return n.db=e,D(n,t._defaultConfig.version)?E(n):e})).then((function(e){n.db=a.db=e,t._dbInfo=n;for(var r=0;r<f.length;r++){var i=f[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function q(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).get(e);o.onsuccess=function(){var e=o.result;void 0===e&&(e=null),T(e)&&(e=N(e)),t(e)},o.onerror=function(){r(o.error)}}catch(u){r(u)}}))})).catch(r)}));return f(r,t),r}function P(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).openCursor(),u=1;o.onsuccess=function(){var n=o.result;if(n){var r=n.value;T(r)&&(r=N(r));var a=e(r,n.key,u++);void 0!==a?t(a):n.continue()}else t()},o.onerror=function(){r(o.error)}}catch(s){r(s)}}))})).catch(r)}));return f(r,t),r}function z(e,t,n){var r=this;e=h(e);var a=new c((function(n,a){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===g.call(t)?S(i.db).then((function(e){return e?t:I(t)})):t})).then((function(t){R(r._dbInfo,y,(function(i,o){if(i)return a(i);try{var u=o.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var s=u.put(t,e);o.oncomplete=function(){void 0===t&&(t=null),n(t)},o.onabort=o.onerror=function(){var e=s.error?s.error:s.transaction.error;a(e)}}catch(c){a(c)}}))})).catch(a)}));return f(a,n),a}function G(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){R(n._dbInfo,y,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(o.error)},i.onabort=function(){var e=o.error?o.error:o.transaction.error;r(e)}}catch(u){r(u)}}))})).catch(r)}));return f(r,t),r}function $(e){var t=this,n=new c((function(e,n){t.ready().then((function(){R(t._dbInfo,y,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).clear();a.oncomplete=function(){e()},a.onabort=a.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(o){n(o)}}))})).catch(n)}));return f(n,e),n}function B(e){var t=this,n=new c((function(e,n){t.ready().then((function(){R(t._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(o){n(o)}}))})).catch(n)}));return f(n,e),n}function U(e,t){var n=this,r=new c((function(t,r){e<0?t(null):n.ready().then((function(){R(n._dbInfo,b,(function(a,i){if(a)return r(a);try{var o=i.objectStore(n._dbInfo.storeName),u=!1,s=o.openKeyCursor();s.onsuccess=function(){var n=s.result;n?0===e||u?t(n.key):(u=!0,n.advance(e)):t(null)},s.onerror=function(){r(s.error)}}catch(c){r(c)}}))})).catch(r)}));return f(r,t),r}function V(e){var t=this,n=new c((function(e,n){t.ready().then((function(){R(t._dbInfo,b,(function(r,a){if(r)return n(r);try{var i=a.objectStore(t._dbInfo.storeName).openKeyCursor(),o=[];i.onsuccess=function(){var t=i.result;t?(o.push(t.key),t.continue()):e(o)},i.onerror=function(){n(i.error)}}catch(u){n(u)}}))})).catch(n)}));return f(n,e),n}function W(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;if(e.name){var i=e.name===n.name&&a._dbInfo.db?c.resolve(a._dbInfo.db):_(e).then((function(t){var n=m[e.name],r=n.forages;n.db=t;for(var a=0;a<r.length;a++)r[a]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;k(e);var r=m[e.name],a=r.forages;t.close();for(var i=0;i<a.length;i++){var u=a[i];u._dbInfo.db=null,u._dbInfo.version=n}return new c((function(t,r){var a=o.open(e.name,n);a.onerror=function(e){a.result.close(),r(e)},a.onupgradeneeded=function(){a.result.deleteObjectStore(e.storeName)},a.onsuccess=function(){var e=a.result;e.close(),t(e)}})).then((function(e){r.db=e;for(var t=0;t<a.length;t++){var n=a[t];n._dbInfo.db=e,x(n._dbInfo)}})).catch((function(t){throw(j(e,t)||c.resolve()).catch((function(){})),t}))}})):i.then((function(t){k(e);var n=m[e.name],r=n.forages;t.close();for(var a=0;a<r.length;a++)r[a]._dbInfo.db=null;return new c((function(t,n){var r=o.deleteDatabase(e.name);r.onerror=function(){var e=r.result;e&&e.close(),n(r.error)},r.onblocked=function(){console.warn('dropInstance blocked for database "'+e.name+'" until all open connections are closed')},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}})).then((function(e){n.db=e;for(var t=0;t<r.length;t++)x(r[t]._dbInfo)})).catch((function(t){throw(j(e,t)||c.resolve()).catch((function(){})),t}))}))}else r=c.reject("Invalid arguments");return f(r,t),r}var Y={_driver:"asyncStorage",_initStorage:F,_support:u(),iterate:P,getItem:q,setItem:z,removeItem:G,clear:$,length:B,key:U,keys:V,dropInstance:W};function H(){return"function"===typeof openDatabase}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",J="~~local_forage_type~",K=/^~~local_forage_type~([^~]+)~/,Q="__lfsc__:",Z=Q.length,ee="arbf",te="blob",ne="si08",re="ui08",ae="uic8",ie="si16",oe="si32",ue="ur16",se="ui32",ce="fl32",fe="fl64",le=Z+ee.length,he=Object.prototype.toString;function pe(e){var t,n,r,a,i,o=.75*e.length,u=e.length,s=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),f=new Uint8Array(c);for(t=0;t<u;t+=4)n=X.indexOf(e[t]),r=X.indexOf(e[t+1]),a=X.indexOf(e[t+2]),i=X.indexOf(e[t+3]),f[s++]=n<<2|r>>4,f[s++]=(15&r)<<4|a>>2,f[s++]=(3&a)<<6|63&i;return c}function de(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=X[n[t]>>2],r+=X[(3&n[t])<<4|n[t+1]>>4],r+=X[(15&n[t+1])<<2|n[t+2]>>6],r+=X[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function ve(e,t){var n="";if(e&&(n=he.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===he.call(e.buffer))){var r,a=Q;e instanceof ArrayBuffer?(r=e,a+=ee):(r=e.buffer,"[object Int8Array]"===n?a+=ne:"[object Uint8Array]"===n?a+=re:"[object Uint8ClampedArray]"===n?a+=ae:"[object Int16Array]"===n?a+=ie:"[object Uint16Array]"===n?a+=ue:"[object Int32Array]"===n?a+=oe:"[object Uint32Array]"===n?a+=se:"[object Float32Array]"===n?a+=ce:"[object Float64Array]"===n?a+=fe:t(new Error("Failed to get type for BinaryArray"))),t(a+de(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=J+e.type+"~"+de(this.result);t(Q+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(o){console.error("Couldn't convert value into a JSON string: ",e),t(null,o)}}function me(e){if(e.substring(0,Z)!==Q)return JSON.parse(e);var t,n=e.substring(le),r=e.substring(Z,le);if(r===te&&K.test(n)){var a=n.match(K);t=a[1],n=n.substring(a[0].length)}var i=pe(n);switch(r){case ee:return i;case te:return s([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case ae:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case ue:return new Uint16Array(i);case oe:return new Int32Array(i);case se:return new Uint32Array(i);case ce:return new Float32Array(i);case fe:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ge={serialize:ve,deserialize:me,stringToBuffer:pe,bufferToString:de};function be(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function ye(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!==typeof e[r]?e[r].toString():e[r];var a=new c((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(a){return r(a)}n.db.transaction((function(a){be(a,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ge,a}function we(e,t,n,r,a,i){e.executeSql(n,r,a,(function(e,o){o.code===o.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,u){u.rows.length?i(e,o):be(e,t,(function(){e.executeSql(n,r,a,i)}),i)}),i):i(e,o)}),i)}function Oe(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT * FROM "+a.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=a.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r}function Se(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT * FROM "+a.storeName,[],(function(n,r){for(var i=r.rows,o=i.length,u=0;u<o;u++){var s=i.item(u),c=s.value;if(c&&(c=a.serializer.deserialize(c)),void 0!==(c=e(c,s.key,u+1)))return void t(c)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r}function ke(e,t,n,r){var a=this;e=h(e);var i=new c((function(i,o){a.ready().then((function(){void 0===t&&(t=null);var u=t,s=a._dbInfo;s.serializer.serialize(t,(function(t,c){c?o(c):s.db.transaction((function(n){we(n,s,"INSERT OR REPLACE INTO "+s.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(u)}),(function(e,t){o(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(ke.apply(a,[e,u,n,r-1]));o(t)}}))}))})).catch(o)}));return f(i,n),i}function xe(e,t,n){return ke.apply(this,[e,t,n,1])}function je(e,t){var n=this;e=h(e);var r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"DELETE FROM "+a.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r}function Me(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n}function _e(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n}function Ee(e,t){var n=this,r=new c((function(t,r){n.ready().then((function(){var a=n._dbInfo;a.db.transaction((function(n){we(n,a,"SELECT key FROM "+a.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return f(r,t),r}function De(e){var t=this,n=new c((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){we(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],a=0;a<n.rows.length;a++)r.push(n.rows.item(a).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return f(n,e),n}function Ie(e){return new c((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var a=[],i=0;i<r.rows.length;i++)a.push(r.rows.item(i).name);t({db:e,storeNames:a})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ne(e,t){t=p.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,a=this;return f(r=e.name?new c((function(t){var r;r=e.name===n.name?a._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ie(r))})).then((function(e){return new c((function(t,n){e.db.transaction((function(r){function a(e){return new c((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],o=0,u=e.storeNames.length;o<u;o++)i.push(a(e.storeNames[o]));c.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):c.reject("Invalid arguments"),t),r}var Te={_driver:"webSQLStorage",_initStorage:ye,_support:H(),iterate:Se,getItem:Oe,setItem:xe,removeItem:je,clear:Me,length:_e,key:Ee,keys:De,dropInstance:Ne};function Ce(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function Ae(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Re(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Le(){return!Re()||localStorage.length>0}function Fe(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=Ae(e,t._defaultConfig),Le()?(t._dbInfo=n,n.serializer=ge,c.resolve()):c.reject()}function qe(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return f(n,e),n}function Pe(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return f(r,t),r}function ze(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,a=r.length,i=localStorage.length,o=1,u=0;u<i;u++){var s=localStorage.key(u);if(0===s.indexOf(r)){var c=localStorage.getItem(s);if(c&&(c=t.serializer.deserialize(c)),void 0!==(c=e(c,s.substring(a),o++)))return c}}}));return f(r,t),r}function Ge(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(a){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return f(r,t),r}function $e(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],a=0;a<n;a++){var i=localStorage.key(a);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return f(n,e),n}function Be(e){var t=this.keys().then((function(e){return e.length}));return f(t,e),t}function Ue(e,t){var n=this;e=h(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return f(r,t),r}function Ve(e,t,n){var r=this;e=h(e);var a=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new c((function(a,i){var o=r._dbInfo;o.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(o.keyPrefix+e,t),a(n)}catch(u){"QuotaExceededError"!==u.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==u.name||i(u),i(u)}}))}))}));return f(a,n),a}function We(e,t){if(t=p.apply(this,arguments),!(e="function"!==typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,a=this;return f(r=e.name?new c((function(t){e.storeName?t(Ae(e,a._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):c.reject("Invalid arguments"),t),r}var Ye={_driver:"localStorageWrapper",_initStorage:Fe,_support:Ce(),iterate:ze,getItem:Pe,setItem:Ve,removeItem:Ue,clear:qe,length:Be,key:Ge,keys:$e,dropInstance:We},He=function(e,t){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},Xe=function(e,t){for(var n=e.length,r=0;r<n;){if(He(e[r],t))return!0;r++}return!1},Je=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ke={},Qe={},Ze={INDEXEDDB:Y,WEBSQL:Te,LOCALSTORAGE:Ye},et=[Ze.INDEXEDDB._driver,Ze.WEBSQL._driver,Ze.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function at(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Je(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var ot=new(function(){function e(t){for(var n in a(this,e),Ze)if(Ze.hasOwnProperty(n)){var r=Ze[n],i=r._driver;this[n]=i,Ke[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new c((function(t,n){try{var r=e._driver,a=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(a);for(var i=nt.concat("_initStorage"),o=0,u=i.length;o<u;o++){var s=i[o];if((!Xe(tt,s)||e[s])&&"function"!==typeof e[s])return void n(a)}!function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=c.reject(t);return f(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var a=tt[n];e[a]||(e[a]=t(a))}}();var l=function(n){Ke[r]&&console.info("Redefining LocalForage driver: "+r),Ke[r]=e,Qe[r]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(l,n):l(!!e._support):l(!0)}catch(h){n(h)}}));return l(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ke[e]?c.resolve(Ke[e]):c.reject(new Error("Driver not found."));return l(r,t,n),r},e.prototype.getSerializer=function(e){var t=c.resolve(ge);return l(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return l(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Je(e)||(e=[e]);var a=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function o(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function u(e){return function(){var t=0;function n(){for(;t<e.length;){var a=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(a).then(o).catch(n)}i();var u=new Error("No available storage method found.");return r._driverSet=c.reject(u),r._driverSet}return n()}}var s=null!==this._driverSet?this._driverSet.catch((function(){return c.resolve()})):c.resolve();return this._driverSet=s.then((function(){var e=a[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=u(a)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=c.reject(e),r._driverSet})),l(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Qe[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n];this.supports(a)&&t.push(a)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)at(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}());t.exports=ot},{3:3}]},{},[4])(4)}).call(this,n(60))},function(e,t){},function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var r=n(0),a=n.n(r),i=n(1),o=n(2),u=n(4),s=n(7),c=n(8),f=n(13),l=n(3),h=n(26),p=["max","min","sum","mean","count","dist"],d=function(){function e(t){Object(s.a)(this,e),this.cached=!1,this.statSize=0,this.storageMode=f.b.LocalDisk;var n=t.dimensions,r=t.measures,a=t.ops,i=void 0===a?p:a,o=t.ranges,u=t.storage,c=t.storageMode,l=void 0===c?f.b.LocalDisk:c;this.dimensions=n,this.measures=r,this.ops=i,this._state=[],this.cached=!1,this.ranges=o,this.storageMode=l,this.sto=u}return Object(c.a)(e,[{key:"cacheState",value:function(e){this.cached=!0,this._state=e}},{key:"clearState",value:function(){this.storageMode===f.b.LocalDisk&&(this.cached=!1,this._state=[])}},{key:"getState",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],this.storageMode!==f.b.LocalDisk){e.next=12;break}if(!this.cached){e.next=4;break}return e.abrupt("return",this._state);case 4:return e.next=6,this.sto.getItem(this.dimensions.join("-"));case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=[];case 9:t=e.t0,e.next=13;break;case 12:t=this._state;case 13:return this.statSize=t.length,e.abrupt("return",t);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadStateInCache",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.storageMode!==f.b.LocalDisk){e.next=7;break}return e.next=3,this.sto.getItem(this.dimensions.join("-"));case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:this._state=e.t0;case 7:this.cached=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setState",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.statSize=t.length,this.storageMode!==f.b.LocalDisk){e.next=6;break}return e.next=4,this.sto.setItem(this.dimensions.join("-"),t);case 4:e.next=7;break;case 6:this._state=t;case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,u,s,c,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(l.p)({dimensions:this.dimensions,measures:this.measures,ops:this.ops,dataSource:t}),r=this.dimensions,o=this.measures,u=this.ranges,s=Object(l.h)(t,r),c=Object(i.a)(n);try{for(p=function(){var e,t=f.value,n=Object(l.e)(r.map((function(e){return t.groupDict[e]}))),a=s.get(n),c=Object(i.a)(o);try{var p=function(){var n=e.value,r=u.get(n);t.stat[n].dist=Object(h.a)(a.map((function(e){return e[n]})),r)};for(c.s();!(e=c.n()).done;)p()}catch(d){c.e(d)}finally{c.f()}},c.s();!(f=c.n()).done;)p()}catch(a){c.e(a)}finally{c.f()}return e.next=7,this.setState(n);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeFromCuboid",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.ops,r=this.measures,i=this.dimensions,e.next=3,t.getState();case 3:return o=e.sent,u=Object(l.q)({dimensions:i,measures:r,ops:n,cuboidState:o}),e.next=7,this.setState(u);case 7:return e.abrupt("return",u);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"size",get:function(){return this.statSize}},{key:"getAggregatedRows",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r,o,u,s,c,f,l,h,p,d,v,m,g;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],o=this.dimensions,e.next=4,this.getState();case 4:u=e.sent,s=Object(i.a)(u);try{for(s.s();!(c=s.n()).done;){f=c.value,l={},h=Object(i.a)(o);try{for(h.s();!(p=h.n()).done;)d=p.value,l[d]=f.groupDict[d]}catch(a){h.e(a)}finally{h.f()}for(v=0;v<t.length;v++)m=t[v],g=n[v],l[m]=f.stat[m][g];r.push(l)}}catch(a){s.e(a)}finally{s.f()}return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRawState",value:function(){var e=Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getState());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),v=n(32),m=n(19),g=n.n(m);var b=function(){function e(t){Object(s.a)(this,e),this.TMP_FILE_SAFE_TAIL="_.json",this.workSpaceName="visual-insights-work-space";var n=Object(v.a)();null===n?this.env="node":(this.env,n.type),this.storageName=t}return Object(c.a)(e,[{key:"setEnv",value:function(e){this.env=e}},{key:"init",value:function(){if("node"===this.env){var e=n(20),t=n(33).resolve(this.workSpaceName,this.storageName);e.existsSync(t)||e.mkdirSync(t,{recursive:!0})}else{g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}).clear()}}},{key:"destroy",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("browser"!==this.env){e.next=4;break}return e.abrupt("return",g.a.dropInstance({name:this.workSpaceName,storeName:this.storageName}));case 4:t=n(20),r=n(33),i=r.resolve(this.workSpaceName,this.storageName),t.rmdirSync(i,{recursive:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getItem",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r,i,o,u,s,c,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("browser"!==this.env){e.next=8;break}return r=g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}),e.next=4,r.getItem(t);case 4:return i=e.sent,e.abrupt("return",i);case 8:o=n(20),u=n(33),s="",c=u.resolve(this.workSpaceName,this.storageName,t+this.TMP_FILE_SAFE_TAIL),o.existsSync(c)&&(s=o.readFileSync(c).toString());try{f=JSON.parse(s)}catch(a){}return e.abrupt("return",f);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setItem",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var i,o,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("browser"!==this.env){e.next=6;break}return i=g.a.createInstance({name:this.workSpaceName,storeName:this.storageName}),e.next=4,i.setItem(t,r);case 4:e.next=12;break;case 6:o=n(20),u=n(33),s=u.resolve(this.workSpaceName,this.storageName,t+this.TMP_FILE_SAFE_TAIL),c="";try{c=JSON.stringify(r)}catch(a){c="".concat(r)}o.writeFileSync(s,c);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y="_join_",w=["max","min","sum","mean","count","dist"],O="_cuboids",S=function(){function e(t){var n=this;Object(s.a)(this,e),this.storageName=O,this.storageManageMode=f.a.LocalMix,this.cuboidInMemorySizeLimit=1e3;var r=t.dimensions,a=t.measures,i=t.dataSource,o=t.ops,u=void 0===o?w:o,c=t.storageName,l=void 0===c?O:c,h=t.cubeStorageManageMode,p=void 0===h?f.a.LocalMix:h;this.dimensions=r,this.measures=a,this.dataSource=i,this.ops=u,this.dimOrder=new Map,r.forEach((function(e,t){n.dimOrder.set(e,t)})),this.cuboids=new Map,this.ranges=new Map,this.storageName=l,this.storageManageMode=p,"undefined"===typeof t.storage?(this.storage=new b(l),this.storage.init()):this.storage=t.storage}return Object(c.a)(e,[{key:"sortDimension",value:function(e){var t=this,n=Object(u.a)(e);return n.sort((function(e,n){return t.dimOrder.get(e)-t.dimOrder.get(n)})),n}},{key:"getCuboid",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,s,c,f,l,h,p,v,m,g,b,w,O,S,k,x,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.sortDimension(t),r=n.join(y),!this.cuboids.has(r)){e.next=4;break}return e.abrupt("return",this.cuboids.get(r));case 4:o=new Set(t),s=[],c=[],f=Object(i.a)(this.dimensions);try{for(f.s();!(l=f.n()).done;)h=l.value,o.has(h)||(p=this.sortDimension([].concat(Object(u.a)(n),[h])),v=p.join(y),this.cuboids.has(v)?s.push(v):c.push(v))}catch(a){f.e(a)}finally{f.f()}if(m=1/0,g=this.dimensions.join(y),s.length>0){b=Object(i.a)(s);try{for(b.s();!(w=b.n()).done;)O=w.value,(S=this.cuboids.get(O)).size<m&&(m=S.size,g=O)}catch(a){b.e(a)}finally{b.f()}}else c.length>0&&(g=c[0]);return e.next=14,this.getCuboid(g.split(y));case 14:return k=e.sent,x=this.getCuboidStorageMode(k.size),j=new d({dimensions:t,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:x}),e.next=19,j.computeFromCuboid(k);case 19:return this.cuboids.set(r,j),e.abrupt("return",j);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeRanges",value:function(){var e,t=this.measures,n=this.dataSource,r=Object(i.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value;this.ranges.set(a,Object(l.g)(n,a))}}catch(o){r.e(o)}finally{r.f()}}},{key:"buildCuboidOnCluster",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.cuboids.get(this.dimensions.join(y)),r=this.getCuboidStorageMode(n.statSize),i=new d({dimensions:t,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:r}),e.next=5,i.computeFromCuboid(n);case 5:this.cuboids.set(t.join(y),i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCuboidStorageMode",value:function(e){return this.storageManageMode===f.a.LocalCache?f.b.LocalCache:this.storageManageMode===f.a.LocalDisk?f.b.LocalDisk:e<=this.cuboidInMemorySizeLimit?f.b.LocalCache:f.b.LocalDisk}},{key:"buildBaseCuboid",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.getCuboidStorageMode(this.dataSource.length),this.computeRanges(),n=new d({dimensions:this.dimensions,measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage,storageMode:t}),e.next=5,n.setData(this.dataSource);case 5:return this.cuboids.set(this.dimensions.join(y),n),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadCuboid",value:function(){var e=Object(o.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new d({dimensions:t.split(y),measures:this.measures,ops:this.ops,ranges:this.ranges,storage:this.storage}),e.next=3,r.setState(n);case 3:this.cuboids.set(t,r);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportCuboids",value:function(){return{}}},{key:"getBaseCuboid",value:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.dimensions.join(y),this.cuboids.has(t)){e.next=3;break}return e.abrupt("return",this.buildBaseCuboid());case 3:return e.abrupt("return",this.cuboids.get(t));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cuboidSize",get:function(){return this.cuboids.size}}]),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(29);function a(e,t){if(e){if("string"===typeof e)return Object(r.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(e,t):void 0}}},function(e,t,n){"use strict";n(9),n(42),n(28);var r=n(55);n.d(t,"Insight",(function(){return r}));n(44);var a=n(25);n.d(t,"UnivariateSummary",(function(){return a}));n(45),n(36),n(3);var i=n(56);n.d(t,"Computation",(function(){return i}));n(11),n(13),n(54),n(57);console.log("This is a test version of visual-insights")},function(e,t,n){"use strict";this&&this.__assign;Object.defineProperty(t,"__esModule",{value:!0});var r=n(61),a=n(64),i=n(43),o={sum:i.sum_unsafe,mean:i.mean,count:i.count};function u(e){var t=e.type,n=e.aggFunc,a=void 0===n?i.count:n,o=e.factTable,u=void 0===o?[]:o,s=e.dimensions,c=void 0===s?[]:s,f=e.measures,l=void 0===f?[]:f;switch(t){case"period":return new r.periodCube({aggFunc:a,factTable:u,dimensions:c,measures:l});case"moment":default:return new r.momentCube({aggFunc:a,factTable:u,dimensions:c,measures:l})}}t.createCube=u,t.default=function(e){var t=e.dimensions,n=e.measures,r=e.asFields,s=e.operator,c=e.dataSource,f=u({type:"moment",aggFunc:o[s]||i.count,dimensions:t,measures:n,factTable:c}),l=a.tree2Table({dimensions:t,measures:n,cube:f});return l.forEach((function(e){r.forEach((function(t,r){e[t]=e[n[r]]}))})),l},function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(43))},function(e,t,n){"use strict";n.r(t),n.d(t,"getFieldType",(function(){return c})),n.d(t,"getAllFieldTypes",(function(){return f})),n.d(t,"getFieldDistribution",(function(){return l})),n.d(t,"getAllFieldsDistribution",(function(){return h})),n.d(t,"getFieldEntropy",(function(){return p})),n.d(t,"getFloatFieldEntropy",(function(){return d})),n.d(t,"getAllFieldsEntropy",(function(){return v})),n.d(t,"groupFields",(function(){return m}));var r=n(1),a=n(9),i=n(3),o=n(28),u=n(6),s=u.a;function c(e,t){return Object(a.g)(e,t)?"temporal":Object(a.f)(e,t)?Object(a.h)(e,t).length>s?"quantitative":"ordinal":(Object(a.e)(e,t),"nominal")}function f(e,t){var n,a=[],i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push({name:o,type:c(e,o)})}}catch(u){i.e(u)}finally{i.f()}return a}function l(e,t){return Object(a.h)(e,t).map((function(e){return{memberName:e[0],count:e[1]}}))}function h(e,t){var n,a=[],i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push({fieldName:o,distribution:l(e,o)})}}catch(u){i.e(u)}finally{i.f()}return a}function p(e,t){var n=Object(a.h)(e,t),r=n.map((function(e){return e[1]})),o=Object(i.k)(r);return{fieldName:t,entropy:Object(i.d)(o),maxEntropy:Math.log2(n.length)}}function d(e,t){for(var n=-1/0,r=1/0,a=0;a<e.length;a++)n=Math.max(n,e[a][t]),r=Math.min(r,e[a][t]);for(var o=(n-r)/u.a,s=new Array(u.a+1).fill(0),c=0;c<e.length;c++){var f=e[c][t];s[Math.floor((f-r)/o)]++}s[u.a-1]+=s[u.a];var l=Object(i.k)(s.slice(0,u.a));return{fieldName:t,entropy:Object(i.d)(l),maxEntropy:Math.log2(u.a)}}function v(e,t){var n,a=[],i=Object(r.a)(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;a.push(p(e,o))}}catch(u){i.e(u)}finally{i.f()}return a}function m(e,t){var n,i=Object(a.b)(e),u=[],c=Object(r.a)(t);try{for(c.s();!(n=c.n()).done;){var f=n.value,l="".concat(f.name,"(group)");"quantitative"===f.type&&Object(a.h)(e,f.name).length>2*s?Object(o.a)(e,f.name)||(i=Object(a.d)({dataSource:i,field:f.name,newField:l,groupNumber:8}),u.push({name:l,type:"ordinal"})):("ordinal"===f.type||"nominal"===f.type)&&Object(a.h)(e,f.name).length>s&&(Object(o.a)(e,f.name)||(i=Object(a.c)({dataSource:i,field:f.name,newField:l,groupNumber:8}),u.push({name:l,type:f.type})))}}catch(h){c.e(h)}finally{c.f()}return{groupedData:i,fields:t,newFields:u}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n(1),a=n(6);function i(e,t,n){for(var r=0,a=0;a<e.length;a++)r+=e[a].stat[t][n];return r}var o=function(e,t){var n,i=function(e){return e[0]===e[1]?[e[0],e[1]+.1]:e}(t),o=(i[1]-i[0])/a.c,u=new Array(a.c+1).fill(0),s=Object(r.a)(e);try{for(s.s();!(n=s.n()).done;){var c=n.value;u[Math.floor((c-i[0])/o)]++}}catch(f){s.e(f)}finally{s.f()}return u[a.c-1]+=u[a.c],u.slice(0,-1)};function u(e,t,n){for(var r=new Array(a.c).fill(0),i=0;i<e.length;i++)for(var o=e[i].stat[t][n],u=0;u<r.length;u++)r[u]+=o[u];return r}},function(e,t,n){!function(e){"use strict";function t(e){if(0===e.length)return 0;for(var t,n=e[0],r=0,a=1;a<e.length;a++)t=n+e[a],Math.abs(n)>=Math.abs(e[a])?r+=n-t+e[a]:r+=e[a]-t+n,n=t;return n+r}function n(e){if(0===e.length)throw new Error("mean requires at least one data point");return t(e)/e.length}function r(e,t){var r,a,i=n(e),o=0;if(2===t)for(a=0;a<e.length;a++)o+=(r=e[a]-i)*r;else for(a=0;a<e.length;a++)o+=Math.pow(e[a]-i,t);return o}function a(e){if(0===e.length)throw new Error("variance requires at least one data point");return r(e,2)/e.length}function i(e){if(1===e.length)return 0;var t=a(e);return Math.sqrt(t)}function o(e){if(0===e.length)throw new Error("mode requires at least one data point");if(1===e.length)return e[0];for(var t=e[0],n=NaN,r=0,a=1,i=1;i<e.length+1;i++)e[i]!==t?(a>r&&(r=a,n=t),a=1,t=e[i]):a++;return n}function u(e){return e.slice().sort((function(e,t){return e-t}))}function s(e){if(0===e.length)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function c(e){if(0===e.length)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function f(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function l(e,t){var n=e.length*t;if(0===e.length)throw new Error("quantile requires at least one data point.");if(t<0||t>1)throw new Error("quantiles must be between 0 and 1");return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function h(e,t,n,r){for(n=n||0,r=r||e.length-1;r>n;){if(r-n>600){var a=r-n+1,i=t-n+1,o=Math.log(a),u=.5*Math.exp(2*o/3),s=.5*Math.sqrt(o*u*(a-u)/a);i-a/2<0&&(s*=-1),h(e,t,Math.max(n,Math.floor(t-i*u/a+s)),Math.min(r,Math.floor(t+(a-i)*u/a+s)))}var c=e[t],f=n,l=r;for(p(e,n,t),e[r]>c&&p(e,n,r);f<l;){for(p(e,f,l),f++,l--;e[f]<c;)f++;for(;e[l]>c;)l--}e[n]===c?p(e,n,l):p(e,++l,r),l<=t&&(n=l+1),t<=l&&(r=l-1)}}function p(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t){var n=e.slice();if(Array.isArray(t)){!function(e,t){for(var n=[0],r=0;r<t.length;r++)n.push(g(e.length,t[r]));n.push(e.length-1),n.sort(m);for(var a=[0,n.length-1];a.length;){var i=Math.ceil(a.pop()),o=Math.floor(a.pop());if(!(i-o<=1)){var u=Math.floor((o+i)/2);v(e,n[u],Math.floor(n[o]),Math.ceil(n[i])),a.push(o,u,u,i)}}}(n,t);for(var r=[],a=0;a<t.length;a++)r[a]=l(n,t[a]);return r}return v(n,g(n.length,t),0,n.length-1),l(n,t)}function v(e,t,n,r){t%1==0?h(e,t,n,r):(h(e,t=Math.floor(t),n,r),h(e,t+1,t+1,r))}function m(e,t){return e-t}function g(e,t){var n=e*t;return 1===t?e-1:0===t?0:n%1!=0?Math.ceil(n)-1:e%2==0?n-.5:n}function b(e,t){if(t<e[0])return 0;if(t>e[e.length-1])return 1;var n=function(e,t){for(var n=0,r=0,a=e.length;r<a;)t<=e[n=r+a>>>1]?a=n:r=-~n;return r}(e,t);if(e[n]!==t)return n/e.length;n++;var r=function(e,t){for(var n=0,r=0,a=e.length;r<a;)t>=e[n=r+a>>>1]?r=-~n:a=n;return r}(e,t);if(r===n)return n/e.length;var a=r-n+1;return a*(r+n)/2/a/e.length}function y(e){var t=d(e,.75),n=d(e,.25);if("number"==typeof t&&"number"==typeof n)return t-n}function w(e){return+d(e,.5)}function O(e){for(var t=w(e),n=[],r=0;r<e.length;r++)n.push(Math.abs(e[r]-t));return w(n)}function S(e,t){t=t||Math.random;for(var n,r,a=e.length;a>0;)r=Math.floor(t()*a--),n=e[a],e[a]=e[r],e[r]=n;return e}function k(e,t){return S(e.slice(),t)}function x(e,t,n){return k(e,n).slice(0,t)}function j(e,t){for(var n=[],r=0;r<e;r++){for(var a=[],i=0;i<t;i++)a.push(0);n.push(a)}return n}function M(e){for(var t,n=0,r=0;r<e.length;r++)0!==r&&e[r]===t||(t=e[r],n++);return n}function _(e,t,n,r){var a;if(e>0){var i=(n[t]-n[e-1])/(t-e+1);a=r[t]-r[e-1]-(t-e+1)*i*i}else a=r[t]-n[t]*n[t]/(t+1);return a<0?0:a}function E(e,t,n,r,a,i,o){if(!(e>t)){var u=Math.floor((e+t)/2);r[n][u]=r[n-1][u-1],a[n][u]=u;var s=n;e>n&&(s=Math.max(s,a[n][e-1]||0)),s=Math.max(s,a[n-1][u]||0);var c,f,l,h=u-1;t<r[0].length-1&&(h=Math.min(h,a[n][t+1]||0));for(var p=h;p>=s&&!((c=_(p,u,i,o))+r[n-1][s-1]>=r[n][u]);--p)(f=_(s,u,i,o)+r[n-1][s-1])<r[n][u]&&(r[n][u]=f,a[n][u]=s),s++,(l=c+r[n-1][p-1])<r[n][u]&&(r[n][u]=l,a[n][u]=p);E(e,u-1,n,r,a,i,o),E(u+1,t,n,r,a,i,o)}}function D(e,t){if(e.length!==t.length)throw new Error("sampleCovariance requires samples with equal lengths");if(e.length<2)throw new Error("sampleCovariance requires at least two data points in each sample");for(var r=n(e),a=n(t),i=0,o=0;o<e.length;o++)i+=(e[o]-r)*(t[o]-a);return i/(e.length-1)}function I(e){if(e.length<2)throw new Error("sampleVariance requires at least two data points");return r(e,2)/(e.length-1)}function N(e){var t=I(e);return Math.sqrt(t)}function T(e,t){return D(e,t)/N(e)/N(t)}function C(e,t,n,r){return(e*t+n*r)/(t+r)}function A(e){if(0===e.length)throw new Error("meanSimple requires at least one data point");return f(e)/e.length}function R(e){if(0===e.length)throw new Error("rootMeanSquare requires at least one data point");for(var t=0,n=0;n<e.length;n++)t+=Math.pow(e[n],2);return Math.sqrt(t/e.length)}var L=function(){this.totalCount=0,this.data={}};L.prototype.train=function(e,t){for(var n in this.data[t]||(this.data[t]={}),e){var r=e[n];void 0===this.data[t][n]&&(this.data[t][n]={}),void 0===this.data[t][n][r]&&(this.data[t][n][r]=0),this.data[t][n][r]++}this.totalCount++},L.prototype.score=function(e){var t,n={};for(var r in e){var a=e[r];for(t in this.data)n[t]={},this.data[t][r]?n[t][r+"_"+a]=(this.data[t][r][a]||0)/this.totalCount:n[t][r+"_"+a]=0}var i={};for(t in n)for(var o in i[t]=0,n[t])i[t]+=n[t][o];return i};var F=function(){this.weights=[],this.bias=0};F.prototype.predict=function(e){if(e.length!==this.weights.length)return null;for(var t=0,n=0;n<this.weights.length;n++)t+=this.weights[n]*e[n];return(t+=this.bias)>0?1:0},F.prototype.train=function(e,t){if(0!==t&&1!==t)return null;e.length!==this.weights.length&&(this.weights=e,this.bias=1);var n=this.predict(e);if("number"==typeof n&&n!==t){for(var r=t-n,a=0;a<this.weights.length;a++)this.weights[a]+=r*e[a];this.bias+=r}return this};var q=1e-4;function P(e){if(e<0)throw new Error("factorial requires a non-negative value");if(Math.floor(e)!==e)throw new Error("factorial requires an integer input");for(var t=1,n=2;n<=e;n++)t*=n;return t}var z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22],G=Math.log(Math.sqrt(2*Math.PI)),$={1:{.995:0,.99:0,.975:0,.95:0,.9:.02,.5:.45,.1:2.71,.05:3.84,.025:5.02,.01:6.63,.005:7.88},2:{.995:.01,.99:.02,.975:.05,.95:.1,.9:.21,.5:1.39,.1:4.61,.05:5.99,.025:7.38,.01:9.21,.005:10.6},3:{.995:.07,.99:.11,.975:.22,.95:.35,.9:.58,.5:2.37,.1:6.25,.05:7.81,.025:9.35,.01:11.34,.005:12.84},4:{.995:.21,.99:.3,.975:.48,.95:.71,.9:1.06,.5:3.36,.1:7.78,.05:9.49,.025:11.14,.01:13.28,.005:14.86},5:{.995:.41,.99:.55,.975:.83,.95:1.15,.9:1.61,.5:4.35,.1:9.24,.05:11.07,.025:12.83,.01:15.09,.005:16.75},6:{.995:.68,.99:.87,.975:1.24,.95:1.64,.9:2.2,.5:5.35,.1:10.65,.05:12.59,.025:14.45,.01:16.81,.005:18.55},7:{.995:.99,.99:1.25,.975:1.69,.95:2.17,.9:2.83,.5:6.35,.1:12.02,.05:14.07,.025:16.01,.01:18.48,.005:20.28},8:{.995:1.34,.99:1.65,.975:2.18,.95:2.73,.9:3.49,.5:7.34,.1:13.36,.05:15.51,.025:17.53,.01:20.09,.005:21.96},9:{.995:1.73,.99:2.09,.975:2.7,.95:3.33,.9:4.17,.5:8.34,.1:14.68,.05:16.92,.025:19.02,.01:21.67,.005:23.59},10:{.995:2.16,.99:2.56,.975:3.25,.95:3.94,.9:4.87,.5:9.34,.1:15.99,.05:18.31,.025:20.48,.01:23.21,.005:25.19},11:{.995:2.6,.99:3.05,.975:3.82,.95:4.57,.9:5.58,.5:10.34,.1:17.28,.05:19.68,.025:21.92,.01:24.72,.005:26.76},12:{.995:3.07,.99:3.57,.975:4.4,.95:5.23,.9:6.3,.5:11.34,.1:18.55,.05:21.03,.025:23.34,.01:26.22,.005:28.3},13:{.995:3.57,.99:4.11,.975:5.01,.95:5.89,.9:7.04,.5:12.34,.1:19.81,.05:22.36,.025:24.74,.01:27.69,.005:29.82},14:{.995:4.07,.99:4.66,.975:5.63,.95:6.57,.9:7.79,.5:13.34,.1:21.06,.05:23.68,.025:26.12,.01:29.14,.005:31.32},15:{.995:4.6,.99:5.23,.975:6.27,.95:7.26,.9:8.55,.5:14.34,.1:22.31,.05:25,.025:27.49,.01:30.58,.005:32.8},16:{.995:5.14,.99:5.81,.975:6.91,.95:7.96,.9:9.31,.5:15.34,.1:23.54,.05:26.3,.025:28.85,.01:32,.005:34.27},17:{.995:5.7,.99:6.41,.975:7.56,.95:8.67,.9:10.09,.5:16.34,.1:24.77,.05:27.59,.025:30.19,.01:33.41,.005:35.72},18:{.995:6.26,.99:7.01,.975:8.23,.95:9.39,.9:10.87,.5:17.34,.1:25.99,.05:28.87,.025:31.53,.01:34.81,.005:37.16},19:{.995:6.84,.99:7.63,.975:8.91,.95:10.12,.9:11.65,.5:18.34,.1:27.2,.05:30.14,.025:32.85,.01:36.19,.005:38.58},20:{.995:7.43,.99:8.26,.975:9.59,.95:10.85,.9:12.44,.5:19.34,.1:28.41,.05:31.41,.025:34.17,.01:37.57,.005:40},21:{.995:8.03,.99:8.9,.975:10.28,.95:11.59,.9:13.24,.5:20.34,.1:29.62,.05:32.67,.025:35.48,.01:38.93,.005:41.4},22:{.995:8.64,.99:9.54,.975:10.98,.95:12.34,.9:14.04,.5:21.34,.1:30.81,.05:33.92,.025:36.78,.01:40.29,.005:42.8},23:{.995:9.26,.99:10.2,.975:11.69,.95:13.09,.9:14.85,.5:22.34,.1:32.01,.05:35.17,.025:38.08,.01:41.64,.005:44.18},24:{.995:9.89,.99:10.86,.975:12.4,.95:13.85,.9:15.66,.5:23.34,.1:33.2,.05:36.42,.025:39.36,.01:42.98,.005:45.56},25:{.995:10.52,.99:11.52,.975:13.12,.95:14.61,.9:16.47,.5:24.34,.1:34.28,.05:37.65,.025:40.65,.01:44.31,.005:46.93},26:{.995:11.16,.99:12.2,.975:13.84,.95:15.38,.9:17.29,.5:25.34,.1:35.56,.05:38.89,.025:41.92,.01:45.64,.005:48.29},27:{.995:11.81,.99:12.88,.975:14.57,.95:16.15,.9:18.11,.5:26.34,.1:36.74,.05:40.11,.025:43.19,.01:46.96,.005:49.65},28:{.995:12.46,.99:13.57,.975:15.31,.95:16.93,.9:18.94,.5:27.34,.1:37.92,.05:41.34,.025:44.46,.01:48.28,.005:50.99},29:{.995:13.12,.99:14.26,.975:16.05,.95:17.71,.9:19.77,.5:28.34,.1:39.09,.05:42.56,.025:45.72,.01:49.59,.005:52.34},30:{.995:13.79,.99:14.95,.975:16.79,.95:18.49,.9:20.6,.5:29.34,.1:40.26,.05:43.77,.025:46.98,.01:50.89,.005:53.67},40:{.995:20.71,.99:22.16,.975:24.43,.95:26.51,.9:29.05,.5:39.34,.1:51.81,.05:55.76,.025:59.34,.01:63.69,.005:66.77},50:{.995:27.99,.99:29.71,.975:32.36,.95:34.76,.9:37.69,.5:49.33,.1:63.17,.05:67.5,.025:71.42,.01:76.15,.005:79.49},60:{.995:35.53,.99:37.48,.975:40.48,.95:43.19,.9:46.46,.5:59.33,.1:74.4,.05:79.08,.025:83.3,.01:88.38,.005:91.95},70:{.995:43.28,.99:45.44,.975:48.76,.95:51.74,.9:55.33,.5:69.33,.1:85.53,.05:90.53,.025:95.02,.01:100.42,.005:104.22},80:{.995:51.17,.99:53.54,.975:57.15,.95:60.39,.9:64.28,.5:79.33,.1:96.58,.05:101.88,.025:106.63,.01:112.33,.005:116.32},90:{.995:59.2,.99:61.75,.975:65.65,.95:69.13,.9:73.29,.5:89.33,.1:107.57,.05:113.14,.025:118.14,.01:124.12,.005:128.3},100:{.995:67.33,.99:70.06,.975:74.22,.95:77.93,.9:82.36,.5:99.33,.1:118.5,.05:124.34,.025:129.56,.01:135.81,.005:140.17}},B=Math.sqrt(2*Math.PI),U={gaussian:function(e){return Math.exp(-.5*e*e)/B}},V={nrd:function(e){var t=N(e),n=y(e);return"number"==typeof n&&(t=Math.min(t,n/1.34)),1.06*t*Math.pow(e.length,-.2)}};function W(e,t,n){var r,a;if(void 0===t)r=U.gaussian;else if("string"==typeof t){if(!U[t])throw new Error('Unknown kernel "'+t+'"');r=U[t]}else r=t;if(void 0===n)a=V.nrd(e);else if("string"==typeof n){if(!V[n])throw new Error('Unknown bandwidth method "'+n+'"');a=V[n](e)}else a=n;return function(t){var n=0,i=0;for(n=0;n<e.length;n++)i+=r((t-e[n])/a);return i/a/e.length}}var Y=Math.sqrt(2*Math.PI);function H(e){for(var t=e,n=e,r=1;r<15;r++)t+=n*=e*e/(2*r+1);return Math.round(1e4*(.5+t/Y*Math.exp(-e*e/2)))/1e4}for(var X=[],J=0;J<=3.09;J+=.01)X.push(H(J));function K(e){var t=1/(1+.5*Math.abs(e)),n=t*Math.exp(-e*e+((((((((.17087277*t-.82215223)*t+1.48851587)*t-1.13520398)*t+.27886807)*t-.18628806)*t+.09678418)*t+.37409196)*t+1.00002368)*t-1.26551223);return e>=0?1-n:n-1}function Q(e){var t=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),n=Math.sqrt(Math.sqrt(Math.pow(2/(Math.PI*t)+Math.log(1-e*e)/2,2)-Math.log(1-e*e)/t)-(2/(Math.PI*t)+Math.log(1-e*e)/2));return e>=0?n:-n}function Z(e){if("number"==typeof e)return e<0?-1:0===e?0:1;throw new TypeError("not a number")}function ee(e,t){for(var n=0,r=0;r<e.length;r++){var a=e[r]-t[r];n+=a*a}return Math.sqrt(n)}function te(e,t){return e.map((function(e){for(var n=Number.MAX_VALUE,r=-1,a=0;a<t.length;a++){var i=ee(e,t[a]);i<n&&(n=i,r=a)}return r}))}function ne(e,t,n){for(var r=e[0].length,a=j(n,r),i=Array(n).fill(0),o=e.length,u=0;u<o;u++){for(var s=e[u],c=t[u],f=a[c],l=0;l<r;l++)f[l]+=s[l];i[c]+=1}for(var h=0;h<n;h++){if(0===i[h])throw new Error("Centroid "+h+" has no friends");for(var p=a[h],d=0;d<r;d++)p[d]/=i[h]}return a}function re(e,t){for(var n=0,r=0;r<e.length;r++)n+=ee(e[r],t[r]);return n}function ae(e,t){if(e.length!==t.length)throw new Error("must have exactly as many labels as points");for(var n=function(e){for(var t=1+c(e),n=Array(t),r=0;r<e.length;r++){var a=e[r];void 0===n[a]&&(n[a]=[]),n[a].push(r)}return n}(t),r=function(e){for(var t=e.length,n=j(t,t),r=0;r<t;r++)for(var a=0;a<r;a++)n[r][a]=ee(e[r],e[a]),n[a][r]=n[r][a];return n}(e),a=[],i=0;i<e.length;i++){var o=0;if(n[t[i]].length>1){var u=oe(i,n[t[i]],r),s=ie(i,t,n,r);o=(s-u)/Math.max(u,s)}a.push(o)}return a}function ie(e,t,n,r){for(var a=t[e],i=Number.MAX_VALUE,o=0;o<n.length;o++)if(o!==a){var u=oe(e,n[o],r);u<i&&(i=u)}return i}function oe(e,t,n){for(var r=0,a=0;a<t.length;a++)r+=n[e][t[a]];return r/t.length}function ue(e,t){return 0===e&&0===t?0:Math.abs((e-t)/t)}e.BayesianClassifier=L,e.PerceptronModel=F,e.addToMean=function(e,t,n){return e+(n-e)/(t+1)},e.approxEqual=function(e,t,n){return void 0===n&&(n=q),ue(e,t)<=n},e.average=n,e.averageSimple=A,e.bayesian=L,e.bernoulliDistribution=function(e){if(e<0||e>1)throw new Error("bernoulliDistribution requires probability to be between 0 and 1 inclusive");return[1-e,e]},e.binomialDistribution=function(e,t){if(!(t<0||t>1||e<=0||e%1!=0)){var n=0,r=0,a=[],i=1;do{a[n]=i*Math.pow(t,n)*Math.pow(1-t,e-n),r+=a[n],i=i*(e-++n+1)/n}while(r<.9999);return a}},e.bisect=function(e,t,n,r,a){if("function"!=typeof e)throw new TypeError("func must be a function");for(var i=0;i<r;i++){var o=(t+n)/2;if(0===e(o)||Math.abs((n-t)/2)<a)return o;Z(e(o))===Z(e(t))?t=o:n=o}throw new Error("maximum number of iterations exceeded")},e.chiSquaredDistributionTable=$,e.chiSquaredGoodnessOfFit=function(e,t,r){for(var a=0,i=t(n(e)),o=[],u=[],s=0;s<e.length;s++)void 0===o[e[s]]&&(o[e[s]]=0),o[e[s]]++;for(var c=0;c<o.length;c++)void 0===o[c]&&(o[c]=0);for(var f in i)f in o&&(u[+f]=i[f]*e.length);for(var l=u.length-1;l>=0;l--)u[l]<3&&(u[l-1]+=u[l],u.pop(),o[l-1]+=o[l],o.pop());for(var h=0;h<o.length;h++)a+=Math.pow(o[h]-u[h],2)/u[h];var p=o.length-1-1;return $[p][r]<a},e.chunk=function(e,t){var n=[];if(t<1)throw new Error("chunk size must be a positive number");if(Math.floor(t)!==t)throw new Error("chunk size must be an integer");for(var r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},e.ckmeans=function(e,t){if(t>e.length)throw new Error("cannot generate more classes than there are data values");var n=u(e);if(1===M(n))return[n];var r=j(t,n.length),a=j(t,n.length);!function(e,t,n){for(var r=t[0].length,a=e[Math.floor(r/2)],i=[],o=[],u=0,s=void 0;u<r;++u)s=e[u]-a,0===u?(i.push(s),o.push(s*s)):(i.push(i[u-1]+s),o.push(o[u-1]+s*s)),t[0][u]=_(0,u,i,o),n[0][u]=0;for(var c=1;c<t.length;++c)E(c<t.length-1?c:r-1,r-1,c,t,n,i,o)}(n,r,a);for(var i=[],o=a[0].length-1,s=a.length-1;s>=0;s--){var c=a[s][o];i[s]=n.slice(c,o+1),s>0&&(o=c-1)}return i},e.coefficientOfVariation=function(e){return N(e)/n(e)},e.combinations=function e(t,n){var r,a,i,o,u=[];for(r=0;r<t.length;r++)if(1===n)u.push([t[r]]);else for(i=e(t.slice(r+1,t.length),n-1),a=0;a<i.length;a++)(o=i[a]).unshift(t[r]),u.push(o);return u},e.combinationsReplacement=function e(t,n){for(var r=[],a=0;a<t.length;a++)if(1===n)r.push([t[a]]);else for(var i=e(t.slice(a,t.length),n-1),o=0;o<i.length;o++)r.push([t[a]].concat(i[o]));return r},e.combineMeans=C,e.combineVariances=function(e,t,n,r,a,i){var o=C(t,n,a,i);return(n*(e+Math.pow(t-o,2))+i*(r+Math.pow(a-o,2)))/(n+i)},e.cumulativeStdLogisticProbability=function(e){return 1/(Math.exp(-e)+1)},e.cumulativeStdNormalProbability=function(e){var t=Math.abs(e),n=Math.min(Math.round(100*t),X.length-1);return e>=0?X[n]:+(1-X[n]).toFixed(4)},e.epsilon=q,e.equalIntervalBreaks=function(e,t){if(e.length<2)return e;for(var n=s(e),r=c(e),a=[n],i=(r-n)/t,o=1;o<t;o++)a.push(a[0]+i*o);return a.push(r),a},e.erf=K,e.errorFunction=K,e.extent=function(e){if(0===e.length)throw new Error("extent requires at least one data point");for(var t=e[0],n=e[0],r=1;r<e.length;r++)e[r]>n&&(n=e[r]),e[r]<t&&(t=e[r]);return[t,n]},e.extentSorted=function(e){return[e[0],e[e.length-1]]},e.factorial=P,e.gamma=function e(t){if(Number.isInteger(t))return t<=0?NaN:P(t-1);if(--t<0)return Math.PI/(Math.sin(Math.PI*-t)*e(-t));var n=t+1/4;return Math.pow(t/Math.E,t)*Math.sqrt(2*Math.PI*(t+1/6))*(1+1/144/Math.pow(n,2)-1/12960/Math.pow(n,3)-257/207360/Math.pow(n,4)-52/2612736/Math.pow(n,5)+5741173/9405849600/Math.pow(n,6)+37529/18811699200/Math.pow(n,7))},e.gammaln=function(e){if(e<=0)return 1/0;e--;for(var t=z[0],n=1;n<15;n++)t+=z[n]/(e+n);var r=5.2421875+e;return G+Math.log(t)-r+(e+.5)*Math.log(r)},e.geometricMean=function(e){if(0===e.length)throw new Error("geometricMean requires at least one data point");for(var t=1,n=0;n<e.length;n++){if(e[n]<0)throw new Error("geometricMean requires only non-negative numbers as input");t*=e[n]}return Math.pow(t,1/e.length)},e.harmonicMean=function(e){if(0===e.length)throw new Error("harmonicMean requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<=0)throw new Error("harmonicMean requires only positive numbers as input");t+=1/e[n]}return e.length/t},e.interquartileRange=y,e.inverseErrorFunction=Q,e.iqr=y,e.kMeansCluster=function(e,t,n){void 0===n&&(n=Math.random);for(var r=null,a=x(e,t,n),i=null,o=Number.MAX_VALUE;0!==o;)r=a,o=re(a=ne(e,i=te(e,a),t),r);return{labels:i,centroids:a}},e.kde=W,e.kernelDensityEstimation=W,e.linearRegression=function(e){var t,n,r=e.length;if(1===r)t=0,n=e[0][1];else{for(var a,i,o,u=0,s=0,c=0,f=0,l=0;l<r;l++)u+=i=(a=e[l])[0],s+=o=a[1],c+=i*i,f+=i*o;n=s/r-(t=(r*f-u*s)/(r*c-u*u))*u/r}return{m:t,b:n}},e.linearRegressionLine=function(e){return function(t){return e.b+e.m*t}},e.logAverage=function(e){if(0===e.length)throw new Error("logAverage requires at least one data point");for(var t=0,n=0;n<e.length;n++){if(e[n]<0)throw new Error("logAverage requires only non-negative numbers as input");t+=Math.log(e[n])}return Math.exp(t/e.length)},e.logit=function(e){if(e<=0||e>=1)throw new Error("p must be strictly between zero and one");return Math.log(e/(1-e))},e.mad=O,e.max=c,e.maxSorted=function(e){return e[e.length-1]},e.mean=n,e.meanSimple=A,e.median=w,e.medianAbsoluteDeviation=O,e.medianSorted=function(e){return l(e,.5)},e.min=s,e.minSorted=function(e){return e[0]},e.mode=function(e){return o(u(e))},e.modeFast=function(e){for(var t,n=new Map,r=0,a=0;a<e.length;a++){var i=n.get(e[a]);void 0===i?i=1:i++,i>r&&(t=e[a],r=i),n.set(e[a],i)}if(0===r)throw new Error("mode requires at last one data point");return t},e.modeSorted=o,e.numericSort=u,e.perceptron=F,e.permutationTest=function(e,t,r,a,i){if(void 0===a&&(a=1e4),void 0===r&&(r="two_side"),"two_side"!==r&&"greater"!==r&&"less"!==r)throw new Error("`alternative` must be either 'two_side', 'greater', or 'less'");for(var o=n(e)-n(t),u=new Array(a),s=e.concat(t),c=Math.floor(s.length/2),f=0;f<a;f++){S(s,i);var l=s.slice(0,c),h=s.slice(c,s.length),p=n(l)-n(h);u[f]=p}var d=0;if("two_side"===r)for(var v=0;v<=a;v++)Math.abs(u[v])>=Math.abs(o)&&(d+=1);else if("greater"===r)for(var m=0;m<=a;m++)u[m]>=o&&(d+=1);else for(var g=0;g<=a;g++)u[g]<=o&&(d+=1);return d/a},e.permutationsHeap=function(e){for(var t=new Array(e.length),n=[e.slice()],r=0;r<e.length;r++)t[r]=0;for(var a=0;a<e.length;)if(t[a]<a){var i=0;a%2!=0&&(i=t[a]);var o=e[i];e[i]=e[a],e[a]=o,n.push(e.slice()),t[a]++,a=0}else t[a]=0,a++;return n},e.poissonDistribution=function(e){if(!(e<=0)){var t=0,n=0,r=[],a=1;do{r[t]=Math.exp(-e)*Math.pow(e,t)/a,n+=r[t],a*=++t}while(n<.9999);return r}},e.probit=function(e){return 0===e?e=q:e>=1&&(e=.9999),Math.sqrt(2)*Q(2*e-1)},e.product=function(e){for(var t=1,n=0;n<e.length;n++)t*=e[n];return t},e.quantile=d,e.quantileRank=function(e,t){return b(u(e),t)},e.quantileRankSorted=b,e.quantileSorted=l,e.quickselect=h,e.rSquared=function(e,t){if(e.length<2)return 1;for(var n=0,r=0;r<e.length;r++)n+=e[r][1];for(var a=n/e.length,i=0,o=0;o<e.length;o++)i+=Math.pow(a-e[o][1],2);for(var u=0,s=0;s<e.length;s++)u+=Math.pow(e[s][1]-t(e[s][0]),2);return 1-u/i},e.relativeError=ue,e.rms=R,e.rootMeanSquare=R,e.sample=x,e.sampleCorrelation=T,e.sampleCovariance=D,e.sampleKurtosis=function(e){var t=e.length;if(t<4)throw new Error("sampleKurtosis requires at least four data points");for(var r,a=n(e),i=0,o=0,u=0;u<t;u++)i+=(r=e[u]-a)*r,o+=r*r*r*r;return(t-1)/((t-2)*(t-3))*(t*(t+1)*o/(i*i)-3*(t-1))},e.sampleRankCorrelation=function(e,t){for(var n=e.map((function(e,t){return[e,t]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),r=t.map((function(e,t){return[e,t]})).sort((function(e,t){return e[0]-t[0]})).map((function(e){return e[1]})),a=Array(n.length),i=Array(n.length),o=0;o<n.length;o++)a[n[o]]=o,i[r[o]]=o;return T(a,i)},e.sampleSkewness=function(e){if(e.length<3)throw new Error("sampleSkewness requires at least three data points");for(var t,r=n(e),a=0,i=0,o=0;o<e.length;o++)a+=(t=e[o]-r)*t,i+=t*t*t;var u=e.length-1,s=Math.sqrt(a/u),c=e.length;return c*i/((c-1)*(c-2)*Math.pow(s,3))},e.sampleStandardDeviation=N,e.sampleVariance=I,e.sampleWithReplacement=function(e,t,n){if(0===e.length)return[];n=n||Math.random;for(var r=e.length,a=[],i=0;i<t;i++){var o=Math.floor(n()*r);a.push(e[o])}return a},e.shuffle=k,e.shuffleInPlace=S,e.sign=Z,e.silhouette=ae,e.silhouetteMetric=function(e,t){return c(ae(e,t))},e.standardDeviation=i,e.standardNormalTable=X,e.subtractFromMean=function(e,t,n){return(e*t-n)/(t-1)},e.sum=t,e.sumNthPowerDeviations=r,e.sumSimple=f,e.tTest=function(e,t){return(n(e)-t)/(i(e)/Math.sqrt(e.length))},e.tTestTwoSample=function(e,t,r){var a=e.length,i=t.length;if(!a||!i)return null;r||(r=0);var o=n(e),u=n(t),s=I(e),c=I(t);if("number"==typeof o&&"number"==typeof u&&"number"==typeof s&&"number"==typeof c){var f=((a-1)*s+(i-1)*c)/(a+i-2);return(o-u-r)/Math.sqrt(f*(1/a+1/i))}},e.uniqueCountSorted=M,e.variance=a,e.wilcoxonRankSum=function(e,t){if(!e.length||!t.length)throw new Error("Neither sample can be empty");for(var n=e.map((function(e){return{label:"x",value:e}})).concat(t.map((function(e){return{label:"y",value:e}}))).sort((function(e,t){return e.value-t.value})),r=0;r<n.length;r++)n[r].rank=r;for(var a=[n[0].rank],i=1;i<n.length;i++)n[i].value===n[i-1].value?(a.push(n[i].rank),i===n.length-1&&o(n,a)):a.length>1?o(n,a):a=[n[i].rank];function o(e,t){for(var n=(t[0]+t[t.length-1])/2,r=0;r<t.length;r++)e[t[r]].rank=n}for(var u=0,s=0;s<n.length;s++){var c=n[s];"x"===c.label&&(u+=c.rank+1)}return u},e.zScore=function(e,t,n){return(e-t)/n},Object.defineProperty(e,"__esModule",{value:!0})}(t)},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(9);function a(e,t){return Object(r.h)(e,t).every((function(e){return 1===e[1]}))}},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(7),a=n(8),i=n(3),o=n(17),u=n(12),s=function(){function e(t,n){Object(r.a)(this,e),this.DIMENSION_CORRELATION_THRESHOLD=u.a,this.MEASURE_CORRELATION_THRESHOLD=u.b.strong,this.dimensions=t,this.measures=n}return Object(a.a)(e,[{key:"computeGraph",value:function(e,t,n){for(var r=t.map((function(e){return t.map((function(){return 0}))})),a=0;a<t.length;a++){r[a][a]=1;for(var i=a+1;i<t.length;i++)r[a][i]=r[i][a]=n(e,t[a],t[i])}return r}},{key:"computeDGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.c;return this.DG=this.computeGraph(e,this.dimensions,t),this.DG}},{key:"computeMGraph",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.m;return this.MG=this.computeGraph(e,this.measures,t),this.MG}},{key:"clusterDGraph",value:function(e,t){var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD;return this.DClusters=Object(o.getDimClusterGroups)(e,n,t||r),this.DClusters}},{key:"clusterMGraph",value:function(e,t){var n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD;return this.MClusters=Object(o.getMeaSetsBasedOnClusterGroups)(e,n,t||r),this.MClusters}}]),e}()},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var r=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},a=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},i=function(t){this.version=t,this.type="node",this.name="node",this.os=e.platform},o=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},u=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},s=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,f=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(t){return t?d(t):"undefined"===typeof document&&"undefined"!==typeof navigator&&"ReactNative"===navigator.product?new s:"undefined"!==typeof navigator?d(navigator.userAgent):"undefined"!==typeof e&&e.version?new i(e.version.slice(1)):null}function p(e){return""!==e&&f.reduce((function(t,n){var r=n[0],a=n[1];if(t)return t;var i=a.exec(e);return!!i&&[r,i]}),!1)}function d(e){var t=p(e);if(!t)return null;var n=t[0],i=t[1];if("searchbot"===n)return new u;var s=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);s?s.length<3&&(s=r(r([],s,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-s.length),!0)):s=[];var f=s.join("."),h=function(e){for(var t=0,n=l.length;t<n;t++){var r=l[t],a=r[0];if(r[1].exec(e))return a}return null}(e),d=c.exec(e);return d&&d[1]?new o(n,f,h,d[1]):new a(n,f,h)}}).call(this,n(40))},function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:e.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return(a?"/":"")+(t=n(r(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return(e=n(r(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),i=r(n.split("/")),o=Math.min(a.length,i.length),u=o,s=0;s<o;s++)if(a[s]!==i[s]){u=s;break}var c=[];for(s=u;s<a.length;s++)c.push("..");return(c=c.concat(i.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=function(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(47!==u)-1===r&&(a=!1,r=o+1),46===u?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){n=o+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n(40))},function(e,t,n){"use strict";(function(t){var r=n(14),a=n(70),i=n(48),o={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!r.isUndefined(e)&&r.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var s={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof t&&"[object process]"===Object.prototype.toString.call(t))&&(e=n(49)),e}(),transformRequest:[function(e,t){return a(t,"Accept"),a(t,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),function(e,t,n){if(r.isString(e))try{return(t||JSON.parse)(e),r.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||s.transitional,n=t&&t.silentJSONParsing,a=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||a&&r.isString(e)&&e.length)try{return JSON.parse(e)}catch(u){if(o){if("SyntaxError"===u.name)throw i(u,this,"E_JSON_PARSE");throw u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(e){s.headers[e]={}})),r.forEach(["post","put","patch"],(function(e){s.headers[e]=r.merge(o)})),e.exports=s}).call(this,n(40))},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e,t){for(var n=function(e,t){if(0===e)return[];for(var n=2147483647,r=[t],a=1;a<e;a++)r.push((1103515245*r[a-1]+12345)%n);return r.map((function(e){return e/n}))}(t,2147483647*Math.random()),r=[],a=0;a<t;a++){var i=Math.floor(n[a]*t)%t;r.push(e[i])}return r}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1),a=n(16),i=n(15),o=n(7),u=n(8),s=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(e){var r;Object(o.a)(this,n),r=t.call(this,e);var a=e.K;return r.K=a,r.normalize(),r}return Object(u.a)(n,[{key:"getNeighbors",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n.length!==t.length&&t.forEach((function(e){n.push(1)}));for(var r=[],a=[],i=[],o=[],u=new Set(this.dimensions),s=0;s<t.length;s++)u.has(t[s])?(r.push(t[s]),i.push(n[s])):(a.push(t[s]),o.push(n[s]));var c=[];this.normalizedDataSource.forEach((function(t,n){var u=0;a.forEach((function(n,r){u+=Math.pow((t[n]-e[n])*o[r],2)})),r.forEach((function(n,r){t[n]!==e[n]&&(u+=Math.pow(i[r],2))})),c.push({dis:u,index:n})})),c.sort((function(e,t){return e.dis-t.dis}));for(var f=[],l=Math.min(this.K,c.length),h=0;h<l;h++)f.push(this.normalizedDataSource[c[h].index]);return f}},{key:"getTargetValue",value:function(e,t){var n=this,a=[];return e.forEach((function(e){var i=new Map;t.forEach((function(t){i.has(t[e])||i.set(t[e],0),i.set(t[e],i.get(t[e])+1)}));var o,u=0,s=0,c=Object(r.a)(i);try{for(c.s();!(o=c.n()).done;){var f=o.value;f[1]>u&&(u=f[1],s=f[0])}}catch(h){c.e(h)}finally{c.f()}var l=n.dimensions.indexOf(e);l>-1?a.push(n.valueParser[l][s]):a.push(s)})),a}}]),n}(function(){function e(t){Object(o.a)(this,e);var n=t.dataSource,r=t.dimensions,a=t.measures;this.dataSource=n,this.dimensions=r,this.measures=a}return Object(u.a)(e,[{key:"normalize",value:function(){var e=this;return this.normalizedDataSource=[],this.valueSets=[],this.valueParser=[],this.ranges=[],this.dimensions.forEach((function(t){e.valueSets.push(new Map),e.valueParser.push([])})),this.measures.forEach((function(){e.ranges.push([1/0,-1/0])})),this.dataSource.forEach((function(t){e.dimensions.forEach((function(n,r){var a=(t[n]||"others").toString();e.valueSets[r].has(a)||(e.valueSets[r].set(a,e.valueSets[r].size),e.valueParser[r].push(a))})),e.measures.forEach((function(n,r){var a=t[n];"number"===typeof a&&(e.ranges[r][0]=Math.min(e.ranges[r][0],a),e.ranges[r][1]=Math.max(e.ranges[r][1],a))}))})),this.dataSource.forEach((function(t){var n=e.normalizeRecord(t);e.normalizedDataSource.push(n)})),this.normalizedDataSource}},{key:"normalizeRecord",value:function(e){var t=this,n={};return this.measures.forEach((function(r,a){n[r]=(e[r]-t.ranges[a][0])/(t.ranges[a][1]-t.ranges[a][0])})),this.dimensions.forEach((function(r,a){var i=(e[r]||"others").toString();n[r]=t.valueSets[a].get(i)})),n}}]),e}())},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(7),a=n(8),i=n(16),o=n(15),u=function(e){Object(i.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"getTargetValuePercent",value:function(e,t,n){var r=[];return e.forEach((function(e,a){var i=0;n.forEach((function(n){n[e]===t[e]&&i++})),r.push(i/n.length)})),r}},{key:"getSignificance",value:function(e,t){var n=this,r=0;return this.normalizedDataSource.forEach((function(a){var i=n.getNeighbors(a,e),o=n.getTargetValuePercent(t,a,i),u=0;o.forEach((function(e){u+=e})),u/=o.length,r+=u})),r/=this.normalizedDataSource.length}}]),n}(n(37).a)},function(e,t,n){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",a="second",i="minute",o="hour",u="day",s="week",c="month",f="quarter",l="year",h="date",p="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},b={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),a=n%60;return(t<=0?"+":"-")+g(r,2,"0")+":"+g(a,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),a=t.clone().add(r,c),i=n-a<0,o=t.clone().add(r+(i?-1:1),c);return+(-(r+(n-a)/(i?a-o:o-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:l,w:s,d:u,D:h,h:o,m:i,s:a,ms:r,Q:f}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},y="en",w={};w[y]=m;var O=function(e){return e instanceof j},S=function(e,t,n){var r;if(!e)return y;if("string"==typeof e)w[e]&&(r=e),t&&(w[e]=t,r=e);else{var a=e.name;w[a]=e,r=a}return!n&&r&&(y=r),r||!n&&y},k=function(e,t){if(O(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new j(n)},x=b;x.l=S,x.i=O,x.w=function(e,t){return k(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var j=function(){function m(e){this.$L=S(e.locale,null,!0),this.parse(e)}var g=m.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(x.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var a=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],a,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return x},g.isValid=function(){return!(this.$d.toString()===p)},g.isSame=function(e,t){var n=k(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return k(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<k(e)},g.$g=function(e,t,n){return x.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,r=!!x.u(t)||t,f=x.p(e),p=function(e,t){var a=x.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?a:a.endOf(u)},d=function(e,t){return x.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,m=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(f){case l:return r?p(1,0):p(31,11);case c:return r?p(1,m):p(0,m+1);case s:var y=this.$locale().weekStart||0,w=(v<y?v+7:v)-y;return p(r?g-w:g+(6-w),m);case u:case h:return d(b+"Hours",0);case o:return d(b+"Minutes",1);case i:return d(b+"Seconds",2);case a:return d(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,s=x.p(e),f="set"+(this.$u?"UTC":""),p=(n={},n[u]=f+"Date",n[h]=f+"Date",n[c]=f+"Month",n[l]=f+"FullYear",n[o]=f+"Hours",n[i]=f+"Minutes",n[a]=f+"Seconds",n[r]=f+"Milliseconds",n)[s],d=s===u?this.$D+(t-this.$W):t;if(s===c||s===l){var v=this.clone().set(h,1);v.$d[p](d),v.init(),this.$d=v.set(h,Math.min(this.$D,v.daysInMonth())).$d}else p&&this.$d[p](d);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[x.p(e)]()},g.add=function(r,f){var h,p=this;r=Number(r);var d=x.p(f),v=function(e){var t=k(p);return x.w(t.date(t.date()+Math.round(e*r)),p)};if(d===c)return this.set(c,this.$M+r);if(d===l)return this.set(l,this.$y+r);if(d===u)return v(1);if(d===s)return v(7);var m=(h={},h[i]=t,h[o]=n,h[a]=e,h)[d]||1,g=this.$d.getTime()+r*m;return x.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=e||"YYYY-MM-DDTHH:mm:ssZ",a=x.z(this),i=this.$H,o=this.$m,u=this.$M,s=n.weekdays,c=n.months,f=function(e,n,a,i){return e&&(e[n]||e(t,r))||a[n].substr(0,i)},l=function(e){return x.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},d={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:x.s(u+1,2,"0"),MMM:f(n.monthsShort,u,c,3),MMMM:f(c,u),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,s,2),ddd:f(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(i),HH:x.s(i,2,"0"),h:l(1),hh:l(2),a:h(i,o,!0),A:h(i,o,!1),m:String(o),mm:x.s(o,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:a};return r.replace(v,(function(e,t){return t||d[e]||a.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(r,h,p){var d,v=x.p(h),m=k(r),g=(m.utcOffset()-this.utcOffset())*t,b=this-m,y=x.m(this,m);return y=(d={},d[l]=y/12,d[c]=y,d[f]=y/3,d[s]=(b-g)/6048e5,d[u]=(b-g)/864e5,d[o]=b/n,d[i]=b/t,d[a]=b/e,d)[v]||b,p?y:x.a(y)},g.daysInMonth=function(){return this.endOf(c).$D},g.$locale=function(){return w[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=S(e,t,!0);return r&&(n.$L=r),n},g.clone=function(){return x.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},m}(),M=j.prototype;return k.prototype=M,[["$ms",r],["$s",a],["$m",i],["$H",o],["$W",u],["$M",c],["$y",l],["$D",h]].forEach((function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),k.extend=function(e,t){return e.$i||(e(t,j,k),e.$i=!0),k},k.locale=S,k.isDayjs=O,k.unix=function(e){return k(1e3*e)},k.en=w[y],k.Ls=w,k.p={},k}()},function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!f){var e=u(h);f=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,f=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||f||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,n){e.exports=n(65)},function(e,t,n){"use strict";n(5),n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sum_unsafe=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,a){t.forEach((function(t){n[t]+=e[r][t]}))},a=0,i=e.length;a<i;a++)r(a);return n},t.sum=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,a){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},a=0,i=e.length;a<i;a++)r(a);return n},t.count=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=0,a=e.length;r<a;r++)t.forEach((function(e){n[e]++}));return n},t.mean=function(e,t){var n={};t.forEach((function(e){n[e]=0}));for(var r=function(r,a){t.forEach((function(t){n[t]+=Number(e[r][t])||0}))},a=0,i=e.length;a<i;a++)r(a);return t.forEach((function(t){n[t]/=e.length})),n}},function(e,t,n){"use strict";n(4),n(1),n(9)},function(e,t,n){"use strict";n(4),n(1),n(11),n(24),n(3),n(12)},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";var r=n(14);function a(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(r.isURLSearchParams(t))i=t.toString();else{var o=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(a(t)+"="+a(e))})))})),i=o.join("&")}if(i){var u=e.indexOf("#");-1!==u&&(e=e.slice(0,u)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a){return e.config=t,n&&(e.code=n),e.request=r,e.response=a,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},function(e,t,n){"use strict";var r=n(14),a=n(71),i=n(72),o=n(47),u=n(73),s=n(76),c=n(77),f=n(50),l=n(34),h=n(35);e.exports=function(e){return new Promise((function(t,n){var p,d=e.data,v=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}r.isFormData(d)&&delete v["Content-Type"];var b=new XMLHttpRequest;if(e.auth){var y=e.auth.username||"",w=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";v.Authorization="Basic "+btoa(y+":"+w)}var O=u(e.baseURL,e.url);function S(){if(b){var r="getAllResponseHeaders"in b?s(b.getAllResponseHeaders()):null,i={data:m&&"text"!==m&&"json"!==m?b.response:b.responseText,status:b.status,statusText:b.statusText,headers:r,config:e,request:b};a((function(e){t(e),g()}),(function(e){n(e),g()}),i),b=null}}if(b.open(e.method.toUpperCase(),o(O,e.params,e.paramsSerializer),!0),b.timeout=e.timeout,"onloadend"in b?b.onloadend=S:b.onreadystatechange=function(){b&&4===b.readyState&&(0!==b.status||b.responseURL&&0===b.responseURL.indexOf("file:"))&&setTimeout(S)},b.onabort=function(){b&&(n(f("Request aborted",e,"ECONNABORTED",b)),b=null)},b.onerror=function(){n(f("Network Error",e,null,b)),b=null},b.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded",r=e.transitional||l.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(f(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",b)),b=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||c(O))&&e.xsrfCookieName?i.read(e.xsrfCookieName):void 0;k&&(v[e.xsrfHeaderName]=k)}"setRequestHeader"in b&&r.forEach(v,(function(e,t){"undefined"===typeof d&&"content-type"===t.toLowerCase()?delete v[t]:b.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(b.withCredentials=!!e.withCredentials),m&&"json"!==m&&(b.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&b.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&b.upload&&b.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){b&&(n(!e||e&&e.type?new h("canceled"):e),b.abort(),b=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),d||(d=null),b.send(d)}))}},function(e,t,n){"use strict";var r=n(48);e.exports=function(e,t,n,a,i){var o=new Error(e);return r(o,t,n,a,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";var r=n(14);e.exports=function(e,t){t=t||{};var n={};function a(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function i(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(e[n],t[n])}function o(e){if(!r.isUndefined(t[e]))return a(void 0,t[e])}function u(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:a(void 0,e[n]):a(void 0,t[n])}function s(n){return n in t?a(e[n],t[n]):n in e?a(void 0,e[n]):void 0}var c={url:o,method:o,data:o,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||i,a=t(e);r.isUndefined(a)&&t!==s||(n[e]=a)})),n}},function(e,t){e.exports={version:"0.22.0"}},function(e,t){},function(e,t,n){"use strict";n.r(t),n.d(t,"insightExtraction",(function(){return d})),n.d(t,"subspaceSearching",(function(){return p})),n.d(t,"getVisSpaces",(function(){return C})),n.d(t,"IntentionWorkerCollection",(function(){return I})),n.d(t,"DefaultIWorker",(function(){return j})),n.d(t,"getIntentionSpaces",(function(){return N})),n.d(t,"Subspace",(function(){return r})),n.d(t,"VIEngine",(function(){return Z}));var r=n(17),a=n(4),i=n(1),o=n(24),u=n.n(o),s=n(3),c=n(12),f=n(11),l=n(6);function h(e,t){var n,r=[],o=function(e,t){for(var n=t.map((function(e){return t.map((function(e){return 0}))})),r=0;r<t.length;r++){n[r][r]=1;for(var a=r+1;a<t.length;a++)n[r][a]=n[a][r]=Object(s.c)(e,t[r],t[a])}return n}(e,t),u=f.a.kruskal({matrix:o,measures:t,groupMaxSize:Math.round(t.length/4),threshold:c.a}),h=Object(i.a)(u);try{for(h.s();!(n=h.n()).done;){var p=n.value,d=Object(s.f)(p,1,l.b.maxDimensionNumber);r.push.apply(r,Object(a.a)(d))}}catch(v){h.e(v)}finally{h.f()}return r}function p(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return n?h(e,t):Object(s.f)(t)}function d(e,t,n){var r,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sum",o=[],c=p(e,t,!0),f=Object(i.a)(c);try{for(f.s();!(r=f.n()).done;){var l,h=r.value,d={},v=u()({dataSource:e,dimensions:h,measures:n,asFields:n,operator:a||"sum"}),m=Object(i.a)(n);try{var g=function(){var e=l.value,t=v.map((function(t){return t[e]})),n=Object(s.k)(Object(s.i)(t)),r=Object(s.d)(n);d[e]=r};for(m.s();!(l=m.n()).done;)g()}catch(S){m.e(S)}finally{m.f()}for(var b=n.map((function(e){return n.map((function(e){return 0}))})),y=0;y<n.length;y++){b[y][y]=1;for(var w=y+1;w<n.length;w++){var O=Object(s.m)(v,n[y],n[w]);b[w][y]=b[y][w]=O}}o.push([h,d,b])}}catch(S){f.e(S)}finally{f.f()}return o}var v=n(10),m=n(7),g=n(8),b=n(0),y=n.n(b),w=n(2),O=n(38),S="=;=";function k(e,t){var n,r=[],a=Object(i.a)(e);try{for(a.s();!(n=a.n()).done;){var o,u=n.value,s=Object(i.a)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;r.push({dimensions:u,measures:c})}}catch(f){s.e(f)}finally{s.f()}}}catch(f){a.e(f)}finally{a.f()}return r}function x(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.b.maxDimensionNumber,r=[],o=Object(i.a)(e);try{for(o.s();!(t=o.n()).done;){var u=t.value,c=Object(s.f)(u,1,n);r.push.apply(r,Object(a.a)(c))}}catch(f){o.e(f)}finally{o.f()}return r}var j,M=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var a,o,u,c,f;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0,o=0,u=Object(i.a)(r);try{for(f=function(){var e=c.value,n=t.map((function(t){return t[e]})),r=Object(s.k)(Object(s.i)(n)),i=Object(s.d)(r);a+=i,o+=i/Math.log2(n.length)},u.s();!(c=u.n()).done;)f()}catch(l){u.e(l)}finally{u.f()}return a/=r.length,o=1-(o/=r.length),e.abrupt("return",{dimensions:n,measures:r,type:"default_general",score:a,impurity:a,significance:o,order:"asc"});case 8:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var a,i,o,u,s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((a=new f.b.IsolationForest([],r,t)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt("return",{dimensions:n,measures:r,score:u,significance:u,order:"desc",description:c});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var o,u,c,f,l,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt("return",null);case 2:(o=Object(a.a)(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:e[n[0]]<t[n[0]]?-1:void 0})),u=0,c=Object(i.a)(r);try{for(c.s();!(f=c.n()).done;)l=f.value,(h=new s.l(o,n[0],l)).normalizeDimensions(n),u+=h.significance()}catch(p){c.e(p)}finally{c.f()}return u/=r.length,e.abrupt("return",{dimensions:n,measures:r,score:u,significance:u,order:"desc"});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),D=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var a,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<2)){e.next=2;break}return e.abrupt("return",null);case 2:return 0,i=new O.a({dataSource:t,dimensions:n,measures:r,K:8}),a=i.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),e.abrupt("return",{dimensions:n,measures:r,score:a,significance:a,order:"desc"});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier="default_outlier",e.cluster="default_group",e.trend="default_trend"}(j||(j={}));var I=function(){function e(){Object(m.a)(this,e),this.workers=new Map}return Object(g.a)(e,[{key:"register",value:function(e,t){if(this.workers.has(e))throw new Error("There has been a worker named: ".concat(e," already."));this.workers.set(e,[!0,t])}},{key:"enable",value:function(e,t){if(!this.workers.has(e))throw new Error('Intention Worker "'.concat(e,'" does not exist.'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:"each",value:function(e){var t,n=Object(i.a)(this.workers);try{for(n.s();!(t=n.n()).done;){var r=Object(v.a)(t.value,2),a=r[0],o=r[1];o[0]&&e(o[1],a)}}catch(u){n.e(u)}finally{n.f()}}}],[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;for(var a in e.colletion||(e.colletion=new e,r&&(e.colletion.register(j.outlier,_),e.colletion.register(j.cluster,D),e.colletion.register(j.trend,E))),j)e.colletion.enable(j[a],r);return e.colletion}}]),e}();function N(e,t,n){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(y.a.mark((function e(t,n,r){var a,o,u,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],o=Object(i.a)(n),e.prev=2,s=y.a.mark((function e(){var n,i,o,s,c,f;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=u.value,i=n.dimensions,o=n.measures,s=i.join(S),!t.has(s)){e.next=9;break}return c=t.get(s),e.next=7,M(c,i,o);case 7:f=e.sent,r.each(function(){var e=Object(w.a)(y.a.mark((function e(t,n){var r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(c,i,o);case 3:null!==(r=e.sent)&&(r.type=n,r.impurity=f.impurity,a.push(r)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("worker failed",{dimensions:i,measures:o,aggData:c},e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}());case 9:case"end":return e.stop()}}),e)})),o.s();case 5:if((u=o.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),o.e(e.t1);case 14:return e.prev=14,o.f(),e.finish(14);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}function C(e){return A.apply(this,arguments)}function A(){return(A=Object(w.a)(y.a.mark((function e(t){var n,a,o,s,f,l,h,p,d,v,m,g,b,w,O,j,M,_,E,D,T,C,A,R,L,F,q,P;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.dataSource,a=t.dimensions,o=t.measures,s=t.collection,f=t.dimension_correlation_threshold,l=void 0===f?c.a:f,h=t.measure_correlation_threshold,p=void 0===h?c.b.strong:h,d=t.max_dimension_num_in_view,v=void 0===d?3:d,m=t.max_measure_num_in_view,g=void 0===m?3:m,b=a,w=Object(r.getDimClusterGroups)(n,b,l),O=x(w,v),j=Object(r.getMeaSetsBasedOnClusterGroups)(n,o,p),M=x(j,g),_=k(O,M),E=new Map,D=(new Date).getTime(),T=Object(i.a)(O);try{for(T.s();!(C=T.n()).done;)A=C.value,R=A.join(S),L=u()({dataSource:n,dimensions:A,measures:o,asFields:o,operator:"sum"}),E.set(R,L)}catch(y){T.e(y)}finally{T.f()}return F=(new Date).getTime(),console.log("cube cost",F-D),E.set("*",n),q=s||I.init(),e.next=18,N(E,_,q);case 18:return P=e.sent,e.abrupt("return",P);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=n(5),L=n(25),F={boolean:function(e){return"true"===e||"false"===e||!0===e||!1===e},integer:function(e){return F.number(e)&&(e=+e)===~~e},number:function(e){return!isNaN(+e)},date:function(e){return!isNaN(Date.parse(e))}};function q(e,t){var n,r=[],o=new Map,u=Object(i.a)(e);try{var s=function(){var e=n.value,u=new Map;t.forEach((function(t){u.has(t[e])||u.set(t[e],0),u.set(t[e],u.get(t[e])+1)}));var s=function(e){var t,n,r=["boolean","integer","number","date"],a=Object(i.a)(e);try{for(a.s();!(t=a.n()).done;){for(var o=t.value,u=0;u<r.length;++u)null==(n=o)||n!==n||F[r[u]](o)||(r.splice(u,1),u-=1);if(0===r.length)return"string"}}catch(s){a.e(s)}finally{a.f()}return r[0]}(Object(a.a)(u.keys())),c=Object(L.getFieldType)(t,e),f=Math.log2(u.size),h=f,p="dimension",d=!1;if(("integer"===s||"number"===s)&&"ordinal"!==c&&(p="measure",u.size>l.a)){var v=Object(L.getFloatFieldEntropy)(t,e);h=v.entropy,f=v.maxEntropy,d=!0}if(!d){var m=Object(L.getFieldEntropy)(t,e);h=m.entropy,f=m.maxEntropy}var g={key:e,analyticType:p,semanticType:c,dataType:s,features:{unique:u.size,size:t.length,entropy:h,maxEntropy:f}};r.push(g),o.set(g.key,g)};for(u.s();!(n=u.n()).done;)s()}catch(c){u.e(c)}finally{u.f()}return{fields:r,dictonary:o}}var P,z=n(31),G=n(21),$=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var a,i,o,u,s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for((a=new f.b.IsolationForest([],r,t)).buildIsolationForest(),i=a.estimateOutierScore(),o=0,u=0,s=0;s<i.length;s++)i[s]>u&&(u=i[s],o=s);return c={},n.concat(r).forEach((function(e){c[e]=t[o][e]})),e.abrupt("return",{dimensions:n,measures:r,significance:u,description:c});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),B=function(){var e=Object(w.a)(y.a.mark((function e(t,n,r){var o,u,c,f,l,h;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1===n.length){e.next=2;break}return e.abrupt("return",null);case 2:(o=Object(a.a)(t)).sort((function(e,t){return e[n[0]]>t[n[0]]?1:e[n[0]]===t[n[0]]?0:-1})),u=0,c=Object(i.a)(r);try{for(c.s();!(f=c.n()).done;)l=f.value,(h=new s.l(o,n[0],l)).normalizeDimensions(n),u+=h.significance()}catch(p){c.e(p)}finally{c.f()}return u/=r.length,e.abrupt("return",{dimensions:n,measures:r,significance:u});case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();!function(e){e.outlier="default_outlier",e.trend="default_trend"}(P||(P={}));var U=function(){function e(){Object(m.a)(this,e),this.workers=new Map}return Object(g.a)(e,[{key:"register",value:function(e,t){if(this.workers.has(e))throw new Error("There has been a worker named: ".concat(e," already."));this.workers.set(e,[!0,t])}},{key:"enable",value:function(e,t){if(!this.workers.has(e))throw new Error('Intention Worker "'.concat(e,'" does not exist.'));var n=this.workers.get(e);n[0]=t,this.workers.set(e,n)}},{key:"each",value:function(e){var t,n=Object(i.a)(this.workers);try{for(n.s();!(t=n.n()).done;){var r=Object(v.a)(t.value,2),a=r[0],o=r[1];o[0]&&e(o[1],a)}}catch(u){n.e(u)}finally{n.f()}}}],[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{withDefaultIWorkers:!0},n=t.withDefaultIWorkers,r=void 0===n||n;return e.colletion||(e.colletion=new e,r&&(e.colletion.register(P.outlier,$),e.colletion.register(P.trend,B))),Object.values(P).forEach((function(t){e.colletion.enable(t,r)})),e.colletion}}]),e}(),V=n(18),W=n(9),Y=Math.round(Math.pow(75,2)/500);function H(e){var t=e.length,n=Object(a.a)(e);return n.sort((function(e,t){return e.features.entropy-t.features.entropy})),t<25?n:t<500?n.slice(0,Math.round(Math.sqrt(Y*(t-25))+25)):n.slice(0,100)}function X(e,t){var n=e.length,r=Object(a.a)(e);return r.sort((function(e,t){return e.features.entropy-t.features.entropy})),r.slice(0,Math.round(n*t))}function J(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];for(var r=Math.log2(t),a=0,i=0;i<e.length;i++)a+=e[i]*(Math.log2(e[i])-r)/t;return-a}function K(e,t,n,r){var a,o=n,u=(r-o)/8,s=new Array(9).fill(0),c=Object(i.a)(e);try{for(c.s();!(a=c.n()).done;){var f=a.value;s[Math.floor((f[t]-o)/u)]++}}catch(l){c.e(l)}finally{c.f()}return s[7]+=s[8],J(s.slice(0,8).filter((function(e){return e>0})))}function Q(e,t,n){var r,o=new Map,u=Object(i.a)(e);try{var s=function(){var e,n=r.value,a=t.map((function(e){return n[e]})).join("_");o.has(a)||o.set(a,[]),null===(e=o.get(a))||void 0===e||e.push(n)};for(u.s();!(r=u.n()).done;)s()}catch(p){u.e(p)}finally{u.f()}var c,f=0,l=Object(i.a)(n);try{var h=function(){var t=c.value,n=Math.min.apply(Math,Object(a.a)(e.map((function(e){return e[t]})))),r=Math.max.apply(Math,Object(a.a)(e.map((function(e){return e[t]})))),i=K(e,t,n,r),u=0,s=[],l=Object(a.a)(o.entries());l.sort((function(e,t){return t[1].length-e[1].length}));for(var h=0;h<l.length&&!(h>=7);h++){var p=l[h][1],d=p.length/e.length,v=K(p,t,n,r);u+=d*v,s.push([d,v])}for(var m=[],g=7;g<l.length;g++)m.push.apply(m,Object(a.a)(l[g][1]));m.length>0&&(u+=m.length/e.length*K(m,t,n,r));f+=m.length>0?(i-u)/Math.log2(8):(i-u)/Math.log2(o.size)};for(l.s();!(c=l.n()).done;)h()}catch(p){l.e(p)}finally{l.f()}return f/n.length}var Z=function(){function e(){Object(m.a)(this,e),this.env="browser",this._dimensions=[],this._measures=[],this.cubeStorageName="_cuboids",this.minDistEvalSampleSize=80,this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.cube=null,this.aggregators=["max","min","sum","mean","count","dist"],this.workerCollection=U.init()}return Object(g.a)(e,[{key:"serialize",value:function(){var e=this.fields,t=this.dataGraph,n=this.subSpaces,r=this.insightSpaces,a=this.dataSource,i=this.rawDataSource,o=this.cube;return{storage:{version:l.f,fields:e,dataGraph:{MClusters:t.MClusters,DClusters:t.DClusters,DG:t.DG,MG:t.MG},subSpaces:n,insightSpaces:r},dataStorage:{version:l.f,dataSource:{raw:i,view:a},cuboids:o.exportCuboids()}}}},{key:"deSerialize",value:function(e,t){var n=this;this.fields=e.fields,"undefined"!==typeof this.fieldDictonary&&null!==this.fieldDictonary?this.fieldDictonary.clear():this.fieldDictonary=new Map,e.fields.forEach((function(e){n.fieldDictonary.set(e.key,e)}));var r=this.dimensions,a=this.measures;if(this.dataGraph=new z.a(r,a),this.dataGraph.DG=e.dataGraph.DG,this.dataGraph.MG=e.dataGraph.MG,this.dataGraph.DClusters=e.dataGraph.DClusters,this.dataGraph.MClusters=e.dataGraph.MClusters,this.subSpaces=e.subSpaces,this.insightSpaces=e.insightSpaces,t){var i=this.aggregators;this.rawDataSource=t.dataSource.raw,this.dataSource=t.dataSource.view,this.cube=new G.a({dataSource:t.dataSource.view,dimensions:r,measures:a,ops:i}),Object.keys(t.cuboids).forEach((function(e){n.cube.loadCuboid(e,t.cuboids[e])}))}}},{key:"setFields",value:function(e){this._mutFields=e,this.dataSource=Object(W.a)(this.rawDataSource);var t=q(e.map((function(e){return e.key})),this.dataSource),n=t.fields;t.dictonary;this.rawFields=n.map((function(t,n){var r=Object(R.a)({},t);return"?"!==e[n].dataType&&(r.dataType=e[n].dataType),"?"!==e[n].semanticType&&(r.semanticType=e[n].semanticType),"?"!==e[n].analyticType&&(r.analyticType=e[n].analyticType),r}))}},{key:"setData",value:function(e){return this.rawDataSource=e,this.dataSource=Object(W.a)(e),this}},{key:"dimensions",get:function(){return this.fields.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key}))}},{key:"measures",get:function(){return this.fields.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key}))}},{key:"buildfieldsSummary",value:function(){var e=q(this.fields.map((function(e){return e.key})),this.dataSource),t=e.fields,n=e.dictonary;return this.fields=t,this.fieldDictonary=n,this}},{key:"univarSelection",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"auto",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.rawFields,r=this.rawDataSource,a=[],i=[],o=0;o<n.length;o++){var u=n[o],s=u.key;if("dimension"===u.analyticType)if("quantitative"===u.semanticType&&u.features.unique>50);else if("nominal"===u.semanticType&&u.features.unique&&u.features.unique>l.d&&r.length/u.features.unique>=this.minDistEvalSampleSize)continue;i.push(o),a.push(s)}var c=q(a,this.dataSource),f=c.fields,h=c.dictonary;if(f.forEach((function(e,t){var r=i[t];e.semanticType=n[r].semanticType,e.dataType=n[r].dataType,e.analyticType=n[r].analyticType})),this.fields="auto"===e?H(f):X(f,t),-1===this.fields.findIndex((function(e){return"dimension"===e.analyticType}))){var p=f.filter((function(e){return"dimension"===e.analyticType}));p.length>0&&(p.sort((function(e,t){return e.features.entropy-t.features.entropy})),this.fields.push(p[0]))}this.fieldDictonary=h}},{key:"buildGraph",value:function(){return this.dataGraph=new z.a(this.dimensions,this.measures),this.dataGraph.computeDGraph(this.dataSource),this.dataGraph.computeMGraph(this.dataSource),this}},{key:"buildCube",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a,i,o,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.measures,r=this.dataSource,a=this.dataGraph,i=this.dimensions,o=this.aggregators,u=t||new G.a({dimensions:i,measures:n,dataSource:r,ops:o}),"undefined"===typeof t&&(u.storage.env=this.env),e.next=5,u.buildBaseCuboid();case 5:return e.next=7,Promise.all(a.DClusters.map((function(e){return u.buildCuboidOnCluster(e)})));case 7:return this.cube=u,e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(this.dataSource),this.dataGraph.clusterMGraph(this.dataSource),this}},{key:"buildSubspaces",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,o=this.dataGraph.MClusters,u=e.getCombinationFromClusterGroups(o,r),c=[],f=Object(i.a)(a);try{for(f.s();!(t=f.n()).done;){var l,h=t.value,p=Object(s.f)(h,n.MIN,n.MAX),d=Object(i.a)(p);try{for(d.s();!(l=d.n()).done;){var v,m=l.value,g=Object(i.a)(u);try{for(g.s();!(v=g.n()).done;){var b=v.value;c.push({dimensions:m,measures:b})}}catch(y){g.e(y)}finally{g.f()}}}catch(y){d.e(y)}finally{d.f()}}}catch(y){f.e(y)}finally{f.f()}return this.subSpaces=c,this}},{key:"exploreViewsPOC",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,r,a,o,u,s,c,f,l=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:this.subSpaces,n=this,r=[],a=Object(i.a)(t);try{for(a.s();!(o=a.n()).done;)u=o.value,s=u.dimensions,c=u.measures,f=Q(n.dataSource,s,c),r.push({impurity:f,significance:1,dimensions:s,measures:c})}catch(h){a.e(h)}finally{a.f()}return r.sort((function(e,t){return(t.impurity||0)-(e.impurity||0)})),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"exploreViews",value:function(){var e=Object(w.a)(y.a.mark((function e(){var t,n,r,a,o,u,s,c,f,h,p=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:this.subSpaces,r=(n=this).measures,a=n.fieldDictonary,n.dataSource,o=[],e.next=6,n.cube.getCuboid([]);case 6:return u=e.sent,e.next=9,u.getAggregatedRows(r,r.map((function(){return"dist"})));case 9:s=e.sent,c=Object(i.a)(t),e.prev=11,h=y.a.mark((function e(){var t,r,u,c,h,p,d,v,m,g;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.value,r=t.dimensions,u=t.measures,e.next=4,n.cube.getCuboid(r);case 4:return c=e.sent,e.next=7,c.loadStateInCache();case 7:return e.next=9,c.getAggregatedRows(u,u.map((function(){return"dist"})));case 9:return h=e.sent,e.next=12,c.getAggregatedRows(u,u.map((function(){return"count"})));case 12:p=e.sent,c.clearState(),d=0,v=Object(i.a)(u);try{for(g=function(){var e=m.value,t=0;s.length>0&&(t=J(s[0][e].filter((function(e){return e>0}))));var n=0,r=a.get(e).features.size,i=h.map((function(t,n){return{freq:p[n][e],dist:t[e]}}));i.sort((function(e,t){return t.freq-e.freq}));for(var o=0;o<i.length&&!(o>=l.c-1);o++){var u=J(i[o].dist.filter((function(e){return e>0})));n+=i[o].freq/r*u}for(var c=new Array(l.c).fill(0),f=0,v=l.c-1;v<i.length;v++){for(var g=0;g<c.length;g++)c[g]+=i[v].dist[g];f+=i[v].freq}f>0&&(n+=f/r*J(c.filter((function(e){return e>0})))),d+=(t-n)/Math.log2(Math.min(l.c,i.length))},v.s();!(m=v.n()).done;)g()}catch(b){v.e(b)}finally{v.f()}d/=u.length,o.push({dimensions:r,measures:u,significance:1,score:d,impurity:d});case 19:case"end":return e.stop()}}),e)})),c.s();case 14:if((f=c.n()).done){e.next=18;break}return e.delegateYield(h(),"t0",16);case 16:e.next=14;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(11),c.e(e.t1);case 23:return e.prev=23,c.f(),e.finish(23);case 26:return o.sort((function(e,t){return Number(t.impurity)-Number(e.impurity)})),e.abrupt("return",o);case 28:case"end":return e.stop()}}),e,this,[[11,20,23,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"searchPointInterests",value:function(e){}},{key:"insightExtraction",value:function(){var t=Object(w.a)(y.a.mark((function t(){var n,r,a,o,u,s,c=this,f=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=f.length>0&&void 0!==f[0]?f[0]:this.subSpaces,r=this,a=[],o=Object(i.a)(n),t.prev=4,s=y.a.mark((function t(){var n,i,o,s,f,l,h,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.value,i=n.dimensions,o=n.measures,s=r.cube,t.next=5,s.getCuboid(i);case 5:return f=t.sent,t.next=8,f.getAggregatedRows(o,o.map((function(){return"sum"})));case 8:return l=t.sent,h=e.getSpaceImpurity(l,i,o),p=[],c.workerCollection.each((function(e,t){var n=function(){var e=Object(w.a)(y.a.mark((function e(t,n){var u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(l,i,o,r.fieldDictonary,r);case 3:null!==(u=e.sent)&&(u.type=n,u.impurity=h,a.push(u)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("worker failed",{dimensions:i,measures:o,aggData:l},e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}();p.push(n(e,"".concat(t)))})),t.next=14,Promise.all(p);case 14:case"end":return t.stop()}}),t)})),o.s();case 7:if((u=o.n()).done){t.next=11;break}return t.delegateYield(s(),"t0",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),o.e(t.t1);case 16:return t.prev=16,o.f(),t.finish(16);case 19:return r.insightSpaces=a,this.setInsightScores(),this.insightSpaces.sort((function(e,t){return(e.score||0)-(t.score||0)})),t.abrupt("return",this.insightSpaces);case 23:case"end":return t.stop()}}),t,this,[[4,13,16,19]])})));return function(){return t.apply(this,arguments)}}()},{key:"setInsightScores",value:function(){return this.insightSpaces.forEach((function(e){e.score=Number(e.impurity)/e.significance})),this}},{key:"getFieldInfoInVis",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a,o,u,c,f,l,h,p;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=this.cube,a=this.fieldDictonary,o=t.dimensions,u=t.measures,c=Object(i.a)(o),e.prev=5,l=y.a.mark((function e(){var t,i,o,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.value,e.next=3,r.getCuboid([t]);case 3:return i=e.sent,e.next=6,i.getAggregatedRows(u,u.map((function(){return"sum"})));case 6:o=e.sent,c=0,u.forEach((function(e){var t=o.map((function(t){return t[e]})),n=Object(s.k)(Object(s.i)(t)),r=Object(s.d)(n);c+=r})),n.push(Object(R.a)(Object(R.a)({},a.get(t)),{},{impurity:c}));case 10:case"end":return e.stop()}}),e)})),c.s();case 8:if((f=c.n()).done){e.next=12;break}return e.delegateYield(l(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),c.e(e.t1);case 17:return e.prev=17,c.f(),e.finish(17);case 20:return e.next=22,r.getCuboid(o);case 22:return h=e.sent,e.next=25,h.getAggregatedRows(u,u.map((function(){return"sum"})));case 25:return p=e.sent,u.forEach((function(e){var t=p.map((function(t){return t[e]})),r=Object(s.k)(Object(s.i)(t)),i=Object(s.d)(r);n.push(Object(R.a)(Object(R.a)({},a.get(e)),{},{impurity:i}))})),e.abrupt("return",n);case 28:case"end":return e.stop()}}),e,this,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getFieldInfoInVisBeta",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a,i,o,u,s,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],r=this.cube,a=this.fieldDictonary,i=t.dimensions,o=t.measures,i.forEach((function(e){var t=a.get(e);n.push(Object(R.a)(Object(R.a)({},t),{},{impurity:t.features.entropy}))})),e.next=7,r.getCuboid(i);case 7:return u=e.sent,e.next=10,u.getAggregatedRows(o,o.map((function(){return"dist"})));case 10:return s=e.sent,e.next=13,u.getAggregatedRows(o,o.map((function(){return"count"})));case 13:return c=e.sent,o.forEach((function(e){var t=0,r=a.get(e).features.size,i=s.map((function(t,n){return{freq:c[n][e],dist:t[e]}}));i.sort((function(e,t){return t.freq-e.freq}));for(var o=0;o<i.length&&!(o>=l.c-1);o++){var u=J(i[o].dist.filter((function(e){return e>0})));t+=i[o].freq/r*u}for(var f=new Array(l.c).fill(0),h=0,p=l.c-1;p<i.length;p++){for(var d=0;d<f.length;d++)f[d]+=i[p].dist[d];h+=i[p].freq}h>0&&(t+=h/r*J(f.filter((function(e){return e>0}))));var v=a.get(e);n.push(Object(R.a)(Object(R.a)({},v),{},{impurity:t}))})),e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"specification",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dimensions,r=t.measures,e.next=3,this.getFieldInfoInVisBeta(t);case 3:return a=e.sent,e.next=6,this.cube.getCuboid(n);case 6:return i=e.sent,e.next=9,i.getAggregatedRows(r,r.map((function(){return"sum"})));case 9:return o=e.sent,e.abrupt("return",Object(V.c)(a,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getCombinationFromClusterGroups",value:function(e,t){var n,r=[],o=Object(i.a)(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=Object(s.f)(u,t.MIN,t.MAX);r.push.apply(r,Object(a.a)(c))}}catch(f){o.e(f)}finally{o.f()}return r}},{key:"getSpaceImpurity",value:function(e,t,n){var r,a=0,o=Object(i.a)(n);try{var u=function(){var t=r.value,n=e.map((function(e){return e[t]})),i=Object(s.k)(Object(s.i)(n)),o=Object(s.d)(i);a+=o};for(o.s();!(r=o.n()).done;)u()}catch(c){o.e(c)}finally{o.f()}return a/=n.length}}]),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"ClickHouseEngine",(function(){return T}));var r=n(1),a=n(5),i=n(0),o=n.n(i),u=n(2),s=n(7),c=n(8),f={Int8:"integer",Int16:"integer",Int32:"integer",Int64:"integer",UInt8:"integer",UInt16:"integer",UInt32:"number",UInt64:"number",Float32:"number",Float64:"number",BOOLEAN:"boolean",String:"string"},l={number:"quantitative",integer:"quantitative",boolean:"nominal",date:"temporal",string:"nominal"},h={number:"measure",integer:"measure",boolean:"dimension",date:"dimension",string:"dimension"};function p(e){return l[e]}function d(e){return h[e]}function v(e,t){switch(t){case"Int8":case"Int16":case"Int32":case"Int64":case"UInt8":case"UInt16":case"UInt32":case"UInt64":return parseInt(e);case"Float32":case"Float64":return Number(e);default:return e}}function m(e,t){var n,a=[],i=e.substring(0,e.length-1).split("\n"),o=Object(r.a)(i);try{for(o.s();!(n=o.n()).done;){for(var u=n.value,s={},c=u.split(/[\t]/),f=0;f<t.length;f++)s[t[f].fid]=v(c[f],t[f].dataType);a.push(s)}}catch(l){o.e(l)}finally{o.f()}return a}var g=n(6),b=n(12),y=n(11),w=function(){function e(t,n,r){Object(s.a)(this,e),this.DIMENSION_CORRELATION_THRESHOLD=b.a,this.MEASURE_CORRELATION_THRESHOLD=b.b.strong,this.SOFT_MAX_DIM_IN_VIEW=4,this.SOFT_MAX_MEA_IN_VIEW=3,this.dimensions=[],this.measures=[],this.viewName=t,this.dimensions=n,this.measures=r}return Object(c.a)(e,[{key:"computeGraph",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,i,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.viewName,a=t.map((function(){return t.map((function(){return 0}))})),i=0;case 3:if(!(i<t.length)){e.next=15;break}u=0;case 5:if(!(u<t.length)){e.next=12;break}return e.next=8,n(r,t[i],t[u]);case 8:a[i][u]=a[u][i]=e.sent;case 9:u++,e.next=5;break;case 12:i++,e.next=3;break;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"computeDGraph",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.computeGraph(this.dimensions,t);case 2:return this.DG=e.sent,e.abrupt("return",this.DG);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeMGraph",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.computeGraph(this.measures,t);case 2:return this.MG=e.sent,e.abrupt("return",this.MG);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clusterDGraph",value:function(e){var t=this.DG,n=this.dimensions,r=this.SOFT_MAX_DIM_IN_VIEW,a=this.DIMENSION_CORRELATION_THRESHOLD,i="number"===typeof e?e:a;return this.DClusters=y.a.kruskal({matrix:t,measures:n,groupMaxSize:Math.round(n.length/r),threshold:i}),this.DClusters}},{key:"clusterMGraph",value:function(e){var t=this.MG,n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD,a=this.SOFT_MAX_MEA_IN_VIEW,i="number"===typeof e?e:r;return this.MClusters=y.a.kruskal({matrix:t,measures:n,groupMaxSize:Math.round(n.length/a),threshold:i}),this.MClusters}}]),e}(),O=n(4),S=n(3);function k(e,t){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=Object(S.f)(o,t.MIN,t.MAX);a.push.apply(a,Object(O.a)(u))}}catch(s){i.e(s)}finally{i.f()}return a}var x=function(){function e(t){var n=this;Object(s.a)(this,e),this.chiSquared=function(){var e=Object(u.a)(o.a.mark((function e(t,r,a){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.utils.query("with col1Totals as (select `".concat(r,"` as col1, count(*) as values_count from ").concat(t," group by `").concat(r,"`),\n            col2Totals as (select `").concat(a,"` as col2, count(*) as values_count from ").concat(t," group by `").concat(a,"`),\n            total as (select count(*) as values_count from ").concat(t,"),\n            colPairs as (select `").concat(r,"` as col1, `").concat(a,"` as col2, count(*) as values_count from ").concat(t," group by `").concat(r,"`, `").concat(a,"`)\n            select sum(value) from (select pow(col1Totals.values_count * (col2Totals.values_count / total.values_count) - colPairs.values_count, 2) / (col1Totals.values_count * (col2Totals.values_count / total.values_count)) as value\n            from colPairs, total \n            inner join col1Totals on colPairs.col1 = col1Totals.col1\n            inner join col2Totals on colPairs.col2 = col2Totals.col2);\n        "));case 2:return i=e.sent,e.abrupt("return",Number(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.cramersV=function(){var e=Object(u.a)(o.a.mark((function e(t,r,a){var i,u,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.chiSquared(t,r,a);case 2:return i=e.sent,e.next=5,n.utils.query("select count(*), uniq(`".concat(r,"`), uniq(`").concat(a,"`) from ").concat(t));case 5:return u=e.sent,s=u.slice(0,-1).split("\t").map((function(e){return parseInt(e)})),c=Math.sqrt(i/(s[0]*Math.min(s[1]-1,s[2]-1))),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.pearsonCC=function(){var e=Object(u.a)(o.a.mark((function e(t,r,a){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.utils.query("select corr(`".concat(r,"`, `").concat(a,"`) from ").concat(t));case 2:return i=e.sent,e.abrupt("return",Number(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.getSpaceImpurity=function(){var e=Object(u.a)(o.a.mark((function e(t,r,a){var i,u,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.utils.query("with agg_view as (select count(*) as values_count, ".concat(a.map((function(e){return"sum(`".concat(e,"`) as `sum_").concat(e,"`")})).join(",")," from ").concat(t," group by ").concat(r.map((function(e){return"`".concat(e,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(a.map((function(e){return"sum(abs(`sum_".concat(e,"`)) as `abssum_sum_").concat(e,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(a.map((function(e){return"abs(`sum_".concat(e,"`) / `abssum_sum_").concat(e,"` as `pb_").concat(e,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(a.map((function(e){return"if(`pb_".concat(e,"` = 0, 0, -`pb_").concat(e,"` * log2(`pb_").concat(e,"`)) as `safe_").concat(e,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(a.map((function(e){return"sum(`safe_".concat(e,"`)")})).join(",")," from safe_value\n        "));case 2:for(i=e.sent,u=i.slice(0,-1).split("\t").map((function(e){return Number(e)})),s=0,c=1;c<u.length;c++)s+=u[c];return e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),this.utils=t}return Object(c.a)(e,[{key:"getCombinationFromClusterGroups",value:function(e,t){var n,a=[],i=Object(r.a)(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,u=Object(S.f)(o,t.MIN,t.MAX);a.push.apply(a,Object(O.a)(u))}}catch(s){i.e(s)}finally{i.f()}return a}}]),e}(),j=n(18);function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=e.sort((function(e,t){return e.impurity-t.impurity})),r=Object(j.a)(n),a=new Set(e.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key}))),i=new Set(e.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key})));if(r.position&&2===r.position.length)if(a.has(r.position[0])&&i.has(r.position[1])||a.has(r.position[1])&&i.has(r.position[0])){var o=a.has(r.position[0])?0:1,u=r.position[o],s=r.position[(o+1)%2];r.position=[u,s];var c=e.find((function(e){return e.key===u})),f=c?c.features.unique:0;r.geomType=["interval","line","area"].filter((function(e){return f>=j.b[e][0]&&f<=j.b[e][1]})),"nominal"===c.semanticType&&(r.geomType=["interval"])}else r.geomType=["point","density"].filter((function(e){return t>=j.b[e][0]&&t<=j.b[e][1]}));return{schema:r}}var _=n(41),E=n.n(_);var D=function(){function e(t){Object(s.a)(this,e),this.config=t||{protocol:"http",host:"localhost",port:8123,path:""}}return Object(c.a)(e,[{key:"getCHConfig",value:function(){return this.config}},{key:"setCHConfig",value:function(e){var t=this;Object.keys(e).forEach((function(n){t.config[n]=e[n]}))}},{key:"query",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.config,e.next=4,E()("".concat(n.protocol,"://").concat(n.host,":").concat(n.port).concat(n.path,"?query=").concat(t));case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("[SQL Error] ".concat(t,".\n").concat(e.t0.toString()));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryw",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.config,e.next=4,E()({url:"".concat(n.protocol,"://").concat(n.host,":").concat(n.port).concat(n.path),method:"post",params:{query:t}});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:throw e.prev=8,e.t0=e.catch(0),new Error("[SQL Error] ".concat(t,".\n").concat(e.t0.toString()));case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),I="bin_";function N(e,t){for(var n=[],r=(e[1]-e[0])/t,a=0;a<t;a++)n.push([e[0]+a*r,e[0]+(a+1)*r]);return n}var T=function(){function e(){Object(s.a)(this,e),this.rawFields=[],this.fields=[],this.dataViewName=null,this.dataGraph=null,this.dataViewMetas=[],this.insightSpaces=[],this.dbMetas=[],this.features={size:0},this.DIMENSION_NUM_IN_VIEW={MAX:3,MIN:1},this.MEASURE_NUM_IN_VIEW={MAX:3,MIN:1},this.utils=new D,this.statistics=new x(this.utils)}return Object(c.a)(e,[{key:"dimensions",get:function(){return this.fields.filter((function(e){return"dimension"===e.analyticType})).map((function(e){return e.key}))}},{key:"measures",get:function(){return this.fields.filter((function(e){return"measure"===e.analyticType})).map((function(e){return e.key}))}},{key:"setRawFields",value:function(e){this.rawFields=e}},{key:"query",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.query(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryw",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.utils.queryw(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadData",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query("SELECT * from ".concat(t,";"));case 2:return n=e.sent,e.next=5,this.getFieldMetas(t);case 5:return r=e.sent,this.dbMetas=r,a=m(n,r),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFieldMetas",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query("DESC ".concat(t));case 2:return n=e.sent,e.abrupt("return",n.substr(0,n.length-1).split("\n").map((function(e){var t=e.split("\t");return{fid:t[0],dataType:t[1]}})));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"buildFieldsSummary",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a,i,u,s,c,l,h,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getFieldMetas(t);case 2:return n=e.sent,this.dbMetas=n,e.next=6,this.query("SELECT ".concat(n.map((function(e){return"uniq(`".concat(e.fid,"`)")})).join(",")," FROM ").concat(t,";"));case 6:return r=e.sent,a=r.split("\t").map((function(e){return parseInt(e)})),e.t0=parseInt,e.next=11,this.query("SELECT COUNT(*) FROM ".concat(t,";"));case 11:e.t1=e.sent,i=(0,e.t0)(e.t1),this.features.size=i,u=[],s=0;case 16:if(!(s<n.length)){e.next=32;break}if(c=Math.log2(a[s]),l=1/0,a[s]!==i){e.next=23;break}l=c,e.next=27;break;case 23:return e.next=25,this.query("with frequency_list as (SELECT COUNT(*) as frequency FROM ".concat(t," GROUP BY `").concat(n[s].fid,"`),\n                total as (select sum(frequency) as total from frequency_list),\n                pb_list as (select (frequency_list.frequency / total.total) as pb from frequency_list, total) \n                SELECT SUM(-pb * log2(pb)) FROM pb_list"));case 25:h=e.sent,l=Number(h);case 27:o=n[s].dataType,v=f[o]||"string",u.push({key:n[s].fid,name:n[s].fid,analyticType:d(v),semanticType:p(v),dataType:v,features:{entropy:l,maxEntropy:c,unique:a[s],size:i}});case 29:s++,e.next=16;break;case 32:return e.abrupt("return",u);case 33:case"end":return e.stop()}var o}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uvsView",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,i,u,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="test_view",0!==this.rawFields.length){e.next=5;break}return e.next=4,this.buildFieldsSummary(t);case 4:this.rawFields=e.sent;case 5:return e.next=7,this.featureTransform(t,n);case 7:r=e.sent,i=[],u=function(e){var t=c.rawFields[e];if("dimension"===t.analyticType&&"quantitative"===t.semanticType&&t.features.unique>50){var n=r.find((function(e){return e.key==="".concat(I)}));return n&&i.push(Object(a.a)(Object(a.a)({},n),{},{features:Object(a.a)({},n.features)})),"continue"}if("quantitative"===t.semanticType){var o=r.find((function(e){return e.key==="".concat(I).concat(t.key)})),u=Object(a.a)(Object(a.a)({},t),{},{features:Object(a.a)({},t.features)});o&&(u.features.entropy=o.features.entropy,u.features.maxEntropy=o.features.maxEntropy),i.push(u)}else i.push(Object(a.a)(Object(a.a)({},t),{},{features:Object(a.a)({},t.features)}))},s=0;case 11:if(!(s<this.rawFields.length)){e.next=18;break}if("continue"!==u(s)){e.next=15;break}return e.abrupt("continue",15);case 15:s++,e.next=11;break;case 18:return this.fields=i,e.abrupt("return",i);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getContinuousRanges",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a,i,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.rawFields.filter((function(e){return"quantitative"===e.semanticType})),r=n.map((function(e){return"min(`".concat(e.key,"`),max(`").concat(e.key,"`)")})),e.next=4,this.query("SELECT ".concat(r.join(",")," FROM ").concat(t,";"));case 4:for(a=e.sent,i=[],u=a.substring(0,a.length-1).split("\t").map((function(e){return Number(e)})),s=0;s<n.length;s++)i.push({fid:n[s].key,range:[u[2*s],u[2*s+1]]});return e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"binContinuousFields",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContinuousRanges(t);case 2:return r=e.sent,a=r.map((function(e){var t=N(e.range,n),r="case ";r+="when `".concat(e.fid,"` < ").concat(t[0][1]," then '(-Infinity, ").concat(t[0][1],")'\n");for(var a=1;a<t.length-1;a++)r+="when `".concat(e.fid,"` >= ").concat(t[a][0]," and `").concat(e.fid,"` < ").concat(t[a][1]," then '[").concat(t[a][0],", ").concat(t[a][1],")'\n");return r+="when `".concat(e.fid,"` >= ").concat(t[t.length-1][0]," then '[").concat(t[t.length-1][0],", Infinity)' end\n"),r+="as `".concat(I).concat(e.fid,"`")})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"featureTransform",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.binContinuousFields(t,g.c);case 2:return r=e.sent,e.next=5,this.queryw("DROP VIEW IF EXISTS ".concat(n,";"));case 5:return e.next=7,this.queryw("CREATE VIEW IF NOT EXISTS ".concat(n," AS SELECT *, ").concat(r.join(",")," FROM ").concat(t,";"));case 7:return e.next=9,this.buildFieldsSummary(n);case 9:return a=e.sent,this.dataViewName=n,e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildDataGraph",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.dimensions,n=this.measures,r=this.dataViewName,a=this.statistics,this.dataGraph=new w(r,t,n),e.next=4,this.dataGraph.computeDGraph(a.cramersV);case 4:return e.next=6,this.dataGraph.computeMGraph(a.pearsonCC);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clusterFields",value:function(){return this.dataGraph.clusterDGraph(),this.dataGraph.clusterMGraph(),this}},{key:"buildSubspaces",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.DIMENSION_NUM_IN_VIEW,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.MEASURE_NUM_IN_VIEW,a=this.dataGraph.DClusters,i=this.dataGraph.MClusters,o=k(i,n),u=[],s=Object(r.a)(a);try{for(s.s();!(e=s.n()).done;){var c,f=e.value,l=Object(S.f)(f,t.MIN,t.MAX),h=Object(r.a)(l);try{for(h.s();!(c=h.n()).done;){var p,d=c.value,v=Object(r.a)(o);try{for(v.s();!(p=v.n()).done;){var m=p.value;u.push({dimensions:d,measures:m})}}catch(g){v.e(g)}finally{v.f()}}}catch(g){h.e(g)}finally{h.f()}}}catch(g){s.e(g)}finally{s.f()}return this.dataViewMetas=u,this}},{key:"getSpaceImpurity",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,i,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.query("with agg_view as (select count(*) as values_count, ".concat(r.map((function(e){return"sum(`".concat(e,"`) as `sum_").concat(e,"`")})).join(",")," from ").concat(t," group by ").concat(n.map((function(e){return"`".concat(e,"`")})).join(","),"),\n            abs_sum as (select sum(values_count) as abssum_values_count, ").concat(r.map((function(e){return"sum(abs(`sum_".concat(e,"`)) as `abssum_sum_").concat(e,"`")})).join(",")," from agg_view),\n            pb_view as (select agg_view.values_count / abs_sum.abssum_values_count as pb_count,\n                ").concat(r.map((function(e){return"abs(`sum_".concat(e,"`) / `abssum_sum_").concat(e,"` as `pb_").concat(e,"`")})).join(","),"\n                from agg_view, abs_sum),\n            safe_value as (select if(pb_count = 0, 0, -pb_count * log2(pb_count)) as safe_count, ").concat(r.map((function(e){return"if(`pb_".concat(e,"` = 0, 0, -`pb_").concat(e,"` * log2(`pb_").concat(e,"`)) as `safe_").concat(e,"`")})).join(",")," from pb_view)\n            select sum(safe_count), ").concat(r.map((function(e){return"sum(`safe_".concat(e,"`)")})).join(",")," from safe_value\n        "));case 2:for(a=e.sent,i=a.slice(0,-1).split("\t").map((function(e){return Number(e)})),u=0,s=1;s<i.length;s++)u+=i[s];return e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"fastInsightRecommand",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,i,u,s,c,f,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:this.dataViewMetas,n=[],a=Object(r.a)(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=14;break}return u=i.value,s=u.dimensions,c=u.measures,e.next=10,this.getSpaceImpurity(this.dataViewName,s,c);case 10:f=e.sent,n.push({dimensions:s,measures:c,impurity:f,score:f,significance:1});case 12:e.next=5;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),a.e(e.t0);case 19:return e.prev=19,a.f(),e.finish(19);case 22:return n.sort((function(e,t){return e.score-t.score})),this.insightSpaces=n,e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this,[[3,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getFieldInfoInVis",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,i,u,s,c,f,l,h,p,d=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],i=t.dimensions,u=t.measures,s=Object(r.a)(i),e.prev=3,f=o.a.mark((function e(){var t,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.value,e.next=3,d.statistics.getSpaceImpurity(d.dataViewName,[t],u);case 3:r=e.sent,(i=d.fields.find((function(e){return e.key===t})))&&n.push(Object(a.a)(Object(a.a)({},i),{},{impurity:r}));case 6:case"end":return e.stop()}}),e)})),s.s();case 6:if((c=s.n()).done){e.next=10;break}return e.delegateYield(f(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),s.e(e.t1);case 15:return e.prev=15,s.f(),e.finish(15);case 18:l=Object(r.a)(u),e.prev=19,p=o.a.mark((function e(){var t,r,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.value,e.next=3,d.statistics.getSpaceImpurity(d.dataViewName,i,[t]);case 3:r=e.sent,(u=d.fields.find((function(e){return e.key===t})))&&n.push(Object(a.a)(Object(a.a)({},u),{},{impurity:r}));case 6:case"end":return e.stop()}}),e)})),l.s();case 22:if((h=l.n()).done){e.next=26;break}return e.delegateYield(p(),"t2",24);case 24:e.next=22;break;case 26:e.next=31;break;case 28:e.prev=28,e.t3=e.catch(19),l.e(e.t3);case 31:return e.prev=31,l.f(),e.finish(31);case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,null,[[3,12,15,18],[19,28,31,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryAggDataView",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,r,a){var i,u,s,c,f=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.concat(n).map((function(e){return f.dbMetas.find((function(t){return t.fid===e}))})).filter((function(e){return Boolean(e)})),u="select ".concat(t.map((function(e){return"`".concat(e,"`")})).join(","),", ").concat(n.map((function(e,t){return"".concat(r[t],"(`").concat(e,"`) as `").concat(e,"`")})).join(",")," from ").concat(this.dataViewName," group by ").concat(t.map((function(e){return"`".concat(e,"`")})).join(",")),"number"===typeof a&&(u+=" limit ".concat(a)),e.next=5,this.query(u);case 5:return s=e.sent,c=m(s,i),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"queryDataView",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,i,u,s,c=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.concat(n).map((function(e){return c.dbMetas.find((function(t){return t.fid===e}))})).filter((function(e){return Boolean(e)})),i="select ".concat(t.concat(n).map((function(e){return"`".concat(e,"`")})).join(",")," from ").concat(this.dataViewName),"number"===typeof r&&(i+=" limit ".concat(r)),e.next=5,this.query(i);case 5:return u=e.sent,s=m(u,a),e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"specification",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,i,u,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dimensions,r=t.measures,e.next=3,this.getFieldInfoInVis(t);case 3:return i=e.sent,e.next=6,this.queryAggDataView(n,r,r.map((function(){return"sum"})));case 6:return u=e.sent,s=M(i),e.abrupt("return",Object(a.a)(Object(a.a)({},s),{},{detailSize:this.features.size,dataView:u}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"destroyView",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.queryw("drop view if exists ".concat(this.dataViewName));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()},function(e,t,n){"use strict";n(5),n(1),n(4),n(3),n(9)},function(e,t,n){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-:/.()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,r=/\d\d?/,a=/\d*[^\s\d-_:/()]+/,i={},o=function(e){return(e=+e)+(e>68?1900:2e3)},u=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e)return 0;if("Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],c=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},f=function(e,t){var n,r=i.meridiem;if(r){for(var a=1;a<=24;a+=1)if(e.indexOf(r(a,0,t))>-1){n=a>12;break}}else n=e===(t?"pm":"PM");return n},l={A:[a,function(e){this.afternoon=f(e,!1)}],a:[a,function(e){this.afternoon=f(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[r,u("seconds")],ss:[r,u("seconds")],m:[r,u("minutes")],mm:[r,u("minutes")],H:[r,u("hours")],h:[r,u("hours")],HH:[r,u("hours")],hh:[r,u("hours")],D:[r,u("day")],DD:[n,u("day")],Do:[a,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var r=1;r<=31;r+=1)t(r).replace(/\[|\]/g,"")===e&&(this.day=r)}],M:[r,u("month")],MM:[n,u("month")],MMM:[a,function(e){var t=c("months"),n=(c("monthsShort")||t.map((function(e){return e.substr(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[a,function(e){var t=c("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,u("year")],YY:[n,function(e){this.year=o(e)}],YYYY:[/\d{4}/,u("year")],Z:s,ZZ:s};function h(n){var r,a;r=n,a=i&&i.formats;for(var o=(n=r.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,r){var i=r&&r.toUpperCase();return n||a[r]||e[r]||a[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))).match(t),u=o.length,s=0;s<u;s+=1){var c=o[s],f=l[c],h=f&&f[0],p=f&&f[1];o[s]=p?{regex:h,parser:p}:c.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,r=0;n<u;n+=1){var a=o[n];if("string"==typeof a)r+=a.length;else{var i=a.regex,s=a.parser,c=e.substr(r),f=i.exec(c)[0];s.call(t,f),e=e.replace(f,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}return function(e,t,n){n.p.customParseFormat=!0,e&&e.parseTwoDigitYear&&(o=e.parseTwoDigitYear);var r=t.prototype,a=r.parse;r.parse=function(e){var t=e.date,r=e.utc,o=e.args;this.$u=r;var u=o[1];if("string"==typeof u){var s=!0===o[2],c=!0===o[3],f=s||c,l=o[2];c&&(l=o[2]),i=this.$locale(),!s&&l&&(i=n.Ls[l]),this.$d=function(e,t,n){try{if(["x","X"].indexOf(t)>-1)return new Date(("X"===t?1e3:1)*e);var r=h(t)(e),a=r.year,i=r.month,o=r.day,u=r.hours,s=r.minutes,c=r.seconds,f=r.milliseconds,l=r.zone,p=new Date,d=o||(a||i?1:p.getDate()),v=a||p.getFullYear(),m=0;a&&!i||(m=i>0?i-1:p.getMonth());var g=u||0,b=s||0,y=c||0,w=f||0;return l?new Date(Date.UTC(v,m,d,g,b,y,w+60*l.offset*1e3)):n?new Date(Date.UTC(v,m,d,g,b,y,w)):new Date(v,m,d,g,b,y,w)}catch(e){return new Date("")}}(t,u,r),this.init(),l&&!0!==l&&(this.$L=this.locale(l).$L),f&&t!=this.format(u)&&(this.$d=new Date("")),i={}}else if(u instanceof Array)for(var p=u.length,d=1;d<=p;d+=1){o[1]=u[d-1];var v=n.apply(this,o);if(v.isValid()){this.$d=v.$d,this.$L=v.$L,this.init();break}d===p&&(this.$d=new Date(""))}else a.call(this,e)}}}()},function(e,t,n){var r=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new E(r||[]);return i._invoke=function(e,t,n){var r=l;return function(a,i){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===a)throw i;return I()}for(n.method=a,n.arg=i;;){var o=n.delegate;if(o){var u=j(o,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=f(e,t,n);if("normal"===s.type){if(r=n.done?d:h,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=d,n.method="throw",n.arg=s.arg)}}}(e,n,o),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",d="completed",v={};function m(){}function g(){}function b(){}var y={};y[i]=function(){return this};var w=Object.getPrototypeOf,O=w&&w(w(D([])));O&&O!==n&&r.call(O,i)&&(y=O);var S=b.prototype=m.prototype=Object.create(y);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(a,i,o,u){var s=f(e[a],e,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,o,u)}),(function(e){n("throw",e,o,u)})):t.resolve(l).then((function(e){c.value=e,o(c)}),(function(e){return n("throw",e,o,u)}))}u(s.arg)}var a;this._invoke=function(e,r){function i(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(i,i):i()}}function j(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,j(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var a=f(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,v;var i=a.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function M(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(M,this),this.reset(!0)}function D(e){if(e){var n=e[i];if(n)return n.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var a=-1,o=function n(){for(;++a<e.length;)if(r.call(e,a))return n.value=e[a],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:I}}function I(){return{value:t,done:!0}}return g.prototype=S.constructor=b,b.constructor=g,g.displayName=s(b,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,s(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},e.awrap=function(e){return{__await:e}},k(x.prototype),x.prototype[o]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,a,i){void 0===i&&(i=Promise);var o=new x(c(t,n,r,a),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(S),s(S,u,"Generator"),S[i]=function(){return this},S.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=D,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(_),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function a(r,a){return u.type="throw",u.arg=e,n.next=r,a&&(n.method="next",n.arg=t),!!a}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;_(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:D(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=r}catch(a){Function("r","regeneratorRuntime = r")(r)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62);t.periodCube=r.default;var a=n(63);t.momentCube=a.default},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){this.children=new Map,this._rawData=[],this.aggFunc=e,this.cache=!1}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this._rawData).push.apply(e,a(t))},e.prototype.aggData=function(e){return void 0===e&&(e=[]),this.cache||(this._aggData=this.aggFunc(this.rawData,e),this.cache=!0),this._aggData},e.prototype.clearCache=function(){this.cache=!1},Object.defineProperty(e.prototype,"rawData",{get:function(){var e,t;if(!this.cache){if(0!==this.children.size){var n=this.children.values(),r=[];try{for(var a=i(n),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=u.rawData,f=c.length;for(s=0;s<f;s++)r.push(c[s])}}catch(l){e={error:l}}finally{try{o&&!o.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}this._rawData=r}this.cache=!0}return this._rawData},enumerable:!0,configurable:!0}),e.prototype.getNode=function(e){return function t(n,a){var o,u;if(a===e.length)return n;var s=n.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var l=r(f.value,2),h=l[0],p=l[1];if(h===e[a])return t(p,a+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}(),u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures}return e.prototype.get=function(e){var t=this,n=t.tree,a=(t.aggFunc,t.measures);return function t(n,o){var u,s;if(o===e.length)return n.aggData(a);var c=n.children.entries();try{for(var f=i(c),l=f.next();!l.done;l=f.next()){var h=r(l.value,2),p=h[0],d=h[1];if(p===e[o])return t(d,o+1)}}catch(v){u={error:v}}finally{try{l&&!l.done&&(s=f.return)&&s.call(f)}finally{if(u)throw u.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.buildTree=function(){var e,t=new o(this.aggFunc),n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(t.push(e),t.cache=!1,n<this.dimensions.length){var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o(this.aggFunc)),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e.prototype.aggNode=function(e){var t,n;void 0===e&&(e=this.tree);var r=e.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value;this.aggTree(u)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return e.aggData(this.measures),e},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},a=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(r(arguments[t]));return e},i=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.children=new Map,this.rawData=[]}return e.prototype.push=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.rawData).push.apply(e,a(t))},e.prototype.aggData=function(e,t){return void 0===t&&(t=[]),this._aggData=e(this.rawData,t),this._aggData},e.prototype.getNode=function(e){return function t(n,a){var o,u;if(a===e.length)return n;var s=n.children.entries();try{for(var c=i(s),f=c.next();!f.done;f=c.next()){var l=r(f.value,2),h=l[0],p=l[1];if(h===e[a])return t(p,a+1)}}catch(d){o={error:d}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(o)throw o.error}}return null}(this,0)},e}();t.Node=o;var u=function(){function e(e){this.aggFunc=e.aggFunc,this.factTable=e.factTable,this.dimensions=e.dimensions,this.measures=e.measures,this.buildTree(),this.aggTree()}return e.prototype.get=function(e){var t=this,n=t.tree,a=t.aggFunc,o=t.measures;return function t(n,u){var s,c;if(u===e.length)return n.aggData(a,o);var f=n.children.entries();try{for(var l=i(f),h=l.next();!h.done;h=l.next()){var p=r(h.value,2),d=p[0],v=p[1];if(d===e[u])return t(v,u+1)}}catch(m){s={error:m}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(s)throw s.error}}return!1}(n,0)},e.prototype.getNode=function(e){return this.tree.getNode(e)},e.prototype.setData=function(e){var t=e.aggFunc,n=void 0===t?this.aggFunc:t,r=e.factTable,a=void 0===r?this.factTable:r,i=e.dimensions,o=void 0===i?this.dimensions:i,u=e.measures,s=void 0===u?this.measures:u;o!==this.dimensions||a!==this.factTable?(this.dimensions=o,this.factTable=a,this.measures=s,this.aggFunc=n,this.buildTree(),this.aggTree()):s===this.measures&&n===this.aggFunc||(this.measures=s,this.aggFunc=n,this.aggTree())},e.prototype.buildTree=function(){var e,t=new o,n=this.factTable.length;for(e=0;e<n;e++)this.insertNode(this.factTable[e],t,0);return this.tree=t,t},e.prototype.insertNode=function(e,t,n){if(n===this.dimensions.length)t.push(e);else{var r=e[this.dimensions[n]];t.children.has(r)||t.children.set(r,new o),this.insertNode(e,t.children.get(r),n+1)}},e.prototype.aggTree=function(e){var t,n;if(void 0===e&&(e=this.tree),e.children.size>0){e.rawData=[];var r=e.children.values();try{for(var a=i(r),o=a.next();!o.done;o=a.next()){var u=o.value,s=void 0,c=this.aggTree(u).rawData,f=c.length;for(s=0;s<f;s++)e.rawData.push(c[s])}}catch(l){t={error:l}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}return e.aggData(this.aggFunc,this.measures),e},e}();t.default=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},a=this&&this.__values||function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},i=this&&this.__read||function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(u){a={error:u}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o};Object.defineProperty(t,"__esModule",{value:!0}),t.tree2Table=function(e){var t=e.dimensions,n=(e.measures,e.cube),o=(n.aggFunc,[]);return function e(n,u,s){var c,f,l;if(0!==n.children.size)try{for(var h=a(n.children.entries()),p=h.next();!p.done;p=h.next()){var d=i(p.value,2),v=d[0];e(d[1],r(r({},u),((l={})[t[s]]=v,l)),s+1)}}catch(g){c={error:g}}finally{try{p&&!p.done&&(f=h.return)&&f.call(h)}finally{if(c)throw c.error}}else{var m=n._aggData;o.push(r(r({},u),m))}}(n.tree,{},0),o}},function(e,t,n){"use strict";var r=n(14),a=n(46),i=n(66),o=n(52);var u=function e(t){var n=new i(t),u=a(i.prototype.request,n);return r.extend(u,i.prototype,n),r.extend(u,n),u.create=function(n){return e(o(t,n))},u}(n(34));u.Axios=i,u.Cancel=n(35),u.CancelToken=n(79),u.isCancel=n(51),u.VERSION=n(53).version,u.all=function(e){return Promise.all(e)},u.spread=n(80),u.isAxiosError=n(81),e.exports=u,e.exports.default=u},function(e,t,n){"use strict";var r=n(14),a=n(47),i=n(67),o=n(68),u=n(52),s=n(78),c=s.validators;function f(e){this.defaults=e,this.interceptors={request:new i,response:new i}}f.prototype.request=function(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=u(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&s.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"===typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(e){i.push(e.fulfilled,e.rejected)})),!r){var f=[o,void 0];for(Array.prototype.unshift.apply(f,n),f=f.concat(i),a=Promise.resolve(e);f.length;)a=a.then(f.shift(),f.shift());return a}for(var l=e;n.length;){var h=n.shift(),p=n.shift();try{l=h(l)}catch(d){p(d);break}}try{a=o(l)}catch(d){return Promise.reject(d)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},f.prototype.getUri=function(e){return e=u(this.defaults,e),a(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){f.prototype[e]=function(t,n){return this.request(u(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){f.prototype[e]=function(t,n,r){return this.request(u(r||{},{method:e,url:t,data:n}))}})),e.exports=f},function(e,t,n){"use strict";var r=n(14);function a(){this.handlers=[]}a.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},a.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},a.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=a},function(e,t,n){"use strict";var r=n(14),a=n(69),i=n(51),o=n(34),u=n(35);function s(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new u("canceled")}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=a.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return s(e),t.data=a.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return i(t)||(s(e),t&&t.response&&(t.response.data=a.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,n){"use strict";var r=n(14),a=n(34);e.exports=function(e,t,n){var i=this||a;return r.forEach(n,(function(n){e=n.call(i,e,t)})),e}},function(e,t,n){"use strict";var r=n(14);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},function(e,t,n){"use strict";var r=n(50);e.exports=function(e,t,n){var a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},function(e,t,n){"use strict";var r=n(14);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,a,i,o){var u=[];u.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),r.isString(a)&&u.push("path="+a),r.isString(i)&&u.push("domain="+i),!0===o&&u.push("secure"),document.cookie=u.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,n){"use strict";var r=n(74),a=n(75);e.exports=function(e,t){return e&&!r(t)?a(e,t):t}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,n){"use strict";var r=n(14),a=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),(function(e){if(i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t){if(o[t]&&a.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([n]):o[t]?o[t]+", "+n:n}})),o):o}},function(e,t,n){"use strict";var r=n(14);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function a(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=a(window.location.href),function(t){var n=r.isString(t)?a(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},function(e,t,n){"use strict";var r=n(53).version,a={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){a[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var i={};a.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,o){if(!1===e)throw new Error(a(r," has been removed"+(t?" in "+t:"")));return t&&!i[r]&&(i[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,o)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),a=r.length;a-- >0;){var i=r[a],o=t[i];if(o){var u=e[i],s=void 0===u||o(u,i,e);if(!0!==s)throw new TypeError("option "+i+" must be "+s)}else if(!0!==n)throw Error("Unknown option "+i)}},validators:a}},function(e,t,n){"use strict";var r=n(35);function a(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}a.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},a.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},a.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},a.source=function(){var e;return{token:new a((function(t){e=t})),cancel:e}},e.exports=a},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";e.exports=function(e){return"object"===typeof e&&!0===e.isAxiosError}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(2),o=n(21),u=n(5),s=n(7),c=n(8),f=n(16),l=n(15),h=n(23),p=n(1);var d=n(39),v=n.n(d),m=n(58),g=n.n(m);v.a.extend(g.a);function b(e,t){if(e.length!==t.length)return!1;var n,r=new Set(t),a=Object(p.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(!r.has(i))return!1}}catch(o){a.e(o)}finally{a.f()}return!0}function y(e,t){var n=new Set(t);if(0===e.length||0===t.length)return!0;var r,a=Object(p.a)(e);try{for(a.s();!(r=a.n()).done;){var i=r.value;if(n.has(i))return!0}}catch(o){a.e(o)}finally{a.f()}return!1}var w=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"createInsightSpaces",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:this.dataViewMetas,e.abrupt("return",this.createInsightSpaces(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"scanDetail",value:function(){var e=Object(i.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"associate",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,s,c,f,l,h,p,d,v,m,g,w,O,S,k,x,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.insightSpaces,r=this.dimensions,i=this.measures,o=this.dataGraph,s=t.dimensions.map((function(e){return r.findIndex((function(t){return e===t}))})),c=t.measures.map((function(e){return i.findIndex((function(t){return e===t}))})),f=[],l=[],h=0;case 7:if(!(h<n.length)){e.next=26;break}if(y(n[h].dimensions,t.dimensions)){e.next=10;break}return e.abrupt("continue",23);case 10:if(!b(n[h].measures,t.measures)){e.next=12;break}return e.abrupt("continue",23);case 12:if(b(n[h].dimensions,t.dimensions)){e.next=14;break}return e.abrupt("continue",23);case 14:if(p=0,d=n[h].measures.map((function(e){return i.findIndex((function(t){return e===t}))})),null!==o)for(v=0;v<c.length;v++)for(m=0;m<d.length;m++)p+=o.MG[v][m];if(!((p/=c.length*d.length)>.7)){e.next=23;break}return e.next=21,this.specification(n[h]);case 21:(g=e.sent)&&f.push(Object(u.a)(Object(u.a)({},n[h]),{},{score:p,schema:g.schema,dataView:g.dataView}));case 23:h++,e.next=7;break;case 26:w=0;case 27:if(!(w<n.length)){e.next=44;break}if(y(n[w].measures,t.measures)){e.next=30;break}return e.abrupt("continue",41);case 30:if(!b(n[w].dimensions,t.dimensions)){e.next=32;break}return e.abrupt("continue",41);case 32:if(O=0,S=n[w].dimensions.map((function(e){return r.findIndex((function(t){return e===t}))})),null!==o)for(k=0;k<s.length;k++)for(x=0;x<S.length;x++)O+=o.DG[k][x];if(!((O/=s.length*S.length)>.65)){e.next=41;break}return e.next=39,this.specification(n[w]);case 39:(j=e.sent)&&f.push(Object(u.a)(Object(u.a)({},n[w]),{},{score:O,schema:j.schema,dataView:j.dataView}));case 41:w++,e.next=27;break;case 44:return f.sort((function(e,t){return(t.score||0)-(e.score||0)})),l.sort((function(e,t){return(t.score||0)-(e.score||0)})),e.abrupt("return",{assSpacesT1:f,assSpacesT2:l});case 47:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(h.Computation.ClickHouseEngine),O=n(31),S=n(38),k=function(){var e=Object(i.a)(a.a.mark((function e(t,n,r){var i,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length<2)){e.next=2;break}return e.abrupt("return",null);case 2:return 0,o=new S.a({dataSource:t,dimensions:n,measures:r,K:8}),i=o.getSignificance(r.concat(n.slice(0,-1)),n.slice(-1)),e.abrupt("return",{dimensions:n,measures:r,significance:i});case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x=h.Insight.VIEngine;function j(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];for(var r=Math.log2(t),a=0,i=0;i<e.length;i++)a+=e[i]*(Math.log2(e[i])-r)/t;return-a}var M=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"clusterDGraph",value:function(e,t){for(var n=this.dimensions,r=this.DIMENSION_CORRELATION_THRESHOLD,a=t||r,i=this.DG,o=[],u=0;u<n.length;u++){for(var s=[],c=0;c<n.length;c++)i[u][c]>=a&&s.push(n[c]);o.push(s)}for(var f=[],l=0;l<o.length;l++){for(var h=!0,p=l+1;p<o.length;p++)if(b(o[l],o[p])){h=!1;break}h&&f.push(o[l])}return this.DClusters=f,f}},{key:"clusterMGraph",value:function(e,t){for(var n=this.measures,r=this.MEASURE_CORRELATION_THRESHOLD,a=t||r,i=this.MG,o=[],u=0;u<n.length;u++){for(var s=[],c=0;c<n.length;c++)i[u][c]>=a&&s.push(n[c]);o.push(s)}for(var f=[],l=0;l<o.length;l++){for(var h=!0,p=l+1;p<o.length;p++)if(b(o[l],o[p])){h=!1;break}h&&f.push(o[l])}return this.MClusters=f,f}}]),n}(O.a),_=function(e){Object(f.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).workerCollection.register("clusters",k),e.workerCollection.enable("clusters",!0),e}return Object(c.a)(n,[{key:"buildCube",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.measures,r=this.dataSource,i=this.dataGraph,u=this.dimensions,s=this.aggregators,c=t||new o.a({dimensions:u,measures:n,dataSource:r,ops:s}),"undefined"===typeof t&&(c.storage.env=this.env),e.next=5,c.buildBaseCuboid();case 5:return e.next=7,Promise.all(i.DClusters.map((function(e){return c.buildCuboidOnCluster(e)})));case 7:return this.cube=c,e.abrupt("return",this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createInsightSpaces",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:this.subSpaces,n=new Set,r=t.filter((function(e){var t=e.dimensions.join("-")+"||"+e.measures.join("-");return!n.has(t)&&(n.add(t),!0)})),e.next=5,this.exploreViews(r);case 5:return i=e.sent,this.insightSpaces=i,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"buildGraph",value:function(){return this.dataGraph=new M(this.dimensions,this.measures),this.dataGraph.computeDGraph(this.dataSource),this.dataGraph.computeMGraph(this.dataSource),this}},{key:"scanDetail",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,o,u,s,c,f,l,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=this).cube,o=n.fieldDictonary,u=t.dimensions,s=t.measures,c=[],!r){e.next=15;break}return e.next=7,r.getCuboid(t.dimensions);case 7:return f=e.sent,e.next=10,f.getAggregatedRows(s,s.map((function(){return"sum"})));case 10:return l=e.sent,h=[],this.workerCollection.each((function(e,t){var r=function(){var r=Object(i.a)(a.a.mark((function r(){var i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e(l,u,s,o,n);case 2:(i=r.sent)&&(i.type=t,c.push(i));case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();h.push(r())})),e.next=15,Promise.all(h);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchPointInterests",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,s,c,f,l,h,d,v,m,g,b,y,w,O,S,k,x,j,M,_;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],!(t.dimensions.length>0&&null!==this.cube)){e.next=23;break}return e.next=4,this.cube.getCuboid(t.dimensions);case 4:return r=e.sent,e.next=7,this.cube.getCuboid([]);case 7:return i=e.sent,e.next=10,i.getAggregatedRows(t.measures,t.measures.map((function(){return"dist"})));case 10:return o=e.sent,e.next=13,r.getAggregatedRows(t.measures,t.measures.map((function(){return"dist"})));case 13:if(s=e.sent,0!==o.length){e.next=16;break}return e.abrupt("return",n);case 16:c=new Map,f=Object(p.a)(t.measures);try{for(h=function(){var e=l.value,t=o[0][e].reduce((function(e,t){return e+t}),0),n=o[0][e].map((function(e){return e/t}));c.set(e,n)},f.s();!(l=f.n()).done;)h()}catch(a){f.e(a)}finally{f.f()}d=Object(p.a)(s);try{for(d.s();!(v=d.n()).done;){m=v.value,g=0,b=Object(p.a)(t.measures);try{for(b.s();!(y=b.n()).done;){for(w=y.value,O=0,S=c.get(w),k=m[w],x=k.reduce((function(e,t){return e+t}),0),j=0;j<S.length;j++)M=k[j]/x,_=S[j],M>0&&_>0&&(O+=M*Math.log2(M/_));g+=O}}catch(a){b.e(a)}finally{b.f()}g/=t.measures.length,n.push(Object(u.a)(Object(u.a)({},m),{},{kl:g}))}}catch(a){d.e(a)}finally{d.f()}e.next=23;break;case 23:return n.sort((function(e,t){return t.kl-e.kl})),e.abrupt("return",n);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"associate",value:function(){var e=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,s,c,f,l,h,p,d,v,m,g,w,O,S,k,x,j,M,_,E,D,I=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.insightSpaces,r=this.dimensions,i=this.measures,o=this.dataGraph,s=t.dimensions.map((function(e){return r.findIndex((function(t){return e===t}))})),c=t.measures.map((function(e){return i.findIndex((function(t){return e===t}))})),f=[],l=[],h=0;case 7:if(!(h<n.length)){e.next=31;break}if(!(t.dimensions.length>0)||y(n[h].dimensions,t.dimensions)){e.next=10;break}return e.abrupt("continue",28);case 10:if(!b(n[h].measures,t.measures)){e.next=12;break}return e.abrupt("continue",28);case 12:if(!(t.dimensions.length>0)||b(n[h].dimensions,t.dimensions)){e.next=14;break}return e.abrupt("continue",28);case 14:if(0!==t.dimensions.length||y(n[h].measures,t.measures)){e.next=16;break}return e.abrupt("continue",28);case 16:if(0!==t.dimensions.length||0===n[h].dimensions.length){e.next=18;break}return e.abrupt("continue",28);case 18:if(p=0,d=n[h].measures.map((function(e){return i.findIndex((function(t){return e===t}))})),null!==o)for(v=0;v<c.length;v++)for(m=0;m<d.length;m++)p+=o.MG[c[v]][d[m]];if(!((p/=c.length*d.length)>.7)){e.next=28;break}return g=n[h].dimensions.map((function(e){return I.fields.find((function(t){return t.key===e}))})).filter((function(e){return void 0!==e})).map((function(e){return Number(null===e||void 0===e?void 0:e.features.unique)})).reduce((function(e,t){return e*t}),1),e.next=26,this.specification(n[h]);case 26:(w=e.sent)&&f.push(Object(u.a)(Object(u.a)({},n[h]),{},{score:p/g/d.length,card:g,schema:w.schema,dataView:w.dataView}));case 28:h++,e.next=7;break;case 31:O=0;case 32:if(!(O<n.length)){e.next=58;break}if(y(n[O].measures,t.measures)){e.next=35;break}return e.abrupt("continue",55);case 35:if(!b(n[O].dimensions,t.dimensions)){e.next=37;break}return e.abrupt("continue",55);case 37:if(S=0,k=n[O].dimensions.map((function(e){return r.findIndex((function(t){return e===t}))})),null!==o)for(x=0;x<s.length;x++)for(j=0;j<k.length;j++)S+=o.DG[s[x]][k[j]];if(!((S/=s.length*k.length)>.35)){e.next=49;break}return M=n[O].dimensions.map((function(e){return I.fields.find((function(t){return t.key===e}))})).filter((function(e){return void 0!==e})).map((function(e){return Number(null===e||void 0===e?void 0:e.features.unique)})).reduce((function(e,t){return e+t}),0),e.next=45,this.specification(n[O]);case 45:(_=e.sent)&&l.push(Object(u.a)(Object(u.a)({},n[O]),{},{score:S/M,card:M},_)),e.next=55;break;case 49:if(0!==t.dimensions.length){e.next=55;break}return e.next=52,this.specification(n[O]);case 52:E=e.sent,D=n[O].dimensions.map((function(e){return I.fields.find((function(t){return t.key===e}))})).filter((function(e){return void 0!==e})).map((function(e){return Number(null===e||void 0===e?void 0:e.features.unique)})).reduce((function(e,t){return e+t}),0),E&&l.push(Object(u.a)(Object(u.a)({},n[O]),{},{score:S/D,card:D},E));case 55:O++,e.next=32;break;case 58:return f.sort((function(e,t){return(t.score||0)-(e.score||0)})),l.sort((function(e,t){return(t.score||0)-(e.score||0)})),e.abrupt("return",{assSpacesT1:f,assSpacesT2:l});case 61:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exploreViews",value:function(){var e=Object(i.a)(a.a.mark((function e(){var t,n,r,i,o,u,s,c,f,l,h,d,v,m,g,b,y,w,O,S,k,x,M,_,E,D,I,N,T,C=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=C.length>0&&void 0!==C[0]?C[0]:this.subSpaces,r=16,i=(n=this).measures,o=n.fieldDictonary,u=[],null!==n.cube){e.next=7;break}return e.abrupt("return",u);case 7:return e.next=9,n.cube.getCuboid([]);case 9:return s=e.sent,e.next=12,s.getAggregatedRows(i,i.map((function(){return"dist"})));case 12:c=e.sent,f=Object(p.a)(n.dataGraph.MClusters);try{for(f.s();!(l=f.n()).done;){h=l.value,d=0,v=Object(p.a)(h);try{for(v.s();!(m=v.n()).done;)g=m.value,b=0,c.length>0&&(b=j(c[0][g].filter((function(e){return e>0})))),d+=(Math.log2(r)-b)/Math.log2(r)}catch(a){v.e(a)}finally{v.f()}d/=h.length,u.push({dimensions:[],measures:h,significance:1,score:d,impurity:d})}}catch(a){f.e(a)}finally{f.f()}y=Object(p.a)(t),e.prev=16,y.s();case 18:if((w=y.n()).done){e.next=58;break}return O=w.value,S=O.dimensions,k=O.measures,x=!1,e.next=24,n.cube.getCuboid(S);case 24:return M=e.sent,e.next=27,M.loadStateInCache();case 27:return e.next=29,M.getAggregatedRows(k,k.map((function(){return"dist"})));case 29:_=e.sent,M.clearState(),E=0,D=Object(p.a)(k),e.prev=33,N=function(){var e=I.value,t=0;c.length>0&&(t=j(c[0][e].filter((function(e){return e>0}))));var n=0;if(!o.has(e))return"continue";var a=o.get(e).features.size,i=_.map((function(t){return{freq:t[e].reduce((function(e,t){return e+t}),0),dist:t[e]}}));i.sort((function(e,t){return t.freq-e.freq}));for(var u=0;u<i.length&&!(u>=r-1);u++){var s=j(i[u].dist.filter((function(e){return e>0})));n+=i[u].freq/a*s}for(var f=new Array(r).fill(0),l=0,h=r-1;h<i.length;h++){for(var p=0;p<f.length;p++)f[p]+=i[h].dist[p];l+=i[h].freq}return l>0&&(n+=l/a*j(f.filter((function(e){return e>0})))),E+=(t-n)/Math.log2(Math.min(r,i.length)),(t-n)/t<.005?(x=!0,"break"):void 0},D.s();case 36:if((I=D.n()).done){e.next=44;break}if("continue"!==(T=N())){e.next=40;break}return e.abrupt("continue",42);case 40:if("break"!==T){e.next=42;break}return e.abrupt("break",44);case 42:e.next=36;break;case 44:e.next=49;break;case 46:e.prev=46,e.t0=e.catch(33),D.e(e.t0);case 49:return e.prev=49,D.f(),e.finish(49);case 52:if(E/=k.length,!x){e.next=55;break}return e.abrupt("continue",56);case 55:u.push({dimensions:S,measures:k,significance:1,score:E,impurity:E});case 56:e.next=18;break;case 58:e.next=63;break;case 60:e.prev=60,e.t1=e.catch(16),y.e(e.t1);case 63:return e.prev=63,y.f(),e.finish(63);case 66:return u.sort((function(e,t){return Number(t.score)-Number(e.score)})),e.abrupt("return",u);case 68:case"end":return e.stop()}}),e,this,[[16,60,63,66],[33,46,49,52]])})));return function(){return e.apply(this,arguments)}}()}]),n}(x),E={mode:"webworker",current:null};function D(e){"webworker"===e?(E.current=new _,E.mode=e):"clickhouse"===e&&(E.current=new w,E.current.utils.setCHConfig({protocol:"https",host:"localhost",port:2333,path:"/api/ch/general"}),E.mode=e),console.log("Rath engine is created, engine mode is [".concat(E.mode,"]."))}function I(){E.current=null}function N(e){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(a.a.mark((function e(t){var n,r,i,u,s,c,f,l,h,p,d,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],i=[],u=[],s=[],(n=[]).push(performance.now()),console.log("[computation engine mode]",t.mode),"webworker"!==E.mode||"webworker"!==t.mode){e.next=44;break}if(c=t.dataSource,f=t.fieldMetas,l=f.map((function(e){return{key:e.fid,semanticType:e.semanticType,analyticType:e.analyticType,dataType:"?"}})),null!==(h=E.current)){e.next=13;break}throw new Error("Engine is not created.");case 13:return h.setData(c).setFields(l),h.univarSelection(),n.push(performance.now()),r.push({task:"init&univar",value:n[n.length-1]-n[n.length-2]}),h.buildGraph(),h.dataGraph.DIMENSION_CORRELATION_THRESHOLD=.5,n.push(performance.now()),r.push({task:"co-graph",value:n[n.length-1]-n[n.length-2]}),h.clusterFields(),n.push(performance.now()),r.push({task:"clusters",value:n[n.length-1]-n[n.length-2]}),(p=new o.a({dimensions:h.dimensions,measures:h.measures,cubeStorageManageMode:t.cubeStorageManageMode,dataSource:h.dataSource})).storage.env="browser",e.next=28,h.buildCube(p);case 28:return n.push(performance.now()),r.push({task:"cube",value:n[n.length-1]-n[n.length-2]}),h.buildSubspaces(),n.push(performance.now()),r.push({task:"subspaces",value:n[n.length-1]-n[n.length-2]}),e.next=35,h.createInsightSpaces();case 35:n.push(performance.now()),r.push({task:"insights",value:n[n.length-1]-n[n.length-2]}),h.insightSpaces=h.insightSpaces.filter((function(e){return"number"===typeof e.score&&!isNaN(e.score)})),h.insightSpaces.sort((function(e,t){return Number(t.impurity)-Number(e.impurity)})),s=h.fields,i=h.insightSpaces,u=h.dataSource,e.next=65;break;case 44:if("clickhouse"!==E.mode||"clickhouse"!==t.mode){e.next=64;break}if(null!==(d=E.current)){e.next=48;break}throw new Error("Engine is not created.");case 48:return v=t.viewName,e.next=51,d.uvsView(v);case 51:return e.next=53,d.buildDataGraph();case 53:return d.clusterFields(),d.buildSubspaces(),e.next=57,d.fastInsightRecommand();case 57:return i=e.sent,s=d.fields,e.next=61,d.loadData(v);case 61:u=e.sent,e.next=65;break;case 64:throw new Error("Engine mode is not support: ".concat(t.mode));case 65:return e.abrupt("return",{insightSpaces:i.slice(0,1e4),fields:s,dataSource:u,performance:r});case 66:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return A.apply(this,arguments)}function A(){return(A=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=E.current)){e.next=3;break}throw new Error("Engine is not created.");case 3:return e.abrupt("return",n.specification(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){var t=E.current;if(null===t)throw new Error("Engine is not created.");var n=t.insightSpaces[e];if(n)return t.scanDetail(n);throw new Error("insightSpaces(".concat(e,"/").concat(t.insightSpaces.length,") not exist."))}function L(e){return F.apply(this,arguments)}function F(){return(F=Object(i.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=E.current)){e.next=3;break}throw new Error("Engine is not created.");case 3:if(n.associate(t),"webworker"!==E.mode||"webworker"!==E.mode){e.next=8;break}return e.abrupt("return",n.associate(t));case 8:if("clickhouse"!==E.mode||"clickhouse"!==E.mode){e.next=10;break}return e.abrupt("return",n.associate(t));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return P.apply(this,arguments)}function P(){return(P=Object(i.a)(a.a.mark((function e(t){var n,r,i,o,u,s,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("webworker"!==E.mode||"webworker"!==E.mode){e.next=17;break}if(null!==(n=E.current)){e.next=4;break}throw new Error("Engine is not created.");case 4:if(r=t.dimensions,i=t.measures,o=t.aggregators,null!==(u=n.cube)){e.next=8;break}throw new Error("Cube is not init.");case 8:return e.next=10,u.getCuboid(r);case 10:return s=e.sent,e.next=13,s.getAggregatedRows(i,o);case 13:return c=e.sent,e.abrupt("return",c);case 17:if("clickhouse"!==E.mode||"clickhouse"!==E.mode){e.next=22;break}if(null!==E.current){e.next=21;break}throw new Error("Engine is not created.");case 21:case 22:return e.abrupt("return",[]);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){if("webworker"===E.mode){var e=E.current;if(null===e)throw new Error("Engine is not created.");var t=e.serialize();return{dataStorage:JSON.stringify(t.dataStorage),engineStorage:JSON.stringify(t.storage)}}throw new Error("Not supported current data engine type.")}function G(e){if("webworker"!==E.mode)throw new Error("Not supported current data engine type.");var t=E.current;if(null===t)throw new Error("Engine is not created.");var n=e.dataStorage,r=e.engineStorage;t.deSerialize(JSON.parse(r),JSON.parse(n))}function $(){if("webworker"===E.mode){var e=E.current;if(null===e)throw new Error("Engine is not created.");return{fields:e.fields,dataSource:e.dataSource,insightSpaces:e.insightSpaces}}throw new Error("Not supported current data engine type.")}function B(e){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("webworker"!==E.mode){e.next=10;break}if(null!==(n=E.current)){e.next=4;break}throw new Error("Engine is not created.");case 4:return e.next=6,n.searchPointInterests(t);case 6:return r=e.sent,e.abrupt("return",r);case 10:throw new Error("Not supported current data engine type.");case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(i.a)(a.a.mark((function e(t,n,r){var i,o,u,s,c,f,l,h,p,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.data,console.log(i.task,"worker router"),e.prev=2,e.t0=i.task,e.next="cube"===e.t0?6:"init"===e.t0?11:"destroy"===e.t0?14:"start"===e.t0?17:"specification"===e.t0?22:"associate"===e.t0?27:"detail"===e.t0?32:"download"===e.t0?35:"sync"===e.t0?38:"subinsight"===e.t0?41:"upload"===e.t0?46:49;break;case 6:return e.next=8,q(i.props);case 8:return o=e.sent,n(o),e.abrupt("break",50);case 11:return D(i.props),n(),e.abrupt("break",50);case 14:return I(),n(),e.abrupt("break",50);case 17:return e.next=19,N(i.props);case 19:return u=e.sent,n(u),e.abrupt("break",50);case 22:return e.next=24,C(i.props);case 24:return s=e.sent,n(s),e.abrupt("break",50);case 27:return e.next=29,L(i.props);case 29:return c=e.sent,n(c),e.abrupt("break",50);case 32:return f=R(i.props),n(f),e.abrupt("break",50);case 35:return l=z(),n(l),e.abrupt("break",50);case 38:return h=$(),n(h),e.abrupt("break",50);case 41:return e.next=43,B(i.props);case 43:return p=e.sent,n(p),e.abrupt("break",50);case 46:return d=G(i.props),n(d),e.abrupt("break",50);case 49:throw new Error('Unknow task: "'.concat(i.task,'".'));case 50:e.next=55;break;case 52:e.prev=52,e.t1=e.catch(2),r("[".concat(i.task,"]").concat(e.t1,"\n").concat(e.t1.stack));case 55:case"end":return e.stop()}}),e,null,[[2,52]])})))).apply(this,arguments)}self.addEventListener("message",(function(e){!function(e,t,n){V.apply(this,arguments)}(e,(e=>{self.postMessage({success:!0,data:e})}),(e=>{self.postMessage({success:!1,message:`[worker]${e}`})}))}),!1)}]);